var dq=Object.defineProperty;var fq=(t,e,n)=>e in t?dq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Qa=(t,e,n)=>fq(t,typeof e!="symbol"?e+"":e,n);function hq(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var zi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var iR={exports:{}},tx={},sR={exports:{}},dn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ly=Symbol.for("react.element"),pq=Symbol.for("react.portal"),gq=Symbol.for("react.fragment"),mq=Symbol.for("react.strict_mode"),yq=Symbol.for("react.profiler"),vq=Symbol.for("react.provider"),bq=Symbol.for("react.context"),wq=Symbol.for("react.forward_ref"),xq=Symbol.for("react.suspense"),Sq=Symbol.for("react.memo"),kq=Symbol.for("react.lazy"),wP=Symbol.iterator;function Cq(t){return t===null||typeof t!="object"?null:(t=wP&&t[wP]||t["@@iterator"],typeof t=="function"?t:null)}var oR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aR=Object.assign,lR={};function Dg(t,e,n){this.props=t,this.context=e,this.refs=lR,this.updater=n||oR}Dg.prototype.isReactComponent={};Dg.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Dg.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cR(){}cR.prototype=Dg.prototype;function pA(t,e,n){this.props=t,this.context=e,this.refs=lR,this.updater=n||oR}var gA=pA.prototype=new cR;gA.constructor=pA;aR(gA,Dg.prototype);gA.isPureReactComponent=!0;var xP=Array.isArray,uR=Object.prototype.hasOwnProperty,mA={current:null},dR={key:!0,ref:!0,__self:!0,__source:!0};function fR(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)uR.call(e,r)&&!dR.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ly,type:t,key:s,ref:o,props:i,_owner:mA.current}}function _q(t,e){return{$$typeof:ly,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yA(t){return typeof t=="object"&&t!==null&&t.$$typeof===ly}function Aq(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var SP=/\/+/g;function uS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Aq(""+t.key):e.toString(36)}function T2(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ly:case pq:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+uS(o,0):r,xP(i)?(n="",t!=null&&(n=t.replace(SP,"$&/")+"/"),T2(i,e,n,"",function(c){return c})):i!=null&&(yA(i)&&(i=_q(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(SP,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",xP(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+uS(s,a);o+=T2(s,e,n,l,i)}else if(l=Cq(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+uS(s,a++),o+=T2(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Cv(t,e,n){if(t==null)return t;var r=[],i=0;return T2(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Eq(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _s={current:null},N2={transition:null},Pq={ReactCurrentDispatcher:_s,ReactCurrentBatchConfig:N2,ReactCurrentOwner:mA};function hR(){throw Error("act(...) is not supported in production builds of React.")}dn.Children={map:Cv,forEach:function(t,e,n){Cv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cv(t,function(){e++}),e},toArray:function(t){return Cv(t,function(e){return e})||[]},only:function(t){if(!yA(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};dn.Component=Dg;dn.Fragment=gq;dn.Profiler=yq;dn.PureComponent=pA;dn.StrictMode=mq;dn.Suspense=xq;dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pq;dn.act=hR;dn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=aR({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=mA.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)uR.call(e,l)&&!dR.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ly,type:t.type,key:i,ref:s,props:r,_owner:o}};dn.createContext=function(t){return t={$$typeof:bq,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vq,_context:t},t.Consumer=t};dn.createElement=fR;dn.createFactory=function(t){var e=fR.bind(null,t);return e.type=t,e};dn.createRef=function(){return{current:null}};dn.forwardRef=function(t){return{$$typeof:wq,render:t}};dn.isValidElement=yA;dn.lazy=function(t){return{$$typeof:kq,_payload:{_status:-1,_result:t},_init:Eq}};dn.memo=function(t,e){return{$$typeof:Sq,type:t,compare:e===void 0?null:e}};dn.startTransition=function(t){var e=N2.transition;N2.transition={};try{t()}finally{N2.transition=e}};dn.unstable_act=hR;dn.useCallback=function(t,e){return _s.current.useCallback(t,e)};dn.useContext=function(t){return _s.current.useContext(t)};dn.useDebugValue=function(){};dn.useDeferredValue=function(t){return _s.current.useDeferredValue(t)};dn.useEffect=function(t,e){return _s.current.useEffect(t,e)};dn.useId=function(){return _s.current.useId()};dn.useImperativeHandle=function(t,e,n){return _s.current.useImperativeHandle(t,e,n)};dn.useInsertionEffect=function(t,e){return _s.current.useInsertionEffect(t,e)};dn.useLayoutEffect=function(t,e){return _s.current.useLayoutEffect(t,e)};dn.useMemo=function(t,e){return _s.current.useMemo(t,e)};dn.useReducer=function(t,e,n){return _s.current.useReducer(t,e,n)};dn.useRef=function(t){return _s.current.useRef(t)};dn.useState=function(t){return _s.current.useState(t)};dn.useSyncExternalStore=function(t,e,n){return _s.current.useSyncExternalStore(t,e,n)};dn.useTransition=function(){return _s.current.useTransition()};dn.version="18.3.1";sR.exports=dn;var S=sR.exports;const Le=rh(S),vA=hq({__proto__:null,default:Le},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tq=S,Nq=Symbol.for("react.element"),Mq=Symbol.for("react.fragment"),Oq=Object.prototype.hasOwnProperty,Rq=Tq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lq={key:!0,ref:!0,__self:!0,__source:!0};function pR(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Oq.call(e,r)&&!Lq.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Nq,type:t,key:s,ref:o,props:i,_owner:Rq.current}}tx.Fragment=Mq;tx.jsx=pR;tx.jsxs=pR;iR.exports=tx;var y=iR.exports,g3={},gR={exports:{}},Ao={},mR={exports:{}},yR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(te,Z){var de=te.length;te.push(Z);e:for(;0<de;){var Ce=de-1>>>1,F=te[Ce];if(0<i(F,Z))te[Ce]=Z,te[de]=F,de=Ce;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var Z=te[0],de=te.pop();if(de!==Z){te[0]=de;e:for(var Ce=0,F=te.length,X=F>>>1;Ce<X;){var re=2*(Ce+1)-1,ue=te[re],he=re+1,fe=te[he];if(0>i(ue,de))he<F&&0>i(fe,ue)?(te[Ce]=fe,te[he]=de,Ce=he):(te[Ce]=ue,te[re]=de,Ce=re);else if(he<F&&0>i(fe,de))te[Ce]=fe,te[he]=de,Ce=he;else break e}}return Z}function i(te,Z){var de=te.sortIndex-Z.sortIndex;return de!==0?de:te.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,u=null,f=3,h=!1,p=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(te){for(var Z=n(c);Z!==null;){if(Z.callback===null)r(c);else if(Z.startTime<=te)r(c),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=n(c)}}function C(te){if(g=!1,w(te),!p)if(n(l)!==null)p=!0,ce(P);else{var Z=n(c);Z!==null&&le(C,Z.startTime-te)}}function P(te,Z){p=!1,g&&(g=!1,v(M),M=-1),h=!0;var de=f;try{for(w(Z),u=n(l);u!==null&&(!(u.expirationTime>Z)||te&&!R());){var Ce=u.callback;if(typeof Ce=="function"){u.callback=null,f=u.priorityLevel;var F=Ce(u.expirationTime<=Z);Z=t.unstable_now(),typeof F=="function"?u.callback=F:u===n(l)&&r(l),w(Z)}else r(l);u=n(l)}if(u!==null)var X=!0;else{var re=n(c);re!==null&&le(C,re.startTime-Z),X=!1}return X}finally{u=null,f=de,h=!1}}var O=!1,T=null,M=-1,D=5,I=-1;function R(){return!(t.unstable_now()-I<D)}function $(){if(T!==null){var te=t.unstable_now();I=te;var Z=!0;try{Z=T(!0,te)}finally{Z?H():(O=!1,T=null)}}else O=!1}var H;if(typeof x=="function")H=function(){x($)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,ee=z.port2;z.port1.onmessage=$,H=function(){ee.postMessage(null)}}else H=function(){b($,0)};function ce(te){T=te,O||(O=!0,H())}function le(te,Z){M=b(function(){te(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,ce(P))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(te){switch(f){case 1:case 2:case 3:var Z=3;break;default:Z=f}var de=f;f=Z;try{return te()}finally{f=de}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,Z){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var de=f;f=te;try{return Z()}finally{f=de}},t.unstable_scheduleCallback=function(te,Z,de){var Ce=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Ce+de:Ce):de=Ce,te){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=de+F,te={id:d++,callback:Z,priorityLevel:te,startTime:de,expirationTime:F,sortIndex:-1},de>Ce?(te.sortIndex=de,e(c,te),n(l)===null&&te===n(c)&&(g?(v(M),M=-1):g=!0,le(C,de-Ce))):(te.sortIndex=F,e(l,te),p||h||(p=!0,ce(P))),te},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(te){var Z=f;return function(){var de=f;f=Z;try{return te.apply(this,arguments)}finally{f=de}}}})(yR);mR.exports=yR;var Dq=mR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iq=S,So=Dq;function Xe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vR=new Set,e1={};function ih(t,e){tg(t,e),tg(t+"Capture",e)}function tg(t,e){for(e1[t]=e,t=0;t<e.length;t++)vR.add(e[t])}var Sc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m3=Object.prototype.hasOwnProperty,$q=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kP={},CP={};function jq(t){return m3.call(CP,t)?!0:m3.call(kP,t)?!1:$q.test(t)?CP[t]=!0:(kP[t]=!0,!1)}function Fq(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zq(t,e,n,r){if(e===null||typeof e>"u"||Fq(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function As(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ti={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ti[t]=new As(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ti[e]=new As(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ti[t]=new As(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ti[t]=new As(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ti[t]=new As(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ti[t]=new As(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ti[t]=new As(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ti[t]=new As(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ti[t]=new As(t,5,!1,t.toLowerCase(),null,!1,!1)});var bA=/[\-:]([a-z])/g;function wA(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bA,wA);Ti[e]=new As(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bA,wA);Ti[e]=new As(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bA,wA);Ti[e]=new As(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ti[t]=new As(t,1,!1,t.toLowerCase(),null,!1,!1)});Ti.xlinkHref=new As("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ti[t]=new As(t,1,!1,t.toLowerCase(),null,!0,!0)});function xA(t,e,n,r){var i=Ti.hasOwnProperty(e)?Ti[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zq(e,n,i,r)&&(n=null),r||i===null?jq(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $c=Iq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_v=Symbol.for("react.element"),wp=Symbol.for("react.portal"),xp=Symbol.for("react.fragment"),SA=Symbol.for("react.strict_mode"),y3=Symbol.for("react.profiler"),bR=Symbol.for("react.provider"),wR=Symbol.for("react.context"),kA=Symbol.for("react.forward_ref"),v3=Symbol.for("react.suspense"),b3=Symbol.for("react.suspense_list"),CA=Symbol.for("react.memo"),bu=Symbol.for("react.lazy"),xR=Symbol.for("react.offscreen"),_P=Symbol.iterator;function Im(t){return t===null||typeof t!="object"?null:(t=_P&&t[_P]||t["@@iterator"],typeof t=="function"?t:null)}var wr=Object.assign,dS;function n0(t){if(dS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);dS=e&&e[1]||""}return`
`+dS+t}var fS=!1;function hS(t,e){if(!t||fS)return"";fS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{fS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?n0(t):""}function Bq(t){switch(t.tag){case 5:return n0(t.type);case 16:return n0("Lazy");case 13:return n0("Suspense");case 19:return n0("SuspenseList");case 0:case 2:case 15:return t=hS(t.type,!1),t;case 11:return t=hS(t.type.render,!1),t;case 1:return t=hS(t.type,!0),t;default:return""}}function w3(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xp:return"Fragment";case wp:return"Portal";case y3:return"Profiler";case SA:return"StrictMode";case v3:return"Suspense";case b3:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wR:return(t.displayName||"Context")+".Consumer";case bR:return(t._context.displayName||"Context")+".Provider";case kA:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case CA:return e=t.displayName||null,e!==null?e:w3(t.type)||"Memo";case bu:e=t._payload,t=t._init;try{return w3(t(e))}catch{}}return null}function Uq(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return w3(e);case 8:return e===SA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ed(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function SR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Hq(t){var e=SR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Av(t){t._valueTracker||(t._valueTracker=Hq(t))}function kR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=SR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xb(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function x3(t,e){var n=e.checked;return wr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function AP(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ed(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function CR(t,e){e=e.checked,e!=null&&xA(t,"checked",e,!1)}function S3(t,e){CR(t,e);var n=ed(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?k3(t,e.type,n):e.hasOwnProperty("defaultValue")&&k3(t,e.type,ed(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function EP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function k3(t,e,n){(e!=="number"||xb(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var r0=Array.isArray;function jp(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ed(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function C3(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Xe(91));return wr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function PP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Xe(92));if(r0(n)){if(1<n.length)throw Error(Xe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ed(n)}}function _R(t,e){var n=ed(e.value),r=ed(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function TP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function AR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _3(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?AR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ev,ER=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ev=Ev||document.createElement("div"),Ev.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ev.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function t1(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var O0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vq=["Webkit","ms","Moz","O"];Object.keys(O0).forEach(function(t){Vq.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),O0[e]=O0[t]})});function PR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||O0.hasOwnProperty(t)&&O0[t]?(""+e).trim():e+"px"}function TR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=PR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Wq=wr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function A3(t,e){if(e){if(Wq[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Xe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Xe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Xe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Xe(62))}}function E3(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var P3=null;function _A(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var T3=null,Fp=null,zp=null;function NP(t){if(t=dy(t)){if(typeof T3!="function")throw Error(Xe(280));var e=t.stateNode;e&&(e=ox(e),T3(t.stateNode,t.type,e))}}function NR(t){Fp?zp?zp.push(t):zp=[t]:Fp=t}function MR(){if(Fp){var t=Fp,e=zp;if(zp=Fp=null,NP(t),e)for(t=0;t<e.length;t++)NP(e[t])}}function OR(t,e){return t(e)}function RR(){}var pS=!1;function LR(t,e,n){if(pS)return t(e,n);pS=!0;try{return OR(t,e,n)}finally{pS=!1,(Fp!==null||zp!==null)&&(RR(),MR())}}function n1(t,e){var n=t.stateNode;if(n===null)return null;var r=ox(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Xe(231,e,typeof n));return n}var N3=!1;if(Sc)try{var $m={};Object.defineProperty($m,"passive",{get:function(){N3=!0}}),window.addEventListener("test",$m,$m),window.removeEventListener("test",$m,$m)}catch{N3=!1}function qq(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var R0=!1,Sb=null,kb=!1,M3=null,Gq={onError:function(t){R0=!0,Sb=t}};function Kq(t,e,n,r,i,s,o,a,l){R0=!1,Sb=null,qq.apply(Gq,arguments)}function Jq(t,e,n,r,i,s,o,a,l){if(Kq.apply(this,arguments),R0){if(R0){var c=Sb;R0=!1,Sb=null}else throw Error(Xe(198));kb||(kb=!0,M3=c)}}function sh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function DR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function MP(t){if(sh(t)!==t)throw Error(Xe(188))}function Yq(t){var e=t.alternate;if(!e){if(e=sh(t),e===null)throw Error(Xe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return MP(i),t;if(s===r)return MP(i),e;s=s.sibling}throw Error(Xe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Xe(189))}}if(n.alternate!==r)throw Error(Xe(190))}if(n.tag!==3)throw Error(Xe(188));return n.stateNode.current===n?t:e}function IR(t){return t=Yq(t),t!==null?$R(t):null}function $R(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$R(t);if(e!==null)return e;t=t.sibling}return null}var jR=So.unstable_scheduleCallback,OP=So.unstable_cancelCallback,Zq=So.unstable_shouldYield,Xq=So.unstable_requestPaint,Dr=So.unstable_now,Qq=So.unstable_getCurrentPriorityLevel,AA=So.unstable_ImmediatePriority,FR=So.unstable_UserBlockingPriority,Cb=So.unstable_NormalPriority,eG=So.unstable_LowPriority,zR=So.unstable_IdlePriority,nx=null,dl=null;function tG(t){if(dl&&typeof dl.onCommitFiberRoot=="function")try{dl.onCommitFiberRoot(nx,t,void 0,(t.current.flags&128)===128)}catch{}}var Ma=Math.clz32?Math.clz32:iG,nG=Math.log,rG=Math.LN2;function iG(t){return t>>>=0,t===0?32:31-(nG(t)/rG|0)|0}var Pv=64,Tv=4194304;function i0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _b(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=i0(a):(s&=o,s!==0&&(r=i0(s)))}else o=n&~i,o!==0?r=i0(o):s!==0&&(r=i0(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ma(e),i=1<<n,r|=t[n],e&=~i;return r}function sG(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oG(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ma(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=sG(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function O3(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function BR(){var t=Pv;return Pv<<=1,!(Pv&4194240)&&(Pv=64),t}function gS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function cy(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ma(e),t[e]=n}function aG(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ma(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function EA(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ma(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Dn=0;function UR(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var HR,PA,VR,WR,qR,R3=!1,Nv=[],Iu=null,$u=null,ju=null,r1=new Map,i1=new Map,Cu=[],lG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function RP(t,e){switch(t){case"focusin":case"focusout":Iu=null;break;case"dragenter":case"dragleave":$u=null;break;case"mouseover":case"mouseout":ju=null;break;case"pointerover":case"pointerout":r1.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":i1.delete(e.pointerId)}}function jm(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=dy(e),e!==null&&PA(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function cG(t,e,n,r,i){switch(e){case"focusin":return Iu=jm(Iu,t,e,n,r,i),!0;case"dragenter":return $u=jm($u,t,e,n,r,i),!0;case"mouseover":return ju=jm(ju,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return r1.set(s,jm(r1.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,i1.set(s,jm(i1.get(s)||null,t,e,n,r,i)),!0}return!1}function GR(t){var e=nf(t.target);if(e!==null){var n=sh(e);if(n!==null){if(e=n.tag,e===13){if(e=DR(n),e!==null){t.blockedOn=e,qR(t.priority,function(){VR(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function M2(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=L3(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);P3=r,n.target.dispatchEvent(r),P3=null}else return e=dy(n),e!==null&&PA(e),t.blockedOn=n,!1;e.shift()}return!0}function LP(t,e,n){M2(t)&&n.delete(e)}function uG(){R3=!1,Iu!==null&&M2(Iu)&&(Iu=null),$u!==null&&M2($u)&&($u=null),ju!==null&&M2(ju)&&(ju=null),r1.forEach(LP),i1.forEach(LP)}function Fm(t,e){t.blockedOn===e&&(t.blockedOn=null,R3||(R3=!0,So.unstable_scheduleCallback(So.unstable_NormalPriority,uG)))}function s1(t){function e(i){return Fm(i,t)}if(0<Nv.length){Fm(Nv[0],t);for(var n=1;n<Nv.length;n++){var r=Nv[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Iu!==null&&Fm(Iu,t),$u!==null&&Fm($u,t),ju!==null&&Fm(ju,t),r1.forEach(e),i1.forEach(e),n=0;n<Cu.length;n++)r=Cu[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Cu.length&&(n=Cu[0],n.blockedOn===null);)GR(n),n.blockedOn===null&&Cu.shift()}var Bp=$c.ReactCurrentBatchConfig,Ab=!0;function dG(t,e,n,r){var i=Dn,s=Bp.transition;Bp.transition=null;try{Dn=1,TA(t,e,n,r)}finally{Dn=i,Bp.transition=s}}function fG(t,e,n,r){var i=Dn,s=Bp.transition;Bp.transition=null;try{Dn=4,TA(t,e,n,r)}finally{Dn=i,Bp.transition=s}}function TA(t,e,n,r){if(Ab){var i=L3(t,e,n,r);if(i===null)_S(t,e,r,Eb,n),RP(t,r);else if(cG(i,t,e,n,r))r.stopPropagation();else if(RP(t,r),e&4&&-1<lG.indexOf(t)){for(;i!==null;){var s=dy(i);if(s!==null&&HR(s),s=L3(t,e,n,r),s===null&&_S(t,e,r,Eb,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else _S(t,e,r,null,n)}}var Eb=null;function L3(t,e,n,r){if(Eb=null,t=_A(r),t=nf(t),t!==null)if(e=sh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=DR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Eb=t,null}function KR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qq()){case AA:return 1;case FR:return 4;case Cb:case eG:return 16;case zR:return 536870912;default:return 16}default:return 16}}var Tu=null,NA=null,O2=null;function JR(){if(O2)return O2;var t,e=NA,n=e.length,r,i="value"in Tu?Tu.value:Tu.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return O2=i.slice(t,1<r?1-r:void 0)}function R2(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mv(){return!0}function DP(){return!1}function Eo(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Mv:DP,this.isPropagationStopped=DP,this}return wr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mv)},persist:function(){},isPersistent:Mv}),e}var Ig={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},MA=Eo(Ig),uy=wr({},Ig,{view:0,detail:0}),hG=Eo(uy),mS,yS,zm,rx=wr({},uy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:OA,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zm&&(zm&&t.type==="mousemove"?(mS=t.screenX-zm.screenX,yS=t.screenY-zm.screenY):yS=mS=0,zm=t),mS)},movementY:function(t){return"movementY"in t?t.movementY:yS}}),IP=Eo(rx),pG=wr({},rx,{dataTransfer:0}),gG=Eo(pG),mG=wr({},uy,{relatedTarget:0}),vS=Eo(mG),yG=wr({},Ig,{animationName:0,elapsedTime:0,pseudoElement:0}),vG=Eo(yG),bG=wr({},Ig,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wG=Eo(bG),xG=wr({},Ig,{data:0}),$P=Eo(xG),SG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _G(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=CG[t])?!!e[t]:!1}function OA(){return _G}var AG=wr({},uy,{key:function(t){if(t.key){var e=SG[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=R2(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kG[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:OA,charCode:function(t){return t.type==="keypress"?R2(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?R2(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),EG=Eo(AG),PG=wr({},rx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jP=Eo(PG),TG=wr({},uy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:OA}),NG=Eo(TG),MG=wr({},Ig,{propertyName:0,elapsedTime:0,pseudoElement:0}),OG=Eo(MG),RG=wr({},rx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),LG=Eo(RG),DG=[9,13,27,32],RA=Sc&&"CompositionEvent"in window,L0=null;Sc&&"documentMode"in document&&(L0=document.documentMode);var IG=Sc&&"TextEvent"in window&&!L0,YR=Sc&&(!RA||L0&&8<L0&&11>=L0),FP=" ",zP=!1;function ZR(t,e){switch(t){case"keyup":return DG.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Sp=!1;function $G(t,e){switch(t){case"compositionend":return XR(e);case"keypress":return e.which!==32?null:(zP=!0,FP);case"textInput":return t=e.data,t===FP&&zP?null:t;default:return null}}function jG(t,e){if(Sp)return t==="compositionend"||!RA&&ZR(t,e)?(t=JR(),O2=NA=Tu=null,Sp=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YR&&e.locale!=="ko"?null:e.data;default:return null}}var FG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function BP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!FG[t.type]:e==="textarea"}function QR(t,e,n,r){NR(r),e=Pb(e,"onChange"),0<e.length&&(n=new MA("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var D0=null,o1=null;function zG(t){u7(t,0)}function ix(t){var e=_p(t);if(kR(e))return t}function BG(t,e){if(t==="change")return e}var e7=!1;if(Sc){var bS;if(Sc){var wS="oninput"in document;if(!wS){var UP=document.createElement("div");UP.setAttribute("oninput","return;"),wS=typeof UP.oninput=="function"}bS=wS}else bS=!1;e7=bS&&(!document.documentMode||9<document.documentMode)}function HP(){D0&&(D0.detachEvent("onpropertychange",t7),o1=D0=null)}function t7(t){if(t.propertyName==="value"&&ix(o1)){var e=[];QR(e,o1,t,_A(t)),LR(zG,e)}}function UG(t,e,n){t==="focusin"?(HP(),D0=e,o1=n,D0.attachEvent("onpropertychange",t7)):t==="focusout"&&HP()}function HG(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ix(o1)}function VG(t,e){if(t==="click")return ix(e)}function WG(t,e){if(t==="input"||t==="change")return ix(e)}function qG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ja=typeof Object.is=="function"?Object.is:qG;function a1(t,e){if(ja(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!m3.call(e,i)||!ja(t[i],e[i]))return!1}return!0}function VP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function WP(t,e){var n=VP(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=VP(n)}}function n7(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?n7(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function r7(){for(var t=window,e=xb();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xb(t.document)}return e}function LA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function GG(t){var e=r7(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&n7(n.ownerDocument.documentElement,n)){if(r!==null&&LA(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=WP(n,s);var o=WP(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KG=Sc&&"documentMode"in document&&11>=document.documentMode,kp=null,D3=null,I0=null,I3=!1;function qP(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;I3||kp==null||kp!==xb(r)||(r=kp,"selectionStart"in r&&LA(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),I0&&a1(I0,r)||(I0=r,r=Pb(D3,"onSelect"),0<r.length&&(e=new MA("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=kp)))}function Ov(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Cp={animationend:Ov("Animation","AnimationEnd"),animationiteration:Ov("Animation","AnimationIteration"),animationstart:Ov("Animation","AnimationStart"),transitionend:Ov("Transition","TransitionEnd")},xS={},i7={};Sc&&(i7=document.createElement("div").style,"AnimationEvent"in window||(delete Cp.animationend.animation,delete Cp.animationiteration.animation,delete Cp.animationstart.animation),"TransitionEvent"in window||delete Cp.transitionend.transition);function sx(t){if(xS[t])return xS[t];if(!Cp[t])return t;var e=Cp[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in i7)return xS[t]=e[n];return t}var s7=sx("animationend"),o7=sx("animationiteration"),a7=sx("animationstart"),l7=sx("transitionend"),c7=new Map,GP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wd(t,e){c7.set(t,e),ih(e,[t])}for(var SS=0;SS<GP.length;SS++){var kS=GP[SS],JG=kS.toLowerCase(),YG=kS[0].toUpperCase()+kS.slice(1);wd(JG,"on"+YG)}wd(s7,"onAnimationEnd");wd(o7,"onAnimationIteration");wd(a7,"onAnimationStart");wd("dblclick","onDoubleClick");wd("focusin","onFocus");wd("focusout","onBlur");wd(l7,"onTransitionEnd");tg("onMouseEnter",["mouseout","mouseover"]);tg("onMouseLeave",["mouseout","mouseover"]);tg("onPointerEnter",["pointerout","pointerover"]);tg("onPointerLeave",["pointerout","pointerover"]);ih("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ih("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ih("onBeforeInput",["compositionend","keypress","textInput","paste"]);ih("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ih("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ih("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var s0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZG=new Set("cancel close invalid load scroll toggle".split(" ").concat(s0));function KP(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Jq(r,e,void 0,t),t.currentTarget=null}function u7(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;KP(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;KP(i,a,c),s=l}}}if(kb)throw t=M3,kb=!1,M3=null,t}function nr(t,e){var n=e[B3];n===void 0&&(n=e[B3]=new Set);var r=t+"__bubble";n.has(r)||(d7(e,t,2,!1),n.add(r))}function CS(t,e,n){var r=0;e&&(r|=4),d7(n,t,r,e)}var Rv="_reactListening"+Math.random().toString(36).slice(2);function l1(t){if(!t[Rv]){t[Rv]=!0,vR.forEach(function(n){n!=="selectionchange"&&(ZG.has(n)||CS(n,!1,t),CS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rv]||(e[Rv]=!0,CS("selectionchange",!1,e))}}function d7(t,e,n,r){switch(KR(e)){case 1:var i=dG;break;case 4:i=fG;break;default:i=TA}n=i.bind(null,e,n,t),i=void 0,!N3||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function _S(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=nf(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}LR(function(){var c=s,d=_A(n),u=[];e:{var f=c7.get(t);if(f!==void 0){var h=MA,p=t;switch(t){case"keypress":if(R2(n)===0)break e;case"keydown":case"keyup":h=EG;break;case"focusin":p="focus",h=vS;break;case"focusout":p="blur",h=vS;break;case"beforeblur":case"afterblur":h=vS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=IP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=gG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=NG;break;case s7:case o7:case a7:h=vG;break;case l7:h=OG;break;case"scroll":h=hG;break;case"wheel":h=LG;break;case"copy":case"cut":case"paste":h=wG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=jP}var g=(e&4)!==0,b=!g&&t==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var x=c,w;x!==null;){w=x;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,v!==null&&(C=n1(x,v),C!=null&&g.push(c1(x,C,w)))),b)break;x=x.return}0<g.length&&(f=new h(f,p,null,n,d),u.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==P3&&(p=n.relatedTarget||n.fromElement)&&(nf(p)||p[kc]))break e;if((h||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?nf(p):null,p!==null&&(b=sh(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(g=IP,C="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(g=jP,C="onPointerLeave",v="onPointerEnter",x="pointer"),b=h==null?f:_p(h),w=p==null?f:_p(p),f=new g(C,x+"leave",h,n,d),f.target=b,f.relatedTarget=w,C=null,nf(d)===c&&(g=new g(v,x+"enter",p,n,d),g.target=w,g.relatedTarget=b,C=g),b=C,h&&p)t:{for(g=h,v=p,x=0,w=g;w;w=Jh(w))x++;for(w=0,C=v;C;C=Jh(C))w++;for(;0<x-w;)g=Jh(g),x--;for(;0<w-x;)v=Jh(v),w--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=Jh(g),v=Jh(v)}g=null}else g=null;h!==null&&JP(u,f,h,g,!1),p!==null&&b!==null&&JP(u,b,p,g,!0)}}e:{if(f=c?_p(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var P=BG;else if(BP(f))if(e7)P=WG;else{P=HG;var O=UG}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=VG);if(P&&(P=P(t,c))){QR(u,P,n,d);break e}O&&O(t,f,c),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&k3(f,"number",f.value)}switch(O=c?_p(c):window,t){case"focusin":(BP(O)||O.contentEditable==="true")&&(kp=O,D3=c,I0=null);break;case"focusout":I0=D3=kp=null;break;case"mousedown":I3=!0;break;case"contextmenu":case"mouseup":case"dragend":I3=!1,qP(u,n,d);break;case"selectionchange":if(KG)break;case"keydown":case"keyup":qP(u,n,d)}var T;if(RA)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Sp?ZR(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(YR&&n.locale!=="ko"&&(Sp||M!=="onCompositionStart"?M==="onCompositionEnd"&&Sp&&(T=JR()):(Tu=d,NA="value"in Tu?Tu.value:Tu.textContent,Sp=!0)),O=Pb(c,M),0<O.length&&(M=new $P(M,t,null,n,d),u.push({event:M,listeners:O}),T?M.data=T:(T=XR(n),T!==null&&(M.data=T)))),(T=IG?$G(t,n):jG(t,n))&&(c=Pb(c,"onBeforeInput"),0<c.length&&(d=new $P("onBeforeInput","beforeinput",null,n,d),u.push({event:d,listeners:c}),d.data=T))}u7(u,e)})}function c1(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pb(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=n1(t,n),s!=null&&r.unshift(c1(t,s,i)),s=n1(t,e),s!=null&&r.push(c1(t,s,i))),t=t.return}return r}function Jh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function JP(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=n1(n,s),l!=null&&o.unshift(c1(n,l,a))):i||(l=n1(n,s),l!=null&&o.push(c1(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var XG=/\r\n?/g,QG=/\u0000|\uFFFD/g;function YP(t){return(typeof t=="string"?t:""+t).replace(XG,`
`).replace(QG,"")}function Lv(t,e,n){if(e=YP(e),YP(t)!==e&&n)throw Error(Xe(425))}function Tb(){}var $3=null,j3=null;function F3(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var z3=typeof setTimeout=="function"?setTimeout:void 0,eK=typeof clearTimeout=="function"?clearTimeout:void 0,ZP=typeof Promise=="function"?Promise:void 0,tK=typeof queueMicrotask=="function"?queueMicrotask:typeof ZP<"u"?function(t){return ZP.resolve(null).then(t).catch(nK)}:z3;function nK(t){setTimeout(function(){throw t})}function AS(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),s1(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);s1(e)}function Fu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function XP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $g=Math.random().toString(36).slice(2),al="__reactFiber$"+$g,u1="__reactProps$"+$g,kc="__reactContainer$"+$g,B3="__reactEvents$"+$g,rK="__reactListeners$"+$g,iK="__reactHandles$"+$g;function nf(t){var e=t[al];if(e)return e;for(var n=t.parentNode;n;){if(e=n[kc]||n[al]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=XP(t);t!==null;){if(n=t[al])return n;t=XP(t)}return e}t=n,n=t.parentNode}return null}function dy(t){return t=t[al]||t[kc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _p(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Xe(33))}function ox(t){return t[u1]||null}var U3=[],Ap=-1;function xd(t){return{current:t}}function or(t){0>Ap||(t.current=U3[Ap],U3[Ap]=null,Ap--)}function Qn(t,e){Ap++,U3[Ap]=t.current,t.current=e}var td={},Ji=xd(td),Hs=xd(!1),Pf=td;function ng(t,e){var n=t.type.contextTypes;if(!n)return td;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Vs(t){return t=t.childContextTypes,t!=null}function Nb(){or(Hs),or(Ji)}function QP(t,e,n){if(Ji.current!==td)throw Error(Xe(168));Qn(Ji,e),Qn(Hs,n)}function f7(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Xe(108,Uq(t)||"Unknown",i));return wr({},n,r)}function Mb(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||td,Pf=Ji.current,Qn(Ji,t),Qn(Hs,Hs.current),!0}function eT(t,e,n){var r=t.stateNode;if(!r)throw Error(Xe(169));n?(t=f7(t,e,Pf),r.__reactInternalMemoizedMergedChildContext=t,or(Hs),or(Ji),Qn(Ji,t)):or(Hs),Qn(Hs,n)}var oc=null,ax=!1,ES=!1;function h7(t){oc===null?oc=[t]:oc.push(t)}function sK(t){ax=!0,h7(t)}function Sd(){if(!ES&&oc!==null){ES=!0;var t=0,e=Dn;try{var n=oc;for(Dn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}oc=null,ax=!1}catch(i){throw oc!==null&&(oc=oc.slice(t+1)),jR(AA,Sd),i}finally{Dn=e,ES=!1}}return null}var Ep=[],Pp=0,Ob=null,Rb=0,zo=[],Bo=0,Tf=null,uc=1,dc="";function Wd(t,e){Ep[Pp++]=Rb,Ep[Pp++]=Ob,Ob=t,Rb=e}function p7(t,e,n){zo[Bo++]=uc,zo[Bo++]=dc,zo[Bo++]=Tf,Tf=t;var r=uc;t=dc;var i=32-Ma(r)-1;r&=~(1<<i),n+=1;var s=32-Ma(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,uc=1<<32-Ma(e)+i|n<<i|r,dc=s+t}else uc=1<<s|n<<i|r,dc=t}function DA(t){t.return!==null&&(Wd(t,1),p7(t,1,0))}function IA(t){for(;t===Ob;)Ob=Ep[--Pp],Ep[Pp]=null,Rb=Ep[--Pp],Ep[Pp]=null;for(;t===Tf;)Tf=zo[--Bo],zo[Bo]=null,dc=zo[--Bo],zo[Bo]=null,uc=zo[--Bo],zo[Bo]=null}var vo=null,ho=null,ur=!1,ka=null;function g7(t,e){var n=Vo(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function tT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vo=t,ho=Fu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vo=t,ho=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Tf!==null?{id:uc,overflow:dc}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vo(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vo=t,ho=null,!0):!1;default:return!1}}function H3(t){return(t.mode&1)!==0&&(t.flags&128)===0}function V3(t){if(ur){var e=ho;if(e){var n=e;if(!tT(t,e)){if(H3(t))throw Error(Xe(418));e=Fu(n.nextSibling);var r=vo;e&&tT(t,e)?g7(r,n):(t.flags=t.flags&-4097|2,ur=!1,vo=t)}}else{if(H3(t))throw Error(Xe(418));t.flags=t.flags&-4097|2,ur=!1,vo=t}}}function nT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vo=t}function Dv(t){if(t!==vo)return!1;if(!ur)return nT(t),ur=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!F3(t.type,t.memoizedProps)),e&&(e=ho)){if(H3(t))throw m7(),Error(Xe(418));for(;e;)g7(t,e),e=Fu(e.nextSibling)}if(nT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Xe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ho=Fu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ho=null}}else ho=vo?Fu(t.stateNode.nextSibling):null;return!0}function m7(){for(var t=ho;t;)t=Fu(t.nextSibling)}function rg(){ho=vo=null,ur=!1}function $A(t){ka===null?ka=[t]:ka.push(t)}var oK=$c.ReactCurrentBatchConfig;function Bm(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Xe(309));var r=n.stateNode}if(!r)throw Error(Xe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Xe(284));if(!n._owner)throw Error(Xe(290,t))}return t}function Iv(t,e){throw t=Object.prototype.toString.call(e),Error(Xe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rT(t){var e=t._init;return e(t._payload)}function y7(t){function e(v,x){if(t){var w=v.deletions;w===null?(v.deletions=[x],v.flags|=16):w.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function i(v,x){return v=Hu(v,x),v.index=0,v.sibling=null,v}function s(v,x,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<x?(v.flags|=2,x):w):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,x,w,C){return x===null||x.tag!==6?(x=LS(w,v.mode,C),x.return=v,x):(x=i(x,w),x.return=v,x)}function l(v,x,w,C){var P=w.type;return P===xp?d(v,x,w.props.children,C,w.key):x!==null&&(x.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===bu&&rT(P)===x.type)?(C=i(x,w.props),C.ref=Bm(v,x,w),C.return=v,C):(C=z2(w.type,w.key,w.props,null,v.mode,C),C.ref=Bm(v,x,w),C.return=v,C)}function c(v,x,w,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=DS(w,v.mode,C),x.return=v,x):(x=i(x,w.children||[]),x.return=v,x)}function d(v,x,w,C,P){return x===null||x.tag!==7?(x=pf(w,v.mode,C,P),x.return=v,x):(x=i(x,w),x.return=v,x)}function u(v,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=LS(""+x,v.mode,w),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case _v:return w=z2(x.type,x.key,x.props,null,v.mode,w),w.ref=Bm(v,null,x),w.return=v,w;case wp:return x=DS(x,v.mode,w),x.return=v,x;case bu:var C=x._init;return u(v,C(x._payload),w)}if(r0(x)||Im(x))return x=pf(x,v.mode,w,null),x.return=v,x;Iv(v,x)}return null}function f(v,x,w,C){var P=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return P!==null?null:a(v,x,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _v:return w.key===P?l(v,x,w,C):null;case wp:return w.key===P?c(v,x,w,C):null;case bu:return P=w._init,f(v,x,P(w._payload),C)}if(r0(w)||Im(w))return P!==null?null:d(v,x,w,C,null);Iv(v,w)}return null}function h(v,x,w,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(w)||null,a(x,v,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case _v:return v=v.get(C.key===null?w:C.key)||null,l(x,v,C,P);case wp:return v=v.get(C.key===null?w:C.key)||null,c(x,v,C,P);case bu:var O=C._init;return h(v,x,w,O(C._payload),P)}if(r0(C)||Im(C))return v=v.get(w)||null,d(x,v,C,P,null);Iv(x,C)}return null}function p(v,x,w,C){for(var P=null,O=null,T=x,M=x=0,D=null;T!==null&&M<w.length;M++){T.index>M?(D=T,T=null):D=T.sibling;var I=f(v,T,w[M],C);if(I===null){T===null&&(T=D);break}t&&T&&I.alternate===null&&e(v,T),x=s(I,x,M),O===null?P=I:O.sibling=I,O=I,T=D}if(M===w.length)return n(v,T),ur&&Wd(v,M),P;if(T===null){for(;M<w.length;M++)T=u(v,w[M],C),T!==null&&(x=s(T,x,M),O===null?P=T:O.sibling=T,O=T);return ur&&Wd(v,M),P}for(T=r(v,T);M<w.length;M++)D=h(T,v,M,w[M],C),D!==null&&(t&&D.alternate!==null&&T.delete(D.key===null?M:D.key),x=s(D,x,M),O===null?P=D:O.sibling=D,O=D);return t&&T.forEach(function(R){return e(v,R)}),ur&&Wd(v,M),P}function g(v,x,w,C){var P=Im(w);if(typeof P!="function")throw Error(Xe(150));if(w=P.call(w),w==null)throw Error(Xe(151));for(var O=P=null,T=x,M=x=0,D=null,I=w.next();T!==null&&!I.done;M++,I=w.next()){T.index>M?(D=T,T=null):D=T.sibling;var R=f(v,T,I.value,C);if(R===null){T===null&&(T=D);break}t&&T&&R.alternate===null&&e(v,T),x=s(R,x,M),O===null?P=R:O.sibling=R,O=R,T=D}if(I.done)return n(v,T),ur&&Wd(v,M),P;if(T===null){for(;!I.done;M++,I=w.next())I=u(v,I.value,C),I!==null&&(x=s(I,x,M),O===null?P=I:O.sibling=I,O=I);return ur&&Wd(v,M),P}for(T=r(v,T);!I.done;M++,I=w.next())I=h(T,v,M,I.value,C),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?M:I.key),x=s(I,x,M),O===null?P=I:O.sibling=I,O=I);return t&&T.forEach(function($){return e(v,$)}),ur&&Wd(v,M),P}function b(v,x,w,C){if(typeof w=="object"&&w!==null&&w.type===xp&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case _v:e:{for(var P=w.key,O=x;O!==null;){if(O.key===P){if(P=w.type,P===xp){if(O.tag===7){n(v,O.sibling),x=i(O,w.props.children),x.return=v,v=x;break e}}else if(O.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===bu&&rT(P)===O.type){n(v,O.sibling),x=i(O,w.props),x.ref=Bm(v,O,w),x.return=v,v=x;break e}n(v,O);break}else e(v,O);O=O.sibling}w.type===xp?(x=pf(w.props.children,v.mode,C,w.key),x.return=v,v=x):(C=z2(w.type,w.key,w.props,null,v.mode,C),C.ref=Bm(v,x,w),C.return=v,v=C)}return o(v);case wp:e:{for(O=w.key;x!==null;){if(x.key===O)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(v,x.sibling),x=i(x,w.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else e(v,x);x=x.sibling}x=DS(w,v.mode,C),x.return=v,v=x}return o(v);case bu:return O=w._init,b(v,x,O(w._payload),C)}if(r0(w))return p(v,x,w,C);if(Im(w))return g(v,x,w,C);Iv(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(v,x.sibling),x=i(x,w),x.return=v,v=x):(n(v,x),x=LS(w,v.mode,C),x.return=v,v=x),o(v)):n(v,x)}return b}var ig=y7(!0),v7=y7(!1),Lb=xd(null),Db=null,Tp=null,jA=null;function FA(){jA=Tp=Db=null}function zA(t){var e=Lb.current;or(Lb),t._currentValue=e}function W3(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Up(t,e){Db=t,jA=Tp=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Us=!0),t.firstContext=null)}function Zo(t){var e=t._currentValue;if(jA!==t)if(t={context:t,memoizedValue:e,next:null},Tp===null){if(Db===null)throw Error(Xe(308));Tp=t,Db.dependencies={lanes:0,firstContext:t}}else Tp=Tp.next=t;return e}var rf=null;function BA(t){rf===null?rf=[t]:rf.push(t)}function b7(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,BA(e)):(n.next=i.next,i.next=n),e.interleaved=n,Cc(t,r)}function Cc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wu=!1;function UA(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w7(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fc(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Sn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Cc(t,n)}return i=r.interleaved,i===null?(e.next=e,BA(r)):(e.next=i.next,i.next=e),r.interleaved=e,Cc(t,n)}function L2(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,EA(t,n)}}function iT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ib(t,e,n,r){var i=t.updateQueue;wu=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var u=i.baseState;o=0,d=c=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(f=e,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){u=p.call(h,u,f);break e}u=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(h,u,f):p,f==null)break e;u=wr({},u,f);break e;case 2:wu=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=h,l=u):d=d.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Mf|=o,t.lanes=o,t.memoizedState=u}}function sT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Xe(191,i));i.call(r)}}}var fy={},fl=xd(fy),d1=xd(fy),f1=xd(fy);function sf(t){if(t===fy)throw Error(Xe(174));return t}function HA(t,e){switch(Qn(f1,e),Qn(d1,t),Qn(fl,fy),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_3(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_3(e,t)}or(fl),Qn(fl,e)}function sg(){or(fl),or(d1),or(f1)}function x7(t){sf(f1.current);var e=sf(fl.current),n=_3(e,t.type);e!==n&&(Qn(d1,t),Qn(fl,n))}function VA(t){d1.current===t&&(or(fl),or(d1))}var gr=xd(0);function $b(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var PS=[];function WA(){for(var t=0;t<PS.length;t++)PS[t]._workInProgressVersionPrimary=null;PS.length=0}var D2=$c.ReactCurrentDispatcher,TS=$c.ReactCurrentBatchConfig,Nf=0,vr=null,Yr=null,fi=null,jb=!1,$0=!1,h1=0,aK=0;function Li(){throw Error(Xe(321))}function qA(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ja(t[n],e[n]))return!1;return!0}function GA(t,e,n,r,i,s){if(Nf=s,vr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,D2.current=t===null||t.memoizedState===null?dK:fK,t=n(r,i),$0){s=0;do{if($0=!1,h1=0,25<=s)throw Error(Xe(301));s+=1,fi=Yr=null,e.updateQueue=null,D2.current=hK,t=n(r,i)}while($0)}if(D2.current=Fb,e=Yr!==null&&Yr.next!==null,Nf=0,fi=Yr=vr=null,jb=!1,e)throw Error(Xe(300));return t}function KA(){var t=h1!==0;return h1=0,t}function il(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fi===null?vr.memoizedState=fi=t:fi=fi.next=t,fi}function Xo(){if(Yr===null){var t=vr.alternate;t=t!==null?t.memoizedState:null}else t=Yr.next;var e=fi===null?vr.memoizedState:fi.next;if(e!==null)fi=e,Yr=t;else{if(t===null)throw Error(Xe(310));Yr=t,t={memoizedState:Yr.memoizedState,baseState:Yr.baseState,baseQueue:Yr.baseQueue,queue:Yr.queue,next:null},fi===null?vr.memoizedState=fi=t:fi=fi.next=t}return fi}function p1(t,e){return typeof e=="function"?e(t):e}function NS(t){var e=Xo(),n=e.queue;if(n===null)throw Error(Xe(311));n.lastRenderedReducer=t;var r=Yr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Nf&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=u,o=r):l=l.next=u,vr.lanes|=d,Mf|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,ja(r,e.memoizedState)||(Us=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,vr.lanes|=s,Mf|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function MS(t){var e=Xo(),n=e.queue;if(n===null)throw Error(Xe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ja(s,e.memoizedState)||(Us=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function S7(){}function k7(t,e){var n=vr,r=Xo(),i=e(),s=!ja(r.memoizedState,i);if(s&&(r.memoizedState=i,Us=!0),r=r.queue,JA(A7.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||fi!==null&&fi.memoizedState.tag&1){if(n.flags|=2048,g1(9,_7.bind(null,n,r,i,e),void 0,null),vi===null)throw Error(Xe(349));Nf&30||C7(n,e,i)}return i}function C7(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=vr.updateQueue,e===null?(e={lastEffect:null,stores:null},vr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _7(t,e,n,r){e.value=n,e.getSnapshot=r,E7(e)&&P7(t)}function A7(t,e,n){return n(function(){E7(e)&&P7(t)})}function E7(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ja(t,n)}catch{return!0}}function P7(t){var e=Cc(t,1);e!==null&&Oa(e,t,1,-1)}function oT(t){var e=il();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p1,lastRenderedState:t},e.queue=t,t=t.dispatch=uK.bind(null,vr,t),[e.memoizedState,t]}function g1(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=vr.updateQueue,e===null?(e={lastEffect:null,stores:null},vr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function T7(){return Xo().memoizedState}function I2(t,e,n,r){var i=il();vr.flags|=t,i.memoizedState=g1(1|e,n,void 0,r===void 0?null:r)}function lx(t,e,n,r){var i=Xo();r=r===void 0?null:r;var s=void 0;if(Yr!==null){var o=Yr.memoizedState;if(s=o.destroy,r!==null&&qA(r,o.deps)){i.memoizedState=g1(e,n,s,r);return}}vr.flags|=t,i.memoizedState=g1(1|e,n,s,r)}function aT(t,e){return I2(8390656,8,t,e)}function JA(t,e){return lx(2048,8,t,e)}function N7(t,e){return lx(4,2,t,e)}function M7(t,e){return lx(4,4,t,e)}function O7(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function R7(t,e,n){return n=n!=null?n.concat([t]):null,lx(4,4,O7.bind(null,e,t),n)}function YA(){}function L7(t,e){var n=Xo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qA(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function D7(t,e){var n=Xo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qA(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function I7(t,e,n){return Nf&21?(ja(n,e)||(n=BR(),vr.lanes|=n,Mf|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Us=!0),t.memoizedState=n)}function lK(t,e){var n=Dn;Dn=n!==0&&4>n?n:4,t(!0);var r=TS.transition;TS.transition={};try{t(!1),e()}finally{Dn=n,TS.transition=r}}function $7(){return Xo().memoizedState}function cK(t,e,n){var r=Uu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},j7(t))F7(e,n);else if(n=b7(t,e,n,r),n!==null){var i=ys();Oa(n,t,r,i),z7(n,e,r)}}function uK(t,e,n){var r=Uu(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(j7(t))F7(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ja(a,o)){var l=e.interleaved;l===null?(i.next=i,BA(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=b7(t,e,i,r),n!==null&&(i=ys(),Oa(n,t,r,i),z7(n,e,r))}}function j7(t){var e=t.alternate;return t===vr||e!==null&&e===vr}function F7(t,e){$0=jb=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function z7(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,EA(t,n)}}var Fb={readContext:Zo,useCallback:Li,useContext:Li,useEffect:Li,useImperativeHandle:Li,useInsertionEffect:Li,useLayoutEffect:Li,useMemo:Li,useReducer:Li,useRef:Li,useState:Li,useDebugValue:Li,useDeferredValue:Li,useTransition:Li,useMutableSource:Li,useSyncExternalStore:Li,useId:Li,unstable_isNewReconciler:!1},dK={readContext:Zo,useCallback:function(t,e){return il().memoizedState=[t,e===void 0?null:e],t},useContext:Zo,useEffect:aT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,I2(4194308,4,O7.bind(null,e,t),n)},useLayoutEffect:function(t,e){return I2(4194308,4,t,e)},useInsertionEffect:function(t,e){return I2(4,2,t,e)},useMemo:function(t,e){var n=il();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=il();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=cK.bind(null,vr,t),[r.memoizedState,t]},useRef:function(t){var e=il();return t={current:t},e.memoizedState=t},useState:oT,useDebugValue:YA,useDeferredValue:function(t){return il().memoizedState=t},useTransition:function(){var t=oT(!1),e=t[0];return t=lK.bind(null,t[1]),il().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=vr,i=il();if(ur){if(n===void 0)throw Error(Xe(407));n=n()}else{if(n=e(),vi===null)throw Error(Xe(349));Nf&30||C7(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,aT(A7.bind(null,r,s,t),[t]),r.flags|=2048,g1(9,_7.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=il(),e=vi.identifierPrefix;if(ur){var n=dc,r=uc;n=(r&~(1<<32-Ma(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=h1++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=aK++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fK={readContext:Zo,useCallback:L7,useContext:Zo,useEffect:JA,useImperativeHandle:R7,useInsertionEffect:N7,useLayoutEffect:M7,useMemo:D7,useReducer:NS,useRef:T7,useState:function(){return NS(p1)},useDebugValue:YA,useDeferredValue:function(t){var e=Xo();return I7(e,Yr.memoizedState,t)},useTransition:function(){var t=NS(p1)[0],e=Xo().memoizedState;return[t,e]},useMutableSource:S7,useSyncExternalStore:k7,useId:$7,unstable_isNewReconciler:!1},hK={readContext:Zo,useCallback:L7,useContext:Zo,useEffect:JA,useImperativeHandle:R7,useInsertionEffect:N7,useLayoutEffect:M7,useMemo:D7,useReducer:MS,useRef:T7,useState:function(){return MS(p1)},useDebugValue:YA,useDeferredValue:function(t){var e=Xo();return Yr===null?e.memoizedState=t:I7(e,Yr.memoizedState,t)},useTransition:function(){var t=MS(p1)[0],e=Xo().memoizedState;return[t,e]},useMutableSource:S7,useSyncExternalStore:k7,useId:$7,unstable_isNewReconciler:!1};function va(t,e){if(t&&t.defaultProps){e=wr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function q3(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:wr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cx={isMounted:function(t){return(t=t._reactInternals)?sh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ys(),i=Uu(t),s=fc(r,i);s.payload=e,n!=null&&(s.callback=n),e=zu(t,s,i),e!==null&&(Oa(e,t,i,r),L2(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ys(),i=Uu(t),s=fc(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=zu(t,s,i),e!==null&&(Oa(e,t,i,r),L2(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ys(),r=Uu(t),i=fc(n,r);i.tag=2,e!=null&&(i.callback=e),e=zu(t,i,r),e!==null&&(Oa(e,t,r,n),L2(e,t,r))}};function lT(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!a1(n,r)||!a1(i,s):!0}function B7(t,e,n){var r=!1,i=td,s=e.contextType;return typeof s=="object"&&s!==null?s=Zo(s):(i=Vs(e)?Pf:Ji.current,r=e.contextTypes,s=(r=r!=null)?ng(t,i):td),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cx,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function cT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cx.enqueueReplaceState(e,e.state,null)}function G3(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},UA(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Zo(s):(s=Vs(e)?Pf:Ji.current,i.context=ng(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(q3(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cx.enqueueReplaceState(i,i.state,null),Ib(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function og(t,e){try{var n="",r=e;do n+=Bq(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function OS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function K3(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pK=typeof WeakMap=="function"?WeakMap:Map;function U7(t,e,n){n=fc(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Bb||(Bb=!0,iC=r),K3(t,e)},n}function H7(t,e,n){n=fc(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){K3(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){K3(t,e),typeof r!="function"&&(Bu===null?Bu=new Set([this]):Bu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function uT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new pK;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=PK.bind(null,t,e,n),e.then(t,t))}function dT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fT(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=fc(-1,1),e.tag=2,zu(n,e,1))),n.lanes|=1),t)}var gK=$c.ReactCurrentOwner,Us=!1;function fs(t,e,n,r){e.child=t===null?v7(e,null,n,r):ig(e,t.child,n,r)}function hT(t,e,n,r,i){n=n.render;var s=e.ref;return Up(e,i),r=GA(t,e,n,r,s,i),n=KA(),t!==null&&!Us?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_c(t,e,i)):(ur&&n&&DA(e),e.flags|=1,fs(t,e,r,i),e.child)}function pT(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!iE(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,V7(t,e,s,r,i)):(t=z2(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:a1,n(o,r)&&t.ref===e.ref)return _c(t,e,i)}return e.flags|=1,t=Hu(s,r),t.ref=e.ref,t.return=e,e.child=t}function V7(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(a1(s,r)&&t.ref===e.ref)if(Us=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Us=!0);else return e.lanes=t.lanes,_c(t,e,i)}return J3(t,e,n,r,i)}function W7(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qn(Mp,lo),lo|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qn(Mp,lo),lo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Qn(Mp,lo),lo|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Qn(Mp,lo),lo|=r;return fs(t,e,i,n),e.child}function q7(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function J3(t,e,n,r,i){var s=Vs(n)?Pf:Ji.current;return s=ng(e,s),Up(e,i),n=GA(t,e,n,r,s,i),r=KA(),t!==null&&!Us?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_c(t,e,i)):(ur&&r&&DA(e),e.flags|=1,fs(t,e,n,i),e.child)}function gT(t,e,n,r,i){if(Vs(n)){var s=!0;Mb(e)}else s=!1;if(Up(e,i),e.stateNode===null)$2(t,e),B7(e,n,r),G3(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Zo(c):(c=Vs(n)?Pf:Ji.current,c=ng(e,c));var d=n.getDerivedStateFromProps,u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&cT(e,o,r,c),wu=!1;var f=e.memoizedState;o.state=f,Ib(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Hs.current||wu?(typeof d=="function"&&(q3(e,n,d,r),l=e.memoizedState),(a=wu||lT(e,n,a,r,f,l,c))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,w7(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:va(e.type,a),o.props=c,u=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Zo(l):(l=Vs(n)?Pf:Ji.current,l=ng(e,l));var h=n.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||f!==l)&&cT(e,o,r,l),wu=!1,f=e.memoizedState,o.state=f,Ib(e,r,o,i);var p=e.memoizedState;a!==u||f!==p||Hs.current||wu?(typeof h=="function"&&(q3(e,n,h,r),p=e.memoizedState),(c=wu||lT(e,n,c,r,f,p,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Y3(t,e,n,r,s,i)}function Y3(t,e,n,r,i,s){q7(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&eT(e,n,!1),_c(t,e,s);r=e.stateNode,gK.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ig(e,t.child,null,s),e.child=ig(e,null,a,s)):fs(t,e,a,s),e.memoizedState=r.state,i&&eT(e,n,!0),e.child}function G7(t){var e=t.stateNode;e.pendingContext?QP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&QP(t,e.context,!1),HA(t,e.containerInfo)}function mT(t,e,n,r,i){return rg(),$A(i),e.flags|=256,fs(t,e,n,r),e.child}var Z3={dehydrated:null,treeContext:null,retryLane:0};function X3(t){return{baseLanes:t,cachePool:null,transitions:null}}function K7(t,e,n){var r=e.pendingProps,i=gr.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Qn(gr,i&1),t===null)return V3(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=fx(o,r,0,null),t=pf(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=X3(n),e.memoizedState=Z3,t):ZA(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return mK(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Hu(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Hu(a,s):(s=pf(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?X3(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Z3,r}return s=t.child,t=s.sibling,r=Hu(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ZA(t,e){return e=fx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $v(t,e,n,r){return r!==null&&$A(r),ig(e,t.child,null,n),t=ZA(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mK(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=OS(Error(Xe(422))),$v(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=fx({mode:"visible",children:r.children},i,0,null),s=pf(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ig(e,t.child,null,o),e.child.memoizedState=X3(o),e.memoizedState=Z3,s);if(!(e.mode&1))return $v(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Xe(419)),r=OS(s,r,void 0),$v(t,e,o,r)}if(a=(o&t.childLanes)!==0,Us||a){if(r=vi,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Cc(t,i),Oa(r,t,i,-1))}return rE(),r=OS(Error(Xe(421))),$v(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=TK.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ho=Fu(i.nextSibling),vo=e,ur=!0,ka=null,t!==null&&(zo[Bo++]=uc,zo[Bo++]=dc,zo[Bo++]=Tf,uc=t.id,dc=t.overflow,Tf=e),e=ZA(e,r.children),e.flags|=4096,e)}function yT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),W3(t.return,e,n)}function RS(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function J7(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(fs(t,e,r.children,n),r=gr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yT(t,n,e);else if(t.tag===19)yT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Qn(gr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$b(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),RS(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$b(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}RS(e,!0,n,null,s);break;case"together":RS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $2(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _c(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Mf|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Xe(153));if(e.child!==null){for(t=e.child,n=Hu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yK(t,e,n){switch(e.tag){case 3:G7(e),rg();break;case 5:x7(e);break;case 1:Vs(e.type)&&Mb(e);break;case 4:HA(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Qn(Lb,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qn(gr,gr.current&1),e.flags|=128,null):n&e.child.childLanes?K7(t,e,n):(Qn(gr,gr.current&1),t=_c(t,e,n),t!==null?t.sibling:null);Qn(gr,gr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return J7(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Qn(gr,gr.current),r)break;return null;case 22:case 23:return e.lanes=0,W7(t,e,n)}return _c(t,e,n)}var Y7,Q3,Z7,X7;Y7=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Q3=function(){};Z7=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,sf(fl.current);var s=null;switch(n){case"input":i=x3(t,i),r=x3(t,r),s=[];break;case"select":i=wr({},i,{value:void 0}),r=wr({},r,{value:void 0}),s=[];break;case"textarea":i=C3(t,i),r=C3(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Tb)}A3(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(e1.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(e1.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&nr("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};X7=function(t,e,n,r){n!==r&&(e.flags|=4)};function Um(t,e){if(!ur)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Di(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vK(t,e,n){var r=e.pendingProps;switch(IA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Di(e),null;case 1:return Vs(e.type)&&Nb(),Di(e),null;case 3:return r=e.stateNode,sg(),or(Hs),or(Ji),WA(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Dv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ka!==null&&(aC(ka),ka=null))),Q3(t,e),Di(e),null;case 5:VA(e);var i=sf(f1.current);if(n=e.type,t!==null&&e.stateNode!=null)Z7(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Xe(166));return Di(e),null}if(t=sf(fl.current),Dv(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[al]=e,r[u1]=s,t=(e.mode&1)!==0,n){case"dialog":nr("cancel",r),nr("close",r);break;case"iframe":case"object":case"embed":nr("load",r);break;case"video":case"audio":for(i=0;i<s0.length;i++)nr(s0[i],r);break;case"source":nr("error",r);break;case"img":case"image":case"link":nr("error",r),nr("load",r);break;case"details":nr("toggle",r);break;case"input":AP(r,s),nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},nr("invalid",r);break;case"textarea":PP(r,s),nr("invalid",r)}A3(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Lv(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Lv(r.textContent,a,t),i=["children",""+a]):e1.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&nr("scroll",r)}switch(n){case"input":Av(r),EP(r,s,!0);break;case"textarea":Av(r),TP(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Tb)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=AR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[al]=e,t[u1]=r,Y7(t,e,!1,!1),e.stateNode=t;e:{switch(o=E3(n,r),n){case"dialog":nr("cancel",t),nr("close",t),i=r;break;case"iframe":case"object":case"embed":nr("load",t),i=r;break;case"video":case"audio":for(i=0;i<s0.length;i++)nr(s0[i],t);i=r;break;case"source":nr("error",t),i=r;break;case"img":case"image":case"link":nr("error",t),nr("load",t),i=r;break;case"details":nr("toggle",t),i=r;break;case"input":AP(t,r),i=x3(t,r),nr("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=wr({},r,{value:void 0}),nr("invalid",t);break;case"textarea":PP(t,r),i=C3(t,r),nr("invalid",t);break;default:i=r}A3(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?TR(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ER(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&t1(t,l):typeof l=="number"&&t1(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(e1.hasOwnProperty(s)?l!=null&&s==="onScroll"&&nr("scroll",t):l!=null&&xA(t,s,l,o))}switch(n){case"input":Av(t),EP(t,r,!1);break;case"textarea":Av(t),TP(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ed(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?jp(t,!!r.multiple,s,!1):r.defaultValue!=null&&jp(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Tb)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Di(e),null;case 6:if(t&&e.stateNode!=null)X7(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Xe(166));if(n=sf(f1.current),sf(fl.current),Dv(e)){if(r=e.stateNode,n=e.memoizedProps,r[al]=e,(s=r.nodeValue!==n)&&(t=vo,t!==null))switch(t.tag){case 3:Lv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Lv(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[al]=e,e.stateNode=r}return Di(e),null;case 13:if(or(gr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ur&&ho!==null&&e.mode&1&&!(e.flags&128))m7(),rg(),e.flags|=98560,s=!1;else if(s=Dv(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Xe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Xe(317));s[al]=e}else rg(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Di(e),s=!1}else ka!==null&&(aC(ka),ka=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||gr.current&1?Qr===0&&(Qr=3):rE())),e.updateQueue!==null&&(e.flags|=4),Di(e),null);case 4:return sg(),Q3(t,e),t===null&&l1(e.stateNode.containerInfo),Di(e),null;case 10:return zA(e.type._context),Di(e),null;case 17:return Vs(e.type)&&Nb(),Di(e),null;case 19:if(or(gr),s=e.memoizedState,s===null)return Di(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Um(s,!1);else{if(Qr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$b(t),o!==null){for(e.flags|=128,Um(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Qn(gr,gr.current&1|2),e.child}t=t.sibling}s.tail!==null&&Dr()>ag&&(e.flags|=128,r=!0,Um(s,!1),e.lanes=4194304)}else{if(!r)if(t=$b(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Um(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ur)return Di(e),null}else 2*Dr()-s.renderingStartTime>ag&&n!==1073741824&&(e.flags|=128,r=!0,Um(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Dr(),e.sibling=null,n=gr.current,Qn(gr,r?n&1|2:n&1),e):(Di(e),null);case 22:case 23:return nE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?lo&1073741824&&(Di(e),e.subtreeFlags&6&&(e.flags|=8192)):Di(e),null;case 24:return null;case 25:return null}throw Error(Xe(156,e.tag))}function bK(t,e){switch(IA(e),e.tag){case 1:return Vs(e.type)&&Nb(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return sg(),or(Hs),or(Ji),WA(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return VA(e),null;case 13:if(or(gr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Xe(340));rg()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return or(gr),null;case 4:return sg(),null;case 10:return zA(e.type._context),null;case 22:case 23:return nE(),null;case 24:return null;default:return null}}var jv=!1,Ui=!1,wK=typeof WeakSet=="function"?WeakSet:Set,pt=null;function Np(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pr(t,e,r)}else n.current=null}function eC(t,e,n){try{n()}catch(r){Pr(t,e,r)}}var vT=!1;function xK(t,e){if($3=Ab,t=r7(),LA(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,u=t,f=null;t:for(;;){for(var h;u!==n||i!==0&&u.nodeType!==3||(a=o+i),u!==s||r!==0&&u.nodeType!==3||(l=o+r),u.nodeType===3&&(o+=u.nodeValue.length),(h=u.firstChild)!==null;)f=u,u=h;for(;;){if(u===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++d===r&&(l=o),(h=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(j3={focusedElem:t,selectionRange:n},Ab=!1,pt=e;pt!==null;)if(e=pt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pt=t;else for(;pt!==null;){e=pt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,b=p.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:va(e.type,g),b);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Xe(163))}}catch(C){Pr(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,pt=t;break}pt=e.return}return p=vT,vT=!1,p}function j0(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&eC(e,n,s)}i=i.next}while(i!==r)}}function ux(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function tC(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Q7(t){var e=t.alternate;e!==null&&(t.alternate=null,Q7(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[al],delete e[u1],delete e[B3],delete e[rK],delete e[iK])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eL(t){return t.tag===5||t.tag===3||t.tag===4}function bT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eL(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Tb));else if(r!==4&&(t=t.child,t!==null))for(nC(t,e,n),t=t.sibling;t!==null;)nC(t,e,n),t=t.sibling}function rC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(rC(t,e,n),t=t.sibling;t!==null;)rC(t,e,n),t=t.sibling}var ki=null,xa=!1;function cu(t,e,n){for(n=n.child;n!==null;)tL(t,e,n),n=n.sibling}function tL(t,e,n){if(dl&&typeof dl.onCommitFiberUnmount=="function")try{dl.onCommitFiberUnmount(nx,n)}catch{}switch(n.tag){case 5:Ui||Np(n,e);case 6:var r=ki,i=xa;ki=null,cu(t,e,n),ki=r,xa=i,ki!==null&&(xa?(t=ki,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ki.removeChild(n.stateNode));break;case 18:ki!==null&&(xa?(t=ki,n=n.stateNode,t.nodeType===8?AS(t.parentNode,n):t.nodeType===1&&AS(t,n),s1(t)):AS(ki,n.stateNode));break;case 4:r=ki,i=xa,ki=n.stateNode.containerInfo,xa=!0,cu(t,e,n),ki=r,xa=i;break;case 0:case 11:case 14:case 15:if(!Ui&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&eC(n,e,o),i=i.next}while(i!==r)}cu(t,e,n);break;case 1:if(!Ui&&(Np(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Pr(n,e,a)}cu(t,e,n);break;case 21:cu(t,e,n);break;case 22:n.mode&1?(Ui=(r=Ui)||n.memoizedState!==null,cu(t,e,n),Ui=r):cu(t,e,n);break;default:cu(t,e,n)}}function wT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wK),e.forEach(function(r){var i=NK.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function da(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ki=a.stateNode,xa=!1;break e;case 3:ki=a.stateNode.containerInfo,xa=!0;break e;case 4:ki=a.stateNode.containerInfo,xa=!0;break e}a=a.return}if(ki===null)throw Error(Xe(160));tL(s,o,i),ki=null,xa=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Pr(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nL(e,t),e=e.sibling}function nL(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(da(e,t),el(t),r&4){try{j0(3,t,t.return),ux(3,t)}catch(g){Pr(t,t.return,g)}try{j0(5,t,t.return)}catch(g){Pr(t,t.return,g)}}break;case 1:da(e,t),el(t),r&512&&n!==null&&Np(n,n.return);break;case 5:if(da(e,t),el(t),r&512&&n!==null&&Np(n,n.return),t.flags&32){var i=t.stateNode;try{t1(i,"")}catch(g){Pr(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&CR(i,s),E3(a,o);var c=E3(a,s);for(o=0;o<l.length;o+=2){var d=l[o],u=l[o+1];d==="style"?TR(i,u):d==="dangerouslySetInnerHTML"?ER(i,u):d==="children"?t1(i,u):xA(i,d,u,c)}switch(a){case"input":S3(i,s);break;case"textarea":_R(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?jp(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?jp(i,!!s.multiple,s.defaultValue,!0):jp(i,!!s.multiple,s.multiple?[]:"",!1))}i[u1]=s}catch(g){Pr(t,t.return,g)}}break;case 6:if(da(e,t),el(t),r&4){if(t.stateNode===null)throw Error(Xe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Pr(t,t.return,g)}}break;case 3:if(da(e,t),el(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{s1(e.containerInfo)}catch(g){Pr(t,t.return,g)}break;case 4:da(e,t),el(t);break;case 13:da(e,t),el(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(eE=Dr())),r&4&&wT(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ui=(c=Ui)||d,da(e,t),Ui=c):da(e,t),el(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(pt=t,d=t.child;d!==null;){for(u=pt=d;pt!==null;){switch(f=pt,h=f.child,f.tag){case 0:case 11:case 14:case 15:j0(4,f,f.return);break;case 1:Np(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Pr(r,n,g)}}break;case 5:Np(f,f.return);break;case 22:if(f.memoizedState!==null){ST(u);continue}}h!==null?(h.return=f,pt=h):ST(u)}d=d.sibling}e:for(d=null,u=t;;){if(u.tag===5){if(d===null){d=u;try{i=u.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=PR("display",o))}catch(g){Pr(t,t.return,g)}}}else if(u.tag===6){if(d===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(g){Pr(t,t.return,g)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:da(e,t),el(t),r&4&&wT(t);break;case 21:break;default:da(e,t),el(t)}}function el(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(eL(n)){var r=n;break e}n=n.return}throw Error(Xe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(t1(i,""),r.flags&=-33);var s=bT(t);rC(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=bT(t);nC(t,a,o);break;default:throw Error(Xe(161))}}catch(l){Pr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SK(t,e,n){pt=t,rL(t)}function rL(t,e,n){for(var r=(t.mode&1)!==0;pt!==null;){var i=pt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||jv;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ui;a=jv;var c=Ui;if(jv=o,(Ui=l)&&!c)for(pt=i;pt!==null;)o=pt,l=o.child,o.tag===22&&o.memoizedState!==null?kT(i):l!==null?(l.return=o,pt=l):kT(i);for(;s!==null;)pt=s,rL(s),s=s.sibling;pt=i,jv=a,Ui=c}xT(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,pt=s):xT(t)}}function xT(t){for(;pt!==null;){var e=pt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ui||ux(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ui)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:va(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&sT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}sT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var u=d.dehydrated;u!==null&&s1(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Xe(163))}Ui||e.flags&512&&tC(e)}catch(f){Pr(e,e.return,f)}}if(e===t){pt=null;break}if(n=e.sibling,n!==null){n.return=e.return,pt=n;break}pt=e.return}}function ST(t){for(;pt!==null;){var e=pt;if(e===t){pt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,pt=n;break}pt=e.return}}function kT(t){for(;pt!==null;){var e=pt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ux(4,e)}catch(l){Pr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Pr(e,i,l)}}var s=e.return;try{tC(e)}catch(l){Pr(e,s,l)}break;case 5:var o=e.return;try{tC(e)}catch(l){Pr(e,o,l)}}}catch(l){Pr(e,e.return,l)}if(e===t){pt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,pt=a;break}pt=e.return}}var kK=Math.ceil,zb=$c.ReactCurrentDispatcher,XA=$c.ReactCurrentOwner,Go=$c.ReactCurrentBatchConfig,Sn=0,vi=null,qr=null,Ei=0,lo=0,Mp=xd(0),Qr=0,m1=null,Mf=0,dx=0,QA=0,F0=null,Fs=null,eE=0,ag=1/0,rc=null,Bb=!1,iC=null,Bu=null,Fv=!1,Nu=null,Ub=0,z0=0,sC=null,j2=-1,F2=0;function ys(){return Sn&6?Dr():j2!==-1?j2:j2=Dr()}function Uu(t){return t.mode&1?Sn&2&&Ei!==0?Ei&-Ei:oK.transition!==null?(F2===0&&(F2=BR()),F2):(t=Dn,t!==0||(t=window.event,t=t===void 0?16:KR(t.type)),t):1}function Oa(t,e,n,r){if(50<z0)throw z0=0,sC=null,Error(Xe(185));cy(t,n,r),(!(Sn&2)||t!==vi)&&(t===vi&&(!(Sn&2)&&(dx|=n),Qr===4&&_u(t,Ei)),Ws(t,r),n===1&&Sn===0&&!(e.mode&1)&&(ag=Dr()+500,ax&&Sd()))}function Ws(t,e){var n=t.callbackNode;oG(t,e);var r=_b(t,t===vi?Ei:0);if(r===0)n!==null&&OP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&OP(n),e===1)t.tag===0?sK(CT.bind(null,t)):h7(CT.bind(null,t)),tK(function(){!(Sn&6)&&Sd()}),n=null;else{switch(UR(r)){case 1:n=AA;break;case 4:n=FR;break;case 16:n=Cb;break;case 536870912:n=zR;break;default:n=Cb}n=dL(n,iL.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iL(t,e){if(j2=-1,F2=0,Sn&6)throw Error(Xe(327));var n=t.callbackNode;if(Hp()&&t.callbackNode!==n)return null;var r=_b(t,t===vi?Ei:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hb(t,r);else{e=r;var i=Sn;Sn|=2;var s=oL();(vi!==t||Ei!==e)&&(rc=null,ag=Dr()+500,hf(t,e));do try{AK();break}catch(a){sL(t,a)}while(!0);FA(),zb.current=s,Sn=i,qr!==null?e=0:(vi=null,Ei=0,e=Qr)}if(e!==0){if(e===2&&(i=O3(t),i!==0&&(r=i,e=oC(t,i))),e===1)throw n=m1,hf(t,0),_u(t,r),Ws(t,Dr()),n;if(e===6)_u(t,r);else{if(i=t.current.alternate,!(r&30)&&!CK(i)&&(e=Hb(t,r),e===2&&(s=O3(t),s!==0&&(r=s,e=oC(t,s))),e===1))throw n=m1,hf(t,0),_u(t,r),Ws(t,Dr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Xe(345));case 2:qd(t,Fs,rc);break;case 3:if(_u(t,r),(r&130023424)===r&&(e=eE+500-Dr(),10<e)){if(_b(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ys(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=z3(qd.bind(null,t,Fs,rc),e);break}qd(t,Fs,rc);break;case 4:if(_u(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ma(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Dr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kK(r/1960))-r,10<r){t.timeoutHandle=z3(qd.bind(null,t,Fs,rc),r);break}qd(t,Fs,rc);break;case 5:qd(t,Fs,rc);break;default:throw Error(Xe(329))}}}return Ws(t,Dr()),t.callbackNode===n?iL.bind(null,t):null}function oC(t,e){var n=F0;return t.current.memoizedState.isDehydrated&&(hf(t,e).flags|=256),t=Hb(t,e),t!==2&&(e=Fs,Fs=n,e!==null&&aC(e)),t}function aC(t){Fs===null?Fs=t:Fs.push.apply(Fs,t)}function CK(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ja(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _u(t,e){for(e&=~QA,e&=~dx,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ma(e),r=1<<n;t[n]=-1,e&=~r}}function CT(t){if(Sn&6)throw Error(Xe(327));Hp();var e=_b(t,0);if(!(e&1))return Ws(t,Dr()),null;var n=Hb(t,e);if(t.tag!==0&&n===2){var r=O3(t);r!==0&&(e=r,n=oC(t,r))}if(n===1)throw n=m1,hf(t,0),_u(t,e),Ws(t,Dr()),n;if(n===6)throw Error(Xe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qd(t,Fs,rc),Ws(t,Dr()),null}function tE(t,e){var n=Sn;Sn|=1;try{return t(e)}finally{Sn=n,Sn===0&&(ag=Dr()+500,ax&&Sd())}}function Of(t){Nu!==null&&Nu.tag===0&&!(Sn&6)&&Hp();var e=Sn;Sn|=1;var n=Go.transition,r=Dn;try{if(Go.transition=null,Dn=1,t)return t()}finally{Dn=r,Go.transition=n,Sn=e,!(Sn&6)&&Sd()}}function nE(){lo=Mp.current,or(Mp)}function hf(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,eK(n)),qr!==null)for(n=qr.return;n!==null;){var r=n;switch(IA(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nb();break;case 3:sg(),or(Hs),or(Ji),WA();break;case 5:VA(r);break;case 4:sg();break;case 13:or(gr);break;case 19:or(gr);break;case 10:zA(r.type._context);break;case 22:case 23:nE()}n=n.return}if(vi=t,qr=t=Hu(t.current,null),Ei=lo=e,Qr=0,m1=null,QA=dx=Mf=0,Fs=F0=null,rf!==null){for(e=0;e<rf.length;e++)if(n=rf[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}rf=null}return t}function sL(t,e){do{var n=qr;try{if(FA(),D2.current=Fb,jb){for(var r=vr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}jb=!1}if(Nf=0,fi=Yr=vr=null,$0=!1,h1=0,XA.current=null,n===null||n.return===null){Qr=1,m1=e,qr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ei,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,u=d.tag;if(!(d.mode&1)&&(u===0||u===11||u===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=dT(o);if(h!==null){h.flags&=-257,fT(h,o,a,s,e),h.mode&1&&uT(s,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){uT(s,c,e),rE();break e}l=Error(Xe(426))}}else if(ur&&a.mode&1){var b=dT(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),fT(b,o,a,s,e),$A(og(l,a));break e}}s=l=og(l,a),Qr!==4&&(Qr=2),F0===null?F0=[s]:F0.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=U7(s,l,e);iT(s,v);break e;case 1:a=l;var x=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Bu===null||!Bu.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=H7(s,a,e);iT(s,C);break e}}s=s.return}while(s!==null)}lL(n)}catch(P){e=P,qr===n&&n!==null&&(qr=n=n.return);continue}break}while(!0)}function oL(){var t=zb.current;return zb.current=Fb,t===null?Fb:t}function rE(){(Qr===0||Qr===3||Qr===2)&&(Qr=4),vi===null||!(Mf&268435455)&&!(dx&268435455)||_u(vi,Ei)}function Hb(t,e){var n=Sn;Sn|=2;var r=oL();(vi!==t||Ei!==e)&&(rc=null,hf(t,e));do try{_K();break}catch(i){sL(t,i)}while(!0);if(FA(),Sn=n,zb.current=r,qr!==null)throw Error(Xe(261));return vi=null,Ei=0,Qr}function _K(){for(;qr!==null;)aL(qr)}function AK(){for(;qr!==null&&!Zq();)aL(qr)}function aL(t){var e=uL(t.alternate,t,lo);t.memoizedProps=t.pendingProps,e===null?lL(t):qr=e,XA.current=null}function lL(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bK(n,e),n!==null){n.flags&=32767,qr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qr=6,qr=null;return}}else if(n=vK(n,e,lo),n!==null){qr=n;return}if(e=e.sibling,e!==null){qr=e;return}qr=e=t}while(e!==null);Qr===0&&(Qr=5)}function qd(t,e,n){var r=Dn,i=Go.transition;try{Go.transition=null,Dn=1,EK(t,e,n,r)}finally{Go.transition=i,Dn=r}return null}function EK(t,e,n,r){do Hp();while(Nu!==null);if(Sn&6)throw Error(Xe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Xe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(aG(t,s),t===vi&&(qr=vi=null,Ei=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fv||(Fv=!0,dL(Cb,function(){return Hp(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Go.transition,Go.transition=null;var o=Dn;Dn=1;var a=Sn;Sn|=4,XA.current=null,xK(t,n),nL(n,t),GG(j3),Ab=!!$3,j3=$3=null,t.current=n,SK(n),Xq(),Sn=a,Dn=o,Go.transition=s}else t.current=n;if(Fv&&(Fv=!1,Nu=t,Ub=i),s=t.pendingLanes,s===0&&(Bu=null),tG(n.stateNode),Ws(t,Dr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Bb)throw Bb=!1,t=iC,iC=null,t;return Ub&1&&t.tag!==0&&Hp(),s=t.pendingLanes,s&1?t===sC?z0++:(z0=0,sC=t):z0=0,Sd(),null}function Hp(){if(Nu!==null){var t=UR(Ub),e=Go.transition,n=Dn;try{if(Go.transition=null,Dn=16>t?16:t,Nu===null)var r=!1;else{if(t=Nu,Nu=null,Ub=0,Sn&6)throw Error(Xe(331));var i=Sn;for(Sn|=4,pt=t.current;pt!==null;){var s=pt,o=s.child;if(pt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(pt=c;pt!==null;){var d=pt;switch(d.tag){case 0:case 11:case 15:j0(8,d,s)}var u=d.child;if(u!==null)u.return=d,pt=u;else for(;pt!==null;){d=pt;var f=d.sibling,h=d.return;if(Q7(d),d===c){pt=null;break}if(f!==null){f.return=h,pt=f;break}pt=h}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}pt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,pt=o;else e:for(;pt!==null;){if(s=pt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:j0(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,pt=v;break e}pt=s.return}}var x=t.current;for(pt=x;pt!==null;){o=pt;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,pt=w;else e:for(o=x;pt!==null;){if(a=pt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ux(9,a)}}catch(P){Pr(a,a.return,P)}if(a===o){pt=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,pt=C;break e}pt=a.return}}if(Sn=i,Sd(),dl&&typeof dl.onPostCommitFiberRoot=="function")try{dl.onPostCommitFiberRoot(nx,t)}catch{}r=!0}return r}finally{Dn=n,Go.transition=e}}return!1}function _T(t,e,n){e=og(n,e),e=U7(t,e,1),t=zu(t,e,1),e=ys(),t!==null&&(cy(t,1,e),Ws(t,e))}function Pr(t,e,n){if(t.tag===3)_T(t,t,n);else for(;e!==null;){if(e.tag===3){_T(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bu===null||!Bu.has(r))){t=og(n,t),t=H7(e,t,1),e=zu(e,t,1),t=ys(),e!==null&&(cy(e,1,t),Ws(e,t));break}}e=e.return}}function PK(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ys(),t.pingedLanes|=t.suspendedLanes&n,vi===t&&(Ei&n)===n&&(Qr===4||Qr===3&&(Ei&130023424)===Ei&&500>Dr()-eE?hf(t,0):QA|=n),Ws(t,e)}function cL(t,e){e===0&&(t.mode&1?(e=Tv,Tv<<=1,!(Tv&130023424)&&(Tv=4194304)):e=1);var n=ys();t=Cc(t,e),t!==null&&(cy(t,e,n),Ws(t,n))}function TK(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cL(t,n)}function NK(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Xe(314))}r!==null&&r.delete(e),cL(t,n)}var uL;uL=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Hs.current)Us=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Us=!1,yK(t,e,n);Us=!!(t.flags&131072)}else Us=!1,ur&&e.flags&1048576&&p7(e,Rb,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$2(t,e),t=e.pendingProps;var i=ng(e,Ji.current);Up(e,n),i=GA(null,e,r,t,i,n);var s=KA();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vs(r)?(s=!0,Mb(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,UA(e),i.updater=cx,e.stateNode=i,i._reactInternals=e,G3(e,r,t,n),e=Y3(null,e,r,!0,s,n)):(e.tag=0,ur&&s&&DA(e),fs(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch($2(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=OK(r),t=va(r,t),i){case 0:e=J3(null,e,r,t,n);break e;case 1:e=gT(null,e,r,t,n);break e;case 11:e=hT(null,e,r,t,n);break e;case 14:e=pT(null,e,r,va(r.type,t),n);break e}throw Error(Xe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:va(r,i),J3(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:va(r,i),gT(t,e,r,i,n);case 3:e:{if(G7(e),t===null)throw Error(Xe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,w7(t,e),Ib(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=og(Error(Xe(423)),e),e=mT(t,e,r,n,i);break e}else if(r!==i){i=og(Error(Xe(424)),e),e=mT(t,e,r,n,i);break e}else for(ho=Fu(e.stateNode.containerInfo.firstChild),vo=e,ur=!0,ka=null,n=v7(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rg(),r===i){e=_c(t,e,n);break e}fs(t,e,r,n)}e=e.child}return e;case 5:return x7(e),t===null&&V3(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,F3(r,i)?o=null:s!==null&&F3(r,s)&&(e.flags|=32),q7(t,e),fs(t,e,o,n),e.child;case 6:return t===null&&V3(e),null;case 13:return K7(t,e,n);case 4:return HA(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ig(e,null,r,n):fs(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:va(r,i),hT(t,e,r,i,n);case 7:return fs(t,e,e.pendingProps,n),e.child;case 8:return fs(t,e,e.pendingProps.children,n),e.child;case 12:return fs(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Qn(Lb,r._currentValue),r._currentValue=o,s!==null)if(ja(s.value,o)){if(s.children===i.children&&!Hs.current){e=_c(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=fc(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),W3(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Xe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),W3(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}fs(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Up(e,n),i=Zo(i),r=r(i),e.flags|=1,fs(t,e,r,n),e.child;case 14:return r=e.type,i=va(r,e.pendingProps),i=va(r.type,i),pT(t,e,r,i,n);case 15:return V7(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:va(r,i),$2(t,e),e.tag=1,Vs(r)?(t=!0,Mb(e)):t=!1,Up(e,n),B7(e,r,i),G3(e,r,i,n),Y3(null,e,r,!0,t,n);case 19:return J7(t,e,n);case 22:return W7(t,e,n)}throw Error(Xe(156,e.tag))};function dL(t,e){return jR(t,e)}function MK(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vo(t,e,n,r){return new MK(t,e,n,r)}function iE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OK(t){if(typeof t=="function")return iE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===kA)return 11;if(t===CA)return 14}return 2}function Hu(t,e){var n=t.alternate;return n===null?(n=Vo(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function z2(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")iE(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xp:return pf(n.children,i,s,e);case SA:o=8,i|=8;break;case y3:return t=Vo(12,n,e,i|2),t.elementType=y3,t.lanes=s,t;case v3:return t=Vo(13,n,e,i),t.elementType=v3,t.lanes=s,t;case b3:return t=Vo(19,n,e,i),t.elementType=b3,t.lanes=s,t;case xR:return fx(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bR:o=10;break e;case wR:o=9;break e;case kA:o=11;break e;case CA:o=14;break e;case bu:o=16,r=null;break e}throw Error(Xe(130,t==null?t:typeof t,""))}return e=Vo(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function pf(t,e,n,r){return t=Vo(7,t,r,e),t.lanes=n,t}function fx(t,e,n,r){return t=Vo(22,t,r,e),t.elementType=xR,t.lanes=n,t.stateNode={isHidden:!1},t}function LS(t,e,n){return t=Vo(6,t,null,e),t.lanes=n,t}function DS(t,e,n){return e=Vo(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function RK(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gS(0),this.expirationTimes=gS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gS(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function sE(t,e,n,r,i,s,o,a,l){return t=new RK(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Vo(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},UA(s),t}function LK(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wp,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fL(t){if(!t)return td;t=t._reactInternals;e:{if(sh(t)!==t||t.tag!==1)throw Error(Xe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Xe(171))}if(t.tag===1){var n=t.type;if(Vs(n))return f7(t,n,e)}return e}function hL(t,e,n,r,i,s,o,a,l){return t=sE(n,r,!0,t,i,s,o,a,l),t.context=fL(null),n=t.current,r=ys(),i=Uu(n),s=fc(r,i),s.callback=e??null,zu(n,s,i),t.current.lanes=i,cy(t,i,r),Ws(t,r),t}function hx(t,e,n,r){var i=e.current,s=ys(),o=Uu(i);return n=fL(n),e.context===null?e.context=n:e.pendingContext=n,e=fc(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zu(i,e,o),t!==null&&(Oa(t,i,o,s),L2(t,i,o)),o}function Vb(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function AT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function oE(t,e){AT(t,e),(t=t.alternate)&&AT(t,e)}function DK(){return null}var pL=typeof reportError=="function"?reportError:function(t){console.error(t)};function aE(t){this._internalRoot=t}px.prototype.render=aE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Xe(409));hx(t,e,null,null)};px.prototype.unmount=aE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Of(function(){hx(null,t,null,null)}),e[kc]=null}};function px(t){this._internalRoot=t}px.prototype.unstable_scheduleHydration=function(t){if(t){var e=WR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cu.length&&e!==0&&e<Cu[n].priority;n++);Cu.splice(n,0,t),n===0&&GR(t)}};function lE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ET(){}function IK(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Vb(o);s.call(c)}}var o=hL(e,r,t,0,null,!1,!1,"",ET);return t._reactRootContainer=o,t[kc]=o.current,l1(t.nodeType===8?t.parentNode:t),Of(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Vb(l);a.call(c)}}var l=sE(t,0,!1,null,null,!1,!1,"",ET);return t._reactRootContainer=l,t[kc]=l.current,l1(t.nodeType===8?t.parentNode:t),Of(function(){hx(e,l,n,r)}),l}function mx(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Vb(o);a.call(l)}}hx(e,o,t,i)}else o=IK(n,e,t,i,r);return Vb(o)}HR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=i0(e.pendingLanes);n!==0&&(EA(e,n|1),Ws(e,Dr()),!(Sn&6)&&(ag=Dr()+500,Sd()))}break;case 13:Of(function(){var r=Cc(t,1);if(r!==null){var i=ys();Oa(r,t,1,i)}}),oE(t,1)}};PA=function(t){if(t.tag===13){var e=Cc(t,134217728);if(e!==null){var n=ys();Oa(e,t,134217728,n)}oE(t,134217728)}};VR=function(t){if(t.tag===13){var e=Uu(t),n=Cc(t,e);if(n!==null){var r=ys();Oa(n,t,e,r)}oE(t,e)}};WR=function(){return Dn};qR=function(t,e){var n=Dn;try{return Dn=t,e()}finally{Dn=n}};T3=function(t,e,n){switch(e){case"input":if(S3(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ox(r);if(!i)throw Error(Xe(90));kR(r),S3(r,i)}}}break;case"textarea":_R(t,n);break;case"select":e=n.value,e!=null&&jp(t,!!n.multiple,e,!1)}};OR=tE;RR=Of;var $K={usingClientEntryPoint:!1,Events:[dy,_p,ox,NR,MR,tE]},Hm={findFiberByHostInstance:nf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jK={bundleType:Hm.bundleType,version:Hm.version,rendererPackageName:Hm.rendererPackageName,rendererConfig:Hm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$c.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=IR(t),t===null?null:t.stateNode},findFiberByHostInstance:Hm.findFiberByHostInstance||DK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zv.isDisabled&&zv.supportsFiber)try{nx=zv.inject(jK),dl=zv}catch{}}Ao.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$K;Ao.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lE(e))throw Error(Xe(200));return LK(t,e,null,n)};Ao.createRoot=function(t,e){if(!lE(t))throw Error(Xe(299));var n=!1,r="",i=pL;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=sE(t,1,!1,null,null,n,!1,r,i),t[kc]=e.current,l1(t.nodeType===8?t.parentNode:t),new aE(e)};Ao.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Xe(188)):(t=Object.keys(t).join(","),Error(Xe(268,t)));return t=IR(e),t=t===null?null:t.stateNode,t};Ao.flushSync=function(t){return Of(t)};Ao.hydrate=function(t,e,n){if(!gx(e))throw Error(Xe(200));return mx(null,t,e,!0,n)};Ao.hydrateRoot=function(t,e,n){if(!lE(t))throw Error(Xe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=pL;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=hL(e,null,t,1,n??null,i,!1,s,o),t[kc]=e.current,l1(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new px(e)};Ao.render=function(t,e,n){if(!gx(e))throw Error(Xe(200));return mx(null,t,e,!1,n)};Ao.unmountComponentAtNode=function(t){if(!gx(t))throw Error(Xe(40));return t._reactRootContainer?(Of(function(){mx(null,null,t,!1,function(){t._reactRootContainer=null,t[kc]=null})}),!0):!1};Ao.unstable_batchedUpdates=tE;Ao.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gx(n))throw Error(Xe(200));if(t==null||t._reactInternals===void 0)throw Error(Xe(38));return mx(t,e,n,!1,r)};Ao.version="18.3.1-next-f1338f8080-20240426";function gL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gL)}catch(t){console.error(t)}}gL(),gR.exports=Ao;var Ua=gR.exports;const yx=rh(Ua);var PT=Ua;g3.createRoot=PT.createRoot,g3.hydrateRoot=PT.hydrateRoot;function IS(t,e,n){if(t&&t.length){const[r,i]=e,s=Math.PI/180*n,o=Math.cos(s),a=Math.sin(s);for(const l of t){const[c,d]=l;l[0]=(c-r)*o-(d-i)*a+r,l[1]=(c-r)*a+(d-i)*o+i}}}function FK(t,e){return t[0]===e[0]&&t[1]===e[1]}function zK(t,e,n,r=1){const i=n,s=Math.max(e,.1),o=t[0]&&t[0][0]&&typeof t[0][0]=="number"?[t]:t,a=[0,0];if(i)for(const c of o)IS(c,a,i);const l=function(c,d,u){const f=[];for(const x of c){const w=[...x];FK(w[0],w[w.length-1])||w.push([w[0][0],w[0][1]]),w.length>2&&f.push(w)}const h=[];d=Math.max(d,.1);const p=[];for(const x of f)for(let w=0;w<x.length-1;w++){const C=x[w],P=x[w+1];if(C[1]!==P[1]){const O=Math.min(C[1],P[1]);p.push({ymin:O,ymax:Math.max(C[1],P[1]),x:O===C[1]?C[0]:P[0],islope:(P[0]-C[0])/(P[1]-C[1])})}}if(p.sort((x,w)=>x.ymin<w.ymin?-1:x.ymin>w.ymin?1:x.x<w.x?-1:x.x>w.x?1:x.ymax===w.ymax?0:(x.ymax-w.ymax)/Math.abs(x.ymax-w.ymax)),!p.length)return h;let g=[],b=p[0].ymin,v=0;for(;g.length||p.length;){if(p.length){let x=-1;for(let w=0;w<p.length&&!(p[w].ymin>b);w++)x=w;p.splice(0,x+1).forEach(w=>{g.push({s:b,edge:w})})}if(g=g.filter(x=>!(x.edge.ymax<=b)),g.sort((x,w)=>x.edge.x===w.edge.x?0:(x.edge.x-w.edge.x)/Math.abs(x.edge.x-w.edge.x)),(u!==1||v%d==0)&&g.length>1)for(let x=0;x<g.length;x+=2){const w=x+1;if(w>=g.length)break;const C=g[x].edge,P=g[w].edge;h.push([[Math.round(C.x),b],[Math.round(P.x),b]])}b+=u,g.forEach(x=>{x.edge.x=x.edge.x+u*x.edge.islope}),v++}return h}(o,s,r);if(i){for(const c of o)IS(c,a,-i);(function(c,d,u){const f=[];c.forEach(h=>f.push(...h)),IS(f,d,u)})(l,a,-i)}return l}function hy(t,e){var n;const r=e.hachureAngle+90;let i=e.hachureGap;i<0&&(i=4*e.strokeWidth),i=Math.round(Math.max(i,.1));let s=1;return e.roughness>=1&&(((n=e.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=i),zK(t,i,r,s||1)}let cE=class{constructor(e){this.helper=e}fillPolygons(e,n){return this._fillPolygons(e,n)}_fillPolygons(e,n){const r=hy(e,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(e,n){const r=[];for(const i of e)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}};function vx(t){const e=t[0],n=t[1];return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}let BK=class extends cE{fillPolygons(e,n){let r=n.hachureGap;r<0&&(r=4*n.strokeWidth),r=Math.max(r,.1);const i=hy(e,Object.assign({},n,{hachureGap:r})),s=Math.PI/180*n.hachureAngle,o=[],a=.5*r*Math.cos(s),l=.5*r*Math.sin(s);for(const[c,d]of i)vx([c,d])&&o.push([[c[0]-a,c[1]+l],[...d]],[[c[0]+a,c[1]-l],[...d]]);return{type:"fillSketch",ops:this.renderLines(o,n)}}},UK=class extends cE{fillPolygons(e,n){const r=this._fillPolygons(e,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(e,i);return r.ops=r.ops.concat(s.ops),r}},HK=class{constructor(e){this.helper=e}fillPolygons(e,n){const r=hy(e,n=Object.assign({},n,{hachureAngle:0}));return this.dotsOnLines(r,n)}dotsOnLines(e,n){const r=[];let i=n.hachureGap;i<0&&(i=4*n.strokeWidth),i=Math.max(i,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const o=i/4;for(const a of e){const l=vx(a),c=l/i,d=Math.ceil(c)-1,u=l-d*i,f=(a[0][0]+a[1][0])/2-i/4,h=Math.min(a[0][1],a[1][1]);for(let p=0;p<d;p++){const g=h+u+p*i,b=f-o+2*Math.random()*o,v=g-o+2*Math.random()*o,x=this.helper.ellipse(b,v,s,s,n);r.push(...x.ops)}}return{type:"fillSketch",ops:r}}},VK=class{constructor(e){this.helper=e}fillPolygons(e,n){const r=hy(e,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(e,n){const r=n.dashOffset<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashGap,s=[];return e.forEach(o=>{const a=vx(o),l=Math.floor(a/(r+i)),c=(a+i-l*(r+i))/2;let d=o[0],u=o[1];d[0]>u[0]&&(d=o[1],u=o[0]);const f=Math.atan((u[1]-d[1])/(u[0]-d[0]));for(let h=0;h<l;h++){const p=h*(r+i),g=p+r,b=[d[0]+p*Math.cos(f)+c*Math.cos(f),d[1]+p*Math.sin(f)+c*Math.sin(f)],v=[d[0]+g*Math.cos(f)+c*Math.cos(f),d[1]+g*Math.sin(f)+c*Math.sin(f)];s.push(...this.helper.doubleLineOps(b[0],b[1],v[0],v[1],n))}}),s}},WK=class{constructor(e){this.helper=e}fillPolygons(e,n){const r=n.hachureGap<0?4*n.strokeWidth:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset,s=hy(e,n=Object.assign({},n,{hachureGap:r+i}));return{type:"fillSketch",ops:this.zigzagLines(s,i,n)}}zigzagLines(e,n,r){const i=[];return e.forEach(s=>{const o=vx(s),a=Math.round(o/(2*n));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const d=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let u=0;u<a;u++){const f=2*u*n,h=2*(u+1)*n,p=Math.sqrt(2*Math.pow(n,2)),g=[l[0]+f*Math.cos(d),l[1]+f*Math.sin(d)],b=[l[0]+h*Math.cos(d),l[1]+h*Math.sin(d)],v=[g[0]+p*Math.cos(d+Math.PI/4),g[1]+p*Math.sin(d+Math.PI/4)];i.push(...this.helper.doubleLineOps(g[0],g[1],v[0],v[1],r),...this.helper.doubleLineOps(v[0],v[1],b[0],b[1],r))}}),i}};const js={};let qK=class{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}};const GK=0,$S=1,TT=2,Bv={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function jS(t,e){return t.type===e}function uE(t){const e=[],n=function(o){const a=new Array;for(;o!=="";)if(o.match(/^([ \t\r\n,]+)/))o=o.substr(RegExp.$1.length);else if(o.match(/^([aAcChHlLmMqQsStTvVzZ])/))a[a.length]={type:GK,text:RegExp.$1},o=o.substr(RegExp.$1.length);else{if(!o.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];a[a.length]={type:$S,text:`${parseFloat(RegExp.$1)}`},o=o.substr(RegExp.$1.length)}return a[a.length]={type:TT,text:""},a}(t);let r="BOD",i=0,s=n[i];for(;!jS(s,TT);){let o=0;const a=[];if(r==="BOD"){if(s.text!=="M"&&s.text!=="m")return uE("M0,0"+t);i++,o=Bv[s.text],r=s.text}else jS(s,$S)?o=Bv[r]:(i++,o=Bv[s.text],r=s.text);if(!(i+o<n.length))throw new Error("Path data ended short");for(let l=i;l<i+o;l++){const c=n[l];if(!jS(c,$S))throw new Error("Param not a number: "+r+","+c.text);a[a.length]=+c.text}if(typeof Bv[r]!="number")throw new Error("Bad segment: "+r);{const l={key:r,data:a};e.push(l),i+=o,s=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}}return e}function mL(t){let e=0,n=0,r=0,i=0;const s=[];for(const{key:o,data:a}of t)switch(o){case"M":s.push({key:"M",data:[...a]}),[e,n]=a,[r,i]=a;break;case"m":e+=a[0],n+=a[1],s.push({key:"M",data:[e,n]}),r=e,i=n;break;case"L":s.push({key:"L",data:[...a]}),[e,n]=a;break;case"l":e+=a[0],n+=a[1],s.push({key:"L",data:[e,n]});break;case"C":s.push({key:"C",data:[...a]}),e=a[4],n=a[5];break;case"c":{const l=a.map((c,d)=>d%2?c+n:c+e);s.push({key:"C",data:l}),e=l[4],n=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),e=a[2],n=a[3];break;case"q":{const l=a.map((c,d)=>d%2?c+n:c+e);s.push({key:"Q",data:l}),e=l[2],n=l[3];break}case"A":s.push({key:"A",data:[...a]}),e=a[5],n=a[6];break;case"a":e+=a[5],n+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],e,n]});break;case"H":s.push({key:"H",data:[...a]}),e=a[0];break;case"h":e+=a[0],s.push({key:"H",data:[e]});break;case"V":s.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...a]}),e=a[2],n=a[3];break;case"s":{const l=a.map((c,d)=>d%2?c+n:c+e);s.push({key:"S",data:l}),e=l[2],n=l[3];break}case"T":s.push({key:"T",data:[...a]}),e=a[0],n=a[1];break;case"t":e+=a[0],n+=a[1],s.push({key:"T",data:[e,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),e=r,n=i}return s}function yL(t){const e=[];let n="",r=0,i=0,s=0,o=0,a=0,l=0;for(const{key:c,data:d}of t){switch(c){case"M":e.push({key:"M",data:[...d]}),[r,i]=d,[s,o]=d;break;case"C":e.push({key:"C",data:[...d]}),r=d[4],i=d[5],a=d[2],l=d[3];break;case"L":e.push({key:"L",data:[...d]}),[r,i]=d;break;case"H":r=d[0],e.push({key:"L",data:[r,i]});break;case"V":i=d[0],e.push({key:"L",data:[r,i]});break;case"S":{let u=0,f=0;n==="C"||n==="S"?(u=r+(r-a),f=i+(i-l)):(u=r,f=i),e.push({key:"C",data:[u,f,...d]}),a=d[0],l=d[1],r=d[2],i=d[3];break}case"T":{const[u,f]=d;let h=0,p=0;n==="Q"||n==="T"?(h=r+(r-a),p=i+(i-l)):(h=r,p=i);const g=r+2*(h-r)/3,b=i+2*(p-i)/3,v=u+2*(h-u)/3,x=f+2*(p-f)/3;e.push({key:"C",data:[g,b,v,x,u,f]}),a=h,l=p,r=u,i=f;break}case"Q":{const[u,f,h,p]=d,g=r+2*(u-r)/3,b=i+2*(f-i)/3,v=h+2*(u-h)/3,x=p+2*(f-p)/3;e.push({key:"C",data:[g,b,v,x,h,p]}),a=u,l=f,r=h,i=p;break}case"A":{const u=Math.abs(d[0]),f=Math.abs(d[1]),h=d[2],p=d[3],g=d[4],b=d[5],v=d[6];u===0||f===0?(e.push({key:"C",data:[r,i,b,v,b,v]}),r=b,i=v):(r!==b||i!==v)&&(vL(r,i,b,v,u,f,h,p,g).forEach(function(x){e.push({key:"C",data:x})}),r=b,i=v);break}case"Z":e.push({key:"Z",data:[]}),r=s,i=o}n=c}return e}function Vm(t,e,n){return[t*Math.cos(n)-e*Math.sin(n),t*Math.sin(n)+e*Math.cos(n)]}function vL(t,e,n,r,i,s,o,a,l,c){const d=(u=o,Math.PI*u/180);var u;let f=[],h=0,p=0,g=0,b=0;if(c)[h,p,g,b]=c;else{[t,e]=Vm(t,e,-d),[n,r]=Vm(n,r,-d);const H=(t-n)/2,z=(e-r)/2;let ee=H*H/(i*i)+z*z/(s*s);ee>1&&(ee=Math.sqrt(ee),i*=ee,s*=ee);const ce=i*i,le=s*s,te=ce*le-ce*z*z-le*H*H,Z=ce*z*z+le*H*H,de=(a===l?-1:1)*Math.sqrt(Math.abs(te/Z));g=de*i*z/s+(t+n)/2,b=de*-s*H/i+(e+r)/2,h=Math.asin(parseFloat(((e-b)/s).toFixed(9))),p=Math.asin(parseFloat(((r-b)/s).toFixed(9))),t<g&&(h=Math.PI-h),n<g&&(p=Math.PI-p),h<0&&(h=2*Math.PI+h),p<0&&(p=2*Math.PI+p),l&&h>p&&(h-=2*Math.PI),!l&&p>h&&(p-=2*Math.PI)}let v=p-h;if(Math.abs(v)>120*Math.PI/180){const H=p,z=n,ee=r;p=l&&p>h?h+120*Math.PI/180*1:h+120*Math.PI/180*-1,f=vL(n=g+i*Math.cos(p),r=b+s*Math.sin(p),z,ee,i,s,o,0,l,[p,H,g,b])}v=p-h;const x=Math.cos(h),w=Math.sin(h),C=Math.cos(p),P=Math.sin(p),O=Math.tan(v/4),T=4/3*i*O,M=4/3*s*O,D=[t,e],I=[t+T*w,e-M*x],R=[n+T*P,r-M*C],$=[n,r];if(I[0]=2*D[0]-I[0],I[1]=2*D[1]-I[1],c)return[I,R,$].concat(f);{f=[I,R,$].concat(f);const H=[];for(let z=0;z<f.length;z+=3){const ee=Vm(f[z][0],f[z][1],d),ce=Vm(f[z+1][0],f[z+1][1],d),le=Vm(f[z+2][0],f[z+2][1],d);H.push([ee[0],ee[1],ce[0],ce[1],le[0],le[1]])}return H}}const KK={randOffset:function(t,e){return Dt(t,e)},randOffsetWithRange:function(t,e,n){return Wb(t,e,n)},ellipse:function(t,e,n,r,i){const s=wL(n,r,i);return lC(t,e,i,s).opset},doubleLineOps:function(t,e,n,r,i){return nd(t,e,n,r,i,!0)}};function bL(t,e,n,r,i){return{type:"path",ops:nd(t,e,n,r,i)}}function B2(t,e,n){const r=(t||[]).length;if(r>2){const i=[];for(let s=0;s<r-1;s++)i.push(...nd(t[s][0],t[s][1],t[s+1][0],t[s+1][1],n));return e&&i.push(...nd(t[r-1][0],t[r-1][1],t[0][0],t[0][1],n)),{type:"path",ops:i}}return r===2?bL(t[0][0],t[0][1],t[1][0],t[1][1],n):{type:"path",ops:[]}}function JK(t,e,n,r,i){return function(s,o){return B2(s,!0,o)}([[t,e],[t+n,e],[t+n,e+r],[t,e+r]],i)}function NT(t,e){if(t.length){const n=typeof t[0][0]=="number"?[t]:t,r=Uv(n[0],1*(1+.2*e.roughness),e),i=e.disableMultiStroke?[]:Uv(n[0],1.5*(1+.22*e.roughness),RT(e));for(let s=1;s<n.length;s++){const o=n[s];if(o.length){const a=Uv(o,1*(1+.2*e.roughness),e),l=e.disableMultiStroke?[]:Uv(o,1.5*(1+.22*e.roughness),RT(e));for(const c of a)c.op!=="move"&&r.push(c);for(const c of l)c.op!=="move"&&i.push(c)}}return{type:"path",ops:r.concat(i)}}return{type:"path",ops:[]}}function wL(t,e,n){const r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),s=2*Math.PI/i;let o=Math.abs(t/2),a=Math.abs(e/2);const l=1-n.curveFitting;return o+=Dt(o*l,n),a+=Dt(a*l,n),{increment:s,rx:o,ry:a}}function lC(t,e,n,r){const[i,s]=LT(r.increment,t,e,r.rx,r.ry,1,r.increment*Wb(.1,Wb(.4,1,n),n),n);let o=qb(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=LT(r.increment,t,e,r.rx,r.ry,1.5,0,n),l=qb(a,null,n);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function MT(t,e,n,r,i,s,o,a,l){const c=t,d=e;let u=Math.abs(n/2),f=Math.abs(r/2);u+=Dt(.01*u,l),f+=Dt(.01*f,l);let h=i,p=s;for(;h<0;)h+=2*Math.PI,p+=2*Math.PI;p-h>2*Math.PI&&(h=0,p=2*Math.PI);const g=2*Math.PI/l.curveStepCount,b=Math.min(g/2,(p-h)/2),v=DT(b,c,d,u,f,h,p,1,l);if(!l.disableMultiStroke){const x=DT(b,c,d,u,f,h,p,1.5,l);v.push(...x)}return o&&(a?v.push(...nd(c,d,c+u*Math.cos(h),d+f*Math.sin(h),l),...nd(c,d,c+u*Math.cos(p),d+f*Math.sin(p),l)):v.push({op:"lineTo",data:[c,d]},{op:"lineTo",data:[c+u*Math.cos(h),d+f*Math.sin(h)]})),{type:"path",ops:v}}function OT(t,e){const n=yL(mL(uE(t))),r=[];let i=[0,0],s=[0,0];for(const{key:o,data:a}of n)switch(o){case"M":s=[a[0],a[1]],i=[a[0],a[1]];break;case"L":r.push(...nd(s[0],s[1],a[0],a[1],e)),s=[a[0],a[1]];break;case"C":{const[l,c,d,u,f,h]=a;r.push(...YK(l,c,d,u,f,h,s,e)),s=[f,h];break}case"Z":r.push(...nd(s[0],s[1],i[0],i[1],e)),s=[i[0],i[1]]}return{type:"path",ops:r}}function FS(t,e){const n=[];for(const r of t)if(r.length){const i=e.maxRandomnessOffset||0,s=r.length;if(s>2){n.push({op:"move",data:[r[0][0]+Dt(i,e),r[0][1]+Dt(i,e)]});for(let o=1;o<s;o++)n.push({op:"lineTo",data:[r[o][0]+Dt(i,e),r[o][1]+Dt(i,e)]})}}return{type:"fillPath",ops:n}}function Yh(t,e){return function(n,r){let i=n.fillStyle||"hachure";if(!js[i])switch(i){case"zigzag":js[i]||(js[i]=new BK(r));break;case"cross-hatch":js[i]||(js[i]=new UK(r));break;case"dots":js[i]||(js[i]=new HK(r));break;case"dashed":js[i]||(js[i]=new VK(r));break;case"zigzag-line":js[i]||(js[i]=new WK(r));break;default:i="hachure",js[i]||(js[i]=new cE(r))}return js[i]}(e,KK).fillPolygons(t,e)}function RT(t){const e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function xL(t){return t.randomizer||(t.randomizer=new qK(t.seed||0)),t.randomizer.next()}function Wb(t,e,n,r=1){return n.roughness*r*(xL(n)*(e-t)+t)}function Dt(t,e,n=1){return Wb(-t,t,e,n)}function nd(t,e,n,r,i,s=!1){const o=s?i.disableMultiStrokeFill:i.disableMultiStroke,a=cC(t,e,n,r,i,!0,!1);if(o)return a;const l=cC(t,e,n,r,i,!0,!0);return a.concat(l)}function cC(t,e,n,r,i,s,o){const a=Math.pow(t-n,2)+Math.pow(e-r,2),l=Math.sqrt(a);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let d=i.maxRandomnessOffset||0;d*d*100>a&&(d=l/10);const u=d/2,f=.2+.2*xL(i);let h=i.bowing*i.maxRandomnessOffset*(r-e)/200,p=i.bowing*i.maxRandomnessOffset*(t-n)/200;h=Dt(h,i,c),p=Dt(p,i,c);const g=[],b=()=>Dt(u,i,c),v=()=>Dt(d,i,c),x=i.preserveVertices;return o?g.push({op:"move",data:[t+(x?0:b()),e+(x?0:b())]}):g.push({op:"move",data:[t+(x?0:Dt(d,i,c)),e+(x?0:Dt(d,i,c))]}),o?g.push({op:"bcurveTo",data:[h+t+(n-t)*f+b(),p+e+(r-e)*f+b(),h+t+2*(n-t)*f+b(),p+e+2*(r-e)*f+b(),n+(x?0:b()),r+(x?0:b())]}):g.push({op:"bcurveTo",data:[h+t+(n-t)*f+v(),p+e+(r-e)*f+v(),h+t+2*(n-t)*f+v(),p+e+2*(r-e)*f+v(),n+(x?0:v()),r+(x?0:v())]}),g}function Uv(t,e,n){if(!t.length)return[];const r=[];r.push([t[0][0]+Dt(e,n),t[0][1]+Dt(e,n)]),r.push([t[0][0]+Dt(e,n),t[0][1]+Dt(e,n)]);for(let i=1;i<t.length;i++)r.push([t[i][0]+Dt(e,n),t[i][1]+Dt(e,n)]),i===t.length-1&&r.push([t[i][0]+Dt(e,n),t[i][1]+Dt(e,n)]);return qb(r,null,n)}function qb(t,e,n){const r=t.length,i=[];if(r>3){const s=[],o=1-n.curveTightness;i.push({op:"move",data:[t[1][0],t[1][1]]});for(let a=1;a+2<r;a++){const l=t[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*t[a+1][0]-o*t[a-1][0])/6,l[1]+(o*t[a+1][1]-o*t[a-1][1])/6],s[2]=[t[a+1][0]+(o*t[a][0]-o*t[a+2][0])/6,t[a+1][1]+(o*t[a][1]-o*t[a+2][1])/6],s[3]=[t[a+1][0],t[a+1][1]],i.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else r===3?(i.push({op:"move",data:[t[1][0],t[1][1]]}),i.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):r===2&&i.push(...cC(t[0][0],t[0][1],t[1][0],t[1][1],n,!0,!0));return i}function LT(t,e,n,r,i,s,o,a){const l=[],c=[];if(a.roughness===0){t/=4,c.push([e+r*Math.cos(-t),n+i*Math.sin(-t)]);for(let d=0;d<=2*Math.PI;d+=t){const u=[e+r*Math.cos(d),n+i*Math.sin(d)];l.push(u),c.push(u)}c.push([e+r*Math.cos(0),n+i*Math.sin(0)]),c.push([e+r*Math.cos(t),n+i*Math.sin(t)])}else{const d=Dt(.5,a)-Math.PI/2;c.push([Dt(s,a)+e+.9*r*Math.cos(d-t),Dt(s,a)+n+.9*i*Math.sin(d-t)]);const u=2*Math.PI+d-.01;for(let f=d;f<u;f+=t){const h=[Dt(s,a)+e+r*Math.cos(f),Dt(s,a)+n+i*Math.sin(f)];l.push(h),c.push(h)}c.push([Dt(s,a)+e+r*Math.cos(d+2*Math.PI+.5*o),Dt(s,a)+n+i*Math.sin(d+2*Math.PI+.5*o)]),c.push([Dt(s,a)+e+.98*r*Math.cos(d+o),Dt(s,a)+n+.98*i*Math.sin(d+o)]),c.push([Dt(s,a)+e+.9*r*Math.cos(d+.5*o),Dt(s,a)+n+.9*i*Math.sin(d+.5*o)])}return[c,l]}function DT(t,e,n,r,i,s,o,a,l){const c=s+Dt(.1,l),d=[];d.push([Dt(a,l)+e+.9*r*Math.cos(c-t),Dt(a,l)+n+.9*i*Math.sin(c-t)]);for(let u=c;u<=o;u+=t)d.push([Dt(a,l)+e+r*Math.cos(u),Dt(a,l)+n+i*Math.sin(u)]);return d.push([e+r*Math.cos(o),n+i*Math.sin(o)]),d.push([e+r*Math.cos(o),n+i*Math.sin(o)]),qb(d,null,l)}function YK(t,e,n,r,i,s,o,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let d=[0,0];const u=a.disableMultiStroke?1:2,f=a.preserveVertices;for(let h=0;h<u;h++)h===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(f?0:Dt(c[0],a)),o[1]+(f?0:Dt(c[0],a))]}),d=f?[i,s]:[i+Dt(c[h],a),s+Dt(c[h],a)],l.push({op:"bcurveTo",data:[t+Dt(c[h],a),e+Dt(c[h],a),n+Dt(c[h],a),r+Dt(c[h],a),d[0],d[1]]});return l}function Wm(t){return[...t]}function IT(t,e=0){const n=t.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(Wm(t[0]),Wm(t[1]),Wm(t[2]),Wm(t[2]));else{const i=[];i.push(t[0],t[0]);for(let a=1;a<t.length;a++)i.push(t[a]),a===t.length-1&&i.push(t[a]);const s=[],o=1-e;r.push(Wm(i[0]));for(let a=1;a+2<i.length;a++){const l=i[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*i[a+1][0]-o*i[a-1][0])/6,l[1]+(o*i[a+1][1]-o*i[a-1][1])/6],s[2]=[i[a+1][0]+(o*i[a][0]-o*i[a+2][0])/6,i[a+1][1]+(o*i[a][1]-o*i[a+2][1])/6],s[3]=[i[a+1][0],i[a+1][1]],r.push(s[1],s[2],s[3])}}return r}function U2(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function ZK(t,e,n){const r=U2(e,n);if(r===0)return U2(t,e);let i=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/r;return i=Math.max(0,Math.min(1,i)),U2(t,Gd(e,n,i))}function Gd(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function uC(t,e,n,r){const i=r||[];if(function(a,l){const c=a[l+0],d=a[l+1],u=a[l+2],f=a[l+3];let h=3*d[0]-2*c[0]-f[0];h*=h;let p=3*d[1]-2*c[1]-f[1];p*=p;let g=3*u[0]-2*f[0]-c[0];g*=g;let b=3*u[1]-2*f[1]-c[1];return b*=b,h<g&&(h=g),p<b&&(p=b),h+p}(t,e)<n){const a=t[e+0];i.length?(s=i[i.length-1],o=a,Math.sqrt(U2(s,o))>1&&i.push(a)):i.push(a),i.push(t[e+3])}else{const l=t[e+0],c=t[e+1],d=t[e+2],u=t[e+3],f=Gd(l,c,.5),h=Gd(c,d,.5),p=Gd(d,u,.5),g=Gd(f,h,.5),b=Gd(h,p,.5),v=Gd(g,b,.5);uC([l,f,g,v],0,n,i),uC([v,b,p,u],0,n,i)}var s,o;return i}function XK(t,e){return Gb(t,0,t.length,e)}function Gb(t,e,n,r,i){const s=i||[],o=t[e],a=t[n-1];let l=0,c=1;for(let d=e+1;d<n-1;++d){const u=ZK(t[d],o,a);u>l&&(l=u,c=d)}return Math.sqrt(l)>r?(Gb(t,e,c+1,r,s),Gb(t,c,n,r,s)):(s.length||s.push(o),s.push(a)),s}function zS(t,e=.15,n){const r=[],i=(t.length-1)/3;for(let s=0;s<i;s++)uC(t,3*s,e,r);return n&&n>0?Gb(r,0,r.length,n):r}const ao="none";let Kb=class{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,n,r){return{shape:e,sets:n||[],options:r||this.defaultOptions}}line(e,n,r,i,s){const o=this._o(s);return this._d("line",[bL(e,n,r,i,o)],o)}rectangle(e,n,r,i,s){const o=this._o(s),a=[],l=JK(e,n,r,i,o);if(o.fill){const c=[[e,n],[e+r,n],[e+r,n+i],[e,n+i]];o.fillStyle==="solid"?a.push(FS([c],o)):a.push(Yh([c],o))}return o.stroke!==ao&&a.push(l),this._d("rectangle",a,o)}ellipse(e,n,r,i,s){const o=this._o(s),a=[],l=wL(r,i,o),c=lC(e,n,o,l);if(o.fill)if(o.fillStyle==="solid"){const d=lC(e,n,o,l).opset;d.type="fillPath",a.push(d)}else a.push(Yh([c.estimatedPoints],o));return o.stroke!==ao&&a.push(c.opset),this._d("ellipse",a,o)}circle(e,n,r,i){const s=this.ellipse(e,n,r,r,i);return s.shape="circle",s}linearPath(e,n){const r=this._o(n);return this._d("linearPath",[B2(e,!1,r)],r)}arc(e,n,r,i,s,o,a=!1,l){const c=this._o(l),d=[],u=MT(e,n,r,i,s,o,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const f=Object.assign({},c);f.disableMultiStroke=!0;const h=MT(e,n,r,i,s,o,!0,!1,f);h.type="fillPath",d.push(h)}else d.push(function(f,h,p,g,b,v,x){const w=f,C=h;let P=Math.abs(p/2),O=Math.abs(g/2);P+=Dt(.01*P,x),O+=Dt(.01*O,x);let T=b,M=v;for(;T<0;)T+=2*Math.PI,M+=2*Math.PI;M-T>2*Math.PI&&(T=0,M=2*Math.PI);const D=(M-T)/x.curveStepCount,I=[];for(let R=T;R<=M;R+=D)I.push([w+P*Math.cos(R),C+O*Math.sin(R)]);return I.push([w+P*Math.cos(M),C+O*Math.sin(M)]),I.push([w,C]),Yh([I],x)}(e,n,r,i,s,o,c));return c.stroke!==ao&&d.push(u),this._d("arc",d,c)}curve(e,n){const r=this._o(n),i=[],s=NT(e,r);if(r.fill&&r.fill!==ao)if(r.fillStyle==="solid"){const o=NT(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],a=e;if(a.length){const l=typeof a[0][0]=="number"?[a]:a;for(const c of l)c.length<3?o.push(...c):c.length===3?o.push(...zS(IT([c[0],c[0],c[1],c[2]]),10,(1+r.roughness)/2)):o.push(...zS(IT(c),10,(1+r.roughness)/2))}o.length&&i.push(Yh([o],r))}return r.stroke!==ao&&i.push(s),this._d("curve",i,r)}polygon(e,n){const r=this._o(n),i=[],s=B2(e,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(FS([e],r)):i.push(Yh([e],r))),r.stroke!==ao&&i.push(s),this._d("polygon",i,r)}path(e,n){const r=this._o(n),i=[];if(!e)return this._d("path",i,r);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=r.fill&&r.fill!=="transparent"&&r.fill!==ao,o=r.stroke!==ao,a=!!(r.simplification&&r.simplification<1),l=function(d,u,f){const h=yL(mL(uE(d))),p=[];let g=[],b=[0,0],v=[];const x=()=>{v.length>=4&&g.push(...zS(v,u)),v=[]},w=()=>{x(),g.length&&(p.push(g),g=[])};for(const{key:P,data:O}of h)switch(P){case"M":w(),b=[O[0],O[1]],g.push(b);break;case"L":x(),g.push([O[0],O[1]]);break;case"C":if(!v.length){const T=g.length?g[g.length-1]:b;v.push([T[0],T[1]])}v.push([O[0],O[1]]),v.push([O[2],O[3]]),v.push([O[4],O[5]]);break;case"Z":x(),g.push([b[0],b[1]])}if(w(),!f)return p;const C=[];for(const P of p){const O=XK(P,f);O.length&&C.push(O)}return C}(e,1,a?4-4*(r.simplification||1):(1+r.roughness)/2),c=OT(e,r);if(s)if(r.fillStyle==="solid")if(l.length===1){const d=OT(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(d.ops)})}else i.push(FS(l,r));else i.push(Yh(l,r));return o&&(a?l.forEach(d=>{i.push(B2(d,!1,r))}):i.push(c)),this._d("path",i,r)}opsToPath(e,n){let r="";for(const i of e.ops){const s=typeof n=="number"&&n>=0?i.data.map(o=>+o.toFixed(n)):i.data;switch(i.op){case"move":r+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":r+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":r+=`L${s[0]} ${s[1]} `}}return r.trim()}toPaths(e){const n=e.sets||[],r=e.options||this.defaultOptions,i=[];for(const s of n){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:ao};break;case"fillPath":o={d:this.opsToPath(s),stroke:ao,strokeWidth:0,fill:r.fill||ao};break;case"fillSketch":o=this.fillSketch(s,r)}o&&i.push(o)}return i}fillSketch(e,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(e),stroke:n.fill||ao,strokeWidth:r,fill:ao}}_mergedShape(e){return e.filter((n,r)=>r===0||n.op!=="move")}},QK=class{constructor(e,n){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new Kb(n)}draw(e){const n=e.sets||[],r=e.options||this.getDefaultOptions(),i=this.ctx,s=e.options.fixedDecimalPlaceDigits;for(const o of n)switch(o.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,o,s),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const a=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,o,s,a),i.restore();break}case"fillSketch":this.fillSketch(i,o,r)}}fillSketch(e,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),e.save(),r.fillLineDash&&e.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(e.lineDashOffset=r.fillLineDashOffset),e.strokeStyle=r.fill||"",e.lineWidth=i,this._drawToContext(e,n,r.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,n,r,i="nonzero"){e.beginPath();for(const s of n.ops){const o=typeof r=="number"&&r>=0?s.data.map(a=>+a.toFixed(r)):s.data;switch(s.op){case"move":e.moveTo(o[0],o[1]);break;case"bcurveTo":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":e.lineTo(o[0],o[1])}}n.type==="fillPath"?e.fill(i):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,n,r,i,s){const o=this.gen.line(e,n,r,i,s);return this.draw(o),o}rectangle(e,n,r,i,s){const o=this.gen.rectangle(e,n,r,i,s);return this.draw(o),o}ellipse(e,n,r,i,s){const o=this.gen.ellipse(e,n,r,i,s);return this.draw(o),o}circle(e,n,r,i){const s=this.gen.circle(e,n,r,i);return this.draw(s),s}linearPath(e,n){const r=this.gen.linearPath(e,n);return this.draw(r),r}polygon(e,n){const r=this.gen.polygon(e,n);return this.draw(r),r}arc(e,n,r,i,s,o,a=!1,l){const c=this.gen.arc(e,n,r,i,s,o,a,l);return this.draw(c),c}curve(e,n){const r=this.gen.curve(e,n);return this.draw(r),r}path(e,n){const r=this.gen.path(e,n);return this.draw(r),r}};const Hv="http://www.w3.org/2000/svg";let eJ=class{constructor(e,n){this.svg=e,this.gen=new Kb(n)}draw(e){const n=e.sets||[],r=e.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,s=i.createElementNS(Hv,"g"),o=e.options.fixedDecimalPlaceDigits;for(const a of n){let l=null;switch(a.type){case"path":l=i.createElementNS(Hv,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",r.stroke),l.setAttribute("stroke-width",r.strokeWidth+""),l.setAttribute("fill","none"),r.strokeLineDash&&l.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break;case"fillPath":l=i.createElementNS(Hv,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",r.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(i,a,r)}l&&s.appendChild(l)}return s}fillSketch(e,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const s=e.createElementNS(Hv,"path");return s.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),s.setAttribute("stroke",r.fill||""),s.setAttribute("stroke-width",i+""),s.setAttribute("fill","none"),r.fillLineDash&&s.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,n){return this.gen.opsToPath(e,n)}line(e,n,r,i,s){const o=this.gen.line(e,n,r,i,s);return this.draw(o)}rectangle(e,n,r,i,s){const o=this.gen.rectangle(e,n,r,i,s);return this.draw(o)}ellipse(e,n,r,i,s){const o=this.gen.ellipse(e,n,r,i,s);return this.draw(o)}circle(e,n,r,i){const s=this.gen.circle(e,n,r,i);return this.draw(s)}linearPath(e,n){const r=this.gen.linearPath(e,n);return this.draw(r)}polygon(e,n){const r=this.gen.polygon(e,n);return this.draw(r)}arc(e,n,r,i,s,o,a=!1,l){const c=this.gen.arc(e,n,r,i,s,o,a,l);return this.draw(c)}curve(e,n){const r=this.gen.curve(e,n);return this.draw(r)}path(e,n){const r=this.gen.path(e,n);return this.draw(r)}};var SL={canvas:(t,e)=>new QK(t,e),svg:(t,e)=>new eJ(t,e),generator:t=>new Kb(t),newSeed:()=>Kb.newSeed()};const tJ="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let kL=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;)e+=tJ[n[t]&63];return e};function $T(t,e,n,r=i=>i){return t*r(.5-e*(.5-n))}function nJ(t){return[-t[0],-t[1]]}function ba(t,e){return[t[0]+e[0],t[1]+e[1]]}function $o(t,e){return[t[0]-e[0],t[1]-e[1]]}function ya(t,e){return[t[0]*e,t[1]*e]}function rJ(t,e){return[t[0]/e,t[1]/e]}function qm(t){return[t[1],-t[0]]}function jT(t,e){return t[0]*e[0]+t[1]*e[1]}function iJ(t,e){return t[0]===e[0]&&t[1]===e[1]}function sJ(t){return Math.hypot(t[0],t[1])}function oJ(t){return t[0]*t[0]+t[1]*t[1]}function FT(t,e){return oJ($o(t,e))}function CL(t){return rJ(t,sJ(t))}function aJ(t,e){return Math.hypot(t[1]-e[1],t[0]-e[0])}function Gm(t,e,n){let r=Math.sin(n),i=Math.cos(n),s=t[0]-e[0],o=t[1]-e[1],a=s*i-o*r,l=s*r+o*i;return[a+e[0],l+e[1]]}function dC(t,e,n){return ba(t,ya($o(e,t),n))}function zT(t,e,n){return ba(t,ya(e,n))}var{min:Zh,PI:lJ}=Math,BT=.275,Km=lJ+1e-4;function cJ(t,e={}){let{size:n=16,smoothing:r=.5,thinning:i=.5,simulatePressure:s=!0,easing:o=le=>le,start:a={},end:l={},last:c=!1}=e,{cap:d=!0,easing:u=le=>le*(2-le)}=a,{cap:f=!0,easing:h=le=>--le*le*le+1}=l;if(t.length===0||n<=0)return[];let p=t[t.length-1].runningLength,g=a.taper===!1?0:a.taper===!0?Math.max(n,p):a.taper,b=l.taper===!1?0:l.taper===!0?Math.max(n,p):l.taper,v=Math.pow(n*r,2),x=[],w=[],C=t.slice(0,10).reduce((le,te)=>{let Z=te.pressure;if(s){let de=Zh(1,te.distance/n),Ce=Zh(1,1-de);Z=Zh(1,le+(Ce-le)*(de*BT))}return(le+Z)/2},t[0].pressure),P=$T(n,i,t[t.length-1].pressure,o),O,T=t[0].vector,M=t[0].point,D=M,I=M,R=D,$=!1;for(let le=0;le<t.length;le++){let{pressure:te}=t[le],{point:Z,vector:de,distance:Ce,runningLength:F}=t[le];if(le<t.length-1&&p-F<3)continue;if(i){if(s){let me=Zh(1,Ce/n),_e=Zh(1,1-me);te=Zh(1,C+(_e-C)*(me*BT))}P=$T(n,i,te,o)}else P=n/2;O===void 0&&(O=P);let X=F<g?u(F/g):1,re=p-F<b?h((p-F)/b):1;P=Math.max(.01,P*Math.min(X,re));let ue=(le<t.length-1?t[le+1]:t[le]).vector,he=le<t.length-1?jT(de,ue):1,fe=jT(de,T)<0&&!$,be=he!==null&&he<0;if(fe||be){let me=ya(qm(T),P);for(let _e=1/13,Te=0;Te<=1;Te+=_e)I=Gm($o(Z,me),Z,Km*Te),x.push(I),R=Gm(ba(Z,me),Z,Km*-Te),w.push(R);M=I,D=R,be&&($=!0);continue}if($=!1,le===t.length-1){let me=ya(qm(de),P);x.push($o(Z,me)),w.push(ba(Z,me));continue}let pe=ya(qm(dC(ue,de,he)),P);I=$o(Z,pe),(le<=1||FT(M,I)>v)&&(x.push(I),M=I),R=ba(Z,pe),(le<=1||FT(D,R)>v)&&(w.push(R),D=R),C=te,T=de}let H=t[0].point.slice(0,2),z=t.length>1?t[t.length-1].point.slice(0,2):ba(t[0].point,[1,1]),ee=[],ce=[];if(t.length===1){if(!(g||b)||c){let le=zT(H,CL(qm($o(H,z))),-(O||P)),te=[];for(let Z=1/13,de=Z;de<=1;de+=Z)te.push(Gm(le,H,Km*2*de));return te}}else{if(!(g||b&&t.length===1))if(d)for(let te=1/13,Z=te;Z<=1;Z+=te){let de=Gm(w[0],H,Km*Z);ee.push(de)}else{let te=$o(x[0],w[0]),Z=ya(te,.5),de=ya(te,.51);ee.push($o(H,Z),$o(H,de),ba(H,de),ba(H,Z))}let le=qm(nJ(t[t.length-1].vector));if(b||g&&t.length===1)ce.push(z);else if(f){let te=zT(z,le,P);for(let Z=1/29,de=Z;de<1;de+=Z)ce.push(Gm(te,z,Km*3*de))}else ce.push(ba(z,ya(le,P)),ba(z,ya(le,P*.99)),$o(z,ya(le,P*.99)),$o(z,ya(le,P)))}return x.concat(ce,w.reverse(),ee)}function uJ(t,e={}){var n;let{streamline:r=.5,size:i=16,last:s=!1}=e;if(t.length===0)return[];let o=.15+(1-r)*.85,a=Array.isArray(t[0])?t:t.map(({x:h,y:p,pressure:g=.5})=>[h,p,g]);if(a.length===2){let h=a[1];a=a.slice(0,-1);for(let p=1;p<5;p++)a.push(dC(a[0],h,p/4))}a.length===1&&(a=[...a,[...ba(a[0],[1,1]),...a[0].slice(2)]]);let l=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,d=0,u=l[0],f=a.length-1;for(let h=1;h<a.length;h++){let p=s&&h===f?a[h].slice(0,2):dC(u.point,a[h],o);if(iJ(u.point,p))continue;let g=aJ(p,u.point);if(d+=g,h<f&&!c){if(d<i)continue;c=!0}u={point:p,pressure:a[h][2]>=0?a[h][2]:.5,vector:CL($o(u.point,p)),distance:g,runningLength:d},l.push(u)}return l[0].vector=((n=l[1])==null?void 0:n.vector)||[0,0],l}function dJ(t,e={}){return cJ(uJ(t,e),e)}const fJ={gray1:"#111111",gray2:"#191919",gray3:"#222222",gray4:"#2a2a2a",gray5:"#313131",gray6:"#3a3a3a",gray7:"#484848",gray8:"#606060",gray9:"#6e6e6e",gray10:"#7b7b7b",gray11:"#b4b4b4",gray12:"#eeeeee"},hJ={grayA1:"#00000000",grayA2:"#ffffff09",grayA3:"#ffffff12",grayA4:"#ffffff1b",grayA5:"#ffffff22",grayA6:"#ffffff2c",grayA7:"#ffffff3b",grayA8:"#ffffff55",grayA9:"#ffffff64",grayA10:"#ffffff72",grayA11:"#ffffffaf",grayA12:"#ffffffed"},pJ={mauve1:"#121113",mauve2:"#1a191b",mauve3:"#232225",mauve4:"#2b292d",mauve5:"#323035",mauve6:"#3c393f",mauve7:"#49474e",mauve8:"#625f69",mauve9:"#6f6d78",mauve10:"#7c7a85",mauve11:"#b5b2bc",mauve12:"#eeeef0"},gJ={mauveA1:"#00000000",mauveA2:"#f5f4f609",mauveA3:"#ebeaf814",mauveA4:"#eee5f81d",mauveA5:"#efe6fe25",mauveA6:"#f1e6fd30",mauveA7:"#eee9ff40",mauveA8:"#eee7ff5d",mauveA9:"#eae6fd6e",mauveA10:"#ece9fd7c",mauveA11:"#f5f1ffb7",mauveA12:"#fdfdffef"},mJ={slate1:"#111113",slate2:"#18191b",slate3:"#212225",slate4:"#272a2d",slate5:"#2e3135",slate6:"#363a3f",slate7:"#43484e",slate8:"#5a6169",slate9:"#696e77",slate10:"#777b84",slate11:"#b0b4ba",slate12:"#edeef0"},yJ={slateA1:"#00000000",slateA2:"#d8f4f609",slateA3:"#ddeaf814",slateA4:"#d3edf81d",slateA5:"#d9edfe25",slateA6:"#d6ebfd30",slateA7:"#d9edff40",slateA8:"#d9edff5d",slateA9:"#dfebfd6d",slateA10:"#e5edfd7b",slateA11:"#f1f7feb5",slateA12:"#fcfdffef"},vJ={sage1:"#101211",sage2:"#171918",sage3:"#202221",sage4:"#272a29",sage5:"#2e3130",sage6:"#373b39",sage7:"#444947",sage8:"#5b625f",sage9:"#63706b",sage10:"#717d79",sage11:"#adb5b2",sage12:"#eceeed"},bJ={sageA1:"#00000000",sageA2:"#f0f2f108",sageA3:"#f3f5f412",sageA4:"#f2fefd1a",sageA5:"#f1fbfa22",sageA6:"#edfbf42d",sageA7:"#edfcf73c",sageA8:"#ebfdf657",sageA9:"#dffdf266",sageA10:"#e5fdf674",sageA11:"#f4fefbb0",sageA12:"#fdfffeed"},wJ={olive1:"#111210",olive2:"#181917",olive3:"#212220",olive4:"#282a27",olive5:"#2f312e",olive6:"#383a36",olive7:"#454843",olive8:"#5c625b",olive9:"#687066",olive10:"#767d74",olive11:"#afb5ad",olive12:"#eceeec"},xJ={oliveA1:"#00000000",oliveA2:"#f1f2f008",oliveA3:"#f4f5f312",oliveA4:"#f3fef21a",oliveA5:"#f2fbf122",oliveA6:"#f4faed2c",oliveA7:"#f2fced3b",oliveA8:"#edfdeb57",oliveA9:"#ebfde766",oliveA10:"#f0fdec74",oliveA11:"#f6fef4b0",oliveA12:"#fdfffded"},SJ={sand1:"#111110",sand2:"#191918",sand3:"#222221",sand4:"#2a2a28",sand5:"#31312e",sand6:"#3b3a37",sand7:"#494844",sand8:"#62605b",sand9:"#6f6d66",sand10:"#7c7b74",sand11:"#b5b3ad",sand12:"#eeeeec"},kJ={sandA1:"#00000000",sandA2:"#f4f4f309",sandA3:"#f6f6f513",sandA4:"#fefef31b",sandA5:"#fbfbeb23",sandA6:"#fffaed2d",sandA7:"#fffbed3c",sandA8:"#fff9eb57",sandA9:"#fffae965",sandA10:"#fffdee73",sandA11:"#fffcf4b0",sandA12:"#fffffded"},CJ={tomato1:"#181111",tomato2:"#1f1513",tomato3:"#391714",tomato4:"#4e1511",tomato5:"#5e1c16",tomato6:"#6e2920",tomato7:"#853a2d",tomato8:"#ac4d39",tomato9:"#e54d2e",tomato10:"#ec6142",tomato11:"#ff977d",tomato12:"#fbd3cb"},_J={tomatoA1:"#f1121208",tomatoA2:"#ff55330f",tomatoA3:"#ff35232b",tomatoA4:"#fd201142",tomatoA5:"#fe332153",tomatoA6:"#ff4f3864",tomatoA7:"#fd644a7d",tomatoA8:"#fe6d4ea7",tomatoA9:"#fe5431e4",tomatoA10:"#ff6847eb",tomatoA11:"#ff977d",tomatoA12:"#ffd6cefb"},AJ={red1:"#191111",red2:"#201314",red3:"#3b1219",red4:"#500f1c",red5:"#611623",red6:"#72232d",red7:"#8c333a",red8:"#b54548",red9:"#e5484d",red10:"#ec5d5e",red11:"#ff9592",red12:"#ffd1d9"},EJ={redA1:"#f4121209",redA2:"#f22f3e11",redA3:"#ff173f2d",redA4:"#fe0a3b44",redA5:"#ff204756",redA6:"#ff3e5668",redA7:"#ff536184",redA8:"#ff5d61b0",redA9:"#fe4e54e4",redA10:"#ff6465eb",redA11:"#ff9592",redA12:"#ffd1d9"},PJ={ruby1:"#191113",ruby2:"#1e1517",ruby3:"#3a141e",ruby4:"#4e1325",ruby5:"#5e1a2e",ruby6:"#6f2539",ruby7:"#883447",ruby8:"#b3445a",ruby9:"#e54666",ruby10:"#ec5a72",ruby11:"#ff949d",ruby12:"#fed2e1"},TJ={rubyA1:"#f4124a09",rubyA2:"#fe5a7f0e",rubyA3:"#ff235d2c",rubyA4:"#fd195e42",rubyA5:"#fe2d6b53",rubyA6:"#ff447665",rubyA7:"#ff577d80",rubyA8:"#ff5c7cae",rubyA9:"#fe4c70e4",rubyA10:"#ff617beb",rubyA11:"#ff949d",rubyA12:"#ffd3e2fe"},NJ={crimson1:"#191114",crimson2:"#201318",crimson3:"#381525",crimson4:"#4d122f",crimson5:"#5c1839",crimson6:"#6d2545",crimson7:"#873356",crimson8:"#b0436e",crimson9:"#e93d82",crimson10:"#ee518a",crimson11:"#ff92ad",crimson12:"#fdd3e8"},MJ={crimsonA1:"#f4126709",crimsonA2:"#f22f7a11",crimsonA3:"#fe2a8b2a",crimsonA4:"#fd158741",crimsonA5:"#fd278f51",crimsonA6:"#fe459763",crimsonA7:"#fd559b7f",crimsonA8:"#fe5b9bab",crimsonA9:"#fe418de8",crimsonA10:"#ff5693ed",crimsonA11:"#ff92ad",crimsonA12:"#ffd5eafd"},OJ={pink1:"#191117",pink2:"#21121d",pink3:"#37172f",pink4:"#4b143d",pink5:"#591c47",pink6:"#692955",pink7:"#833869",pink8:"#a84885",pink9:"#d6409f",pink10:"#de51a8",pink11:"#ff8dcc",pink12:"#fdd1ea"},RJ={pinkA1:"#f412bc09",pinkA2:"#f420bb12",pinkA3:"#fe37cc29",pinkA4:"#fc1ec43f",pinkA5:"#fd35c24e",pinkA6:"#fd51c75f",pinkA7:"#fd62c87b",pinkA8:"#ff68c8a2",pinkA9:"#fe49bcd4",pinkA10:"#ff5cc0dc",pinkA11:"#ff8dcc",pinkA12:"#ffd3ecfd"},LJ={plum1:"#181118",plum2:"#201320",plum3:"#351a35",plum4:"#451d47",plum5:"#512454",plum6:"#5e3061",plum7:"#734079",plum8:"#92549c",plum9:"#ab4aba",plum10:"#b658c4",plum11:"#e796f3",plum12:"#f4d4f4"},DJ={plumA1:"#f112f108",plumA2:"#f22ff211",plumA3:"#fd4cfd27",plumA4:"#f646ff3a",plumA5:"#f455ff48",plumA6:"#f66dff56",plumA7:"#f07cfd70",plumA8:"#ee84ff95",plumA9:"#e961feb6",plumA10:"#ed70ffc0",plumA11:"#f19cfef3",plumA12:"#feddfef4"},IJ={purple1:"#18111b",purple2:"#1e1523",purple3:"#301c3b",purple4:"#3d224e",purple5:"#48295c",purple6:"#54346b",purple7:"#664282",purple8:"#8457aa",purple9:"#8e4ec6",purple10:"#9a5cd0",purple11:"#d19dff",purple12:"#ecd9fa"},$J={purpleA1:"#b412f90b",purpleA2:"#b744f714",purpleA3:"#c150ff2d",purpleA4:"#bb53fd42",purpleA5:"#be5cfd51",purpleA6:"#c16dfd61",purpleA7:"#c378fd7a",purpleA8:"#c47effa4",purpleA9:"#b661ffc2",purpleA10:"#bc6fffcd",purpleA11:"#d19dff",purpleA12:"#f1ddfffa"},jJ={violet1:"#14121f",violet2:"#1b1525",violet3:"#291f43",violet4:"#33255b",violet5:"#3c2e69",violet6:"#473876",violet7:"#56468b",violet8:"#6958ad",violet9:"#6e56cf",violet10:"#7d66d9",violet11:"#baa7ff",violet12:"#e2ddfe"},FJ={violetA1:"#4422ff0f",violetA2:"#853ff916",violetA3:"#8354fe36",violetA4:"#7d51fd50",violetA5:"#845ffd5f",violetA6:"#8f6cfd6d",violetA7:"#9879ff83",violetA8:"#977dfea8",violetA9:"#8668ffcc",violetA10:"#9176fed7",violetA11:"#baa7ff",violetA12:"#e3defffe"},zJ={iris1:"#13131e",iris2:"#171625",iris3:"#202248",iris4:"#262a65",iris5:"#303374",iris6:"#3d3e82",iris7:"#4a4a95",iris8:"#5958b1",iris9:"#5b5bd6",iris10:"#6e6ade",iris11:"#b1a9ff",iris12:"#e0dffe"},BJ={irisA1:"#3636fe0e",irisA2:"#564bf916",irisA3:"#525bff3b",irisA4:"#4d58ff5a",irisA5:"#5b62fd6b",irisA6:"#6d6ffd7a",irisA7:"#7777fe8e",irisA8:"#7b7afeac",irisA9:"#6a6afed4",irisA10:"#7d79ffdc",irisA11:"#b1a9ff",irisA12:"#e1e0fffe"},UJ={indigo1:"#11131f",indigo2:"#141726",indigo3:"#182449",indigo4:"#1d2e62",indigo5:"#253974",indigo6:"#304384",indigo7:"#3a4f97",indigo8:"#435db1",indigo9:"#3e63dd",indigo10:"#5472e4",indigo11:"#9eb1ff",indigo12:"#d6e1ff"},HJ={indigoA1:"#1133ff0f",indigoA2:"#3354fa17",indigoA3:"#2f62ff3c",indigoA4:"#3566ff57",indigoA5:"#4171fd6b",indigoA6:"#5178fd7c",indigoA7:"#5a7fff90",indigoA8:"#5b81feac",indigoA9:"#4671ffdb",indigoA10:"#5c7efee3",indigoA11:"#9eb1ff",indigoA12:"#d6e1ff"},VJ={blue1:"#0d1520",blue2:"#111927",blue3:"#0d2847",blue4:"#003362",blue5:"#004074",blue6:"#104d87",blue7:"#205d9e",blue8:"#2870bd",blue9:"#0090ff",blue10:"#3b9eff",blue11:"#70b8ff",blue12:"#c2e6ff"},WJ={blueA1:"#004df211",blueA2:"#1166fb18",blueA3:"#0077ff3a",blueA4:"#0075ff57",blueA5:"#0081fd6b",blueA6:"#0f89fd7f",blueA7:"#2a91fe98",blueA8:"#3094feb9",blueA9:"#0090ff",blueA10:"#3b9eff",blueA11:"#70b8ff",blueA12:"#c2e6ff"},qJ={cyan1:"#0b161a",cyan2:"#101b20",cyan3:"#082c36",cyan4:"#003848",cyan5:"#004558",cyan6:"#045468",cyan7:"#12677e",cyan8:"#11809c",cyan9:"#00a2c7",cyan10:"#23afd0",cyan11:"#4ccce6",cyan12:"#b6ecf7"},GJ={cyanA1:"#0091f70a",cyanA2:"#02a7f211",cyanA3:"#00befd28",cyanA4:"#00baff3b",cyanA5:"#00befd4d",cyanA6:"#00c7fd5e",cyanA7:"#14cdff75",cyanA8:"#11cfff95",cyanA9:"#00cfffc3",cyanA10:"#28d6ffcd",cyanA11:"#52e1fee5",cyanA12:"#bbf3fef7"},KJ={teal1:"#0d1514",teal2:"#111c1b",teal3:"#0d2d2a",teal4:"#023b37",teal5:"#084843",teal6:"#145750",teal7:"#1c6961",teal8:"#207e73",teal9:"#12a594",teal10:"#0eb39e",teal11:"#0bd8b6",teal12:"#adf0dd"},JJ={tealA1:"#00deab05",tealA2:"#12fbe60c",tealA3:"#00ffe61e",tealA4:"#00ffe92d",tealA5:"#00ffea3b",tealA6:"#1cffe84b",tealA7:"#2efde85f",tealA8:"#32ffe775",tealA9:"#13ffe49f",tealA10:"#0dffe0ae",tealA11:"#0afed5d6",tealA12:"#b8ffebef"},YJ={jade1:"#0d1512",jade2:"#121c18",jade3:"#0f2e22",jade4:"#0b3b2c",jade5:"#114837",jade6:"#1b5745",jade7:"#246854",jade8:"#2a7e68",jade9:"#29a383",jade10:"#27b08b",jade11:"#1fd8a4",jade12:"#adf0d4"},ZJ={jadeA1:"#00de4505",jadeA2:"#27fba60c",jadeA3:"#02f99920",jadeA4:"#00ffaa2d",jadeA5:"#11ffb63b",jadeA6:"#34ffc24b",jadeA7:"#45fdc75e",jadeA8:"#48ffcf75",jadeA9:"#38feca9d",jadeA10:"#31fec7ab",jadeA11:"#21fec0d6",jadeA12:"#b8ffe1ef"},XJ={green1:"#0e1512",green2:"#121b17",green3:"#132d21",green4:"#113b29",green5:"#174933",green6:"#20573e",green7:"#28684a",green8:"#2f7c57",green9:"#30a46c",green10:"#33b074",green11:"#3dd68c",green12:"#b1f1cb"},QJ={greenA1:"#00de4505",greenA2:"#29f99d0b",greenA3:"#22ff991e",greenA4:"#11ff992d",greenA5:"#2bffa23c",greenA6:"#44ffaa4b",greenA7:"#50fdac5e",greenA8:"#54ffad73",greenA9:"#44ffa49e",greenA10:"#43fea4ab",greenA11:"#46fea5d4",greenA12:"#bbffd7f0"},eY={grass1:"#0e1511",grass2:"#141a15",grass3:"#1b2a1e",grass4:"#1d3a24",grass5:"#25482d",grass6:"#2d5736",grass7:"#366740",grass8:"#3e7949",grass9:"#46a758",grass10:"#53b365",grass11:"#71d083",grass12:"#c2f0c2"},tY={grassA1:"#00de1205",grassA2:"#5ef7780a",grassA3:"#70fe8c1b",grassA4:"#57ff802c",grassA5:"#68ff8b3b",grassA6:"#71ff8f4b",grassA7:"#77fd925d",grassA8:"#77fd9070",grassA9:"#65ff82a1",grassA10:"#72ff8dae",grassA11:"#89ff9fcd",grassA12:"#ceffceef"},nY={brown1:"#12110f",brown2:"#1c1816",brown3:"#28211d",brown4:"#322922",brown5:"#3e3128",brown6:"#4d3c2f",brown7:"#614a39",brown8:"#7c5f46",brown9:"#ad7f58",brown10:"#b88c67",brown11:"#dbb594",brown12:"#f2e1ca"},rY={brownA1:"#91110002",brownA2:"#fba67c0c",brownA3:"#fcb58c19",brownA4:"#fbbb8a24",brownA5:"#fcb88931",brownA6:"#fdba8741",brownA7:"#ffbb8856",brownA8:"#ffbe8773",brownA9:"#feb87da8",brownA10:"#ffc18cb3",brownA11:"#fed1aad9",brownA12:"#feecd4f2"},iY={bronze1:"#141110",bronze2:"#1c1917",bronze3:"#262220",bronze4:"#302a27",bronze5:"#3b3330",bronze6:"#493e3a",bronze7:"#5a4c47",bronze8:"#6f5f58",bronze9:"#a18072",bronze10:"#ae8c7e",bronze11:"#d4b3a5",bronze12:"#ede0d9"},sY={bronzeA1:"#d1110004",bronzeA2:"#fbbc910c",bronzeA3:"#faceb817",bronzeA4:"#facdb622",bronzeA5:"#ffd2c12d",bronzeA6:"#ffd1c03c",bronzeA7:"#fdd0c04f",bronzeA8:"#ffd6c565",bronzeA9:"#fec7b09b",bronzeA10:"#fecab5a9",bronzeA11:"#ffd7c6d1",bronzeA12:"#fff1e9ec"},oY={gold1:"#121211",gold2:"#1b1a17",gold3:"#24231f",gold4:"#2d2b26",gold5:"#38352e",gold6:"#444039",gold7:"#544f46",gold8:"#696256",gold9:"#978365",gold10:"#a39073",gold11:"#cbb99f",gold12:"#e8e2d9"},aY={goldA1:"#91911102",goldA2:"#f9e29d0b",goldA3:"#f8ecbb15",goldA4:"#ffeec41e",goldA5:"#feecc22a",goldA6:"#feebcb37",goldA7:"#ffedcd48",goldA8:"#fdeaca5f",goldA9:"#ffdba690",goldA10:"#fedfb09d",goldA11:"#fee7c6c8",goldA12:"#fef7ede7"},lY={sky1:"#0d141f",sky2:"#111a27",sky3:"#112840",sky4:"#113555",sky5:"#154467",sky6:"#1b537b",sky7:"#1f6692",sky8:"#197cae",sky9:"#7ce2fe",sky10:"#a8eeff",sky11:"#75c7f0",sky12:"#c2f3ff"},cY={skyA1:"#0044ff0f",skyA2:"#1171fb18",skyA3:"#1184fc33",skyA4:"#128fff49",skyA5:"#1c9dfd5d",skyA6:"#28a5ff72",skyA7:"#2badfe8b",skyA8:"#1db2fea9",skyA9:"#7ce3fffe",skyA10:"#a8eeff",skyA11:"#7cd3ffef",skyA12:"#c2f3ff"},uY={mint1:"#0e1515",mint2:"#0f1b1b",mint3:"#092c2b",mint4:"#003a38",mint5:"#004744",mint6:"#105650",mint7:"#1e685f",mint8:"#277f70",mint9:"#86ead4",mint10:"#a8f5e5",mint11:"#58d5ba",mint12:"#c4f5e1"},dY={mintA1:"#00dede05",mintA2:"#00f9f90b",mintA3:"#00fff61d",mintA4:"#00fff42c",mintA5:"#00fff23a",mintA6:"#0effeb4a",mintA7:"#34fde55e",mintA8:"#41ffdf76",mintA9:"#92ffe7e9",mintA10:"#aefeedf5",mintA11:"#67ffded2",mintA12:"#cbfee9f5"},fY={lime1:"#11130c",lime2:"#151a10",lime3:"#1f2917",lime4:"#29371d",lime5:"#334423",lime6:"#3d522a",lime7:"#496231",lime8:"#577538",lime9:"#bdee63",lime10:"#d4ff70",lime11:"#bde56c",lime12:"#e3f7ba"},hY={limeA1:"#11bb0003",limeA2:"#78f7000a",limeA3:"#9bfd4c1a",limeA4:"#a7fe5c29",limeA5:"#affe6537",limeA6:"#b2fe6d46",limeA7:"#b6ff6f57",limeA8:"#b6fd6d6c",limeA9:"#caff69ed",limeA10:"#d4ff70",limeA11:"#d1fe77e4",limeA12:"#e9febff7"},pY={yellow1:"#14120b",yellow2:"#1b180f",yellow3:"#2d2305",yellow4:"#362b00",yellow5:"#433500",yellow6:"#524202",yellow7:"#665417",yellow8:"#836a21",yellow9:"#ffe629",yellow10:"#ffff57",yellow11:"#f5e147",yellow12:"#f6eeb4"},gY={yellowA1:"#d1510004",yellowA2:"#f9b4000b",yellowA3:"#ffaa001e",yellowA4:"#fdb70028",yellowA5:"#febb0036",yellowA6:"#fec40046",yellowA7:"#fdcb225c",yellowA8:"#fdca327b",yellowA9:"#ffe629",yellowA10:"#ffff57",yellowA11:"#fee949f5",yellowA12:"#fef6baf6"},mY={amber1:"#16120c",amber2:"#1d180f",amber3:"#302008",amber4:"#3f2700",amber5:"#4d3000",amber6:"#5c3d05",amber7:"#714f19",amber8:"#8f6424",amber9:"#ffc53d",amber10:"#ffd60a",amber11:"#ffca16",amber12:"#ffe7b3"},yY={amberA1:"#e63c0006",amberA2:"#fd9b000d",amberA3:"#fa820022",amberA4:"#fc820032",amberA5:"#fd8b0041",amberA6:"#fd9b0051",amberA7:"#ffab2567",amberA8:"#ffae3587",amberA9:"#ffc53d",amberA10:"#ffd60a",amberA11:"#ffca16",amberA12:"#ffe7b3"},vY={orange1:"#17120e",orange2:"#1e160f",orange3:"#331e0b",orange4:"#462100",orange5:"#562800",orange6:"#66350c",orange7:"#7e451d",orange8:"#a35829",orange9:"#f76b15",orange10:"#ff801f",orange11:"#ffa057",orange12:"#ffe0c2"},bY={orangeA1:"#ec360007",orangeA2:"#fe6d000e",orangeA3:"#fb6a0025",orangeA4:"#ff590039",orangeA5:"#ff61004a",orangeA6:"#fd75045c",orangeA7:"#ff832c75",orangeA8:"#fe84389d",orangeA9:"#fe6d15f7",orangeA10:"#ff801f",orangeA11:"#ffa057",orangeA12:"#ffe0c2"},wY={gray1:"#fcfcfc",gray2:"#f9f9f9",gray3:"#f0f0f0",gray4:"#e8e8e8",gray5:"#e0e0e0",gray6:"#d9d9d9",gray7:"#cecece",gray8:"#bbbbbb",gray9:"#8d8d8d",gray10:"#838383",gray11:"#646464",gray12:"#202020"},xY={grayA1:"#00000003",grayA2:"#00000006",grayA3:"#0000000f",grayA4:"#00000017",grayA5:"#0000001f",grayA6:"#00000026",grayA7:"#00000031",grayA8:"#00000044",grayA9:"#00000072",grayA10:"#0000007c",grayA11:"#0000009b",grayA12:"#000000df"},SY={mauve1:"#fdfcfd",mauve2:"#faf9fb",mauve3:"#f2eff3",mauve4:"#eae7ec",mauve5:"#e3dfe6",mauve6:"#dbd8e0",mauve7:"#d0cdd7",mauve8:"#bcbac7",mauve9:"#8e8c99",mauve10:"#84828e",mauve11:"#65636d",mauve12:"#211f26"},kY={mauveA1:"#55005503",mauveA2:"#2b005506",mauveA3:"#30004010",mauveA4:"#20003618",mauveA5:"#20003820",mauveA6:"#14003527",mauveA7:"#10003332",mauveA8:"#08003145",mauveA9:"#05001d73",mauveA10:"#0500197d",mauveA11:"#0400119c",mauveA12:"#020008e0"},CY={slate1:"#fcfcfd",slate2:"#f9f9fb",slate3:"#f0f0f3",slate4:"#e8e8ec",slate5:"#e0e1e6",slate6:"#d9d9e0",slate7:"#cdced6",slate8:"#b9bbc6",slate9:"#8b8d98",slate10:"#80838d",slate11:"#60646c",slate12:"#1c2024"},_Y={slateA1:"#00005503",slateA2:"#00005506",slateA3:"#0000330f",slateA4:"#00002d17",slateA5:"#0009321f",slateA6:"#00002f26",slateA7:"#00062e32",slateA8:"#00083046",slateA9:"#00051d74",slateA10:"#00071b7f",slateA11:"#0007149f",slateA12:"#000509e3"},AY={sage1:"#fbfdfc",sage2:"#f7f9f8",sage3:"#eef1f0",sage4:"#e6e9e8",sage5:"#dfe2e0",sage6:"#d7dad9",sage7:"#cbcfcd",sage8:"#b8bcba",sage9:"#868e8b",sage10:"#7c8481",sage11:"#5f6563",sage12:"#1a211e"},EY={sageA1:"#00804004",sageA2:"#00402008",sageA3:"#002d1e11",sageA4:"#001f1519",sageA5:"#00180820",sageA6:"#00140d28",sageA7:"#00140a34",sageA8:"#000f0847",sageA9:"#00110b79",sageA10:"#00100a83",sageA11:"#000a07a0",sageA12:"#000805e5"},PY={olive1:"#fcfdfc",olive2:"#f8faf8",olive3:"#eff1ef",olive4:"#e7e9e7",olive5:"#dfe2df",olive6:"#d7dad7",olive7:"#cccfcc",olive8:"#b9bcb8",olive9:"#898e87",olive10:"#7f847d",olive11:"#60655f",olive12:"#1d211c"},TY={oliveA1:"#00550003",oliveA2:"#00490007",oliveA3:"#00200010",oliveA4:"#00160018",oliveA5:"#00180020",oliveA6:"#00140028",oliveA7:"#000f0033",oliveA8:"#040f0047",oliveA9:"#050f0078",oliveA10:"#040e0082",oliveA11:"#020a00a0",oliveA12:"#010600e3"},NY={sand1:"#fdfdfc",sand2:"#f9f9f8",sand3:"#f1f0ef",sand4:"#e9e8e6",sand5:"#e2e1de",sand6:"#dad9d6",sand7:"#cfceca",sand8:"#bcbbb5",sand9:"#8d8d86",sand10:"#82827c",sand11:"#63635e",sand12:"#21201c"},MY={sandA1:"#55550003",sandA2:"#25250007",sandA3:"#20100010",sandA4:"#1f150019",sandA5:"#1f180021",sandA6:"#19130029",sandA7:"#19140035",sandA8:"#1915014a",sandA9:"#0f0f0079",sandA10:"#0c0c0083",sandA11:"#080800a1",sandA12:"#060500e3"},OY={tomato1:"#fffcfc",tomato2:"#fff8f7",tomato3:"#feebe7",tomato4:"#ffdcd3",tomato5:"#ffcdc2",tomato6:"#fdbdaf",tomato7:"#f5a898",tomato8:"#ec8e7b",tomato9:"#e54d2e",tomato10:"#dd4425",tomato11:"#d13415",tomato12:"#5c271f"},RY={tomatoA1:"#ff000003",tomatoA2:"#ff200008",tomatoA3:"#f52b0018",tomatoA4:"#ff35002c",tomatoA5:"#ff2e003d",tomatoA6:"#f92d0050",tomatoA7:"#e7280067",tomatoA8:"#db250084",tomatoA9:"#df2600d1",tomatoA10:"#d72400da",tomatoA11:"#cd2200ea",tomatoA12:"#460900e0"},LY={red1:"#fffcfc",red2:"#fff7f7",red3:"#feebec",red4:"#ffdbdc",red5:"#ffcdce",red6:"#fdbdbe",red7:"#f4a9aa",red8:"#eb8e90",red9:"#e5484d",red10:"#dc3e42",red11:"#ce2c31",red12:"#641723"},DY={redA1:"#ff000003",redA2:"#ff000008",redA3:"#f3000d14",redA4:"#ff000824",redA5:"#ff000632",redA6:"#f8000442",redA7:"#df000356",redA8:"#d2000571",redA9:"#db0007b7",redA10:"#d10005c1",redA11:"#c40006d3",redA12:"#55000de8"},IY={ruby1:"#fffcfd",ruby2:"#fff7f8",ruby3:"#feeaed",ruby4:"#ffdce1",ruby5:"#ffced6",ruby6:"#f8bfc8",ruby7:"#efacb8",ruby8:"#e592a3",ruby9:"#e54666",ruby10:"#dc3b5d",ruby11:"#ca244d",ruby12:"#64172b"},$Y={rubyA1:"#ff005503",rubyA2:"#ff002008",rubyA3:"#f3002515",rubyA4:"#ff002523",rubyA5:"#ff002a31",rubyA6:"#e4002440",rubyA7:"#ce002553",rubyA8:"#c300286d",rubyA9:"#db002cb9",rubyA10:"#d2002cc4",rubyA11:"#c10030db",rubyA12:"#550016e8"},jY={crimson1:"#fffcfd",crimson2:"#fef7f9",crimson3:"#ffe9f0",crimson4:"#fedce7",crimson5:"#facedd",crimson6:"#f3bed1",crimson7:"#eaacc3",crimson8:"#e093b2",crimson9:"#e93d82",crimson10:"#df3478",crimson11:"#cb1d63",crimson12:"#621639"},FY={crimsonA1:"#ff005503",crimsonA2:"#e0004008",crimsonA3:"#ff005216",crimsonA4:"#f8005123",crimsonA5:"#e5004f31",crimsonA6:"#d0004b41",crimsonA7:"#bf004753",crimsonA8:"#b6004a6c",crimsonA9:"#e2005bc2",crimsonA10:"#d70056cb",crimsonA11:"#c4004fe2",crimsonA12:"#530026e9"},zY={pink1:"#fffcfe",pink2:"#fef7fb",pink3:"#fee9f5",pink4:"#fbdcef",pink5:"#f6cee7",pink6:"#efbfdd",pink7:"#e7acd0",pink8:"#dd93c2",pink9:"#d6409f",pink10:"#cf3897",pink11:"#c2298a",pink12:"#651249"},BY={pinkA1:"#ff00aa03",pinkA2:"#e0008008",pinkA3:"#f4008c16",pinkA4:"#e2008b23",pinkA5:"#d1008331",pinkA6:"#c0007840",pinkA7:"#b6006f53",pinkA8:"#af006f6c",pinkA9:"#c8007fbf",pinkA10:"#c2007ac7",pinkA11:"#b60074d6",pinkA12:"#59003bed"},UY={plum1:"#fefcff",plum2:"#fdf7fd",plum3:"#fbebfb",plum4:"#f7def8",plum5:"#f2d1f3",plum6:"#e9c2ec",plum7:"#deade3",plum8:"#cf91d8",plum9:"#ab4aba",plum10:"#a144af",plum11:"#953ea3",plum12:"#53195d"},HY={plumA1:"#aa00ff03",plumA2:"#c000c008",plumA3:"#cc00cc14",plumA4:"#c200c921",plumA5:"#b700bd2e",plumA6:"#a400b03d",plumA7:"#9900a852",plumA8:"#9000a56e",plumA9:"#89009eb5",plumA10:"#7f0092bb",plumA11:"#730086c1",plumA12:"#40004be6"},VY={purple1:"#fefcfe",purple2:"#fbf7fe",purple3:"#f7edfe",purple4:"#f2e2fc",purple5:"#ead5f9",purple6:"#e0c4f4",purple7:"#d1afec",purple8:"#be93e4",purple9:"#8e4ec6",purple10:"#8347b9",purple11:"#8145b5",purple12:"#402060"},WY={purpleA1:"#aa00aa03",purpleA2:"#8000e008",purpleA3:"#8e00f112",purpleA4:"#8d00e51d",purpleA5:"#8000db2a",purpleA6:"#7a01d03b",purpleA7:"#6d00c350",purpleA8:"#6600c06c",purpleA9:"#5c00adb1",purpleA10:"#53009eb8",purpleA11:"#52009aba",purpleA12:"#250049df"},qY={violet1:"#fdfcfe",violet2:"#faf8ff",violet3:"#f4f0fe",violet4:"#ebe4ff",violet5:"#e1d9ff",violet6:"#d4cafe",violet7:"#c2b5f5",violet8:"#aa99ec",violet9:"#6e56cf",violet10:"#654dc4",violet11:"#6550b9",violet12:"#2f265f"},GY={violetA1:"#5500aa03",violetA2:"#4900ff07",violetA3:"#4400ee0f",violetA4:"#4300ff1b",violetA5:"#3600ff26",violetA6:"#3100fb35",violetA7:"#2d01dd4a",violetA8:"#2b00d066",violetA9:"#2400b7a9",violetA10:"#2300abb2",violetA11:"#1f0099af",violetA12:"#0b0043d9"},KY={iris1:"#fdfdff",iris2:"#f8f8ff",iris3:"#f0f1fe",iris4:"#e6e7ff",iris5:"#dadcff",iris6:"#cbcdff",iris7:"#b8baf8",iris8:"#9b9ef0",iris9:"#5b5bd6",iris10:"#5151cd",iris11:"#5753c6",iris12:"#272962"},JY={irisA1:"#0000ff02",irisA2:"#0000ff07",irisA3:"#0011ee0f",irisA4:"#000bff19",irisA5:"#000eff25",irisA6:"#000aff34",irisA7:"#0008e647",irisA8:"#0008d964",irisA9:"#0000c0a4",irisA10:"#0000b6ae",irisA11:"#0600abac",irisA12:"#000246d8"},YY={indigo1:"#fdfdfe",indigo2:"#f7f9ff",indigo3:"#edf2fe",indigo4:"#e1e9ff",indigo5:"#d2deff",indigo6:"#c1d0ff",indigo7:"#abbdf9",indigo8:"#8da4ef",indigo9:"#3e63dd",indigo10:"#3358d4",indigo11:"#3a5bc7",indigo12:"#1f2d5c"},ZY={indigoA1:"#00008002",indigoA2:"#0040ff08",indigoA3:"#0047f112",indigoA4:"#0044ff1e",indigoA5:"#0044ff2d",indigoA6:"#003eff3e",indigoA7:"#0037ed54",indigoA8:"#0034dc72",indigoA9:"#0031d2c1",indigoA10:"#002ec9cc",indigoA11:"#002bb7c5",indigoA12:"#001046e0"},XY={blue1:"#fbfdff",blue2:"#f4faff",blue3:"#e6f4fe",blue4:"#d5efff",blue5:"#c2e5ff",blue6:"#acd8fc",blue7:"#8ec8f6",blue8:"#5eb1ef",blue9:"#0090ff",blue10:"#0588f0",blue11:"#0d74ce",blue12:"#113264"},QY={blueA1:"#0080ff04",blueA2:"#008cff0b",blueA3:"#008ff519",blueA4:"#009eff2a",blueA5:"#0093ff3d",blueA6:"#0088f653",blueA7:"#0083eb71",blueA8:"#0084e6a1",blueA9:"#0090ff",blueA10:"#0086f0fa",blueA11:"#006dcbf2",blueA12:"#002359ee"},eZ={cyan1:"#fafdfe",cyan2:"#f2fafb",cyan3:"#def7f9",cyan4:"#caf1f6",cyan5:"#b5e9f0",cyan6:"#9ddde7",cyan7:"#7dcedc",cyan8:"#3db9cf",cyan9:"#00a2c7",cyan10:"#0797b9",cyan11:"#107d98",cyan12:"#0d3c48"},tZ={cyanA1:"#0099cc05",cyanA2:"#009db10d",cyanA3:"#00c2d121",cyanA4:"#00bcd435",cyanA5:"#01b4cc4a",cyanA6:"#00a7c162",cyanA7:"#009fbb82",cyanA8:"#00a3c0c2",cyanA9:"#00a2c7",cyanA10:"#0094b7f8",cyanA11:"#007491ef",cyanA12:"#00323ef2"},nZ={teal1:"#fafefd",teal2:"#f3fbf9",teal3:"#e0f8f3",teal4:"#ccf3ea",teal5:"#b8eae0",teal6:"#a1ded2",teal7:"#83cdc1",teal8:"#53b9ab",teal9:"#12a594",teal10:"#0d9b8a",teal11:"#008573",teal12:"#0d3d38"},rZ={tealA1:"#00cc9905",tealA2:"#00aa800c",tealA3:"#00c69d1f",tealA4:"#00c39633",tealA5:"#00b49047",tealA6:"#00a6855e",tealA7:"#0099807c",tealA8:"#009783ac",tealA9:"#009e8ced",tealA10:"#009684f2",tealA11:"#008573",tealA12:"#00332df2"},iZ={jade1:"#fbfefd",jade2:"#f4fbf7",jade3:"#e6f7ed",jade4:"#d6f1e3",jade5:"#c3e9d7",jade6:"#acdec8",jade7:"#8bceb6",jade8:"#56ba9f",jade9:"#29a383",jade10:"#26997b",jade11:"#208368",jade12:"#1d3b31"},sZ={jadeA1:"#00c08004",jadeA2:"#00a3460b",jadeA3:"#00ae4819",jadeA4:"#00a85129",jadeA5:"#00a2553c",jadeA6:"#009a5753",jadeA7:"#00945f74",jadeA8:"#00976ea9",jadeA9:"#00916bd6",jadeA10:"#008764d9",jadeA11:"#007152df",jadeA12:"#002217e2"},oZ={green1:"#fbfefc",green2:"#f4fbf6",green3:"#e6f6eb",green4:"#d6f1df",green5:"#c4e8d1",green6:"#adddc0",green7:"#8eceaa",green8:"#5bb98b",green9:"#30a46c",green10:"#2b9a66",green11:"#218358",green12:"#193b2d"},aZ={greenA1:"#00c04004",greenA2:"#00a32f0b",greenA3:"#00a43319",greenA4:"#00a83829",greenA5:"#019c393b",greenA6:"#00963c52",greenA7:"#00914071",greenA8:"#00924ba4",greenA9:"#008f4acf",greenA10:"#008647d4",greenA11:"#00713fde",greenA12:"#002616e6"},lZ={grass1:"#fbfefb",grass2:"#f5fbf5",grass3:"#e9f6e9",grass4:"#daf1db",grass5:"#c9e8ca",grass6:"#b2ddb5",grass7:"#94ce9a",grass8:"#65ba74",grass9:"#46a758",grass10:"#3e9b4f",grass11:"#2a7e3b",grass12:"#203c25"},cZ={grassA1:"#00c00004",grassA2:"#0099000a",grassA3:"#00970016",grassA4:"#009f0725",grassA5:"#00930536",grassA6:"#008f0a4d",grassA7:"#018b0f6b",grassA8:"#008d199a",grassA9:"#008619b9",grassA10:"#007b17c1",grassA11:"#006514d5",grassA12:"#002006df"},uZ={brown1:"#fefdfc",brown2:"#fcf9f6",brown3:"#f6eee7",brown4:"#f0e4d9",brown5:"#ebdaca",brown6:"#e4cdb7",brown7:"#dcbc9f",brown8:"#cea37e",brown9:"#ad7f58",brown10:"#a07553",brown11:"#815e46",brown12:"#3e332e"},dZ={brownA1:"#aa550003",brownA2:"#aa550009",brownA3:"#a04b0018",brownA4:"#9b4a0026",brownA5:"#9f4d0035",brownA6:"#a04e0048",brownA7:"#a34e0060",brownA8:"#9f4a0081",brownA9:"#823c00a7",brownA10:"#723300ac",brownA11:"#522100b9",brownA12:"#140600d1"},fZ={bronze1:"#fdfcfc",bronze2:"#fdf7f5",bronze3:"#f6edea",bronze4:"#efe4df",bronze5:"#e7d9d3",bronze6:"#dfcdc5",bronze7:"#d3bcb3",bronze8:"#c2a499",bronze9:"#a18072",bronze10:"#957468",bronze11:"#7d5e54",bronze12:"#43302b"},hZ={bronzeA1:"#55000003",bronzeA2:"#cc33000a",bronzeA3:"#92250015",bronzeA4:"#80280020",bronzeA5:"#7423002c",bronzeA6:"#7324003a",bronzeA7:"#6c1f004c",bronzeA8:"#671c0066",bronzeA9:"#551a008d",bronzeA10:"#4c150097",bronzeA11:"#3d0f00ab",bronzeA12:"#1d0600d4"},pZ={gold1:"#fdfdfc",gold2:"#faf9f2",gold3:"#f2f0e7",gold4:"#eae6db",gold5:"#e1dccf",gold6:"#d8d0bf",gold7:"#cbc0aa",gold8:"#b9a88d",gold9:"#978365",gold10:"#8c7a5e",gold11:"#71624b",gold12:"#3b352b"},gZ={goldA1:"#55550003",goldA2:"#9d8a000d",goldA3:"#75600018",goldA4:"#6b4e0024",goldA5:"#60460030",goldA6:"#64440040",goldA7:"#63420055",goldA8:"#633d0072",goldA9:"#5332009a",goldA10:"#492d00a1",goldA11:"#362100b4",goldA12:"#130c00d4"},mZ={sky1:"#f9feff",sky2:"#f1fafd",sky3:"#e1f6fd",sky4:"#d1f0fa",sky5:"#bee7f5",sky6:"#a9daed",sky7:"#8dcae3",sky8:"#60b3d7",sky9:"#7ce2fe",sky10:"#74daf8",sky11:"#00749e",sky12:"#1d3e56"},yZ={skyA1:"#00d5ff06",skyA2:"#00a4db0e",skyA3:"#00b3ee1e",skyA4:"#00ace42e",skyA5:"#00a1d841",skyA6:"#0092ca56",skyA7:"#0089c172",skyA8:"#0085bf9f",skyA9:"#00c7fe83",skyA10:"#00bcf38b",skyA11:"#00749e",skyA12:"#002540e2"},vZ={mint1:"#f9fefd",mint2:"#f2fbf9",mint3:"#ddf9f2",mint4:"#c8f4e9",mint5:"#b3ecde",mint6:"#9ce0d0",mint7:"#7ecfbd",mint8:"#4cbba5",mint9:"#86ead4",mint10:"#7de0cb",mint11:"#027864",mint12:"#16433c"},bZ={mintA1:"#00d5aa06",mintA2:"#00b18a0d",mintA3:"#00d29e22",mintA4:"#00cc9937",mintA5:"#00c0914c",mintA6:"#00b08663",mintA7:"#00a17d81",mintA8:"#009e7fb3",mintA9:"#00d3a579",mintA10:"#00c39982",mintA11:"#007763fd",mintA12:"#00312ae9"},wZ={lime1:"#fcfdfa",lime2:"#f8faf3",lime3:"#eef6d6",lime4:"#e2f0bd",lime5:"#d3e7a6",lime6:"#c2da91",lime7:"#abc978",lime8:"#8db654",lime9:"#bdee63",lime10:"#b0e64c",lime11:"#5c7c2f",lime12:"#37401c"},xZ={limeA1:"#66990005",limeA2:"#6b95000c",limeA3:"#96c80029",limeA4:"#8fc60042",limeA5:"#81bb0059",limeA6:"#72aa006e",limeA7:"#61990087",limeA8:"#559200ab",limeA9:"#93e4009c",limeA10:"#8fdc00b3",limeA11:"#375f00d0",limeA12:"#1e2900e3"},SZ={yellow1:"#fdfdf9",yellow2:"#fefce9",yellow3:"#fffab8",yellow4:"#fff394",yellow5:"#ffe770",yellow6:"#f3d768",yellow7:"#e4c767",yellow8:"#d5ae39",yellow9:"#ffe629",yellow10:"#ffdc00",yellow11:"#9e6c00",yellow12:"#473b1f"},kZ={yellowA1:"#aaaa0006",yellowA2:"#f4dd0016",yellowA3:"#ffee0047",yellowA4:"#ffe3016b",yellowA5:"#ffd5008f",yellowA6:"#ebbc0097",yellowA7:"#d2a10098",yellowA8:"#c99700c6",yellowA9:"#ffe100d6",yellowA10:"#ffdc00",yellowA11:"#9e6c00",yellowA12:"#2e2000e0"},CZ={amber1:"#fefdfb",amber2:"#fefbe9",amber3:"#fff7c2",amber4:"#ffee9c",amber5:"#fbe577",amber6:"#f3d673",amber7:"#e9c162",amber8:"#e2a336",amber9:"#ffc53d",amber10:"#ffba18",amber11:"#ab6400",amber12:"#4f3422"},_Z={amberA1:"#c0800004",amberA2:"#f4d10016",amberA3:"#ffde003d",amberA4:"#ffd40063",amberA5:"#f8cf0088",amberA6:"#eab5008c",amberA7:"#dc9b009d",amberA8:"#da8a00c9",amberA9:"#ffb300c2",amberA10:"#ffb300e7",amberA11:"#ab6400",amberA12:"#341500dd"},AZ={orange1:"#fefcfb",orange2:"#fff7ed",orange3:"#ffefd6",orange4:"#ffdfb5",orange5:"#ffd19a",orange6:"#ffc182",orange7:"#f5ae73",orange8:"#ec9455",orange9:"#f76b15",orange10:"#ef5f00",orange11:"#cc4e00",orange12:"#582d1d"},EZ={orangeA1:"#c0400004",orangeA2:"#ff8e0012",orangeA3:"#ff9c0029",orangeA4:"#ff91014a",orangeA5:"#ff8b0065",orangeA6:"#ff81007d",orangeA7:"#ed6c008c",orangeA8:"#e35f00aa",orangeA9:"#f65e00ea",orangeA10:"#ef5f00",orangeA11:"#cc4e00",orangeA12:"#431200e2"};var fC={exports:{}};(function(t,e){function n(l){if(l&&typeof l=="object"){var c=l.which||l.keyCode||l.charCode;c&&(l=c)}if(typeof l=="number")return o[l];var d=String(l),u=r[d.toLowerCase()];if(u)return u;var u=i[d.toLowerCase()];if(u)return u;if(d.length===1)return d.charCodeAt(0)}n.isEventKey=function(c,d){if(c&&typeof c=="object"){var u=c.which||c.keyCode||c.charCode;if(u==null)return!1;if(typeof d=="string"){var f=r[d.toLowerCase()];if(f)return f===u;var f=i[d.toLowerCase()];if(f)return f===u}else if(typeof d=="number")return d===u;return!1}},e=t.exports=n;var r=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=e.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(s=97;s<123;s++)r[String.fromCharCode(s)]=s-32;for(var s=48;s<58;s++)r[s-48]=s;for(s=1;s<13;s++)r["f"+s]=s+111;for(s=0;s<10;s++)r["numpad "+s]=s+96;var o=e.names=e.title={};for(s in r)o[r[s]]=s;for(var a in i)r[a]=i[a]})(fC,fC.exports);var PZ=fC.exports;const An=rh(PZ),_L="3.7.7",TZ=_L,jg=typeof Buffer=="function",UT=typeof TextDecoder=="function"?new TextDecoder:void 0,HT=typeof TextEncoder=="function"?new TextEncoder:void 0,NZ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o0=Array.prototype.slice.call(NZ),Vv=(t=>{let e={};return t.forEach((n,r)=>e[n]=r),e})(o0),MZ=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,_i=String.fromCharCode.bind(String),VT=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),AL=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),EL=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),PL=t=>{let e,n,r,i,s="";const o=t.length%3;for(let a=0;a<t.length;){if((n=t.charCodeAt(a++))>255||(r=t.charCodeAt(a++))>255||(i=t.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=n<<16|r<<8|i,s+=o0[e>>18&63]+o0[e>>12&63]+o0[e>>6&63]+o0[e&63]}return o?s.slice(0,o-3)+"===".substring(o):s},dE=typeof btoa=="function"?t=>btoa(t):jg?t=>Buffer.from(t,"binary").toString("base64"):PL,hC=jg?t=>Buffer.from(t).toString("base64"):t=>{let n=[];for(let r=0,i=t.length;r<i;r+=4096)n.push(_i.apply(null,t.subarray(r,r+4096)));return dE(n.join(""))},H2=(t,e=!1)=>e?AL(hC(t)):hC(t),OZ=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?_i(192|e>>>6)+_i(128|e&63):_i(224|e>>>12&15)+_i(128|e>>>6&63)+_i(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return _i(240|e>>>18&7)+_i(128|e>>>12&63)+_i(128|e>>>6&63)+_i(128|e&63)}},RZ=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,TL=t=>t.replace(RZ,OZ),WT=jg?t=>Buffer.from(t,"utf8").toString("base64"):HT?t=>hC(HT.encode(t)):t=>dE(TL(t)),Vp=(t,e=!1)=>e?AL(WT(t)):WT(t),qT=t=>Vp(t,!0),LZ=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,DZ=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return _i((n>>>10)+55296)+_i((n&1023)+56320);case 3:return _i((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return _i((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},NL=t=>t.replace(LZ,DZ),ML=t=>{if(t=t.replace(/\s+/g,""),!MZ.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n="",r,i;for(let s=0;s<t.length;)e=Vv[t.charAt(s++)]<<18|Vv[t.charAt(s++)]<<12|(r=Vv[t.charAt(s++)])<<6|(i=Vv[t.charAt(s++)]),n+=r===64?_i(e>>16&255):i===64?_i(e>>16&255,e>>8&255):_i(e>>16&255,e>>8&255,e&255);return n},fE=typeof atob=="function"?t=>atob(EL(t)):jg?t=>Buffer.from(t,"base64").toString("binary"):ML,OL=jg?t=>VT(Buffer.from(t,"base64")):t=>VT(fE(t).split("").map(e=>e.charCodeAt(0))),RL=t=>OL(LL(t)),IZ=jg?t=>Buffer.from(t,"base64").toString("utf8"):UT?t=>UT.decode(OL(t)):t=>NL(fE(t)),LL=t=>EL(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),pC=t=>IZ(LL(t)),$Z=t=>{if(typeof t!="string")return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},DL=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),IL=function(){const t=(e,n)=>Object.defineProperty(String.prototype,e,DL(n));t("fromBase64",function(){return pC(this)}),t("toBase64",function(e){return Vp(this,e)}),t("toBase64URI",function(){return Vp(this,!0)}),t("toBase64URL",function(){return Vp(this,!0)}),t("toUint8Array",function(){return RL(this)})},$L=function(){const t=(e,n)=>Object.defineProperty(Uint8Array.prototype,e,DL(n));t("toBase64",function(e){return H2(this,e)}),t("toBase64URI",function(){return H2(this,!0)}),t("toBase64URL",function(){return H2(this,!0)})},jZ=()=>{IL(),$L()},GT={version:_L,VERSION:TZ,atob:fE,atobPolyfill:ML,btoa:dE,btoaPolyfill:PL,fromBase64:pC,toBase64:Vp,encode:Vp,encodeURI:qT,encodeURL:qT,utob:TL,btou:NL,decode:pC,isValid:$Z,fromUint8Array:H2,toUint8Array:RL,extendString:IL,extendUint8Array:$L,extendBuiltins:jZ};var bn;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(bn||(bn={}));var gC;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(gC||(gC={}));const ht=bn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ac=t=>{switch(typeof t){case"undefined":return ht.undefined;case"string":return ht.string;case"number":return isNaN(t)?ht.nan:ht.number;case"boolean":return ht.boolean;case"function":return ht.function;case"bigint":return ht.bigint;case"symbol":return ht.symbol;case"object":return Array.isArray(t)?ht.array:t===null?ht.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ht.promise:typeof Map<"u"&&t instanceof Map?ht.map:typeof Set<"u"&&t instanceof Set?ht.set:typeof Date<"u"&&t instanceof Date?ht.date:ht.object;default:return ht.unknown}},Ye=bn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),FZ=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class bo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),r}static assert(e){if(!(e instanceof bo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,bn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}bo.create=t=>new bo(t);const lg=(t,e)=>{let n;switch(t.code){case Ye.invalid_type:t.received===ht.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ye.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,bn.jsonStringifyReplacer)}`;break;case Ye.unrecognized_keys:n=`Unrecognized key(s) in object: ${bn.joinValues(t.keys,", ")}`;break;case Ye.invalid_union:n="Invalid input";break;case Ye.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${bn.joinValues(t.options)}`;break;case Ye.invalid_enum_value:n=`Invalid enum value. Expected ${bn.joinValues(t.options)}, received '${t.received}'`;break;case Ye.invalid_arguments:n="Invalid function arguments";break;case Ye.invalid_return_type:n="Invalid function return type";break;case Ye.invalid_date:n="Invalid date";break;case Ye.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:bn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ye.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ye.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ye.custom:n="Invalid input";break;case Ye.invalid_intersection_types:n="Intersection results could not be merged";break;case Ye.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ye.not_finite:n="Number must be finite";break;default:n=e.defaultError,bn.assertNever(t)}return{message:n}};let jL=lg;function zZ(t){jL=t}function Jb(){return jL}const Yb=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}},BZ=[];function lt(t,e){const n=Jb(),r=Yb({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===lg?void 0:lg].filter(i=>!!i)});t.common.issues.push(r)}class Yi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return $t;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Yi.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return $t;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const $t=Object.freeze({status:"aborted"}),Op=t=>({status:"dirty",value:t}),bs=t=>({status:"valid",value:t}),mC=t=>t.status==="aborted",yC=t=>t.status==="dirty",Rf=t=>t.status==="valid",y1=t=>typeof Promise<"u"&&t instanceof Promise;function Zb(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function FL(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var vt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(vt||(vt={}));var a0,l0;class yl{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const KT=(t,e)=>{if(Rf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new bo(t.common.issues);return this._error=n,this._error}}};function Zt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{var l,c;const{message:d}=t;return o.code==="invalid_enum_value"?{message:d??a.defaultError}:typeof a.data>"u"?{message:(l=d??r)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=d??n)!==null&&c!==void 0?c:a.defaultError}},description:i}}class tn{get description(){return this._def.description}_getType(e){return ac(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ac(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Yi,ctx:{common:e.parent.common,data:e.data,parsedType:ac(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(y1(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ac(e)},s=this._parseSync({data:e,path:i.path,parent:i});return KT(i,s)}"~validate"(e){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ac(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return Rf(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s==null?void 0:s.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>Rf(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ac(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(y1(i)?i:Promise.resolve(i));return KT(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:Ye.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Fa({schema:this,typeName:et.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return La.create(this,this._def)}nullable(){return od.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ra.create(this)}promise(){return ug.create(this,this._def)}or(e){return x1.create([this,e],this._def)}and(e){return S1.create(this,e,this._def)}transform(e){return new Fa({...Zt(this._def),schema:this,typeName:et.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new E1({...Zt(this._def),innerType:this,defaultValue:n,typeName:et.ZodDefault})}brand(){return new hE({typeName:et.ZodBranded,type:this,...Zt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new P1({...Zt(this._def),innerType:this,catchValue:n,typeName:et.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return py.create(this,e)}readonly(){return T1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const UZ=/^c[^\s-]{8,}$/i,HZ=/^[0-9a-z]+$/,VZ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,WZ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,qZ=/^[a-z0-9_-]{21}$/i,GZ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,KZ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,JZ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,YZ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let BS;const ZZ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,XZ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,QZ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,eX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,tX=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nX=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,zL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",rX=new RegExp(`^${zL}$`);function BL(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function iX(t){return new RegExp(`^${BL(t)}$`)}function UL(t){let e=`${zL}T${BL(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function sX(t,e){return!!((e==="v4"||!e)&&ZZ.test(t)||(e==="v6"||!e)&&QZ.test(t))}function oX(t,e){if(!GZ.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function aX(t,e){return!!((e==="v4"||!e)&&XZ.test(t)||(e==="v6"||!e)&&eX.test(t))}class Pa extends tn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ht.string){const s=this._getOrReturnCtx(e);return lt(s,{code:Ye.invalid_type,expected:ht.string,received:s.parsedType}),$t}const r=new Yi;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),lt(i,{code:Ye.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),lt(i,{code:Ye.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?lt(i,{code:Ye.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&lt(i,{code:Ye.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")JZ.test(e.data)||(i=this._getOrReturnCtx(e,i),lt(i,{validation:"email",code:Ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")BS||(BS=new RegExp(YZ,"u")),BS.test(e.data)||(i=this._getOrReturnCtx(e,i),lt(i,{validation:"emoji",code:Ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")WZ.test(e.data)||(i=this._getOrReturnCtx(e,i),lt(i,{validation:"uuid",code:Ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")qZ.test(e.data)||(i=this._getOrReturnCtx(e,i),lt(i,{validation:"nanoid",code:Ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")UZ.test(e.data)||(i=this._getOrReturnCtx(e,i),lt(i,{validation:"cuid",code:Ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")HZ.test(e.data)||(i=this._getOrReturnCtx(e,i),lt(i,{validation:"cuid2",code:Ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")VZ.test(e.data)||(i=this._getOrReturnCtx(e,i),lt(i,{validation:"ulid",code:Ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),lt(i,{validation:"url",code:Ye.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),lt(i,{validation:"regex",code:Ye.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),lt(i,{code:Ye.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),lt(i,{code:Ye.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),lt(i,{code:Ye.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?UL(s).test(e.data)||(i=this._getOrReturnCtx(e,i),lt(i,{code:Ye.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?rX.test(e.data)||(i=this._getOrReturnCtx(e,i),lt(i,{code:Ye.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?iX(s).test(e.data)||(i=this._getOrReturnCtx(e,i),lt(i,{code:Ye.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?KZ.test(e.data)||(i=this._getOrReturnCtx(e,i),lt(i,{validation:"duration",code:Ye.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?sX(e.data,s.version)||(i=this._getOrReturnCtx(e,i),lt(i,{validation:"ip",code:Ye.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?oX(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),lt(i,{validation:"jwt",code:Ye.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?aX(e.data,s.version)||(i=this._getOrReturnCtx(e,i),lt(i,{validation:"cidr",code:Ye.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?tX.test(e.data)||(i=this._getOrReturnCtx(e,i),lt(i,{validation:"base64",code:Ye.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?nX.test(e.data)||(i=this._getOrReturnCtx(e,i),lt(i,{validation:"base64url",code:Ye.invalid_string,message:s.message}),r.dirty()):bn.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Ye.invalid_string,...vt.errToObj(r)})}_addCheck(e){return new Pa({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...vt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...vt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...vt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...vt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...vt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...vt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...vt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...vt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...vt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...vt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...vt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...vt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...vt.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...vt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...vt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...vt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...vt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...vt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...vt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...vt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...vt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...vt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...vt.errToObj(n)})}nonempty(e){return this.min(1,vt.errToObj(e))}trim(){return new Pa({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Pa({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Pa({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Pa.create=t=>{var e;return new Pa({checks:[],typeName:et.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Zt(t)})};function lX(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class rd extends tn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ht.number){const s=this._getOrReturnCtx(e);return lt(s,{code:Ye.invalid_type,expected:ht.number,received:s.parsedType}),$t}let r;const i=new Yi;for(const s of this._def.checks)s.kind==="int"?bn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),lt(r,{code:Ye.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),lt(r,{code:Ye.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),lt(r,{code:Ye.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?lX(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),lt(r,{code:Ye.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),lt(r,{code:Ye.not_finite,message:s.message}),i.dirty()):bn.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,vt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,vt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,vt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,vt.toString(n))}setLimit(e,n,r,i){return new rd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:vt.toString(i)}]})}_addCheck(e){return new rd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:vt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:vt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:vt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:vt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:vt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:vt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:vt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:vt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:vt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&bn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}rd.create=t=>new rd({checks:[],typeName:et.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Zt(t)});class id extends tn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ht.bigint)return this._getInvalidInput(e);let r;const i=new Yi;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),lt(r,{code:Ye.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),lt(r,{code:Ye.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),lt(r,{code:Ye.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):bn.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return lt(n,{code:Ye.invalid_type,expected:ht.bigint,received:n.parsedType}),$t}gte(e,n){return this.setLimit("min",e,!0,vt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,vt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,vt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,vt.toString(n))}setLimit(e,n,r,i){return new id({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:vt.toString(i)}]})}_addCheck(e){return new id({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:vt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:vt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:vt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:vt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:vt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}id.create=t=>{var e;return new id({checks:[],typeName:et.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Zt(t)})};class v1 extends tn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ht.boolean){const r=this._getOrReturnCtx(e);return lt(r,{code:Ye.invalid_type,expected:ht.boolean,received:r.parsedType}),$t}return bs(e.data)}}v1.create=t=>new v1({typeName:et.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Zt(t)});class Lf extends tn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ht.date){const s=this._getOrReturnCtx(e);return lt(s,{code:Ye.invalid_type,expected:ht.date,received:s.parsedType}),$t}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return lt(s,{code:Ye.invalid_date}),$t}const r=new Yi;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),lt(i,{code:Ye.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),lt(i,{code:Ye.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):bn.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Lf({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:vt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:vt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Lf.create=t=>new Lf({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:et.ZodDate,...Zt(t)});class Xb extends tn{_parse(e){if(this._getType(e)!==ht.symbol){const r=this._getOrReturnCtx(e);return lt(r,{code:Ye.invalid_type,expected:ht.symbol,received:r.parsedType}),$t}return bs(e.data)}}Xb.create=t=>new Xb({typeName:et.ZodSymbol,...Zt(t)});class b1 extends tn{_parse(e){if(this._getType(e)!==ht.undefined){const r=this._getOrReturnCtx(e);return lt(r,{code:Ye.invalid_type,expected:ht.undefined,received:r.parsedType}),$t}return bs(e.data)}}b1.create=t=>new b1({typeName:et.ZodUndefined,...Zt(t)});class w1 extends tn{_parse(e){if(this._getType(e)!==ht.null){const r=this._getOrReturnCtx(e);return lt(r,{code:Ye.invalid_type,expected:ht.null,received:r.parsedType}),$t}return bs(e.data)}}w1.create=t=>new w1({typeName:et.ZodNull,...Zt(t)});class cg extends tn{constructor(){super(...arguments),this._any=!0}_parse(e){return bs(e.data)}}cg.create=t=>new cg({typeName:et.ZodAny,...Zt(t)});class gf extends tn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return bs(e.data)}}gf.create=t=>new gf({typeName:et.ZodUnknown,...Zt(t)});class Ac extends tn{_parse(e){const n=this._getOrReturnCtx(e);return lt(n,{code:Ye.invalid_type,expected:ht.never,received:n.parsedType}),$t}}Ac.create=t=>new Ac({typeName:et.ZodNever,...Zt(t)});class Qb extends tn{_parse(e){if(this._getType(e)!==ht.undefined){const r=this._getOrReturnCtx(e);return lt(r,{code:Ye.invalid_type,expected:ht.void,received:r.parsedType}),$t}return bs(e.data)}}Qb.create=t=>new Qb({typeName:et.ZodVoid,...Zt(t)});class Ra extends tn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==ht.array)return lt(n,{code:Ye.invalid_type,expected:ht.array,received:n.parsedType}),$t;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(lt(n,{code:o?Ye.too_big:Ye.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(lt(n,{code:Ye.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(lt(n,{code:Ye.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new yl(n,o,n.path,a)))).then(o=>Yi.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new yl(n,o,n.path,a)));return Yi.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Ra({...this._def,minLength:{value:e,message:vt.toString(n)}})}max(e,n){return new Ra({...this._def,maxLength:{value:e,message:vt.toString(n)}})}length(e,n){return new Ra({...this._def,exactLength:{value:e,message:vt.toString(n)}})}nonempty(e){return this.min(1,e)}}Ra.create=(t,e)=>new Ra({type:t,minLength:null,maxLength:null,exactLength:null,typeName:et.ZodArray,...Zt(e)});function lp(t){if(t instanceof hr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=La.create(lp(r))}return new hr({...t._def,shape:()=>e})}else return t instanceof Ra?new Ra({...t._def,type:lp(t.element)}):t instanceof La?La.create(lp(t.unwrap())):t instanceof od?od.create(lp(t.unwrap())):t instanceof vl?vl.create(t.items.map(e=>lp(e))):t}class hr extends tn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=bn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ht.object){const c=this._getOrReturnCtx(e);return lt(c,{code:Ye.invalid_type,expected:ht.object,received:c.parsedType}),$t}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ac&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const d=s[c],u=i.data[c];l.push({key:{status:"valid",value:c},value:d._parse(new yl(i,u,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof Ac){const c=this._def.unknownKeys;if(c==="passthrough")for(const d of a)l.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(c==="strict")a.length>0&&(lt(i,{code:Ye.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const d of a){const u=i.data[d];l.push({key:{status:"valid",value:d},value:c._parse(new yl(i,u,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const d of l){const u=await d.key,f=await d.value;c.push({key:u,value:f,alwaysSet:d.alwaysSet})}return c}).then(c=>Yi.mergeObjectSync(r,c)):Yi.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return vt.errToObj,new hr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=vt.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new hr({...this._def,unknownKeys:"strip"})}passthrough(){return new hr({...this._def,unknownKeys:"passthrough"})}extend(e){return new hr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new hr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:et.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new hr({...this._def,catchall:e})}pick(e){const n={};return bn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new hr({...this._def,shape:()=>n})}omit(e){const n={};return bn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new hr({...this._def,shape:()=>n})}deepPartial(){return lp(this)}partial(e){const n={};return bn.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new hr({...this._def,shape:()=>n})}required(e){const n={};return bn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof La;)s=s._def.innerType;n[r]=s}}),new hr({...this._def,shape:()=>n})}keyof(){return HL(bn.objectKeys(this.shape))}}hr.create=(t,e)=>new hr({shape:()=>t,unknownKeys:"strip",catchall:Ac.create(),typeName:et.ZodObject,...Zt(e)});hr.strictCreate=(t,e)=>new hr({shape:()=>t,unknownKeys:"strict",catchall:Ac.create(),typeName:et.ZodObject,...Zt(e)});hr.lazycreate=(t,e)=>new hr({shape:t,unknownKeys:"strip",catchall:Ac.create(),typeName:et.ZodObject,...Zt(e)});class x1 extends tn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new bo(a.ctx.common.issues));return lt(n,{code:Ye.invalid_union,unionErrors:o}),$t}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:c});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new bo(l));return lt(n,{code:Ye.invalid_union,unionErrors:a}),$t}}get options(){return this._def.options}}x1.create=(t,e)=>new x1({options:t,typeName:et.ZodUnion,...Zt(e)});const nc=t=>t instanceof C1?nc(t.schema):t instanceof Fa?nc(t.innerType()):t instanceof _1?[t.value]:t instanceof sd?t.options:t instanceof A1?bn.objectValues(t.enum):t instanceof E1?nc(t._def.innerType):t instanceof b1?[void 0]:t instanceof w1?[null]:t instanceof La?[void 0,...nc(t.unwrap())]:t instanceof od?[null,...nc(t.unwrap())]:t instanceof hE||t instanceof T1?nc(t.unwrap()):t instanceof P1?nc(t._def.innerType):[];class bx extends tn{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ht.object)return lt(n,{code:Ye.invalid_type,expected:ht.object,received:n.parsedType}),$t;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(lt(n,{code:Ye.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),$t)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=nc(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new bx({typeName:et.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...Zt(r)})}}function vC(t,e){const n=ac(t),r=ac(e);if(t===e)return{valid:!0,data:t};if(n===ht.object&&r===ht.object){const i=bn.objectKeys(e),s=bn.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=vC(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===ht.array&&r===ht.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=vC(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===ht.date&&r===ht.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class S1 extends tn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(mC(s)||mC(o))return $t;const a=vC(s.value,o.value);return a.valid?((yC(s)||yC(o))&&n.dirty(),{status:n.value,value:a.data}):(lt(r,{code:Ye.invalid_intersection_types}),$t)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}S1.create=(t,e,n)=>new S1({left:t,right:e,typeName:et.ZodIntersection,...Zt(n)});class vl extends tn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ht.array)return lt(r,{code:Ye.invalid_type,expected:ht.array,received:r.parsedType}),$t;if(r.data.length<this._def.items.length)return lt(r,{code:Ye.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),$t;!this._def.rest&&r.data.length>this._def.items.length&&(lt(r,{code:Ye.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new yl(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Yi.mergeArray(n,o)):Yi.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new vl({...this._def,rest:e})}}vl.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new vl({items:t,typeName:et.ZodTuple,rest:null,...Zt(e)})};class k1 extends tn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ht.object)return lt(r,{code:Ye.invalid_type,expected:ht.object,received:r.parsedType}),$t;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new yl(r,a,r.path,a)),value:o._parse(new yl(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Yi.mergeObjectAsync(n,i):Yi.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof tn?new k1({keyType:e,valueType:n,typeName:et.ZodRecord,...Zt(r)}):new k1({keyType:Pa.create(),valueType:e,typeName:et.ZodRecord,...Zt(n)})}}class ew extends tn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ht.map)return lt(r,{code:Ye.invalid_type,expected:ht.map,received:r.parsedType}),$t;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:i._parse(new yl(r,a,r.path,[c,"key"])),value:s._parse(new yl(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,d=await l.value;if(c.status==="aborted"||d.status==="aborted")return $t;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),a.set(c.value,d.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,d=l.value;if(c.status==="aborted"||d.status==="aborted")return $t;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),a.set(c.value,d.value)}return{status:n.value,value:a}}}}ew.create=(t,e,n)=>new ew({valueType:e,keyType:t,typeName:et.ZodMap,...Zt(n)});class Df extends tn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ht.set)return lt(r,{code:Ye.invalid_type,expected:ht.set,received:r.parsedType}),$t;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(lt(r,{code:Ye.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(lt(r,{code:Ye.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const d of l){if(d.status==="aborted")return $t;d.status==="dirty"&&n.dirty(),c.add(d.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>s._parse(new yl(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Df({...this._def,minSize:{value:e,message:vt.toString(n)}})}max(e,n){return new Df({...this._def,maxSize:{value:e,message:vt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Df.create=(t,e)=>new Df({valueType:t,minSize:null,maxSize:null,typeName:et.ZodSet,...Zt(e)});class Wp extends tn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ht.function)return lt(n,{code:Ye.invalid_type,expected:ht.function,received:n.parsedType}),$t;function r(a,l){return Yb({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Jb(),lg].filter(c=>!!c),issueData:{code:Ye.invalid_arguments,argumentsError:l}})}function i(a,l){return Yb({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Jb(),lg].filter(c=>!!c),issueData:{code:Ye.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof ug){const a=this;return bs(async function(...l){const c=new bo([]),d=await a._def.args.parseAsync(l,s).catch(h=>{throw c.addIssue(r(l,h)),c}),u=await Reflect.apply(o,this,d);return await a._def.returns._def.type.parseAsync(u,s).catch(h=>{throw c.addIssue(i(u,h)),c})})}else{const a=this;return bs(function(...l){const c=a._def.args.safeParse(l,s);if(!c.success)throw new bo([r(l,c.error)]);const d=Reflect.apply(o,this,c.data),u=a._def.returns.safeParse(d,s);if(!u.success)throw new bo([i(d,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Wp({...this._def,args:vl.create(e).rest(gf.create())})}returns(e){return new Wp({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Wp({args:e||vl.create([]).rest(gf.create()),returns:n||gf.create(),typeName:et.ZodFunction,...Zt(r)})}}class C1 extends tn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}C1.create=(t,e)=>new C1({getter:t,typeName:et.ZodLazy,...Zt(e)});class _1 extends tn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return lt(n,{received:n.data,code:Ye.invalid_literal,expected:this._def.value}),$t}return{status:"valid",value:e.data}}get value(){return this._def.value}}_1.create=(t,e)=>new _1({value:t,typeName:et.ZodLiteral,...Zt(e)});function HL(t,e){return new sd({values:t,typeName:et.ZodEnum,...Zt(e)})}class sd extends tn{constructor(){super(...arguments),a0.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return lt(n,{expected:bn.joinValues(r),received:n.parsedType,code:Ye.invalid_type}),$t}if(Zb(this,a0)||FL(this,a0,new Set(this._def.values)),!Zb(this,a0).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return lt(n,{received:n.data,code:Ye.invalid_enum_value,options:r}),$t}return bs(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return sd.create(e,{...this._def,...n})}exclude(e,n=this._def){return sd.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}a0=new WeakMap;sd.create=HL;class A1 extends tn{constructor(){super(...arguments),l0.set(this,void 0)}_parse(e){const n=bn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ht.string&&r.parsedType!==ht.number){const i=bn.objectValues(n);return lt(r,{expected:bn.joinValues(i),received:r.parsedType,code:Ye.invalid_type}),$t}if(Zb(this,l0)||FL(this,l0,new Set(bn.getValidEnumValues(this._def.values))),!Zb(this,l0).has(e.data)){const i=bn.objectValues(n);return lt(r,{received:r.data,code:Ye.invalid_enum_value,options:i}),$t}return bs(e.data)}get enum(){return this._def.values}}l0=new WeakMap;A1.create=(t,e)=>new A1({values:t,typeName:et.ZodNativeEnum,...Zt(e)});class ug extends tn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ht.promise&&n.common.async===!1)return lt(n,{code:Ye.invalid_type,expected:ht.promise,received:n.parsedType}),$t;const r=n.parsedType===ht.promise?n.data:Promise.resolve(n.data);return bs(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ug.create=(t,e)=>new ug({type:t,typeName:et.ZodPromise,...Zt(e)});class Fa extends tn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===et.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{lt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return $t;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?$t:l.status==="dirty"||n.value==="dirty"?Op(l.value):l});{if(n.value==="aborted")return $t;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?$t:a.status==="dirty"||n.value==="dirty"?Op(a.value):a}}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?$t:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?$t:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Rf(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Rf(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);bn.assertNever(i)}}Fa.create=(t,e,n)=>new Fa({schema:t,typeName:et.ZodEffects,effect:e,...Zt(n)});Fa.createWithPreprocess=(t,e,n)=>new Fa({schema:e,effect:{type:"preprocess",transform:t},typeName:et.ZodEffects,...Zt(n)});class La extends tn{_parse(e){return this._getType(e)===ht.undefined?bs(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}La.create=(t,e)=>new La({innerType:t,typeName:et.ZodOptional,...Zt(e)});class od extends tn{_parse(e){return this._getType(e)===ht.null?bs(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}od.create=(t,e)=>new od({innerType:t,typeName:et.ZodNullable,...Zt(e)});class E1 extends tn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ht.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}E1.create=(t,e)=>new E1({innerType:t,typeName:et.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Zt(e)});class P1 extends tn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return y1(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new bo(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new bo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}P1.create=(t,e)=>new P1({innerType:t,typeName:et.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Zt(e)});class tw extends tn{_parse(e){if(this._getType(e)!==ht.nan){const r=this._getOrReturnCtx(e);return lt(r,{code:Ye.invalid_type,expected:ht.nan,received:r.parsedType}),$t}return{status:"valid",value:e.data}}}tw.create=t=>new tw({typeName:et.ZodNaN,...Zt(t)});const cX=Symbol("zod_brand");class hE extends tn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class py extends tn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?$t:s.status==="dirty"?(n.dirty(),Op(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?$t:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new py({in:e,out:n,typeName:et.ZodPipeline})}}class T1 extends tn{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Rf(i)&&(i.value=Object.freeze(i.value)),i);return y1(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}T1.create=(t,e)=>new T1({innerType:t,typeName:et.ZodReadonly,...Zt(e)});function JT(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function VL(t,e={},n){return t?cg.create().superRefine((r,i)=>{var s,o;const a=t(r);if(a instanceof Promise)return a.then(l=>{var c,d;if(!l){const u=JT(e,r),f=(d=(c=u.fatal)!==null&&c!==void 0?c:n)!==null&&d!==void 0?d:!0;i.addIssue({code:"custom",...u,fatal:f})}});if(!a){const l=JT(e,r),c=(o=(s=l.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0;i.addIssue({code:"custom",...l,fatal:c})}}):cg.create()}const uX={object:hr.lazycreate};var et;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(et||(et={}));const dX=(t,e={message:`Input not instance of ${t.name}`})=>VL(n=>n instanceof t,e),WL=Pa.create,qL=rd.create,fX=tw.create,hX=id.create,GL=v1.create,pX=Lf.create,gX=Xb.create,mX=b1.create,yX=w1.create,vX=cg.create,bX=gf.create,wX=Ac.create,xX=Qb.create,SX=Ra.create,kX=hr.create,CX=hr.strictCreate,_X=x1.create,AX=bx.create,EX=S1.create,PX=vl.create,TX=k1.create,NX=ew.create,MX=Df.create,OX=Wp.create,RX=C1.create,LX=_1.create,DX=sd.create,IX=A1.create,$X=ug.create,YT=Fa.create,jX=La.create,FX=od.create,zX=Fa.createWithPreprocess,BX=py.create,UX=()=>WL().optional(),HX=()=>qL().optional(),VX=()=>GL().optional(),WX={string:t=>Pa.create({...t,coerce:!0}),number:t=>rd.create({...t,coerce:!0}),boolean:t=>v1.create({...t,coerce:!0}),bigint:t=>id.create({...t,coerce:!0}),date:t=>Lf.create({...t,coerce:!0})},qX=$t;var Pn=Object.freeze({__proto__:null,defaultErrorMap:lg,setErrorMap:zZ,getErrorMap:Jb,makeIssue:Yb,EMPTY_PATH:BZ,addIssueToContext:lt,ParseStatus:Yi,INVALID:$t,DIRTY:Op,OK:bs,isAborted:mC,isDirty:yC,isValid:Rf,isAsync:y1,get util(){return bn},get objectUtil(){return gC},ZodParsedType:ht,getParsedType:ac,ZodType:tn,datetimeRegex:UL,ZodString:Pa,ZodNumber:rd,ZodBigInt:id,ZodBoolean:v1,ZodDate:Lf,ZodSymbol:Xb,ZodUndefined:b1,ZodNull:w1,ZodAny:cg,ZodUnknown:gf,ZodNever:Ac,ZodVoid:Qb,ZodArray:Ra,ZodObject:hr,ZodUnion:x1,ZodDiscriminatedUnion:bx,ZodIntersection:S1,ZodTuple:vl,ZodRecord:k1,ZodMap:ew,ZodSet:Df,ZodFunction:Wp,ZodLazy:C1,ZodLiteral:_1,ZodEnum:sd,ZodNativeEnum:A1,ZodPromise:ug,ZodEffects:Fa,ZodTransformer:Fa,ZodOptional:La,ZodNullable:od,ZodDefault:E1,ZodCatch:P1,ZodNaN:tw,BRAND:cX,ZodBranded:hE,ZodPipeline:py,ZodReadonly:T1,custom:VL,Schema:tn,ZodSchema:tn,late:uX,get ZodFirstPartyTypeKind(){return et},coerce:WX,any:vX,array:SX,bigint:hX,boolean:GL,date:pX,discriminatedUnion:AX,effect:YT,enum:DX,function:OX,instanceof:dX,intersection:EX,lazy:RX,literal:LX,map:NX,nan:fX,nativeEnum:IX,never:wX,null:yX,nullable:FX,number:qL,object:kX,oboolean:VX,onumber:HX,optional:jX,ostring:UX,pipeline:BX,preprocess:zX,promise:$X,record:TX,set:MX,strictObject:CX,string:WL,symbol:gX,transformer:YT,tuple:PX,undefined:mX,union:_X,unknown:bX,void:xX,NEVER:qX,ZodIssueCode:Ye,quotelessJson:FZ,ZodError:bo});const pE=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),GX=pE?Promise.resolve().then(function(){return XX}):Promise.resolve().then(function(){return iQ});async function KL(...t){return(await GX).default(...t)}pE?Promise.resolve().then(function(){return eQ}):Promise.resolve().then(function(){return oQ});const KX=pE?Promise.resolve().then(function(){return nQ}):Promise.resolve().then(function(){return lQ});async function JX(...t){return(await KX).default(...t)}const YX=async t=>{const e=await t.getFile();return e.handle=t,e};var ZX=async(t=[{}])=>{Array.isArray(t)||(t=[t]);const e=[];t.forEach((i,s)=>{e[s]={description:i.description||"Files",accept:{}},i.mimeTypes?i.mimeTypes.map(o=>{e[s].accept[o]=i.extensions||[]}):e[s].accept["*/*"]=i.extensions||[]});const n=await window.showOpenFilePicker({id:t[0].id,startIn:t[0].startIn,types:e,multiple:t[0].multiple||!1,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1}),r=await Promise.all(n.map(YX));return t[0].multiple?r:r[0]},XX={__proto__:null,default:ZX};function V2(t){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var r=n.done;return Promise.resolve(n.value).then(function(i){return{value:i,done:r}})}return V2=function(n){this.s=n,this.n=n.next},V2.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(n){var r=this.s.return;return r===void 0?Promise.resolve({value:n,done:!0}):e(r.apply(this.s,arguments))},throw:function(n){var r=this.s.return;return r===void 0?Promise.reject(n):e(r.apply(this.s,arguments))}},new V2(t)}const JL=async(t,e,n=t.name,r)=>{const i=[],s=[];var o,a=!1,l=!1;try{for(var c,d=function(u){var f,h,p,g=2;for(typeof Symbol<"u"&&(h=Symbol.asyncIterator,p=Symbol.iterator);g--;){if(h&&(f=u[h])!=null)return f.call(u);if(p&&(f=u[p])!=null)return new V2(f.call(u));h="@@asyncIterator",p="@@iterator"}throw new TypeError("Object is not async iterable")}(t.values());a=!(c=await d.next()).done;a=!1){const u=c.value,f=`${n}/${u.name}`;u.kind==="file"?s.push(u.getFile().then(h=>(h.directoryHandle=t,h.handle=u,Object.defineProperty(h,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>f})))):u.kind!=="directory"||!e||r&&r(u)||i.push(JL(u,e,f,r))}}catch(u){l=!0,o=u}finally{try{a&&d.return!=null&&await d.return()}finally{if(l)throw o}}return[...(await Promise.all(i)).flat(),...await Promise.all(s)]};var QX=async(t={})=>{t.recursive=t.recursive||!1,t.mode=t.mode||"read";const e=await window.showDirectoryPicker({id:t.id,startIn:t.startIn,mode:t.mode});return(await(await e.values()).next()).done?[e]:JL(e,t.recursive,void 0,t.skipDirectory)},eQ={__proto__:null,default:QX},tQ=async(t,e=[{}],n=null,r=!1,i=null)=>{Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const s=[];let o=null;if(t instanceof Blob&&t.type?o=t.type:t.headers&&t.headers.get("content-type")&&(o=t.headers.get("content-type")),e.forEach((c,d)=>{s[d]={description:c.description||"Files",accept:{}},c.mimeTypes?(d===0&&o&&c.mimeTypes.push(o),c.mimeTypes.map(u=>{s[d].accept[u]=c.extensions||[]})):o?s[d].accept[o]=c.extensions||[]:s[d].accept["*/*"]=c.extensions||[]}),n)try{await n.getFile()}catch(c){if(n=null,r)throw c}const a=n||await window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:s,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1});!n&&i&&i(a);const l=await a.createWritable();return"stream"in t?(await t.stream().pipeTo(l),a):"body"in t?(await t.body.pipeTo(l),a):(await l.write(await t),await l.close(),a)},nQ={__proto__:null,default:tQ},rQ=async(t=[{}])=>(Array.isArray(t)||(t=[t]),new Promise((e,n)=>{const r=document.createElement("input");r.type="file";const i=[...t.map(l=>l.mimeTypes||[]),...t.map(l=>l.extensions||[])].join();r.multiple=t[0].multiple||!1,r.accept=i||"",r.style.display="none",document.body.append(r);const s=l=>{typeof o=="function"&&o(),e(l)},o=t[0].legacySetup&&t[0].legacySetup(s,()=>o(n),r),a=()=>{window.removeEventListener("focus",a),r.remove()};r.addEventListener("click",()=>{window.addEventListener("focus",a)}),r.addEventListener("change",()=>{window.removeEventListener("focus",a),r.remove(),s(r.multiple?Array.from(r.files):r.files[0])}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),iQ={__proto__:null,default:rQ},sQ=async(t=[{}])=>(Array.isArray(t)||(t=[t]),t[0].recursive=t[0].recursive||!1,new Promise((e,n)=>{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0;const i=o=>{typeof s=="function"&&s(),e(o)},s=t[0].legacySetup&&t[0].legacySetup(i,()=>s(n),r);r.addEventListener("change",()=>{let o=Array.from(r.files);t[0].recursive?t[0].recursive&&t[0].skipDirectory&&(o=o.filter(a=>a.webkitRelativePath.split("/").every(l=>!t[0].skipDirectory({name:l,kind:"directory"})))):o=o.filter(a=>a.webkitRelativePath.split("/").length===2),i(o)}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),oQ={__proto__:null,default:sQ},aQ=async(t,e={})=>{Array.isArray(e)&&(e=e[0]);const n=document.createElement("a");let r=t;"body"in t&&(r=await async function(o,a){const l=o.getReader(),c=new ReadableStream({start:f=>async function h(){return l.read().then(({done:p,value:g})=>{if(!p)return f.enqueue(g),h();f.close()})}()}),d=new Response(c),u=await d.blob();return l.releaseLock(),new Blob([u],{type:a})}(t.body,t.headers.get("content-type"))),n.download=e.fileName||"Untitled",n.href=URL.createObjectURL(await r);const i=()=>{typeof s=="function"&&s()},s=e.legacySetup&&e.legacySetup(i,()=>s(),n);return n.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),i()}),n.click(),null},lQ={__proto__:null,default:aQ},YL=Object.defineProperty,cQ=Object.defineProperties,uQ=Object.getOwnPropertyDescriptors,ZT=Object.getOwnPropertySymbols,dQ=Object.prototype.hasOwnProperty,fQ=Object.prototype.propertyIsEnumerable,XT=(t,e,n)=>e in t?YL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,De=(t,e)=>{for(var n in e||(e={}))dQ.call(e,n)&&XT(t,n,e[n]);if(ZT)for(var n of ZT(e))fQ.call(e,n)&&XT(t,n,e[n]);return t},bC=(t,e)=>cQ(t,uQ(e)),Fg=(t,e)=>{for(var n in e)YL(t,n,{get:e[n],enumerable:!0})},Vu=(t,e,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(c){i(c)}},o=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())}),po=6,ZL=po,gE=10,Ec=4,QT=5,US=3,hQ=16,pQ="url('data:image/svg+xml;utf8,%3Csvg%20width%3D%2219%22%20height%3D%2219%22%20viewBox%3D%220%200%2019%2019%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20transform%3D%22rotate%28{{angle}}%209%209%29%22%3E%3Cg%20clip-path%3D%22url%28%23clip0_305_323%29%22%3E%3Cg%20filter%3D%22url%28%23filter0_d_305_323%29%22%3E%3Cpath%20d%3D%22M6%206L9.5%202.5M9.5%202.5L13%206M9.5%202.5V16.5M13%2013L9.5%2016.5M9.5%2016.5L6%2013%22%20stroke%3D%22white%22%20stroke-width%3D%223%22%2F%3E%3C%2Fg%3E%3Cpath%20d%3D%22M7%205L9.5%202.5M9.5%202.5L12%205M9.5%202.5V16.5M12%2014L9.5%2016.5M9.5%2016.5L7%2014%22%20stroke%3D%22black%22%2F%3E%3C%2Fg%3E%3Cdefs%3E%3Cfilter%20id%3D%22filter0_d_305_323%22%20x%3D%223.93933%22%20y%3D%22-0.621338%22%20width%3D%2211.1213%22%20height%3D%2220.2427%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%3CfeColorMatrix%20in%3D%22SourceAlpha%22%20type%3D%22matrix%22%20values%3D%220%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200%22%20result%3D%22hardAlpha%22%2F%3E%3CfeOffset%2F%3E%3CfeGaussianBlur%20stdDeviation%3D%220.5%22%2F%3E%3CfeComposite%20in2%3D%22hardAlpha%22%20operator%3D%22out%22%2F%3E%3CfeColorMatrix%20type%3D%22matrix%22%20values%3D%220%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200.5%200%22%2F%3E%3CfeBlend%20mode%3D%22normal%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22effect1_dropShadow_305_323%22%2F%3E%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22effect1_dropShadow_305_323%22%20result%3D%22shape%22%2F%3E%3C%2Ffilter%3E%3CclipPath%20id%3D%22clip0_305_323%22%3E%3Crect%20width%3D%2219%22%20height%3D%2219%22%20fill%3D%22white%22%2F%3E%3C%2FclipPath%3E%3C%2Fdefs%3E%3C%2Fg%3E%3C%2Fsvg%3E')",gQ="url('data:image/svg+xml;utf8,%3Csvg%20width%3D%2219%22%20height%3D%2219%22%20viewBox%3D%220%200%2019%2019%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20transform%3D%22rotate%28{{angle}}%209%209%29%22%3E%3Cg%20clip-path%3D%22url%28%23clip0_414_323%29%22%3E%3Cg%20filter%3D%22url%28%23filter0_d_414_323%29%22%3E%3Cpath%20d%3D%22M15.5%2010C15.5%206.68629%2012.8137%204%209.5%204C6.18629%204%203.5%206.68629%203.5%2010%22%20stroke%3D%22white%22%20stroke-width%3D%223%22%2F%3E%3Cpath%20d%3D%22M13%208L15.5%2010.5L18%208%22%20stroke%3D%22white%22%20stroke-width%3D%223%22%2F%3E%3Cpath%20d%3D%22M6%208L3.5%2010.5L1%208%22%20stroke%3D%22white%22%20stroke-width%3D%223%22%2F%3E%3C%2Fg%3E%3Cpath%20d%3D%22M1.5%208.5L3.5%2010.5L5.5%208.5M17.5%208.5L15.5%2010.5L13.5%208.5%22%20stroke%3D%22black%22%2F%3E%3Cpath%20d%3D%22M15.5%2010C15.5%206.68629%2012.8137%204%209.5%204C6.18629%204%203.5%206.68629%203.5%2010%22%20stroke%3D%22black%22%2F%3E%3C%2Fg%3E%3Cdefs%3E%3Cfilter%20id%3D%22filter0_d_414_323%22%20x%3D%22-1.06067%22%20y%3D%221.5%22%20width%3D%2221.1213%22%20height%3D%2212.1213%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%3CfeColorMatrix%20in%3D%22SourceAlpha%22%20type%3D%22matrix%22%20values%3D%220%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200%22%20result%3D%22hardAlpha%22%2F%3E%3CfeOffset%2F%3E%3CfeGaussianBlur%20stdDeviation%3D%220.5%22%2F%3E%3CfeComposite%20in2%3D%22hardAlpha%22%20operator%3D%22out%22%2F%3E%3CfeColorMatrix%20type%3D%22matrix%22%20values%3D%220%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200.5%200%22%2F%3E%3CfeBlend%20mode%3D%22normal%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22effect1_dropShadow_414_323%22%2F%3E%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22effect1_dropShadow_414_323%22%20result%3D%22shape%22%2F%3E%3C%2Ffilter%3E%3CclipPath%20id%3D%22clip0_414_323%22%3E%3Crect%20width%3D%2219%22%20height%3D%2219%22%20fill%3D%22white%22%2F%3E%3C%2FclipPath%3E%3C%2Fdefs%3E%3C%2Fg%3E%3C%2Fsvg%3E')",_t={RESIZE:`${pQ} 9 9, pointer`,ROTATE:`${gQ} 9 9, pointer`,DEFAULT:"default",CROSSHAIR:"crosshair",GRAB:"grab",GRABBING:"grabbing",MOVE:"move",POINTER:"pointer"},Fr={BUTTON1:0,BUTTON2:1,BUTTON3:2},jn={BACKGROUND:"$background",FOREGROUND:"$foreground",TRANSPARENT:"$transparent",BLANK:"$slate2",CANVAS:"$background",GRID:"$slate3",SELECTION:"$blue10",BORDER:"$slate9"},Oe={TOP:"t",RIGHT:"r",BOTTOM:"b",LEFT:"l",LEFT_TOP:"lt",RIGHT_TOP:"rt",RIGHT_BOTTOM:"rb",LEFT_BOTTOM:"lb"},mr={};Fg(mr,{angle:()=>bl,assign:()=>wQ,boundingPath:()=>TQ,boundingRect:()=>ei,center:()=>hc,centroidPolygon:()=>xE,copy:()=>On,copyRect:()=>AQ,curvePathPoints:()=>dg,curveToBezier:()=>aD,distance:()=>Gn,distanceToLine:()=>vE,distanceToPath:()=>_Q,equalRect:()=>PQ,equals:()=>mE,equalsPath:()=>rD,expandRect:()=>xx,findNearestOnLine:()=>eD,findNearestOnPath:()=>wx,fitScaleTo:()=>tD,generatePath:()=>NQ,getNearSegment:()=>Ug,getPointAtDistance:()=>c0,getPointOnLine:()=>lD,getPointOnPath:()=>ps,getPositionOnLine:()=>cD,getPositionOnPath:()=>ad,height:()=>rn,inCircle:()=>CQ,inPolygon:()=>Bg,inRect:()=>nw,inSquare:()=>kQ,includeRect:()=>nD,intersect:()=>Rp,isClosed:()=>iD,isHorz:()=>yE,isRectilinear:()=>MQ,isVert:()=>SQ,lineOverlapRect:()=>bE,mid:()=>Wo,move:()=>zg,movePoints:()=>XL,normalizeAngle:()=>Gs,normalizeRect:()=>Zi,overlapRect:()=>wE,pathCopy:()=>Bn,pathIntersect:()=>SC,pathLength:()=>kd,pointsOnBezier:()=>sD,pointsOnEllipse:()=>oD,projectPoints:()=>mf,quantize:()=>xQ,rectToPolygon:()=>qs,reduceObliquePath:()=>RQ,reduceRectilinearPath:()=>LQ,rotate:()=>N1,scaleRect:()=>EQ,square:()=>QL,toDegree:()=>OQ,toRadian:()=>Aa,unionRect:()=>hl,width:()=>nn});function mQ(t,e){return Math.sqrt(W2(t,e))}function W2(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function yQ(t,e,n){const r=W2(e,n);if(r===0)return W2(t,e);let i=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/r;return i=Math.max(0,Math.min(1,i)),W2(t,Kd(e,n,i))}function Kd(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function vQ(t,e){const n=t[e+0],r=t[e+1],i=t[e+2],s=t[e+3];let o=3*r[0]-2*n[0]-s[0];o*=o;let a=3*r[1]-2*n[1]-s[1];a*=a;let l=3*i[0]-2*s[0]-n[0];l*=l;let c=3*i[1]-2*s[1]-n[1];return c*=c,o<l&&(o=l),a<c&&(a=c),o+a}function wC(t,e,n,r){const i=r||[];if(vQ(t,e)<n){const s=t[e+0];i.length?mQ(i[i.length-1],s)>1&&i.push(s):i.push(s),i.push(t[e+3])}else{const o=t[e+0],a=t[e+1],l=t[e+2],c=t[e+3],d=Kd(o,a,.5),u=Kd(a,l,.5),f=Kd(l,c,.5),h=Kd(d,u,.5),p=Kd(u,f,.5),g=Kd(h,p,.5);wC([o,d,h,g],0,n,i),wC([g,p,f,c],0,n,i)}return i}function xC(t,e,n,r,i){const s=i||[],o=t[e],a=t[n-1];let l=0,c=1;for(let d=e+1;d<n-1;++d){const u=yQ(t[d],o,a);u>l&&(l=u,c=d)}return Math.sqrt(l)>r?(xC(t,e,c+1,r,s),xC(t,c,n,r,s)):(s.length||s.push(o),s.push(a)),s}function bQ(t,e=.15,n){const r=[],i=(t.length-1)/3;for(let s=0;s<i;s++){const o=s*3;wC(t,o,e,r)}return n&&n>0?xC(r,0,r.length,n):r}function On(t){return[t[0],t[1]]}function wQ(t,e){return t[0]=e[0],t[1]=e[1],t}function mE(t,e){return t[0]===e[0]&&t[1]===e[1]}function xQ(t){const e=Math.round(t[0]),n=Math.round(t[1]);return[e,n]}function Wo(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function zg(t,e,n){return[t[0]+e,t[1]+n]}function XL(t,e,n){return t.map(r=>zg(r,e,n))}function yE(t,e){const n=Math.abs(t[0]-e[0]),r=Math.abs(t[1]-e[1]);return n>r}function SQ(t,e){return!yE(t,e)}function nw(t,e){let n=Zi(e);return n[0][0]<=t[0]&&t[0]<=n[1][0]&&n[0][1]<=t[1]&&t[1]<=n[1][1]}function kQ(t,e,n){return nw(t,QL(e,n))}function CQ(t,e,n){return Gn(t,e)<=n}function Bg(t,e){let n=!1;for(let r=0,i=e.length-1;r<e.length;r++)e[r][1]>t[1]!=e[i][1]>t[1]&&t[0]<(e[i][0]-e[r][0])*(t[1]-e[r][1])/(e[i][1]-e[r][1])+e[r][0]&&(n=!n),i=r;return n}function Gn(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function HS(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function vE(t,e){let n=e[0],r=e[1],i=HS(n,r);if(i===0)return HS(t,n);let s=((t[0]-n[0])*(r[0]-n[0])+(t[1]-n[1])*(r[1]-n[1]))/i;s=Math.max(0,Math.min(1,s));let o=HS(t,[n[0]+s*(r[0]-n[0]),n[1]+s*(r[1]-n[1])]);return Math.sqrt(o)}function _Q(t,e){let n=Number.MAX_SAFE_INTEGER;for(let r=0;r<e.length-1;r++){const i=[e[r],e[r+1]];n=Math.min(n,vE(t,i))}return n}function Rp(t,e,n=!1,r=!1,i=!1,s=!1){const o=t[0],a=t[1],l=e[0],c=e[1];let d=(c[1]-l[1])*(a[0]-o[0])-(c[0]-l[0])*(a[1]-o[1]);if(d==0)return null;let u=o[1]-l[1],f=o[0]-l[0],h=(c[0]-l[0])*u-(c[1]-l[1])*f,p=(a[0]-o[0])*u-(a[1]-o[1])*f;u=h/d,f=p/d;let g=o[0]+u*(a[0]-o[0]),b=o[1]+u*(a[1]-o[1]),v=u>=0&&u<=1||n&&u<0||r&&u>1,x=f>=0&&f<=1||i&&f<0||s&&f>1;return v&&x?[g,b]:null}function QL(t,e){return[[t[0]-e,t[1]-e],[t[0]+e,t[1]+e]]}function bE(t,e){const n=t[0],r=t[1];if(nw(n,e)&&nw(r,e))return!0;const i=qs(e);return Rp(t,[i[0],i[1]])!==null||Rp(t,[i[1],i[2]])!==null||Rp(t,[i[2],i[3]])!==null||Rp(t,[i[3],i[4]])!==null}function eD(t,e){const n=e[0],r=e[1],i=[r[0]-n[0],r[1]-n[1]],s=[t[0]-n[0],t[1]-n[1]],o=i[0]*i[0]+i[1]*i[1];let a=s[0]*i[0]+s[1]*i[1];const l=Math.min(1,Math.max(0,a/o));return a=(r[0]-n[0])*(t[1]-n[1])-(r[1]-n[1])*(t[0]-n[0]),[n[0]+i[0]*l,n[1]+i[1]*l]}function wx(t,e,n){const r=Ug(t,e,n);return r>-1?eD(t,[e[r],e[r+1]]):null}function nn(t){return Math.abs(t[1][0]-t[0][0])}function rn(t){return Math.abs(t[1][1]-t[0][1])}function AQ(t){return[On(t[0]),On(t[1])]}function xx(t,e){return[[t[0][0]-e,t[0][1]-e],[t[1][0]+e,t[1][1]+e]]}function hl(t,e){return[[Math.min(t[0][0],e[0][0]),Math.min(t[0][1],e[0][1])],[Math.max(t[1][0],e[1][0]),Math.max(t[1][1],e[1][1])]]}function EQ(t,e){return[[t[0][0]*e,t[0][1]*e],[t[1][0]*e,t[1][1]*e]]}function tD(t,e,n=1){let r=t[0],i=t[1],s=1;const o=e[0]/t[0],a=e[1]/t[1];return s=Math.min(o,a),s>n&&(s=n),r=Math.ceil(r*s),i=Math.ceil(i*s),[r,i,s]}function wE(t,e){return!(t[0][0]>e[1][0]||e[0][0]>t[1][0]||t[0][1]>e[1][1]||e[0][1]>t[1][1])}function nD(t,e){return t[0][0]<=e[0][0]&&t[0][1]<=e[0][1]&&t[1][0]>=e[1][0]&&t[1][1]>=e[1][1]}function Zi(t){let e,n,r,i;return t[0][0]<t[1][0]?(e=t[0][0],n=t[1][0]):(e=t[1][0],n=t[0][0]),t[0][1]<t[1][1]?(r=t[0][1],i=t[1][1]):(r=t[1][1],i=t[0][1]),[[e,r],[n,i]]}function qs(t,e=!0){let n=[[t[0][0],t[0][1]],[t[1][0],t[0][1]],[t[1][0],t[1][1]],[t[0][0],t[1][1]]];return e&&n.push([t[0][0],t[0][1]]),n}function hc(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}function PQ(t,e){return t[0][0]===e[0][0]&&t[0][1]===e[0][1]&&t[1][0]===e[1][0]&&t[1][1]===e[1][1]}function Ug(t,e,n){for(let r=0;r<e.length-1;r++)if(vE(t,[e[r],e[r+1]])<n)return r;return-1}function Bn(t){return t.map(e=>On(e))}function kd(t){let e=0;for(let n=1;n<t.length;n++){const r=Gn(t[n-1],t[n]);e+=r}return e}function rD(t,e,n=0){if(t.length!==e.length)return!1;let r=0;for(let i=0;i<t.length;i++){const s=t[i],o=e[i];r+=Gn(s,o)}return r<=n}function ei(t){const e=t.map(r=>r[0]),n=t.map(r=>r[1]);return[[Math.min(...e),Math.min(...n)],[Math.max(...e),Math.max(...n)]]}function TQ(t){return qs(ei(t))}function SC(t,e,n=!0,r=!0,i=!0){let s=[];for(let o=0;o<t.length-1;o++){let a=[t[o],t[o+1]],l=Rp(a,e,!1,!1,n,r);l&&s.push([l[0],l[1],Gn(l,e[i?0:1])])}return s.length>0?(s.sort((o,a)=>o[2]-a[2]),On(s[0])):null}function mf(t,e,n){const r=e[0][0],i=e[0][1],s=n[0][0]-r,o=n[0][1]-i,a=nn(n)/nn(e),l=rn(n)/rn(e);return t.map(d=>[r+(d[0]-r)*a+s,i+(d[1]-i)*l+o])}function NQ(t,e,n=!1){if(n){const r=Zi([t,e]),i=nn(r)>rn(r),s=Wo(t,e);return i?[t,[s[0],t[1]],[s[0],e[1]],e]:[t,[t[0],s[1]],[e[0],s[1]],e]}else return[t,e]}function MQ(t){for(let e=1,n=t.length;e<n;e++){const r=t[e-1],i=t[e];if(r[0]!==i[0]&&r[1]!==i[1])return!1}return!0}function iD(t){return t.length>3&&Gn(t[0],t[t.length-1])<1}function bl(t,e){var n=t[0]-e[0],r=t[1]-e[1];return Gs(Math.atan2(r,n)*(180/Math.PI)-90)}function Gs(t){return t<0&&(t=t+360),t>=360&&(t=t-360),t}function Aa(t){return t*(Math.PI/180)}function OQ(t){return t*(180/Math.PI)}function N1(t,e,n=[0,0]){const r=Aa(e),i=Math.cos(-r),s=Math.sin(-r),o=i*(t[0]-n[0])+s*(t[1]-n[1])+n[0],a=i*(t[1]-n[1])-s*(t[0]-n[0])+n[1];return[o,a]}function sD(t,e,n){return bQ(t,e,n)}function oD(t,e,n,r){let i=[],s=2*Math.PI/r;for(let o=0;o<r;o++){let a=o*s,l=t[0]+e*Math.cos(a),c=t[1]+n*Math.sin(a);i.push([l,c])}return i.push(i[0]),i}function aD(t,e=0){if(t.length<3)throw new Error("A curve must have at least three points.");const r=[],i=[];i.push(t[0],t[0]);for(let a=1;a<t.length;a++)i.push(t[a]),a===t.length-1&&i.push(t[a]);const s=[],o=1-e;r.push(On(i[0]));for(let a=1;a+2<i.length;a++){const l=i[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*i[a+1][0]-o*i[a-1][0])/6,l[1]+(o*i[a+1][1]-o*i[a-1][1])/6],s[2]=[i[a+1][0]+(o*i[a][0]-o*i[a+2][0])/6,i[a+1][1]+(o*i[a][1]-o*i[a+2][1])/6],s[3]=[i[a+1][0],i[a+1][1]],r.push(s[1],s[2],s[3])}return r}function dg(t){return sD(aD(t))}function c0(t,e,n){let r=e[0]-t[0],i=e[1]-t[1],s=Math.sqrt(r*r+i*i),o=r/s,a=i/s,l=t[0]+n*o,c=t[1]+n*a;return[l,c]}function lD(t,e,n){if(n<0||n>1)throw new Error("position should be a value between 0 and 1");const r=(e[0]-t[0])*n,i=(e[1]-t[1])*n;return[t[0]+r,t[1]+i]}function ps(t,e){if(e<0||e>1)throw new Error("position should be a value between 0 and 1");let r=kd(t)*e;for(let i=1;i<t.length;i++){const s=Gn(t[i-1],t[i]);if(r<=s)return lD(t[i-1],t[i],r/s);r=r-s}return[t[0][0],t[0][1]]}function cD(t,e,n){let r=Gn(t,e);return r===0&&(r=1e-8),Gn(t,n)/r}function ad(t,e,n=1){const r=kd(t),i=Ug(e,t,n);let s=0;for(let o=0;o<t.length-1;o++){const a=Gn(t[o],t[o+1]);if(o===i)return s+=cD(t[o],t[o+1],e)*a,s/r;s+=a}return 0}function RQ(t,e){let n=Bn(t),r=0;for(;r<n.length-2;){const i=n[r],s=n[r+1],o=n[r+2],a=Gs(bl(s,o)-bl(s,i));mE(i,s)?n.splice(r,1):Math.abs(180-a)<e?n.splice(r+1,1):r++}return n}function LQ(t,e){let n=Bn(t);if(n.length>3){let r=0;for(;r<n.length-3;){const i=n[r],s=n[r+1],o=n[r+2],a=n[r+3];if(Gn(s,o)<e){if(yE(s,o)){const l=(i[0]+a[0])/2;i[0]=l,a[0]=l}else{const l=(i[1]+a[1])/2;i[1]=l,a[1]=l}n.splice(r+1,2)}r++}}return n}function xE(t){const e=t.length;return t.reduce((n,r,i)=>(n[0]+=r[0],n[1]+=r[1],i===e-1&&(n[0]/=e,n[1]/=e),n),[0,0])}function kC(t,e,n,r="nonzero"){t.beginPath();for(const i of e.ops){const s=typeof n=="number"&&n>=0?i.data.map(o=>+o.toFixed(n)):i.data;switch(i.op){case"move":t.moveTo(s[0],s[1]);break;case"bcurveTo":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"lineTo":t.lineTo(s[0],s[1]);break}}e.type==="fillPath"?t.fill(r):t.stroke()}function DQ(t,e,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2),t.save(),n.fillLineDash&&t.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(t.lineDashOffset=n.fillLineDashOffset),t.strokeStyle=n.fill||"",t.lineWidth=r,kC(t,e,n.fixedDecimalPlaceDigits),t.restore()}function ci(t,e){const n=e.sets||[],r=e.options,i=e.options.fixedDecimalPlaceDigits;for(const s of n)switch(s.type){case"path":t.save(),t.strokeStyle=r.stroke==="none"?"transparent":r.stroke,t.lineWidth=r.strokeWidth,r.strokeLineDash&&t.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(t.lineDashOffset=r.strokeLineDashOffset),kC(t,s,i),t.restore();break;case"fillPath":{t.save(),t.fillStyle=r.fill||"";const o=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";kC(t,s,i,o),t.restore();break}case"fillSketch":DQ(t,s,r);break}}var en={NONE:"none",SOLID:"solid",HACHURE:"hachure",CROSS_HATCH:"cross-hatch"};function Mu(t){let e=[];for(let n=0;n<t.length;n++){const r=t[n];switch(r[0]){case"M":if(r.length<3)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`M ${r[1]} ${r[2]}`);break;case"m":if(r.length<3)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`m ${r[1]} ${r[2]}`);break;case"L":if(r.length<3)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`L ${r[1]} ${r[2]}`);break;case"l":if(r.length<3)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`l ${r[1]} ${r[2]}`);break;case"H":if(r.length<2)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`H ${r[1]}`);break;case"h":if(r.length<2)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`h ${r[1]}`);break;case"V":if(r.length<2)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`V ${r[1]}`);break;case"v":if(r.length<2)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`v ${r[1]}`);break;case"C":if(r.length<7)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`C ${r[1]} ${r[2]}, ${r[3]} ${r[4]}, ${r[5]} ${r[6]}`);break;case"c":if(r.length<7)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`c ${r[1]} ${r[2]}, ${r[3]} ${r[4]}, ${r[5]} ${r[6]}`);break;case"S":if(r.length<5)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`S ${r[1]} ${r[2]}, ${r[3]} ${r[4]}`);break;case"s":if(r.length<5)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`s ${r[1]} ${r[2]}, ${r[3]} ${r[4]}`);break;case"Q":if(r.length<5)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`Q ${r[1]} ${r[2]}, ${r[3]} ${r[4]}`);break;case"q":if(r.length<5)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`q ${r[1]} ${r[2]}, ${r[3]} ${r[4]}`);break;case"T":if(r.length<3)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`T ${r[1]} ${r[2]}`);break;case"t":if(r.length<3)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`t ${r[1]} ${r[2]}`);break;case"A":if(r.length<8)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`A ${r[1]} ${r[2]} ${r[3]} ${r[4]} ${r[5]} ${r[6]} ${r[7]}`);break;case"a":if(r.length<8)throw new Error(`Invalid path item: ${JSON.stringify(r)}`);e.push(`a ${r[1]} ${r[2]} ${r[3]} ${r[4]} ${r[5]} ${r[6]} ${r[7]}`);break;case"Z":case"z":e.push("Z");break}}return e.join(" ")}var gy=class{constructor(t,e){this.element=t;const n=this.element.getContext("2d");if(!n)throw new Error("Failed to create context2d");this.context=n,this.colorVariables={background:"#ffffff",foreground:"#000000",transparent:"#ffffff00"},this.generator=SL.generator(),this.ratio=e,this.px=e,this.stateStack=[],this.strokeColor=jn.FOREGROUND,this.strokeWidth=1,this.strokePattern=[],this.fillColor=jn.BACKGROUND,this.fillStyle=en.SOLID,this.fontColor=jn.FOREGROUND,this.font="13px sans-serif",this.alpha=1,this.roughness=0,this.origin=[0,0],this.scale=1}resolveColor(t){return t.startsWith("$")?this.colorVariables[t.substring(1)]||"#7f7f7f":t}storeState(){const t={strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokePattern:this.strokePattern,fillColor:this.fillColor,fillStyle:this.fillStyle,fontColor:this.fontColor,font:this.font,alpha:this.alpha,roughness:this.roughness};return this.stateStack.push(t),this}restoreState(){const t=this.stateStack.pop();return t&&(this.strokeColor=t.strokeColor,this.strokeWidth=t.strokeWidth,this.strokePattern=t.strokePattern,this.fillColor=t.fillColor,this.fillStyle=t.fillStyle,this.fontColor=t.fontColor,this.font=t.font,this.alpha=t.alpha,this.roughness=t.roughness),this}globalTransform(){return this.context.translate(this.origin[0]*this.scale*this.ratio,this.origin[1]*this.scale*this.ratio),this.context.scale(this.scale*this.ratio,this.scale*this.ratio),this}globalCoordTransform(t){const e=(t[0]+this.origin[0])*this.scale*this.ratio,n=(t[1]+this.origin[1])*this.scale*this.ratio;return[e,n]}globalCoordTransformRev(t){const e=t[0]/this.ratio/this.scale-this.origin[0],n=t[1]/this.ratio/this.scale-this.origin[1];return[e,n]}save(){return this.context.save(),this}restore(){return this.context.restore(),this}translateTransform(t,e){this.context.translate(t,e)}rotateTransform(t){this.context.rotate(Aa(t))}scaleTransform(t,e){this.context.scale(t,e)}setStrokeColor(t){return this.strokeColor=t,this}setStrokeWidth(t){return this.strokeWidth=t,this}setStrokePattern(t){return this.strokePattern=t,this}setFillColor(t){return this.fillColor=t,this}setFillStyle(t){return this.fillStyle=t,this}setFontColor(t){return this.fontColor=t,this}setFont(t){return this.font=t,this}setAlpha(t){return this.alpha=t,this}setRoughness(t){return this.roughness=t,this}line(t,e,n,r,i=1){if(this.context.strokeStyle=this.resolveColor(this.strokeColor),this.context.lineWidth=this.strokeWidth,this.context.lineCap="round",this.context.lineJoin="round",this.context.globalAlpha=this.alpha,this.context.setLineDash(this.strokePattern.map(s=>s*this.strokeWidth)),this.strokeWidth>0)if(this.roughness>0){const s=this.generator.line(t,e,n,r,{seed:i,roughness:this.roughness,stroke:this.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(o=>o*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1});ci(this.context,s)}else this.context.beginPath(),this.context.moveTo(t,e),this.context.lineTo(n,r),this.context.stroke();return this}strokeRect(t,e,n,r,i=1){const s=t<n?t:n,o=e<r?e:r,a=Math.abs(n-t),l=Math.abs(r-e);if(this.context.strokeStyle=this.resolveColor(this.strokeColor),this.context.lineWidth=this.strokeWidth,this.context.lineCap="round",this.context.lineJoin="round",this.context.globalAlpha=this.alpha,this.context.setLineDash(this.strokePattern.map(c=>c*this.strokeWidth)),this.strokeWidth>0)if(this.roughness>0){const c=this.generator.rectangle(s,o,a,l,{seed:i,roughness:this.roughness,stroke:this.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(d=>d*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1});ci(this.context,c)}else this.context.beginPath(),this.context.rect(s,o,a,l),this.context.closePath(),this.context.stroke();return this}fillRect(t,e,n,r,i=1){const s=t<n?t:n,o=e<r?e:r,a=Math.abs(n-t),l=Math.abs(r-e);if(this.context.fillStyle=this.resolveColor(this.fillColor),this.context.globalAlpha=this.alpha,this.context.lineWidth=this.strokeWidth,this.roughness>0||this.fillStyle!==en.SOLID){const c=this.generator.rectangle(s,o,a,l,{seed:i,roughness:this.roughness,fill:this.resolveColor(this.fillColor),fillStyle:this.fillStyle,fillLineDash:[],stroke:this.resolveColor("$transparent"),strokeWidth:this.strokeWidth});ci(this.context,c)}else this.context.fillRect(s,o,a,l);return this}rect(t,e,n,r,i=1){return this.fillRect(t,e,n,r,i),this.strokeRect(t,e,n,r,i),this}strokeRoundRect(t,e,n,r,i,s=1){const o=t<n?t:n,a=e<r?e:r,l=Math.abs(n-t),c=Math.abs(r-e),d=Array.isArray(i)?i:[i,i,i,i];if(this.context.strokeStyle=this.resolveColor(this.strokeColor),this.context.lineWidth=this.strokeWidth,this.context.lineCap="round",this.context.lineJoin="round",this.context.globalAlpha=this.alpha,this.context.setLineDash(this.strokePattern.map(u=>u*this.strokeWidth)),this.strokeWidth>0)if(this.roughness>0){const u=this.generator.path(`M${o+d[0]},${a} L${o+l-d[1]},${a} Q${o+l},${a} ${o+l},${a+d[1]} L${o+l},${a+c-d[2]} Q${o+l},${a+c} ${o+l-d[2]},${a+c} L${o+d[3]},${a+c} Q${o},${a+c} ${o},${a+c-d[3]} L${o},${a+d[0]} Q${o},${a} ${o+d[0]},${a} Z`,{seed:s,roughness:this.roughness,stroke:this.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(f=>f*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1,preserveVertices:!0});ci(this.context,u)}else this.context.beginPath(),this.context.moveTo(o+d[0],a),this.context.lineTo(o+l-d[1],a),this.context.quadraticCurveTo(o+l,a,o+l,a+d[1]),this.context.lineTo(o+l,a+c-d[2]),this.context.quadraticCurveTo(o+l,a+c,o+l-d[2],a+c),this.context.lineTo(o+d[3],a+c),this.context.quadraticCurveTo(o,a+c,o,a+c-d[3]),this.context.lineTo(o,a+d[0]),this.context.quadraticCurveTo(o,a,o+d[0],a),this.context.closePath(),this.context.stroke();return this}fillRoundRect(t,e,n,r,i,s=1){const o=t<n?t:n,a=e<r?e:r,l=Math.abs(n-t),c=Math.abs(r-e),d=Array.isArray(i)?i:[i,i,i,i];if(this.context.fillStyle=this.resolveColor(this.fillColor),this.context.lineWidth=this.strokeWidth,this.context.globalAlpha=this.alpha,this.roughness>0||this.fillStyle!==en.SOLID){const u=this.generator.path(`M${o+d[0]},${a} L${o+l-d[1]},${a} Q${o+l},${a} ${o+l},${a+d[1]} L${o+l},${a+c-d[2]} Q${o+l},${a+c} ${o+l-d[2]},${a+c} L${o+d[3]},${a+c} Q${o},${a+c} ${o},${a+c-d[3]} L${o},${a+d[0]} Q${o},${a} ${o+d[0]},${a} Z`,{seed:s,roughness:this.roughness,fill:this.resolveColor(this.fillColor),fillStyle:this.fillStyle,fillLineDash:[],stroke:this.resolveColor("$transparent"),strokeWidth:this.strokeWidth,preserveVertices:!0});ci(this.context,u)}else this.context.beginPath(),this.context.moveTo(o+d[0],a),this.context.lineTo(o+l-d[1],a),this.context.quadraticCurveTo(o+l,a,o+l,a+d[1]),this.context.lineTo(o+l,a+c-d[2]),this.context.quadraticCurveTo(o+l,a+c,o+l-d[2],a+c),this.context.lineTo(o+d[3],a+c),this.context.quadraticCurveTo(o,a+c,o,a+c-d[3]),this.context.lineTo(o,a+d[0]),this.context.quadraticCurveTo(o,a,o+d[0],a),this.context.closePath(),this.context.fill();return this}roundRect(t,e,n,r,i,s=1){return this.fillRoundRect(t,e,n,r,i,s),this.strokeRoundRect(t,e,n,r,i,s),this}strokeEllipse(t,e,n,r,i=1){const s=t<n?t:n,o=e<r?e:r,a=Math.abs(n-t),l=Math.abs(r-e),c=.5522848,d=a/2*c,u=l/2*c,f=s+a,h=o+l,p=s+a/2,g=o+l/2;if(this.context.strokeStyle=this.resolveColor(this.strokeColor),this.context.lineWidth=this.strokeWidth,this.context.lineCap="round",this.context.lineJoin="round",this.context.globalAlpha=this.alpha,this.context.setLineDash(this.strokePattern.map(b=>b*this.strokeWidth)),this.strokeWidth>0)if(this.roughness>0){const b=this.generator.ellipse(p,g,a,l,{seed:i,roughness:this.roughness,stroke:this.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(v=>v*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1});ci(this.context,b)}else this.context.beginPath(),this.context.moveTo(s,g),this.context.bezierCurveTo(s,g-u,p-d,o,p,o),this.context.bezierCurveTo(p+d,o,f,g-u,f,g),this.context.bezierCurveTo(f,g+u,p+d,h,p,h),this.context.bezierCurveTo(p-d,h,s,g+u,s,g),this.context.closePath(),this.context.stroke();return this}fillEllipse(t,e,n,r,i=1){const s=t<n?t:n,o=e<r?e:r,a=Math.abs(n-t),l=Math.abs(r-e),c=.5522848,d=a/2*c,u=l/2*c,f=s+a,h=o+l,p=s+a/2,g=o+l/2;if(this.context.fillStyle=this.resolveColor(this.fillColor),this.context.lineWidth=this.strokeWidth,this.context.globalAlpha=this.alpha,this.roughness>0||this.fillStyle!==en.SOLID){const b=this.generator.ellipse(p,g,a,l,{seed:i,roughness:this.roughness,fill:this.resolveColor(this.fillColor),fillStyle:this.fillStyle,fillLineDash:[],stroke:this.resolveColor("$transparent"),strokeWidth:this.strokeWidth});ci(this.context,b)}else this.context.beginPath(),this.context.moveTo(s,g),this.context.bezierCurveTo(s,g-u,p-d,o,p,o),this.context.bezierCurveTo(p+d,o,f,g-u,f,g),this.context.bezierCurveTo(f,g+u,p+d,h,p,h),this.context.bezierCurveTo(p-d,h,s,g+u,s,g),this.context.closePath(),this.context.fill();return this}ellipse(t,e,n,r,i=1){return this.fillEllipse(t,e,n,r,i),this.strokeEllipse(t,e,n,r,i),this}polyline(t,e=1){if(this.context.strokeStyle=this.resolveColor(this.strokeColor),this.context.lineWidth=this.strokeWidth,this.context.lineCap="round",this.context.lineJoin="round",this.context.globalAlpha=this.alpha,this.context.setLineDash(this.strokePattern.map(n=>n*this.strokeWidth)),this.strokeWidth>0)if(this.roughness>0){const n=this.generator.linearPath(t,{seed:e,roughness:this.roughness,stroke:this.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(r=>r*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1,preserveVertices:!0});ci(this.context,n)}else{this.context.beginPath();for(let n=0,r=t.length;n<r;n++){const i=t[n];n===0?this.context.moveTo(i[0],i[1]):this.context.lineTo(i[0],i[1])}this.context.stroke()}return this}roundRectLine(t,e=1){if(this.context.strokeStyle=this.resolveColor(this.strokeColor),this.context.lineWidth=this.strokeWidth,this.context.globalAlpha=this.alpha,this.context.setLineDash(this.strokePattern.map(l=>l*this.strokeWidth)),this.strokeWidth>0)if(this.roughness>0){const l=this.generator.linearPath(t,{seed:e,roughness:this.roughness,stroke:this.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(c=>c*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1,preserveVertices:!0});ci(this.context,l)}else{if(this.context.beginPath(),t.length>0){var r,i,s,o,a;const l=t[0];this.context.moveTo(l[0],l[1]);for(let c=1,d=t.length-1;c<d;c++){switch(r=t[c],i=t[c-1],s=t[c+1],i[0]===r[0]?o=i[1]<r[1]?"VD":"VU":o=i[0]<r[0]?"HR":"HL",s[0]===r[0]?a=s[1]<r[1]?"VU":"VD":a=s[0]<r[0]?"HL":"HR",o){case"VD":this.context.lineTo(r[0],r[1]-8);break;case"VU":this.context.lineTo(r[0],r[1]+8);break;case"HR":this.context.lineTo(r[0]-8,r[1]);break;case"HL":this.context.lineTo(r[0]+8,r[1]);break}switch(o){case"VD":a==="HL"?this.context.arc(r[0]-8,r[1]-8,8,0,.5*Math.PI,!1):this.context.arc(r[0]+8,r[1]-8,8,Math.PI,.5*Math.PI,!0);break;case"VU":a==="HL"?this.context.arc(r[0]-8,r[1]+8,8,0,1.5*Math.PI,!0):this.context.arc(r[0]+8,r[1]+8,8,Math.PI,1.5*Math.PI,!1);break;case"HR":a==="VD"?this.context.arc(r[0]-8,r[1]+8,8,1.5*Math.PI,0,!1):this.context.arc(r[0]-8,r[1]-8,8,.5*Math.PI,0,!0);break;case"HL":a==="VD"?this.context.arc(r[0]+8,r[1]+8,8,1.5*Math.PI,Math.PI,!0):this.context.arc(r[0]+8,r[1]-8,8,.5*Math.PI,Math.PI,!1);break}}this.context.lineTo(t[t.length-1][0],t[t.length-1][1])}this.context.stroke()}return this}strokeCurve(t,e=1){if(this.context.strokeStyle=this.resolveColor(this.strokeColor),this.context.lineWidth=this.strokeWidth,this.context.lineCap="round",this.context.lineJoin="round",this.context.globalAlpha=this.alpha,this.context.setLineDash(this.strokePattern.map(n=>n*this.strokeWidth)),this.strokeWidth>0)if(this.roughness>0){const n=this.generator.curve(t,{seed:e,roughness:this.roughness,stroke:this.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(r=>r*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1});ci(this.context,n)}else{if(this.context.beginPath(),t.length>2){const n=dg(t);this.polyline(n)}else this.context.moveTo(t[0][0],t[0][1]),this.context.lineTo(t[t.length-1][0],t[t.length-1][1]);this.context.stroke()}return this}fillCurve(t,e=1){if(this.context.fillStyle=this.resolveColor(this.fillColor),this.context.globalAlpha=this.alpha,this.context.lineWidth=this.strokeWidth,this.roughness>0||this.fillStyle!==en.SOLID){const n=this.generator.curve([...t,t[0]],{seed:e,roughness:this.roughness,fill:this.resolveColor(this.fillColor),fillStyle:this.fillStyle,fillLineDash:[],stroke:this.resolveColor("$transparent"),strokeWidth:this.strokeWidth});ci(this.context,n)}else{if(this.context.beginPath(),this.context.setLineDash(this.strokePattern),t.length>2){const n=dg([...t,t[0]]);for(let r=0,i=n.length;r<i;r++){const s=n[r];r===0?this.context.moveTo(s[0],s[1]):this.context.lineTo(s[0],s[1])}}else this.context.moveTo(t[0][0],t[0][1]),this.context.lineTo(t[t.length-1][0],t[t.length-1][1]);this.context.fill()}return this}curve(t,e=1){return this.fillCurve(t,e),this.strokeCurve(t,e),this}strokePolygon(t,e=1){if(this.context.strokeStyle=this.resolveColor(this.strokeColor),this.context.lineWidth=this.strokeWidth,this.context.lineCap="round",this.context.lineJoin="round",this.context.globalAlpha=this.alpha,this.context.setLineDash(this.strokePattern.map(n=>n*this.strokeWidth)),this.strokeWidth>0)if(this.roughness>0){const n=this.generator.polygon(t,{seed:e,roughness:this.roughness,stroke:this.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(r=>r*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1,preserveVertices:!0});ci(this.context,n)}else{this.context.beginPath();let n=[-1,-1];for(let r=0,i=t.length;r<i;r++){const s=t[r];r===0?(n=s,this.context.moveTo(s[0],s[1])):this.context.lineTo(s[0],s[1])}this.context.lineTo(n[0],n[1]),this.context.stroke()}return this}fillPolygon(t,e=1){if(this.context.fillStyle=this.resolveColor(this.fillColor),this.context.globalAlpha=this.alpha,this.context.lineWidth=this.strokeWidth,this.roughness>0||this.fillStyle!==en.SOLID){const n=this.generator.polygon(t,{seed:e,roughness:this.roughness,fill:this.resolveColor(this.fillColor),fillStyle:this.fillStyle,fillLineDash:[],stroke:this.resolveColor("$transparent"),strokeWidth:this.strokeWidth,preserveVertices:!0});ci(this.context,n)}else{this.context.beginPath();for(let n=0,r=t.length;n<r;n++){const i=t[n];n===0?this.context.moveTo(i[0],i[1]):this.context.lineTo(i[0],i[1])}this.context.fill()}return this}polygon(t,e=1){return this.fillPolygon(t,e),this.strokePolygon(t,e),this}strokeArc(t,e,n,r,i,s=1){let o=Aa(r),a=Aa(i);if(this.context.strokeStyle=this.resolveColor(this.strokeColor),this.context.lineWidth=this.strokeWidth,this.context.lineCap="round",this.context.lineJoin="round",this.context.globalAlpha=this.alpha,this.context.setLineDash(this.strokePattern.map(l=>l*this.strokeWidth)),this.strokeWidth>0)if(this.roughness>0){if(r===0&&i===360)return this;const l=this.generator.arc(t,e,n*2,n*2,o,a,!1,{seed:s,roughness:this.roughness,stroke:this.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(c=>c*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1});ci(this.context,l)}else this.context.beginPath(),this.context.arc(t,e,n,o,a,!1),this.context.stroke();return this}fillArc(t,e,n,r,i,s=1){const o=Aa(Gs(r)),a=Aa(Gs(i));if(this.context.fillStyle=this.resolveColor(this.fillColor),this.context.globalAlpha=this.alpha,this.context.lineWidth=this.strokeWidth,this.roughness>0||this.fillStyle!==en.SOLID){const l=this.generator.arc(t,e,n*2,n*2,o,a,!0,{seed:s,roughness:this.roughness,fill:this.resolveColor(this.fillColor),fillStyle:this.fillStyle,fillLineDash:[],stroke:this.resolveColor("$transparent"),strokeWidth:this.strokeWidth});ci(this.context,l)}else this.context.beginPath(),this.context.arc(t,e,n,o,a,!1),this.context.fill();return this}arc(t,e,n,r,i,s=1){return this.fillArc(t,e,n,r,i,s),this.strokeArc(t,e,n,r,i,s),this}strokePath(t,e=1){if(this.context.strokeStyle=this.resolveColor(this.strokeColor),this.context.lineWidth=this.strokeWidth,this.context.lineCap="round",this.context.lineJoin="round",this.context.globalAlpha=this.alpha,this.context.setLineDash(this.strokePattern.map(n=>n*this.strokeWidth)),this.strokeWidth>0)if(this.roughness>0){const n=Mu(t),r=this.generator.path(n,{seed:e,roughness:this.roughness,stroke:this.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(i=>i*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1,preserveVertices:!0});ci(this.context,r)}else{this.context.beginPath();const n=Mu(t),r=new Path2D(n);r.pathData=n,this.context.stroke(r)}return this}fillPath(t,e=1){if(this.context.fillStyle=this.resolveColor(this.fillColor),this.context.globalAlpha=this.alpha,this.context.lineWidth=this.strokeWidth,this.roughness>0||this.fillStyle!==en.SOLID){const n=Mu(t),r=this.generator.path(n,{seed:e,roughness:this.roughness,fill:this.resolveColor(this.fillColor),fillStyle:this.fillStyle,fillLineDash:[],stroke:this.resolveColor("$transparent"),strokeWidth:this.strokeWidth,preserveVertices:!0});ci(this.context,r)}else{this.context.beginPath();const n=Mu(t),r=new Path2D(n);r.pathData=n,this.context.fill(r)}return this}path(t,e=1){return this.fillPath(t,e),this.strokePath(t,e),this}fillText(t,e,n){return this.context.fillStyle=this.resolveColor(this.fontColor),this.context.globalAlpha=this.alpha,this.context.font=this.font,this.context.beginPath(),this.context.fillText(n,t,e),this}drawImage(t,e,n,r,i){return this.context.globalAlpha=this.alpha,this.context.drawImage(t,e,n,r,i),this}textMetric(t){this.context.font=this.font;const e=this.context.measureText(t);return{width:e.width,height:e.fontBoundingBoxDescent+e.fontBoundingBoxAscent,ascent:e.fontBoundingBoxAscent,descent:e.fontBoundingBoxDescent,actualAscent:e.actualBoundingBoxAscent,actualDescent:e.actualBoundingBoxDescent}}},uD=class{constructor(t,e,n){this.x=t,this.y=e,this.button=n.button,this.shiftDown=n.shiftKey,this.altDown=n.altKey,this.ctrlDown=n.ctrlKey,this.modDown=n.metaKey||n.ctrlKey,this.leftButtonDown=!1,this.touchDistance=n.touchDistance||0}};function CC(t,e){if(!t)throw new Error(e)}var M1={};Fg(M1,{angleInCCS:()=>Da,boxInCCS:()=>$Q,boxInGCS:()=>jQ,ccs2gcs:()=>_C,ccs2lcs:()=>If,gcs2ccs:()=>zs,gcs2dcs:()=>AC,gcs2lcs:()=>IQ,getSvgPathFromStroke:()=>dD,lcs2ccs:()=>It,lcs2gcs:()=>Sx,toCssColor:()=>FQ,toCssFont:()=>fg});function zs(t,e){return t.globalCoordTransform(e)}function _C(t,e){return t.globalCoordTransformRev(e)}function It(t,e,n){let r=e.localCoordTransform(t,n,!0);return t.globalCoordTransform(r)}function If(t,e,n){let r=t.globalCoordTransformRev(n);return e.localCoordTransformRev(t,r,!0)}function Sx(t,e,n){return e.localCoordTransform(t,n,!0)}function IQ(t,e,n){return e.localCoordTransformRev(t,n,!0)}function AC(t,e){let n=t.globalCoordTransform(e);return[n[0]/t.ratio,n[1]/t.ratio]}function Da(t,e){let n=e.getBoundingRect();n=xx(n,10);let i=qs(n).map(a=>It(t,e,a)),s=i[1],o=i[2];return bl(o,s)}function $Q(t,e){return ei(e.getOutline().map(n=>It(t,e,n)))}function jQ(t,e){return ei(e.getOutline().map(n=>e.localCoordTransform(t,n,!0)))}function FQ(t){return t.startsWith("$")?`var(--colors-${t.substring(1)})`:t}function fg(t,e,n,r){return`${t} ${e} ${typeof n=="number"?n+"px":n} "${r}"`}var Wv=(t,e)=>(t+e)/2;function dD(t,e=!0){const n=t.length;if(n<4)return"";let r=t[0],i=t[1];const s=t[2];let o=`M${r[0].toFixed(2)},${r[1].toFixed(2)} Q${i[0].toFixed(2)},${i[1].toFixed(2)} ${Wv(i[0],s[0]).toFixed(2)},${Wv(i[1],s[1]).toFixed(2)} T`;for(let a=2,l=n-1;a<l;a++)r=t[a],i=t[a+1],o+=`${Wv(r[0],i[0]).toFixed(2)},${Wv(r[1],i[1]).toFixed(2)} `;return e&&(o+="Z"),o}var EC={};Fg(EC,{convertStringToTextNode:()=>O1,convertTextNodeToString:()=>Xd,extractTextFromShapes:()=>zQ,getTextNodeFont:()=>rw,measureText:()=>kE,preprocessTextNode:()=>SE,renderTextDocNode:()=>Lp,renderTextShape:()=>CE,splitWords:()=>fD,stripUnit:()=>hD,visitTextNodes:()=>wl});function fD(t){let e=[],n=0;for(let r=0;r<t.length;r++){const i=t[r];(i===" "||i==="-")&&(e.push(t.substring(n,r+1)),n=r+1)}return n<=t.length-1&&e.push(t.substring(n,t.length)),e}function hD(t){return typeof t=="string"&&t.endsWith("px")?parseFloat(t.slice(0,-2)):typeof t=="number"?t:-1}function O1(t,e="left"){const n={type:"doc",content:[]};return t.length>0?t.split(`
`).forEach((i,s)=>{i.length>0&&n.content.push({type:"paragraph",attrs:{textAlign:e},content:[{type:"text",text:i}]})}):n.content.push({type:"paragraph",attrs:{textAlign:e},content:[]}),n}function Xd(t){if(typeof t=="string")return t;switch(t.type){case"doc":return Array.isArray(t.content)?t.content.map(e=>Xd(e)).join("").trim():"";case"bulletList":return Array.isArray(t.content)?t.content.map(n=>Xd(n)).map(n=>`- ${n}`).join(""):"";case"orderedList":return Array.isArray(t.content)?t.content.map(n=>Xd(n)).map((n,r)=>`${r+1} ${n}`).join(""):"";case"listItem":return Array.isArray(t.content)?t.content.map(e=>Xd(e)).join(""):"";case"paragraph":return Array.isArray(t.content)?t.content.map(e=>Xd(e)).join("")+`
`:`
`;case"text":return t.text}return""}function rw(t,e){if(Array.isArray(t.marks)){let n=De({},e);return t.marks.forEach(r=>{var i,s,o;switch(r.type){case"textStyle":n.fontFamily=((i=r.attrs)==null?void 0:i.fontFamily)||e.fontFamily,n.fontSize=hD(((s=r.attrs)==null?void 0:s.fontSize)||e.fontSize),n.fontColor=((o=r.attrs)==null?void 0:o.color)||e.fontColor;break;case"bold":n.fontWeight=700;break;case"italic":n.fontStyle="italic";break}}),n}return e}function SE(t,e,n,r,i,s){switch(e.type){case"doc":case"bulletList":case"orderedList":case"listItem":e.type==="listItem"&&(i=i-s*n.fontSize);let o=bC(De({},e),{_height:0,_width:0,_minWidth:0});return Array.isArray(e.content)&&(o.content=e.content.map((p,g)=>{let b=SE(t,p,n,r,i,s);return o.type==="bulletList"&&(b._list="bullet"),o.type==="orderedList"&&(b._list="ordered",b._order=g+1),o.type==="doc"&&g===e.content.length-1&&(b._height-=n.paragraphSpacing*n.fontSize),b.type==="listItem"&&(b._width+=s*n.fontSize,b._minWidth+=s*n.fontSize),o._height+=b._height,o._width=Math.max(o._width,b._width),o._minWidth=Math.max(o._minWidth,b._minWidth),b})),o;case"paragraph":let a=bC(De({},e),{content:[],_height:0,_width:0,_minWidth:0}),l={type:"line",_width:0,_height:0,_ascent:0,_descent:0,_align:"",_gap:0,_spaceSum:0,_last:!1,content:[]},c=0,d=0,u=0,f=0;const h=p=>{var g;if(l._width=c,l._height=d,l._ascent=u,l._descent=f,l._align=((g=a.attrs)==null?void 0:g.textAlign)||"left",l._align==="justify"){l._gap=i-l._width;const b=l.content[l.content.length-1];b.text.length>b.text.trimEnd().length&&(b.text=b.text.trimEnd(),b._spaces--),l._spaceSum=l.content.map(v=>v._spaces*v._spaceWidth).reduce((v,x)=>v+x),l.content.forEach((v,x)=>{let w=v._spaceWidth*v._spaces;v._gap=l._gap*(w/l._spaceSum)})}p&&(l._last=!0),a.content.push(l),a._height+=l._height,a._width=Math.max(a._width,l._width,i),a._minWidth=Math.max(a._minWidth,l._width),l={type:"line",_width:0,_height:0,_ascent:0,_descent:0,_align:"",_gap:0,_spaceSum:0,_last:!1,content:[]},c=0,d=0,u=0,f=0};if(Array.isArray(e.content)&&e.content.forEach(p=>{switch(p.type){case"text":let g="",b=0;const v=()=>{if(g.length>0){const x=t.textMetric(g);l.content.push({type:"text",text:g,marks:p.marks,_width:x.width,_height:x.height,_ascent:x.ascent,_descent:x.descent,_spaces:b,_spaceWidth:t.textMetric(" ").width}),g="",b=0}};if(p.text.length>0){const x=fD(p.text),w=rw(p,n);t.font=fg(w.fontStyle,w.fontWeight,w.fontSize,w.fontFamily),x.forEach((C,P)=>{let O=t.textMetric(C);r&&c+O.width>i&&(v(),O=t.textMetric(C),h(!1)),g+=C,b+=C.split(" ").length-1,c+=O.width,d=Math.max(w.fontSize*n.lineHeight,d),u=Math.max(O.ascent,u),f=Math.max(O.descent,f)}),g.length>0&&v()}break;case"hardBreak":h(!0);break}}),c>0&&h(!1),a._height=Math.max(a._height,n.fontSize*n.lineHeight),a._height+=n.paragraphSpacing*n.fontSize,a.content.length>0){let p=a.content[a.content.length-1];p._last=!0}return a;default:return e}}function Lp(t,e,n,r,i,s,o){var a,l;switch(e.type){case"doc":case"bulletList":case"orderedList":{if(Array.isArray(e.content)){let c=i;for(let d=0;d<e.content.length;d++){let u=e.content[d];Lp(t,u,n,r,c,s,o),c+=u._height}}break}case"listItem":{if(Array.isArray(e.content)){const c=e.content[0].content[0];if(c){const u=rw(e,n);t.font=fg(u.fontStyle,u.fontWeight,u.fontSize,u.fontFamily),t.fontColor=u.fontColor;let f=i+(c._height-(c._ascent+c._descent))/2+c._ascent;switch(e._list){case"bullet":t.fillText(r+o*n.fontSize-t.textMetric(" ").width,f,"");break;case"ordered":t.fillText(r+o*n.fontSize-t.textMetric(e._order+". ").width,f,e._order+".");break}}let d=i;for(let u=0;u<e.content.length;u++){let f=e.content[u];Lp(t,f,n,r+o*n.fontSize,d,s-o*n.fontSize,o),d+=f._height}}break}case"paragraph":{if(Array.isArray(e.content)){let c=i;for(let d=0;d<e.content.length;d++){let u=e.content[d];Lp(t,u,n,r,c,s,o),c+=u._height}}break}case"line":{if(Array.isArray(e.content)){let c=r;switch(e._align){case"left":c=r;break;case"right":c=r+(s-e._width);break;case"center":c=r+(s-e._width)/2;break;case"justify":c=r;break;default:c=r;break}let d=i+(e._height-(e._ascent+e._descent))/2;for(let u=0;u<e.content.length;u++){let f=e.content[u];f._gap=e._last?0:f._gap||0,f._width+=f._gap,Lp(t,f,n,c,d+e._ascent,s,o),c+=f._width}}break}case"text":{const c=rw(e,n);if(t.font=fg(c.fontStyle,c.fontWeight,c.fontSize,c.fontFamily),t.fontColor=c.fontColor,e._gap>0){const d=e.text.split(" "),u=t.textMetric(" ").width+e._gap/(d.length-1);let f=r;d.forEach(h=>{t.fillText(f,i,h),f+=t.textMetric(h).width+u})}else t.fillText(r,i,e.text);if((a=e.marks)!=null&&a.some(d=>d.type==="underline")){const d=n.fontSize*.1;t.strokeColor=t.fontColor,t.strokeWidth=d,t.line(r,i+d,r+e._width,i+d,n.getSeed())}(l=e.marks)!=null&&l.some(d=>d.type==="strike")&&(t.strokeColor=t.fontColor,t.strokeWidth=n.fontSize*.1,t.line(r,i-e._ascent/3,r+e._width,i-e._ascent/3,n.getSeed()));break}}}function pD(t){if(Array.isArray(t.content)&&t.content.length>0){let e=t.content[t.content.length-1];return e.type==="line"&&e._last?e:pD(e)}else return t._width=t._width||0,t._height=t._height||0,t._ascent=t._ascent||0,t._descent=t._descent||0,t}function kE(t,e,n){const r=SE(t,n,e,e.wordWrap,e.innerWidth,1.5),i=r._width,s=pD(r),o=s._ascent+s._descent,a=(s._height-o)/2,l=Math.max(s._height,o+a),c=r._height-s._height+l;return{width:i,height:c,minWidth:r._minWidth,lineHeight:e.fontSize*e.lineHeight,preprocessedDoc:r}}function CE(t,e){const n=kE(t.canvas,e,e.text);let r=e.innerTop;switch(e.vertAlign){case"top":r=e.innerTop;break;case"middle":r=e.innerTop+(e.innerHeight-n.height)/2;break;case"bottom":r=e.innerBottom-n.height;break}t.storeState(),Lp(t,n.preprocessedDoc,e,e.innerLeft,r,e.innerWidth,1.5),t.restoreState()}function wl(t,e){e(t),Array.isArray(t.content)&&t.content.forEach(n=>wl(n,e))}function zQ(t){let e=[];for(let n of t)if(n instanceof St){const r=Xd(n.text).trim();r.length>0&&e.push(r)}return e.join(" ")}var R1=class{constructor(t,e=[],n=[]){this.outer=t,this.data=new Map;for(let r=0;r<e.length;r++){const i=e[r];if(i.v==="&"){this.set(e[r+1],new br(n.slice(r)));break}this.set(i,n[r])}}set(t,e){return this.data.set(t,e),e}find(t){if(this.data.has(t))return this;if(this.outer)return this.outer.find(t)}get(t){const e=this.find(t);if(!e)throw new Error(`'${t.v}' not found`);const n=e.data.get(t);if(!n)throw new Error(`'${t.v}' not found`);return n}};function PC(t,e,n){if(t.type===4&&e.type===4)return!0;if(Zr(t)&&Zr(e))return r(t.list,e.list);if(t.type===9&&e.type===9){if(t.keywordMap.size!==e.keywordMap.size||Object.keys(t.stringMap).length!==Object.keys(e.stringMap).length)return!1;for(const[i,s]of t.entries()){if(i.type!==3&&i.type!==7)throw new Error(`unexpected symbol: ${i.type}, expected: string or keyword`);const o=e.get(i);if(!(s.type===4&&o.type===4)&&!PC(s,o))return!1}return!0}if(t.type===2&&e.type===2||t.type===3&&e.type===3||t.type===5&&e.type===5||t.type===6&&e.type===6||t.type===7&&e.type===7)return t.v===e.v;return!1;function r(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;o++)if(!PC(i[o],s[o]))return!1;return!0}}function Zr(t){return t.type===1||t.type===8}function BQ(t){return!!t.type}var br=class gD{constructor(e){this.list=e,this.type=1}withMeta(e){const n=new gD(this.list);return n.meta=e,n}},ar=class mD{constructor(e){this.v=e,this.type=2}withMeta(e){const n=new mD(this.v);return n.meta=e,n}},pc=class yD{constructor(e){this.v=e,this.type=3}withMeta(e){const n=new yD(this.v);return n.meta=e,n}},ti=class vD{constructor(){this.type=4}static get instance(){return this._instance?this._instance:(this._instance=new vD,this._instance)}withMeta(e){throw new Error("not supported")}},lr=class bD{constructor(e){this.v=e,this.type=5}withMeta(e){const n=new bD(this.v);return n.meta=e,n}},wD=class xD{constructor(e){this.v=e,this.type=6}static get(e){const n=Symbol.for(e);let r=this.map.get(n);return r||(r=new xD(e),this.map.set(n,r),r)}withMeta(e){throw new Error("not supported")}};wD.map=new Map;var Ko=wD,SD=class kD{constructor(e){this.v=e,this.type=7}static get(e){const n=Symbol.for(e);let r=this.map.get(n);return r||(r=new kD(e),this.map.set(n,r),r)}withMeta(e){throw new Error("not supported")}};SD.map=new Map;var CD=SD,Hg=class _D{constructor(e){this.list=e,this.type=8}withMeta(e){const n=new _D(this.list);return n.meta=e,n}},_E=class AD{constructor(e){for(this.type=9,this.stringMap={},this.keywordMap=new Map;e.length!==0;){const n=e.shift(),r=e.shift();if(r==null)throw new Error("unexpected hash length");if(n.type===7)this.keywordMap.set(n,r);else if(n.type===3)this.stringMap[n.v]=r;else throw new Error(`unexpected key symbol: ${n.type}, expected: keyword or string`)}}withMeta(e){const n=this.assoc([]);return n.meta=e,n}has(e){return e.type===7?!!this.keywordMap.get(e):!!this.stringMap[e.v]}get(e){return e.type===7?this.keywordMap.get(e)||ti.instance:this.stringMap[e.v]||ti.instance}entries(){const e=[];return this.keywordMap.forEach((n,r)=>{e.push([r,n])}),Object.keys(this.stringMap).forEach(n=>e.push([new pc(n),this.stringMap[n]])),e}keys(){const e=[];return this.keywordMap.forEach((n,r)=>{e.push(r)}),Object.keys(this.stringMap).forEach(n=>e.push(new pc(n))),e}vals(){const e=[];return this.keywordMap.forEach(n=>{e.push(n)}),Object.keys(this.stringMap).forEach(n=>e.push(this.stringMap[n])),e}assoc(e){const n=[];return this.keywordMap.forEach((r,i)=>{n.push(i),n.push(r)}),Object.keys(this.stringMap).forEach(r=>{n.push(new pc(r)),n.push(this.stringMap[r])}),new AD(n.concat(e))}dissoc(e){const n=this.assoc([]);return e.forEach(r=>{if(r.type===3)delete n.stringMap[r.v];else if(r.type===7)n.keywordMap.delete(r);else throw new Error(`unexpected symbol: ${r.type}, expected: keyword or string`)}),n}},AE=class u0{constructor(){this.type=10}static fromLisp(e,n,r,i){const s=new u0;return s.func=(...a)=>e(i,new R1(n,r,o(a))),s.env=n,s.params=r,s.ast=i,s.isMacro=!1,s;function o(a){return a.map(l=>{if(!l)throw new Error("undefined argument");return l})}}static fromBootstrap(e){const n=new u0;return n.func=e,n.isMacro=!1,n}toMacro(){const e=new u0;return e.func=this.func,e.ast=this.ast,e.env=this.env,e.params=this.params,e.isMacro=!0,e.meta=this.meta,e}withMeta(e){const n=new u0;return n.func=this.func,n.ast=this.ast,n.env=this.env,n.params=this.params,n.isMacro=this.isMacro,n.meta=e,n}newEnv(e){return new R1(this.env,this.params,e)}},UQ=class ED{constructor(e){this.v=e,this.type=11}withMeta(e){const n=new ED(this.v);return n.meta=e,n}},HQ=class PD{constructor(e){this.obj=e,this.type=12}withMeta(e){const n=new PD(this.obj);return n.meta=e,n}},VQ=class{constructor(t){this.tokens=t,this.position=0}next(){const t=this.peek();return this.position+=1,t}peek(){return this.tokens[this.position]}};function TD(t){const e=WQ(t),n=new VQ(e);return B0(n)}function WQ(t){const e=/[\s,]*(~@|[\[\]{}()'`~^@]|"(?:\\.|[^\\"])*"?|;.*|[^\s\[\]{}('"`,;)]*)/g,n=[];for(;;){const r=e.exec(t);if(!r)break;const i=r[1];if(i==="")break;i[0]!==";"&&n.push(i)}return n}function B0(t){switch(t.peek()){case"(":return qQ(t);case"[":return GQ(t);case"{":return KQ(t);case"'":return n("quote");case"`":return n("quasiquote");case"~":return n("unquote");case"~@":return n("splice-unquote");case"@":return n("deref");case"^":{t.next();const r=Ko.get("with-meta"),i=B0(t);return new br([r,B0(t),i])}default:return JQ(t)}function n(r){t.next();const i=Ko.get(r),s=B0(t);return new br([i,s])}}function qQ(t){return EE(t,br,"(",")")}function GQ(t){return EE(t,Hg,"[","]")}function KQ(t){return EE(t,_E,"{","}")}function EE(t,e,n,r){const i=t.next();if(i!==n)throw new Error(`unexpected token ${i}, expected ${n}`);const s=[];for(;;){const o=t.peek();if(o===r)break;if(!o)throw new Error("unexpected EOF");s.push(B0(t))}return t.next(),new e(s)}function JQ(t){const e=t.next();if(e.match(/^-?[0-9]+$/)){const n=parseInt(e,10);return new ar(n)}if(e.match(/^-?[0-9]\.[0-9]+$/)){const n=parseFloat(e);return new ar(n)}if(e.match(/^"(?:\\.|[^\\"])*"$/)){const n=e.slice(1,e.length-1).replace(/\\(.)/g,(r,i)=>i=="n"?`
`:i);return new pc(n)}if(e[0]==='"')throw new Error(`expected '"', got EOF`);if(e[0]===":")return CD.get(e.substr(1));switch(e){case"nil":return ti.instance;case"true":return new lr(!0);case"false":return new lr(!1)}return Ko.get(e)}function cc(t,e=!0){var n;switch(t.type){case 1:return`(${t.list.map(i=>cc(i,e)).join(" ")})`;case 8:return`[${t.list.map(i=>cc(i,e)).join(" ")}]`;case 9:let r="{";for(const[i,s]of t.entries())r!=="{"&&(r+=" "),r+=`${cc(i,e)} ${cc(s,e)}`;return r+="}",r;case 2:case 6:case 5:return`${t.v}`;case 3:return e?`"${t.v.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n")}"`:t.v;case 4:return"nil";case 7:return`:${t.v}`;case 10:return"#<function>";case 11:return`(atom ${cc(t.v,e)})`;case 12:return`(js-object ${(n=t.obj)==null?void 0:n.toString()})`}}function L1(t){switch(typeof t){case"number":return new ar(t);case"boolean":return new lr(t);case"string":return new pc(t);case"object":return t===null?ti.instance:Array.isArray(t)?new Hg(t.map(e=>L1(e))):new HQ(t);case"function":return AE.fromBootstrap((...e)=>{const n=t(...e.map(r=>of(r)));return L1(n)});default:return ti.instance}}function of(t){switch(t.type){case 2:return t.v;case 5:return t.v;case 3:return t.v;case 4:return null;case 6:return t.v;case 7:return t.v;case 8:return t.list.map(n=>of(n));case 1:return t.list.map(n=>of(n));case 10:return t.func;case 9:let e={};return t.entries().forEach(n=>{const r=of(n[0]);e[r]=of(n[1])}),e;case 11:return t.v;case 12:return t.obj;default:return null}}function YQ(t,e){return new lr(PC(t,e))}function ZQ(t){throw t}function XQ(t){return new lr(t.type===4)}function QQ(t){return new lr(t.type===5&&t.v)}function eee(t){return new lr(t.type===5&&!t.v)}function tee(t){return new lr(t.type===3)}function nee(t){if(t.type!==3)throw new Error(`unexpected symbol: ${t.type}, expected: string`);return Ko.get(t.v)}function ree(t){return new lr(t.type===6)}function iee(t){if(t.type===7)return t;if(t.type!==3)throw new Error(`unexpected symbol: ${t.type}, expected: string`);return CD.get(t.v)}function see(t){return new lr(t.type===7)}function oee(t){return new lr(t.type===2)}function aee(t){return new lr(t.type===10&&!t.isMacro)}function lee(t){return new lr(t.type===10&&t.isMacro)}function cee(...t){return new pc(t.map(e=>cc(e,!0)).join(" "))}function uee(...t){return new pc(t.map(e=>cc(e,!1)).join(""))}function dee(...t){const e=t.map(n=>cc(n,!0)).join(" ");return console.log(e),ti.instance}function fee(...t){const e=t.map(n=>cc(n,!1)).join(" ");return console.log(e),ti.instance}function hee(t){if(t.type!==3)throw new Error(`unexpected symbol: ${t.type}, expected: string`);return TD(t.v)}function pee(t,e){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);if(e.type!==2)throw new Error(`unexpected symbol: ${e.type}, expected: number`);return new lr(t.v<e.v)}function gee(t,e){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);if(e.type!==2)throw new Error(`unexpected symbol: ${e.type}, expected: number`);return new lr(t.v<=e.v)}function mee(t,e){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);if(e.type!==2)throw new Error(`unexpected symbol: ${e.type}, expected: number`);return new lr(t.v>e.v)}function yee(t,e){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);if(e.type!==2)throw new Error(`unexpected symbol: ${e.type}, expected: number`);return new lr(t.v>=e.v)}function vee(t,e){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);if(e.type!==2)throw new Error(`unexpected symbol: ${e.type}, expected: number`);return new ar(t.v+e.v)}function bee(t,e){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);if(e.type!==2)throw new Error(`unexpected symbol: ${e.type}, expected: number`);return new ar(t.v-e.v)}function wee(t,e){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);if(e.type!==2)throw new Error(`unexpected symbol: ${e.type}, expected: number`);return new ar(t.v*e.v)}function xee(t,e){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);if(e.type!==2)throw new Error(`unexpected symbol: ${e.type}, expected: number`);return new ar(t.v/e.v)}function See(){return new ar(Date.now())}function kee(...t){return new br(t)}function Cee(t){return new lr(t.type===1)}function _ee(...t){return new Hg(t)}function Aee(t){return new lr(t.type===8)}function Eee(...t){return new _E(t)}function Pee(t){return new lr(t.type===9)}function Tee(t,...e){if(t.type!==9)throw new Error(`unexpected symbol: ${t.type}, expected: hash-map`);return t.assoc(e)}function Nee(t,...e){if(t.type!==9)throw new Error(`unexpected symbol: ${t.type}, expected: hash-map`);return t.dissoc(e)}function Mee(t,e){if(t.type===4)return ti.instance;if(t.type!==9)throw new Error(`unexpected symbol: ${t.type}, expected: hash-map`);if(e.type!==3&&e.type!==7)throw new Error(`unexpected symbol: ${e.type}, expected: string or keyword`);return t.get(e)||ti.instance}function Oee(t,e){if(t.type===4)return ti.instance;if(t.type!==9)throw new Error(`unexpected symbol: ${t.type}, expected: hash-map`);if(e.type!==3&&e.type!==7)throw new Error(`unexpected symbol: ${e.type}, expected: string or keyword`);return new lr(t.has(e))}function Ree(t){if(t.type!==9)throw new Error(`unexpected symbol: ${t.type}, expected: hash-map`);return new br([...t.keys()])}function Lee(t){if(t.type!==9)throw new Error(`unexpected symbol: ${t.type}, expected: hash-map`);return new br([...t.vals()])}function Dee(t){return new lr(Zr(t))}function Iee(t,e){if(!Zr(e))throw new Error(`unexpected symbol: ${e.type}, expected: list or vector`);return new br([t].concat(e.list))}function $ee(...t){const e=t.map(n=>{if(!Zr(n))throw new Error(`unexpected symbol: ${n.type}, expected: list or vector`);return n}).reduce((n,r)=>n.concat(r.list),[]);return new br(e)}function jee(t){switch(t.type){case 1:return new Hg(t.list);case 8:return t}throw new Error(`unexpected symbol: ${t.type}, expected: list or vector`)}function Fee(t,e){if(!Zr(t))throw new Error(`unexpected symbol: ${t.type}, expected: list or vector`);if(e.type!==2)throw new Error(`unexpected symbol: ${e.type}, expected: number`);const n=t.list[e.v];if(!n)throw new Error("nth: index out of range");return n}function zee(t){if(t.type===4)return ti.instance;if(!Zr(t))throw new Error(`unexpected symbol: ${t.type}, expected: list or vector`);return t.list[0]||ti.instance}function Bee(t){if(t.type===4)return new br([]);if(!Zr(t))throw new Error(`unexpected symbol: ${t.type}, expected: list or vector`);return new br(t.list.slice(1))}function Uee(t){return Zr(t)?new lr(t.list.length===0):new lr(!1)}function Hee(t){if(Zr(t))return new ar(t.list.length);if(t.type===4)return new ar(0);throw new Error(`unexpected symbol: ${t.type}`)}function Vee(t,...e){if(t.type!==10)throw new Error(`unexpected symbol: ${t.type}, expected: function`);const n=e[e.length-1];if(!Zr(n))throw new Error(`unexpected symbol: ${n.type}, expected: list or vector`);const r=e.slice(0,-1).concat(n.list);return t.func(...r)}function Wee(t,e){if(t.type!==10)throw new Error(`unexpected symbol: ${t.type}, expected: function`);if(!Zr(e))throw new Error(`unexpected symbol: ${e.type}, expected: list or vector`);return new br(e.list.map(n=>t.func(n)))}function qee(t,...e){switch(t.type){case 1:const n=new br(t.list);return e.forEach(r=>n.list.unshift(r)),n;case 8:return new Hg([...t.list,...e])}throw new Error(`unexpected symbol: ${t.type}, expected: list or vector`)}function Gee(t){if(t.type===1)return t.list.length===0?ti.instance:t;if(t.type===8)return t.list.length===0?ti.instance:new br(t.list);if(t.type===3)return t.v.length===0?ti.instance:new br(t.v.split("").map(e=>new pc(e)));if(t.type===4)return ti.instance;throw new Error(`unexpected symbol: ${t.type}, expected: list or vector or string`)}function Kee(t){return t.meta||ti.instance}function Jee(t,e){return t.withMeta(e)}function Yee(t){return new UQ(t)}function Zee(t){return new lr(t.type===11)}function Xee(t){if(t.type!==11)throw new Error(`unexpected symbol: ${t.type}, expected: atom`);return t.v}function Qee(t,e){if(t.type!==11)throw new Error(`unexpected symbol: ${t.type}, expected: atom`);return t.v=e,e}function ete(t,e,...n){if(t.type!==11)throw new Error(`unexpected symbol: ${t.type}, expected: atom`);if(e.type!==10)throw new Error(`unexpected symbol: ${e.type}, expected: function`);return t.v=e.func(...[t.v].concat(n)),t.v}function tte(...t){if(t.length%2!==0)throw new Error("odd number of forms to cond");for(let e=0;e<t.length;e+=2){const n=t[e],r=t[e+1];if(n.type===7&&n.v==="else")return r;if(n.type!==4&&!(n.type===5&&!n.v))return r}return ti.instance}function nte(t,e,...n){if(t.type!==12)throw new Error(`unexpected symbol: ${t.type}, expected: js-object`);if(e.type!==3&&e.type!==7)throw new Error(`unexpected symbol: ${e.type}, expected: string or keyword`);const r=t.obj[e.v];if(typeof r=="function"){const i=r.call(t.obj,...n.map(s=>of(s)));return L1(i)}else return L1(r)}var rte=new ar(Math.PI);function ite(t){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);return new ar(Math.abs(t.v))}function ste(t){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);return new ar(Math.ceil(t.v))}function ote(t){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);return new ar(Math.floor(t.v))}function ate(t){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);return new ar(Math.trunc(t.v))}function lte(t){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);return new ar(Math.cos(t.v))}function cte(t){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);return new ar(Math.sin(t.v))}function ute(t){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);return new ar(Math.tan(t.v))}function dte(t){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);return new ar(Math.acos(t.v))}function fte(t){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);return new ar(Math.asin(t.v))}function hte(t){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);return new ar(Math.atan(t.v))}function pte(t,e){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);if(e.type!==2)throw new Error(`unexpected symbol: ${e.type}, expected: number`);return new ar(Math.pow(t.v,e.v))}function gte(t){if(t.type!==2)throw new Error(`unexpected symbol: ${t.type}, expected: number`);return new ar(Math.sqrt(t.v))}function mte(...t){let e=[];for(let n=0;n<t.length;n++){if(t[n].type!==2)throw new Error(`unexpected symbol: ${t[n].type}, expected: number`);e.push(t[n].v)}return new ar(Math.max(...e))}function yte(...t){let e=[];for(let n=0;n<t.length;n++){if(t[n].type!==2)throw new Error(`unexpected symbol: ${t[n].type}, expected: number`);e.push(t[n].v)}return new ar(Math.min(...e))}var vte=(()=>{const t={pi:rte},e=new Map;return Object.keys(t).forEach(n=>e.set(Ko.get(n),t[n])),e})(),bte=(()=>{const t={"=":YQ,throw:ZQ,"nil?":XQ,"true?":QQ,"false?":eee,"string?":tee,symbol:nee,"symbol?":ree,keyword:iee,"keyword?":see,"number?":oee,"fn?":aee,"macro?":lee,"pr-str":cee,str:uee,prn:dee,println:fee,"read-string":hee,"<":pee,"<=":gee,">":mee,">=":yee,"+":vee,"-":bee,"*":wee,"/":xee,"time-ms":See,list:kee,"list?":Cee,vector:_ee,"vector?":Aee,"hash-map":Eee,"map?":Pee,assoc:Tee,dissoc:Nee,get:Mee,"contains?":Oee,keys:Ree,vals:Lee,"sequential?":Dee,cons:Iee,concat:$ee,vec:jee,nth:Fee,first:zee,rest:Bee,"empty?":Uee,count:Hee,apply:Vee,map:Wee,conj:qee,seq:Gee,meta:Kee,"with-meta":Jee,atom:Yee,"atom?":Zee,deref:Xee,"reset!":Qee,"swap!":ete,cond:tte,".":nte,abs:ite,ceil:ste,floor:ote,trunc:ate,cos:lte,sin:cte,tan:ute,acos:dte,asin:fte,atan:hte,pow:pte,sqrt:gte,max:mte,min:yte},e=new Map;return Object.keys(t).forEach(n=>e.set(Ko.get(n),AE.fromBootstrap(t[n]))),e})();function wte(t){return TD(t)}function ND(t,e){if(t.length==2){let n=t[0];switch(n.type){case 6:return n.v===e}}return!1}function xte(t,e){return t.type==1&&ND(t.list,"splice-unquote")?new br([Ko.get("concat"),t.list[1],e]):new br([Ko.get("cons"),TC(t),e])}function eN(t){let e=new br([]);for(let n=t.length-1;0<=n;n-=1)e=xte(t[n],e);return e}function TC(t){switch(t.type){case 6:return new br([Ko.get("quote"),t]);case 9:return new br([Ko.get("quote"),t]);case 1:return ND(t.list,"unquote")?t.list[1]:eN(t.list);case 8:return new br([Ko.get("vec"),eN(t.list)]);default:return t}}function Ste(t,e){if(!Zr(t))return!1;const n=t.list[0];if(n.type!==6)return!1;const r=e.find(n);if(!r)return!1;const i=r.get(n);return i.type!==10?!1:i.isMacro}function tN(t,e){for(;Ste(t,e);){if(!Zr(t))throw new Error(`unexpected token type: ${t.type}, expected: list or vector`);const n=t.list[0];if(n.type!==6)throw new Error(`unexpected token type: ${n.type}, expected: symbol`);const r=e.get(n);if(r.type!==10)throw new Error(`unexpected token type: ${r.type}, expected: function`);t=r.func(...t.list.slice(1))}return t}function qv(t,e){switch(t.type){case 6:const n=e.get(t);if(!n)throw new Error(`unknown symbol: ${t.v}`);return n;case 1:return new br(t.list.map(i=>Sa(i,e)));case 8:return new Hg(t.list.map(i=>Sa(i,e)));case 9:const r=[];for(const[i,s]of t.entries())r.push(i),r.push(Sa(s,e));return new _E(r);default:return t}}function Sa(t,e){e:for(;;){if(t.type!==1)return qv(t,e);if(t.list.length===0)return t;if(t=tN(t,e),!Zr(t))return qv(t,e);if(t.list.length===0)return t;const n=t.list[0];switch(n.type){case 6:switch(n.v){case"def!":{const[,o,a]=t.list;if(o.type!==6)throw new Error(`unexpected token type: ${o.type}, expected: symbol`);if(!a)throw new Error("unexpected syntax");return e.set(o,Sa(a,e))}case"let*":{e=new R1(e);const o=t.list[1];if(!Zr(o))throw new Error(`unexpected token type: ${o.type}, expected: list or vector`);for(let a=0;a<o.list.length;a+=2){const l=o.list[a],c=o.list[a+1];if(l.type!==6)throw new Error(`unexpected token type: ${l.type}, expected: symbol`);if(!l||!c)throw new Error("unexpected syntax");e.set(l,Sa(c,e))}t=t.list[2];continue e}case"quote":return t.list[1];case"quasiquoteexpand":return TC(t.list[1]);case"quasiquote":{t=TC(t.list[1]);continue e}case"defmacro!":{const[,o,a]=t.list;if(o.type!==6)throw new Error(`unexpected token type: ${o.type}, expected: symbol`);if(!a)throw new Error("unexpected syntax");const l=Sa(a,e);if(l.type!==10)throw new Error(`unexpected token type: ${l.type}, expected: function`);return e.set(o,l.toMacro())}case"macroexpand":return tN(t.list[1],e);case"try*":try{return Sa(t.list[1],e)}catch(o){if(t.list.length<3)throw o;const a=t.list[2];if(!Zr(a))throw new Error(`unexpected return type: ${a.type}, expected: list or vector`);const l=a.list[0];if(l.type===6&&l.v==="catch*"){const c=a.list[1];if(c.type!==6)throw new Error(`unexpected return type: ${c.type}, expected: symbol`);return BQ(o)||(o=new pc(o.message)),Sa(a.list[2],new R1(e,[c],[o]))}throw o}case"do":{const o=t.list.slice(1,-1);qv(new br(o),e),t=t.list[t.list.length-1];continue e}case"if":{const[,o,a,l]=t.list,c=Sa(o,e);let d=!0;(c.type===5&&!c.v||c.type===4)&&(d=!1),d?t=a:l?t=l:t=ti.instance;continue e}case"fn*":{const[,o,a]=t.list;if(!Zr(o))throw new Error(`unexpected return type: ${o.type}, expected: list or vector`);const l=o.list.map(c=>{if(c.type!==6)throw new Error(`unexpected return type: ${c.type}, expected: symbol`);return c});return AE.fromLisp(Sa,e,l,a)}}}const r=qv(t,e);if(!Zr(r))throw new Error(`unexpected return type: ${r.type}, expected: list or vector`);const[i,...s]=r.list;if(i.type!==10)throw new Error(`unexpected token: ${i.type}, expected: function`);if(i.ast){t=i.ast,e=i.newEnv(s);continue e}return i.func(...s)}}function q2(t,e){const n=new R1;vte.forEach((i,s)=>{n.set(s,i)}),bte.forEach((i,s)=>{n.set(s,i)});for(let i in t)n.set(Ko.get(i),L1(t[i]));const r=Sa(wte(e),n);return of(r)}function kx(){return kL()}function kte(t){return t.split("").reduce((n,r)=>n=r.charCodeAt(0)+(n<<6)+(n<<16)-n,0)}var MD=class{constructor(){this.id=kx(),this.type="Obj",this.parent=null,this.children=[]}toJSON(t=!1,e=!1){const n={};return n.id=this.id,n.type=this.type,n.parent=this.parent?this.parent.id:null,t&&(n.children=this.children.map(r=>r.toJSON(t))),e&&(n.parent=this.parent),n}fromJSON(t){var e,n;this.id=(e=t.id)!=null?e:this.id,this.parent=(n=t.parent)!=null?n:this.parent}resolveRefs(t,e=!1){typeof this.parent=="string"&&(t[this.parent]?this.parent=t[this.parent]:e&&(this.parent=null))}traverse(t,e=null){t(this,e);for(let n=this.children.length-1;n>=0;n--)this.children[n].traverse(t,this)}traverseDepthFirst(t,e=null){for(let n=this.children.length-1;n>=0;n--)this.children[n].traverseDepthFirst(t,this);t(this,e)}traverseSequence(){let t=[];return this.traverse(e=>t.push(e)),t}traverseDepthFirstSequence(){let t=[];return this.traverseDepthFirst(e=>t.push(e)),t}find(t){if(t(this))return this;for(let e=this.children.length-1;e>=0;e--){const r=this.children[e].find(t);if(r)return r}return null}findDepthFirst(t){for(let e=this.children.length-1;e>=0;e--){const r=this.children[e].findDepthFirst(t);if(r)return r}return t(this)?this:null}findParent(t){return this.parent?t(this.parent)?this.parent:this.parent.findParent(t):null}isDescendant(t){return!!this.find(e=>e!==this&&e===t)}};function OD(t){let e=[];for(let n of t)t.some(r=>r.isDescendant(n))||e.push(n);return e}var Cte=class{constructor(t){this.fnMap=t??{}}register(t,e){this.fnMap[t]=e}createFromJson(t){if(t&&t.type){const e=this.fnMap[t.type];if(e){let n=e();n.fromJSON(t),Array.isArray(t.children)&&(n.children=t.children.map(i=>this.createFromJson(i)));const r={};return n.traverse(i=>{r[i.id]=i}),n.traverse(i=>{i.resolveRefs(r,!1)}),n}else throw new Error(`No registered type "${t.type}" in factory`)}return null}reassignIds(t){t.traverse(e=>e.id=kx())}clone(t){const e=t.toJSON(!0),n=this.createFromJson(e);return n.parent=null,this.reassignIds(n),n}},Vd=4,RD=class{constructor(){this.canvas=null,this.do=[],this.stateStack=[],this.generator=SL.generator(),this.strokeColor=jn.FOREGROUND,this.strokeWidth=1,this.strokePattern=[],this.fillColor=jn.BACKGROUND,this.fillStyle=en.SOLID,this.fontColor=jn.FOREGROUND,this.font="13px sans-serif",this.alpha=1,this.roughness=0}storeState(){const t={strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,strokePattern:this.strokePattern,fillColor:this.fillColor,fillStyle:this.fillStyle,fontColor:this.fontColor,font:this.font,alpha:this.alpha,roughness:this.roughness};this.stateStack.push(t)}restoreState(){const t=this.stateStack.pop();t&&(this.strokeColor=t.strokeColor,this.strokeWidth=t.strokeWidth,this.strokePattern=t.strokePattern,this.fillColor=t.fillColor,this.fillStyle=t.fillStyle,this.fontColor=t.fontColor,this.font=t.font,this.alpha=t.alpha,this.roughness=t.roughness)}clear(){this.do=[]}setCanvas(t){this.canvas=t}setStrokeColor(t){return this.strokeColor=t,this}setStrokeWidth(t){return this.strokeWidth=t,this}setStrokePattern(t){return this.strokePattern=t,this}setFillColor(t){return this.fillColor=t,this}setFillStyle(t){return this.fillStyle=t,this}setFontColor(t){return this.fontColor=t,this}setFont(t){return this.font=t,this}setAlpha(t){return this.alpha=t,this}setRoughness(t){return this.roughness=t,this}line(t,e,n,r,i=1){if(this.strokeWidth>0)if(this.roughness>0){const s=this.generator.line(t,e,n,r,{seed:i,roughness:this.roughness,stroke:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(o=>o*this.strokeWidth)});this.do.push({type:"rough",alpha:this.alpha,rd:s})}else this.do.push({type:"line",strokeColor:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(s=>s*this.strokeWidth),alpha:this.alpha,x1:t,y1:e,x2:n,y2:r});return this}strokeRect(t,e,n,r,i=1){const s=t<n?t:n,o=e<r?e:r,a=Math.abs(n-t),l=Math.abs(r-e);if(this.strokeWidth>0)if(this.roughness>0){const c=this.generator.rectangle(s,o,a,l,{seed:i,roughness:this.roughness,stroke:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(d=>d*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1});this.do.push({type:"rough",alpha:this.alpha,rd:c})}else this.do.push({type:"strokeRect",strokeColor:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(c=>c*this.strokeWidth),alpha:this.alpha,x:s,y:o,w:a,h:l});return this}fillRect(t,e,n,r,i=1){const s=t<n?t:n,o=e<r?e:r,a=Math.abs(n-t),l=Math.abs(r-e);if(this.roughness>0||this.fillStyle!==en.SOLID){const c=this.generator.rectangle(s,o,a,l,{seed:i,roughness:this.roughness,fill:this.canvas.resolveColor(this.fillColor),fillStyle:this.fillStyle,fillLineDash:[],hachureGap:Math.max(Vd,this.strokeWidth*3),stroke:this.canvas.resolveColor("$transparent"),strokeWidth:this.strokeWidth});this.do.push({type:"rough",alpha:this.alpha,rd:c})}else this.do.push({type:"fillRect",fillColor:this.canvas.resolveColor(this.fillColor),fillStyle:this.fillStyle,alpha:this.alpha,x:s,y:o,w:a,h:l});return this}rect(t,e,n,r,i=1){return this.fillRect(t,e,n,r,i),this.strokeRect(t,e,n,r,i),this}strokeRoundRect(t,e,n,r,i,s=1){const o=t<n?t:n,a=e<r?e:r,l=Math.abs(n-t),c=Math.abs(r-e),d=Array.isArray(i)?i:[i,i,i,i];if(this.strokeWidth>0)if(this.roughness>0){const u=this.generator.path(`M${o+d[0]},${a} L${o+l-d[1]},${a} Q${o+l},${a} ${o+l},${a+d[1]} L${o+l},${a+c-d[2]} Q${o+l},${a+c} ${o+l-d[2]},${a+c} L${o+d[3]},${a+c} Q${o},${a+c} ${o},${a+c-d[3]} L${o},${a+d[0]} Q${o},${a} ${o+d[0]},${a} Z`,{seed:s,roughness:this.roughness,stroke:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(f=>f*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1,preserveVertices:!0});this.do.push({type:"rough",alpha:this.alpha,rd:u})}else this.do.push({type:"strokeRoundRect",strokeColor:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(u=>u*this.strokeWidth),alpha:this.alpha,x:o,y:a,w:l,h:c,radius:d});return this}fillRoundRect(t,e,n,r,i,s=1){const o=t<n?t:n,a=e<r?e:r,l=Math.abs(n-t),c=Math.abs(r-e),d=Array.isArray(i)?i:[i,i,i,i];if(this.roughness>0||this.fillStyle!==en.SOLID){const u=this.generator.path(`M${o+d[0]},${a} L${o+l-d[1]},${a} Q${o+l},${a} ${o+l},${a+d[1]} L${o+l},${a+c-d[2]} Q${o+l},${a+c} ${o+l-d[2]},${a+c} L${o+d[3]},${a+c} Q${o},${a+c} ${o},${a+c-d[3]} L${o},${a+d[0]} Q${o},${a} ${o+d[0]},${a} Z`,{seed:s,roughness:this.roughness,fill:this.canvas.resolveColor(this.fillColor),fillStyle:this.fillStyle,fillLineDash:[],hachureGap:Math.max(Vd,this.strokeWidth*3),stroke:this.canvas.resolveColor("$transparent"),strokeWidth:this.strokeWidth,preserveVertices:!0});this.do.push({type:"rough",alpha:this.alpha,rd:u})}else this.do.push({type:"fillRoundRect",fillColor:this.canvas.resolveColor(this.fillColor),fillStyle:this.fillStyle,alpha:this.alpha,x:o,y:a,w:l,h:c,radius:d});return this}roundRect(t,e,n,r,i,s=1){return this.fillRoundRect(t,e,n,r,i,s),this.strokeRoundRect(t,e,n,r,i,s),this}strokeEllipse(t,e,n,r,i=1){const s=t<n?t:n,o=e<r?e:r,a=Math.abs(n-t),l=Math.abs(r-e),c=s+a/2,d=o+l/2;if(this.strokeWidth>0)if(this.roughness>0){const u=this.generator.ellipse(c,d,a,l,{seed:i,roughness:this.roughness,stroke:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(f=>f*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1});this.do.push({type:"rough",alpha:this.alpha,rd:u})}else this.do.push({type:"strokeEllipse",strokeColor:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(u=>u*this.strokeWidth),alpha:this.alpha,x:s,y:o,w:a,h:l});return this}fillEllipse(t,e,n,r,i=1){const s=t<n?t:n,o=e<r?e:r,a=Math.abs(n-t),l=Math.abs(r-e),c=s+a/2,d=o+l/2;if(this.roughness>0||this.fillStyle!==en.SOLID){const u=this.generator.ellipse(c,d,a,l,{seed:i,roughness:this.roughness,fill:this.canvas.resolveColor(this.fillColor),fillStyle:this.fillStyle,fillLineDash:[],hachureGap:Math.max(Vd,this.strokeWidth*3),stroke:this.canvas.resolveColor("$transparent"),strokeWidth:this.strokeWidth});this.do.push({type:"rough",alpha:this.alpha,rd:u})}else this.do.push({type:"fillEllipse",fillColor:this.canvas.resolveColor(this.fillColor),fillStyle:this.fillStyle,alpha:this.alpha,x:s,y:o,w:a,h:l});return this}ellipse(t,e,n,r,i=1){return this.fillEllipse(t,e,n,r,i),this.strokeEllipse(t,e,n,r,i),this}polyline(t,e=1){if(this.strokeWidth>0)if(this.roughness>0){const n=this.generator.linearPath(t,{seed:e,roughness:this.roughness,stroke:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(r=>r*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1,preserveVertices:!0});this.do.push({type:"rough",alpha:this.alpha,rd:n})}else this.do.push({type:"polyline",strokeColor:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(n=>n*this.strokeWidth),alpha:this.alpha,path:t});return this}strokeCurve(t,e=1){if(this.strokeWidth>0)if(this.roughness>0){const n=this.generator.curve(t,{seed:e,roughness:this.roughness,stroke:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(r=>r*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1});this.do.push({type:"rough",alpha:this.alpha,rd:n})}else this.do.push({type:"strokeCurve",strokeColor:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(n=>n*this.strokeWidth),alpha:this.alpha,path:t});return this}fillCurve(t,e=1){if(this.roughness>0||this.fillStyle!==en.SOLID){const n=this.generator.curve([...t,t[0]],{seed:e,roughness:this.roughness,fill:this.canvas.resolveColor(this.fillColor),fillStyle:this.fillStyle,fillLineDash:[],hachureGap:Math.max(Vd,this.strokeWidth*3),stroke:this.canvas.resolveColor("$transparent"),strokeWidth:this.strokeWidth});this.do.push({type:"rough",alpha:this.alpha,rd:n})}else this.do.push({type:"fillCurve",fillColor:this.canvas.resolveColor(this.fillColor),fillStyle:this.fillStyle,alpha:this.alpha,path:t});return this}curve(t,e=1){return this.fillCurve(t,e),this.strokeCurve(t,e),this}strokePolygon(t,e=1){if(this.strokeWidth>0)if(this.roughness>0){const n=this.generator.polygon(t,{seed:e,roughness:this.roughness,stroke:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(r=>r*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1,preserveVertices:!0});this.do.push({type:"rough",alpha:this.alpha,rd:n})}else this.do.push({type:"strokePolygon",strokeColor:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(n=>n*this.strokeWidth),alpha:this.alpha,path:t});return this}fillPolygon(t,e=1){if(this.roughness>0||this.fillStyle!==en.SOLID){const n=this.generator.polygon(t,{seed:e,roughness:this.roughness,fill:this.canvas.resolveColor(this.fillColor),fillStyle:this.fillStyle,fillLineDash:[],hachureGap:Math.max(Vd,this.strokeWidth*3),stroke:this.canvas.resolveColor("$transparent"),strokeWidth:this.strokeWidth,preserveVertices:!0});this.do.push({type:"rough",alpha:this.alpha,rd:n})}else this.do.push({type:"fillPolygon",fillColor:this.canvas.resolveColor(this.fillColor),fillStyle:this.fillStyle,alpha:this.alpha,path:t});return this}polygon(t,e=1){return this.fillPolygon(t,e),this.strokePolygon(t,e),this}strokeArc(t,e,n,r,i,s=1){const o=Aa(r),a=Aa(i);if(this.strokeWidth>0)if(this.roughness>0){if(r===0&&i===360)return this;const l=this.generator.arc(t,e,n*2,n*2,o,a,!1,{seed:s,roughness:this.roughness,stroke:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(c=>c*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1});this.do.push({type:"rough",alpha:this.alpha,rd:l})}else this.do.push({type:"strokeArc",strokeColor:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(l=>l*this.strokeWidth),alpha:this.alpha,x:t,y:e,r:n,startAngle:o,endAngle:a});return this}fillArc(t,e,n,r,i,s=1){const o=Aa(Gs(r)),a=Aa(Gs(i));if(this.roughness>0||this.fillStyle!==en.SOLID){const l=this.generator.arc(t,e,n*2,n*2,o,a,!0,{seed:s,roughness:this.roughness,fill:this.canvas.resolveColor(this.fillColor),fillStyle:this.fillStyle,fillLineDash:[],hachureGap:Math.max(Vd,this.strokeWidth*3),stroke:this.canvas.resolveColor("$transparent"),strokeWidth:this.strokeWidth});this.do.push({type:"rough",alpha:this.alpha,rd:l})}else this.do.push({type:"fillArc",fillColor:this.canvas.resolveColor(this.fillColor),fillStyle:this.fillStyle,alpha:this.alpha,x:t,y:e,r:n,startAngle:o,endAngle:a});return this}arc(t,e,n,r,i,s=1){return this.fillArc(t,e,n,r,i,s),this.strokeArc(t,e,n,r,i,s),this}strokePath(t,e=1){if(this.strokeWidth>0)if(this.roughness>0){const n=Mu(t),r=this.generator.path(n,{seed:e,roughness:this.roughness,stroke:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(i=>i*this.strokeWidth),disableMultiStroke:this.strokePattern.length>1,preserveVertices:!0});this.do.push({type:"rough",alpha:this.alpha,rd:r})}else this.do.push({type:"strokePath",strokeColor:this.canvas.resolveColor(this.strokeColor),strokeWidth:this.strokeWidth,strokeLineDash:this.strokePattern.map(n=>n*this.strokeWidth),alpha:this.alpha,path:t});return this}fillPath(t,e=1){if(this.roughness>0||this.fillStyle!==en.SOLID){const n=Mu(t),r=this.generator.path(n,{seed:e,roughness:this.roughness,fill:this.canvas.resolveColor(this.fillColor),fillStyle:this.fillStyle,fillLineDash:[],hachureGap:Math.max(Vd,this.strokeWidth*3),stroke:this.canvas.resolveColor("$transparent"),strokeWidth:this.strokeWidth,preserveVertices:!0});this.do.push({type:"rough",alpha:this.alpha,rd:r})}else this.do.push({type:"fillPath",fillColor:this.canvas.resolveColor(this.fillColor),fillStyle:this.fillStyle,alpha:this.alpha,path:t});return this}path(t,e=1){return this.fillPath(t,e),this.strokePath(t,e),this}strokeFreehand(t,e=0,n=0,r=0){if(this.strokeWidth>0){const i=kd(t),s=dJ(t,{size:this.strokeWidth,thinning:e,start:n>0?{taper:i*n}:void 0,end:r>0?{taper:i*r}:void 0}),o=dD(s),a=new Path2D(o);this.do.push({type:"strokeFreehand",strokeColor:this.canvas.resolveColor(this.strokeColor),alpha:this.alpha,path2d:a,pathData:o})}return this}fillText(t,e,n){return this.do.push({type:"fillText",fontColor:this.canvas.resolveColor(this.fontColor),alpha:this.alpha,font:this.font,x:t,y:e,text:n}),this}drawImage(t,e,n,r,i,s){const o=Array.isArray(s)?s:[s,s,s,s];return this.do.push({type:"drawImage",alpha:this.alpha,image:t,x:e,y:n,w:r,h:i,radius:o}),this}textMetric(t){return this.canvas.font=this.font,this.canvas.textMetric(t)}draw(t){for(const e of this.do)switch(t.context.lineCap="round",t.context.lineJoin="round",e.type){case"line":{t.context.strokeStyle=e.strokeColor,t.context.lineWidth=e.strokeWidth,t.context.setLineDash(e.strokeLineDash),t.context.globalAlpha=e.alpha,t.context.beginPath(),t.context.moveTo(e.x1,e.y1),t.context.lineTo(e.x2,e.y2),t.context.closePath(),t.context.stroke();break}case"strokeRect":{t.context.strokeStyle=e.strokeColor,t.context.lineWidth=e.strokeWidth,t.context.setLineDash(e.strokeLineDash),t.context.globalAlpha=e.alpha,t.context.beginPath(),t.context.rect(e.x,e.y,e.w,e.h),t.context.closePath(),t.context.stroke();break}case"fillRect":{t.context.fillStyle=e.fillColor,t.context.globalAlpha=e.alpha,t.context.fillRect(e.x,e.y,e.w,e.h);break}case"strokeRoundRect":{t.context.strokeStyle=e.strokeColor,t.context.lineWidth=e.strokeWidth,t.context.setLineDash(e.strokeLineDash),t.context.globalAlpha=e.alpha,t.context.beginPath(),t.context.moveTo(e.x+e.radius[0],e.y),t.context.lineTo(e.x+e.w-e.radius[1],e.y),t.context.quadraticCurveTo(e.x+e.w,e.y,e.x+e.w,e.y+e.radius[1]),t.context.lineTo(e.x+e.w,e.y+e.h-e.radius[2]),t.context.quadraticCurveTo(e.x+e.w,e.y+e.h,e.x+e.w-e.radius[2],e.y+e.h),t.context.lineTo(e.x+e.radius[3],e.y+e.h),t.context.quadraticCurveTo(e.x,e.y+e.h,e.x,e.y+e.h-e.radius[3]),t.context.lineTo(e.x,e.y+e.radius[0]),t.context.quadraticCurveTo(e.x,e.y,e.x+e.radius[0],e.y),t.context.closePath(),t.context.stroke();break}case"fillRoundRect":{t.context.fillStyle=e.fillColor,t.context.globalAlpha=e.alpha,t.context.beginPath(),t.context.moveTo(e.x+e.radius[0],e.y),t.context.lineTo(e.x+e.w-e.radius[1],e.y),t.context.quadraticCurveTo(e.x+e.w,e.y,e.x+e.w,e.y+e.radius[1]),t.context.lineTo(e.x+e.w,e.y+e.h-e.radius[2]),t.context.quadraticCurveTo(e.x+e.w,e.y+e.h,e.x+e.w-e.radius[2],e.y+e.h),t.context.lineTo(e.x+e.radius[3],e.y+e.h),t.context.quadraticCurveTo(e.x,e.y+e.h,e.x,e.y+e.h-e.radius[3]),t.context.lineTo(e.x,e.y+e.radius[0]),t.context.quadraticCurveTo(e.x,e.y,e.x+e.radius[0],e.y),t.context.closePath(),t.context.fill();break}case"strokeEllipse":{t.context.strokeStyle=e.strokeColor,t.context.lineWidth=e.strokeWidth,t.context.setLineDash(e.strokeLineDash),t.context.globalAlpha=e.alpha;const n=.5522848,r=e.w/2*n,i=e.h/2*n,s=e.x+e.w,o=e.y+e.h,a=e.x+e.w/2,l=e.y+e.h/2;t.context.beginPath(),t.context.moveTo(e.x,l),t.context.bezierCurveTo(e.x,l-i,a-r,e.y,a,e.y),t.context.bezierCurveTo(a+r,e.y,s,l-i,s,l),t.context.bezierCurveTo(s,l+i,a+r,o,a,o),t.context.bezierCurveTo(a-r,o,e.x,l+i,e.x,l),t.context.closePath(),t.context.stroke();break}case"fillEllipse":{t.context.fillStyle=e.fillColor,t.context.globalAlpha=e.alpha;const n=.5522848,r=e.w/2*n,i=e.h/2*n,s=e.x+e.w,o=e.y+e.h,a=e.x+e.w/2,l=e.y+e.h/2;t.context.beginPath(),t.context.moveTo(e.x,l),t.context.bezierCurveTo(e.x,l-i,a-r,e.y,a,e.y),t.context.bezierCurveTo(a+r,e.y,s,l-i,s,l),t.context.bezierCurveTo(s,l+i,a+r,o,a,o),t.context.bezierCurveTo(a-r,o,e.x,l+i,e.x,l),t.context.closePath(),t.context.fill();break}case"polyline":{t.context.strokeStyle=e.strokeColor,t.context.lineWidth=e.strokeWidth,t.context.setLineDash(e.strokeLineDash),t.context.globalAlpha=e.alpha,t.context.beginPath();for(let n=0,r=e.path.length;n<r;n++){const i=e.path[n];n===0?t.context.moveTo(i[0],i[1]):t.context.lineTo(i[0],i[1])}t.context.stroke();break}case"strokeCurve":{if(t.context.strokeStyle=e.strokeColor,t.context.lineWidth=e.strokeWidth,t.context.setLineDash(e.strokeLineDash),t.context.globalAlpha=e.alpha,t.context.beginPath(),e.path.length>2){const n=dg(e.path);this.polyline(n)}else t.context.moveTo(e.path[0][0],e.path[0][1]),t.context.lineTo(e.path[e.path.length-1][0],e.path[e.path.length-1][1]);t.context.stroke();break}case"fillCurve":{if(t.context.fillStyle=e.fillColor,t.context.globalAlpha=e.alpha,t.context.beginPath(),e.path.length>2){const n=dg([...e.path,e.path[0]]);for(let r=0,i=n.length;r<i;r++){const s=n[r];r===0?t.context.moveTo(s[0],s[1]):t.context.lineTo(s[0],s[1])}}else t.context.moveTo(e.path[0][0],e.path[0][1]),t.context.lineTo(e.path[e.path.length-1][0],e.path[e.path.length-1][1]);t.context.fill();break}case"strokePolygon":{t.context.strokeStyle=e.strokeColor,t.context.lineWidth=e.strokeWidth,t.context.setLineDash(e.strokeLineDash),t.context.globalAlpha=e.alpha,t.context.beginPath();let n=[-1,-1];for(let r=0,i=e.path.length;r<i;r++){const s=e.path[r];r===0?(n=s,t.context.moveTo(s[0],s[1])):t.context.lineTo(s[0],s[1])}t.context.lineTo(n[0],n[1]),t.context.stroke();break}case"fillPolygon":{t.context.fillStyle=e.fillColor,t.context.globalAlpha=e.alpha,t.context.beginPath();for(let n=0,r=e.path.length;n<r;n++){const i=e.path[n];n===0?t.context.moveTo(i[0],i[1]):t.context.lineTo(i[0],i[1])}t.context.fill();break}case"strokeArc":{t.context.strokeStyle=e.strokeColor,t.context.lineWidth=e.strokeWidth,t.context.setLineDash(e.strokeLineDash),t.context.globalAlpha=e.alpha,t.context.beginPath(),t.context.arc(e.x,e.y,e.r,e.startAngle,e.endAngle,!1),t.context.stroke();break}case"fillArc":{t.context.fillStyle=e.fillColor,t.context.globalAlpha=e.alpha,t.context.beginPath(),t.context.arc(e.x,e.y,e.r,e.startAngle,e.endAngle,!1),t.context.fill();break}case"strokePath":{t.context.strokeStyle=e.strokeColor,t.context.lineWidth=e.strokeWidth,t.context.setLineDash(e.strokeLineDash),t.context.globalAlpha=e.alpha,t.context.beginPath();const n=Mu(e.path),r=new Path2D(n);r.pathData=n,t.context.stroke(r);break}case"fillPath":{t.context.fillStyle=e.fillColor,t.context.globalAlpha=e.alpha,t.context.beginPath();const n=Mu(e.path),r=new Path2D;r.pathData=n,t.context.fill(r);break}case"strokeFreehand":{t.context.fillStyle=e.strokeColor,t.context.lineCap="round",t.context.globalAlpha=e.alpha,t.context.beginPath(),e.path2d.pathData=e.pathData,t.context.fill(e.path2d);break}case"fillText":{t.context.fillStyle=e.fontColor,t.context.globalAlpha=e.alpha,t.context.font=e.font,t.context.beginPath(),t.context.fillText(e.text,e.x,e.y);break}case"drawImage":{t.context.globalAlpha=e.alpha,e.image&&e.image.complete&&(t.context.strokeStyle=this.canvas.resolveColor(jn.TRANSPARENT),t.context.lineWidth=0,t.context.setLineDash([]),t.context.globalAlpha=e.alpha,t.context.fillStyle=this.canvas.resolveColor(jn.TRANSPARENT),t.context.beginPath(),t.context.moveTo(e.x+e.radius[0],e.y),t.context.lineTo(e.x+e.w-e.radius[1],e.y),t.context.quadraticCurveTo(e.x+e.w,e.y,e.x+e.w,e.y+e.radius[1]),t.context.lineTo(e.x+e.w,e.y+e.h-e.radius[2]),t.context.quadraticCurveTo(e.x+e.w,e.y+e.h,e.x+e.w-e.radius[2],e.y+e.h),t.context.lineTo(e.x+e.radius[3],e.y+e.h),t.context.quadraticCurveTo(e.x,e.y+e.h,e.x,e.y+e.h-e.radius[3]),t.context.lineTo(e.x,e.y+e.radius[0]),t.context.quadraticCurveTo(e.x,e.y,e.x+e.radius[0],e.y),t.context.closePath(),t.context.fill(),t.context.clip(),t.context.drawImage(e.image,e.x,e.y,e.w,e.h));break}case"rough":{t.context.globalAlpha=e.alpha,ci(t.context,e.rd);break}}}},xl={light:De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De({transparent:"#ffffff00",foreground:"#000000",background:"#ffffff"},wY),xY),SY),kY),CY),_Y),AY),EY),PY),TY),NY),MY),OY),RY),LY),DY),IY),$Y),jY),FY),zY),BY),UY),HY),VY),WY),qY),GY),KY),JY),YY),ZY),XY),QY),eZ),tZ),nZ),rZ),iZ),sZ),oZ),aZ),lZ),cZ),uZ),dZ),fZ),hZ),pZ),gZ),mZ),yZ),vZ),bZ),wZ),xZ),SZ),kZ),CZ),_Z),AZ),EZ),dark:De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De(De({transparent:"#00000000",foreground:"#ffffff",background:"#000000"},fJ),hJ),pJ),gJ),mJ),yJ),vJ),bJ),wJ),xJ),SJ),kJ),CJ),_J),AJ),EJ),PJ),TJ),NJ),MJ),OJ),RJ),LJ),DJ),IJ),$J),jJ),FJ),zJ),BJ),UJ),HJ),VJ),WJ),qJ),GJ),KJ),JJ),YJ),ZJ),XJ),QJ),eY),tY),nY),rY),iY),sY),oY),aY),lY),cY),uY),dY),fY),hY),pY),gY),mY),yY),vY),bY)},_te={};Fg(_te,{duplicateShapes:()=>qte,getAllBoundingRect:()=>XD,getAllConnectorsTo:()=>ME,getAllDescendant:()=>Vg,getAllMirrors:()=>YD,getAllReferers:()=>JD,getAllViewport:()=>ZD});function Ate(t){return Array.from(new Set(t).values())}function iw(t){let e=[],n=[];for(let r of t)t.some(i=>i.isDescendant(r))||n.push(r);return n.forEach(r=>{const i=r.toJSON(!0);e.push(i)}),e}function sw(t,e,n){const r={},i=e.map(s=>{const o=t.instantiator.createFromJson(s);return o.traverse(a=>r[a.id]=a),o});if(n){const s=n(t,i);Object.assign(r,s)}for(let s of i)s.traverse(o=>o.resolveRefs(r,!0)),s.traverse(o=>o.id=kx()),s.parent=null;return i}var LD={};Fg(LD,{addPage:()=>NC,addShape:()=>vs,adjustConnectorRoute:()=>FD,assignPath:()=>my,bringForward:()=>VD,bringToFront:()=>UD,changeParent:()=>Sl,deleteShapes:()=>ow,deleteSingleShape:()=>NE,groupShapes:()=>zD,moveAnchor:()=>TE,moveConnectorEnd:()=>RC,moveConnectorEndPoint:()=>jD,moveShapes:()=>Hn,moveSingleShape:()=>D1,removePage:()=>DD,reorderPage:()=>G2,resizeShape:()=>ld,resolveAllConstraints:()=>Rt,resolveShapeConstraints:()=>qD,sendBackward:()=>WD,sendToBack:()=>HD,setBottom:()=>$D,setFontColor:()=>Lte,setFontFamily:()=>Rte,setFontSize:()=>Ote,setHeight:()=>OC,setHorzAlign:()=>Mte,setLeft:()=>K2,setLeftRight:()=>Tte,setPath:()=>ko,setRight:()=>ID,setTop:()=>J2,setTopBottom:()=>Nte,setWidth:()=>MC,ungroupShapes:()=>BD});function Ete(t,e,n){e?(t[t.length-1][0]=n[0],t[t.length-1][1]=n[1]):(t[0][0]=n[0],t[0][1]=n[1])}function PE(t,e){let n=Bn(t),r=0;for(;r<n.length-2;){const i=n[r],s=n[r+1],o=n[r+2],a=Gs(bl(s,o)-bl(s,i));mE(i,s)?n.splice(r,1):Math.abs(180-a)<e?n.splice(r+1,1):r++}return n}function Pte(t){if(t.path.length>=2){const e=PE(Bn(t.path),gE);if(t.tail){const n=t.getTailAnchorPoint(),r=e[1];if(t.tail instanceof gn&&!t.tail.isClosed())e[0]=c0(n,r,t.tailMargin);else if(t.tail){const i=t.tail.getOutline().map(o=>t.tail.localCoordTransform(null,o,!0)),s=SC(i,[r,n],!0,!1);s&&(e[0]=c0(s,r,t.tailMargin))}}if(t.head){const n=t.getHeadAnchorPoint(),r=e[e.length-2];if(t.head instanceof gn&&!t.head.isClosed())e[e.length-1]=c0(n,r,t.headMargin);else if(t.head){const i=t.head.getOutline().map(o=>t.head.localCoordTransform(null,o,!0)),s=SC(i,[r,n],!0,!1);s&&(e[e.length-1]=c0(s,r,t.headMargin))}}return e}return t.path}function my(t,e,n,r){const i=e[n],s=r;return rD(i,s,.1)?!1:(t.assign(e,n,s),!0)}function Sl(t,e,n){let r=!1;return n&&(e.parent&&(r=t.removeChild(e.parent,e)||r),r=t.insertChild(n,e)||r),r}function NC(t,e,n){let r=!1;return r=t.appendObj(n)||r,r=Sl(t,n,e)||r,r}function DD(t,e){let n=!1;return e&&e.parent&&(n=t.removeChild(e.parent,e)||n,n=t.deleteObj(e)||n),n}function G2(t,e,n){let r=!1;return e&&e.parent&&n>=0&&n<e.parent.children.length&&(r=t.reorderChild(e.parent,e,n)),r}function vs(t,e,n){let r=!1;return r=t.appendObj(e)||r,r=Sl(t,e,n)||r,r}function K2(t,e,n){let r=!1;const i=n-e.left;if(r=t.assign(e,"left",n)||r,e instanceof gn){const s=e.path.map(o=>[o[0]+i,o[1]]);r=t.assign(e,"path",s)||r}return r}function ID(t,e,n){return t.assign(e,"left",n-e.width)}function Tte(t,e,n,r){let i=!1;return i=t.assign(e,"left",n)||i,i=t.assign(e,"width",r-n)||i,i}function J2(t,e,n){let r=!1;const i=n-e.top;if(r=t.assign(e,"top",n)||r,e instanceof gn){const s=e.path.map(o=>[o[0],o[1]+i]);r=t.assign(e,"path",s)||r}return r}function $D(t,e,n){return t.assign(e,"top",n-e.height)}function Nte(t,e,n,r){let i=!1;return i=t.assign(e,"top",n)||i,i=t.assign(e,"height",r-n)||i,i}function MC(t,e,n){let r=!1;return r=t.assign(e,"width",n)||r,r}function OC(t,e,n){let r=!1;return r=t.assign(e,"height",n)||r,r}function ko(t,e,n){let r=!1;const i=ei(n);return r=my(t,e,"path",n)||r,r=t.assign(e,"left",i[0][0])||r,r=t.assign(e,"top",i[0][1])||r,r=t.assign(e,"width",nn(i))||r,r=t.assign(e,"height",rn(i))||r,r}function ld(t,e,n,r){let i=!1;i=t.assign(e,"width",n)||i,i=t.assign(e,"height",r)||i;const s=e.getBoundingRect(),o=[s[0],[s[0][0]+n,s[0][1]+r]];if(e instanceof gn){const a=mf(e.path,s,o);i=my(t,e,"path",a)||i}return i}function D1(t,e,n,r){let i=!1;return i=t.assign(e,"left",e.left+n)||i,i=t.assign(e,"top",e.top+r)||i,e instanceof gn&&(i=my(t,e,"path",e.path.map(s=>[s[0]+n,s[1]+r]))||i),i}function TE(t,e,n,r){let i=!1;return i=t.assign(e,"anchorAngle",n)||i,i=t.assign(e,"anchorLength",r)||i,i}function Mte(t,e,n){let r=!1,i=structuredClone(e.text);return wl(i,s=>{s.attrs&&s.attrs.textAlign&&(s.attrs.textAlign=n)}),r=t.assign(e,"text",i)||r,r=t.assign(e,"horzAlign",n)||r,r}function Ote(t,e,n){let r=!1,i=structuredClone(e.text);return wl(i,s=>{Array.isArray(s.marks)&&s.marks.forEach(o=>{o.type==="textStyle"&&(o.attrs.fontSize=`${n}px`)})}),r=t.assign(e,"fontSize",n)||r,r=t.assign(e,"text",i)||r,r}function Rte(t,e,n){let r=!1,i=structuredClone(e.text);return wl(i,s=>{Array.isArray(s.marks)&&s.marks.forEach(o=>{o.type==="textStyle"&&(o.attrs.fontFamily=n)})}),r=t.assign(e,"fontFamily",n)||r,r=t.assign(e,"text",i)||r,r}function Lte(t,e,n){let r=!1,i=structuredClone(e.text);return wl(i,s=>{Array.isArray(s.marks)&&s.marks.forEach(o=>{o.type==="textStyle"&&(o.attrs.color=n)})}),r=t.assign(e,"fontColor",n)||r,r=t.assign(e,"text",i)||r,r}function jD(t,e,n,r){const i=Bn(e.path);return Ete(i,n,r),my(t,e,"path",i)}function RC(t,e,n,r,i){const s=i?e.path[e.path.length-1]:e.path[0];return jD(t,e,i,zg(s,n,r))}function FD(t,e){let n=!1;const r=Pte(e);return n=ko(t,e,r)||n,n}function Hn(t,e,n,r,i,s=null){let o=!1,a=OD(n),l=Vg(a);return l.forEach(u=>{o=D1(t,u,r,i)||o}),ME(e,l).filter(u=>!l.includes(u)).forEach(u=>{u instanceof Bs&&(l.includes(u.tail)&&l.includes(u.head)?o=D1(t,u,r,i)||o:l.includes(u.tail)&&!l.includes(u.head)?o=RC(t,u,r,i,!1)||o:l.includes(u.head)&&!l.includes(u.tail)&&(o=RC(t,u,r,i,!0)||o))}),e.getOrderedShapes(a).forEach(u=>{s&&u.parent!==s&&!u.anchored&&(o=Sl(t,u,s)||o)}),o}function NE(t,e,n,r){let i=!1;const s=ME(n,[r]);for(let l of s)l.head===r&&(i=t.assignRef(l,"head",null)||i),l.tail===r&&(i=t.assignRef(l,"tail",null)||i);const o=JD(e,[r]);for(let l of o)l.reference===r&&(i=t.assignRef(l,"reference",null)||i);const a=YD(e,[r]);for(let l of a)l.subject===r&&(i=t.assignRef(l,"subject",null)||i);return r.parent&&(i=t.removeChild(r.parent,r)||i),i=t.deleteObj(r)||i,i}function ow(t,e,n,r){let i=!1;return r.forEach(s=>{i=NE(t,e,n,s)||i}),i}function zD(t,e,n,r,i){let s=!1;const o=XD(r,i);let a=OD(i);if(a.length>1){const l=new $f;l.left=o[0][0],l.top=o[0][1],l.width=nn(o),l.height=rn(o),s=t.appendObj(l)||s,s=Sl(t,l,n)||s,n==null||n.traverseSequence().reverse().forEach(c=>{a.includes(c)&&(s=Sl(t,c,l)||s)})}return s}function BD(t,e,n,r,i){let s=!1;if(i.some(o=>o instanceof $f)){for(let o of i)if(o instanceof $f){const a=[...o.children].reverse();for(let l=a.length-1;l>=0;l--){const c=a[l];s=Sl(t,c,o.parent)||s}s=NE(t,e,n,o)||s}}return s}function UD(t,e){let n=!1;if(e.parent){const r=e.parent.children.length;n=t.reorderChild(e.parent,e,r-1)||n}return n}function HD(t,e){let n=!1;return e.parent&&(n=t.reorderChild(e.parent,e,0)||n),n}function VD(t,e){let n=!1;if(e.parent){const r=e.parent.children.length,i=e.parent.children.indexOf(e);i<r-1&&t.reorderChild(e.parent,e,i+1)}return n}function WD(t,e){let n=!1;if(e.parent){const r=e.parent.children.indexOf(e);r>0&&t.reorderChild(e.parent,e,r-1)}return n}function qD(t,e,n,r){let i=!1;return n.constraints.forEach(s=>{try{i=Qo.get(s.id)(t,e,n,r,s)||i}catch(o){console.log(o)}}),i}function Rt(t,e,n,r=3){let i=!1;for(let s=0;s<r;s++){if(e.traverse(o=>{i=qD(t,e,o,n)||i}),!i)return!1;i=!1}return console.warn(`Constraints are not resolved within ${r} times`),!0}function GD(t,e){e(t),t.children&&t.children.forEach(n=>GD(n,e))}function Dte(t){var e;(t.type==="Diagram"||t.type==="Document")&&(t.type="Doc"),Array.isArray(t.children)||(t.children=[]);let n=null;t.type==="Doc"&&(n=(e=t.pageSize)!=null?e:null);for(const r of t.children)r.type==="Page"&&(r.parent||(r.parent=t.id)),typeof r.size>"u"&&(r.size=n);if(t.type==="Doc"&&t.children.length>0&&t.children[0].type!=="Page"){const r=kx(),i={id:r,type:"Page",parent:t.id,name:t.name,description:t.description,children:[...t.children.map(s=>bC(De({},s),{parent:r}))]};t.children=[i]}return GD(t,r=>{typeof r.text=="string"&&(r.text=O1(r.text,r.horzAlign))}),t}function Ite(t){t.traverse(e=>{if(e instanceof Bs){Array.isArray(e.tailAnchor)&&(e.tailAnchor[0]<0&&(e.tailAnchor[0]=0),e.tailAnchor[0]>1&&(e.tailAnchor[0]=1),e.tailAnchor[1]<0&&(e.tailAnchor[1]=0),e.tailAnchor[1]>1&&(e.tailAnchor[1]=1)),Array.isArray(e.headAnchor)&&(e.headAnchor[0]<0&&(e.headAnchor[0]=0),e.headAnchor[0]>1&&(e.headAnchor[0]=1),e.headAnchor[1]<0&&(e.headAnchor[1]=0),e.headAnchor[1]>1&&(e.headAnchor[1]=1));const n=e.path[0];if(n[0]===null||n[1]===null){const i=e.getTailAnchorPoint();n[0]=i[0],n[1]=i[1]}const r=e.path[e.path.length-1];if(r[0]===null||r[1]===null){const i=e.getHeadAnchorPoint();r[0]=i[0],r[1]=i[1]}}e.parent===null&&t.traverse(n=>{Array.isArray(n.children)&&n.children.includes(e)&&(e.parent=n)})})}var nN=class{constructor(t){this.maxSize=t,this.stack=[]}clear(){this.stack=[]}push(t){this.stack.push(t),this.stack.length>this.maxSize&&this.stack.splice(0,1)}pop(){return this.stack.pop()}get(t=0){return this.stack[this.stack.length-1-t]}size(){return this.stack.length}},Wn=class{constructor(){this.listeners=[],this.listenersOncer=[],this.addListener=t=>(this.listeners.push(t),{dispose:()=>this.removeListener(t)}),this.addOnceListener=t=>{this.listenersOncer.push(t)},this.removeListener=t=>{const e=this.listeners.indexOf(t);e>-1&&this.listeners.splice(e,1)},this.emit=t=>{if(this.listeners.forEach(e=>e(t)),this.listenersOncer.length>0){const e=this.listenersOncer;this.listenersOncer=[],e.forEach(n=>n(t))}},this.pipe=t=>this.addListener(e=>t.emit(e))}},Rr={CREATE:"create",DELETE:"delete",ASSIGN:"assign",ASSIGN_REF:"assign-ref",INSERT_CHILD:"insert-child",REMOVE_CHILD:"remove-child",REORDER_CHILD:"reorder-child"},oh=class{constructor(t){this.type=t}apply(t){}unapply(t){}toJSON(){return null}},$te=class extends oh{constructor(t){super(Rr.CREATE),this.obj=t}apply(t){t.addToIndex(this.obj),t.update(this.obj)}unapply(t){t.removeFromIndex(this.obj),t.update(this.obj)}toJSON(){return{op:this.type,obj:this.obj.toJSON(!0)}}},jte=class extends oh{constructor(t){super(Rr.DELETE),this.obj=t}apply(t){t.removeFromIndex(this.obj),t.update(this.obj)}unapply(t){t.addToIndex(this.obj),t.update(this.obj)}toJSON(){return{op:this.type,obj:this.obj.toJSON(!0)}}},rN=class extends oh{constructor(t,e,n){super(Rr.ASSIGN),this.obj=t,this.field=e,this.newValue=n,this.oldValue=t[e]}apply(t){this.obj[this.field]=this.newValue,t.update(this.obj)}unapply(t){this.obj[this.field]=this.oldValue,t.update(this.obj)}toJSON(){return{op:this.type,objId:this.obj.id,field:this.field,newValue:this.newValue,oldValue:this.oldValue}}},iN=class extends oh{constructor(t,e,n){super(Rr.ASSIGN_REF),this.obj=t,this.field=e,this.newValue=n,this.oldValue=t[e]}apply(t){this.obj[this.field]=this.newValue,t.update(this.obj)}unapply(t){this.obj[this.field]=this.oldValue,t.update(this.obj)}toJSON(){return{op:this.type,objId:this.obj.id,field:this.field,newValue:this.newValue,oldValue:this.oldValue}}},Fte=class extends oh{constructor(t,e,n){super(Rr.INSERT_CHILD),this.parent=t,this.obj=e,typeof n=="number"?this.position=n:this.position=this.parent.children.length}apply(t){Array.isArray(this.parent.children)&&(this.parent.children.splice(this.position,0,this.obj),this.obj.parent=this.parent),t.update(this.parent),t.update(this.obj)}unapply(t){Array.isArray(this.parent.children)&&(this.parent.children.splice(this.position,1),this.obj.parent=null),t.update(this.parent),t.update(this.obj)}toJSON(){return{op:this.type,parentId:this.parent.id,obj:this.obj,position:this.position}}},zte=class extends oh{constructor(t,e){super(Rr.REMOVE_CHILD),this.parent=t,this.obj=e;const n=this.parent.children;Array.isArray(n)?this.position=n.indexOf(this.obj):this.position=-1}apply(t){Array.isArray(this.parent.children)&&(this.parent.children.splice(this.position,1),this.obj.parent=null),t.update(this.parent),t.update(this.obj)}unapply(t){Array.isArray(this.parent.children)&&(this.parent.children.splice(this.position,0,this.obj),this.obj.parent=this.parent),t.update(this.parent),t.update(this.obj)}toJSON(){return{op:this.type,parentId:this.parent.id,obj:this.obj,position:this.position}}},Bte=class extends oh{constructor(t,e,n){super(Rr.REORDER_CHILD),this.parent=t,this.obj=e,this.newPosition=n,Array.isArray(this.parent.children)?this.oldPosition=this.parent.children.indexOf(this.obj):this.oldPosition=-1}apply(t){const e=this.parent.children;Array.isArray(e)&&(e.splice(this.oldPosition,1),e.splice(this.newPosition,0,this.obj)),t.update(this.parent),t.update(this.obj)}unapply(t){const e=this.parent.children;Array.isArray(e)&&(e.splice(this.newPosition,1),e.splice(this.oldPosition,0,this.obj)),t.update(this.parent),t.update(this.obj)}toJSON(){return{op:this.type,parentId:this.parent.id,obj:this.obj,oldPosition:this.oldPosition,newPosition:this.newPosition}}},Ute=class{constructor(e){this.store=e,this.mutations=[],this.recentlyAppendedObj=null}push(e){this.mutations.push(e)}toJSON(){return this.mutations.map(e=>e.toJSON())}apply(){if(this.mutations.length!==0)for(let e=0;e<this.mutations.length;e++)this.mutations[e].apply(this.store)}unapply(){if(this.mutations.length!==0)for(let e=this.mutations.length-1;e>=0;e--)this.mutations[e].unapply(this.store)}appendObj(e){if(!this.store.getById(e.id)){const n=new $te(e);return n.apply(this.store),this.push(n),this.recentlyAppendedObj=e,!0}return!1}deleteObj(e){if(this.store.getById(e.id)){const n=new jte(e);return n.apply(this.store),this.push(n),!0}return!1}assign(e,n,r){const i=JSON.stringify(e[n]),s=JSON.stringify(r);if(i!==s){const o=this.mutations.find(a=>a instanceof rN&&a.obj===e&&a.field===n);if(o)o.newValue=structuredClone(r),o.apply(this.store);else{const a=new rN(e,n,structuredClone(r));a.apply(this.store),this.push(a)}return!0}return!1}assignRef(e,n,r){if(e[n]!==r){const s=this.mutations.find(o=>o instanceof iN&&o.obj===e&&o.field===n);if(s)s.newValue=r,s.apply(this.store);else{const o=new iN(e,n,r);o.apply(this.store),this.push(o)}return!0}return!1}insertChild(e,n,r){if(!e.children.includes(n)){const i=new Fte(e,n,r);return i.apply(this.store),this.push(i),!0}return!1}removeChild(e,n){if(e.children.includes(n)){const r=new zte(e,n);return r.apply(this.store),this.push(r),!0}return!1}reorderChild(e,n,r){if(e.children.indexOf(n)>=0){const o=new Bte(e,n,r);return o.apply(this.store),this.push(o),!0}return!1}},sN=1e3,xt={UNKNOWN:"unknown",INSERT:"insert",UPDATE:"update",DELETE:"delete",CUT:"cut",PASTE:"paste",DUPLICATE:"duplicate",MOVE:"move",MOVE_ANCHOR:"move-anchor",ROTATE:"rotate",RESIZE:"resize",REPATH:"repath",RECONNECT:"reconnect",EDIT_TEXT:"edit-text",GROUP:"group",UNGROUP:"ungroup",ADD_PAGE:"add-page",REMOVE_PAGE:"remove-page",REORDER_PAGE:"reorder-page",DUPLICATE_PAGE:"duplicate-page",BRING_FORWARD:"bring-forward",SEND_BACKWARD:"send-backward",BRING_TO_FRONT:"bring-to-front",SEND_TO_BACK:"send-to-back",ALIGN_LEFT:"align-left",ALIGN_CENTER:"align-center",ALIGN_RIGHT:"align-right",ALIGN_TOP:"align-top",ALIGN_MIDDLE:"align-middle",ALIGN_BOTTOM:"align-bottom",DISTRIBUTE_HORIZONTALLY:"distribute-horizontally",DISTRIBUTE_VERTICALLY:"distribute-vertically"},Hte=class{constructor(t){this.name=t,this.transactions=[]}push(t){this.transactions.push(t)}apply(t){for(let e=0;e<this.transactions.length;e++)this.transactions[e].apply()}unapply(t){for(let e=this.transactions.length-1;e>=0;e--)this.transactions[e].unapply()}},KD=class{constructor(e){this.store=e,this.action=null,this.undoHistory=new nN(sN),this.redoHistory=new nN(sN),this.onTransaction=new Wn,this.onAction=new Wn,this.onUndo=new Wn,this.onRedo=new Wn}startAction(e){this.action&&this.action.transactions.length>0&&this.endAction(),this.action=new Hte(e)}transact(e){const n=new Ute(this.store);e(n),n.mutations.length>0&&(this.onTransaction.emit(n),this.action?this.action.push(n):(this.startAction(xt.UNKNOWN),this.action.push(n),this.endAction()))}endAction(){if(!this.action)throw new Error("No action started");this.action.transactions.length>0&&(this.onAction.emit(this.action),this.undoHistory.push(this.action),this.redoHistory.clear()),this.action=null}cancelAction(){this.action&&(this.action.unapply(this),this.action=null)}mergeAction(){if(this.undoHistory.size()>1){const e=this.undoHistory.get(0),n=this.undoHistory.get(1);if(e&&n){for(let r of e.transactions)n.push(r);this.undoHistory.pop()}}}canUndo(){return this.undoHistory.size()>0}canRedo(){return this.redoHistory.size()>0}undo(){if(this.undoHistory.size()>0){const e=this.undoHistory.pop();e&&(e.unapply(this),this.onUndo.emit(e),this.redoHistory.push(e))}}redo(){if(this.redoHistory.size()>0){const e=this.redoHistory.pop();e&&(e.apply(this),this.onRedo.emit(e),this.undoHistory.push(e))}}},Vte=class{constructor(t,e){this.instantiator=t,this.history=new KD(this),this.options=e||{},this.idIndex={},this.root=null}clear(){this.idIndex={},this.root=null}addToIndex(t){t&&t.traverse(e=>{this.idIndex[e.id]=e,this.options.objInitializer&&this.options.objInitializer(e)})}removeFromIndex(t){t&&t.traverse(e=>{delete this.idIndex[e.id],this.options.objFinalizer&&this.options.objFinalizer(e)})}update(t){this.options.objUpdater&&this.options.objUpdater(t)}getById(t){return this.idIndex[t]}has(t){var e;return!!((e=this.root)!=null&&e.find(n=>n===t)&&this.getById(t.id))}toJSON(){return this.root?this.root.toJSON(!0):null}fromJSON(t){const e=Dte(t);this.root=this.instantiator.createFromJson(e),this.root&&(Ite(this.root),this.idIndex={},this.addToIndex(this.root))}setRoot(t){this.root=t,this.addToIndex(t)}},Y2=(t,e)=>{const n={};for(let r of e)r.traverse(i=>{i instanceof zr&&typeof i.reference=="string"&&t.idIndex[i.reference]&&(n[i.reference]=t.idIndex[i.reference]),i instanceof ah&&typeof i.subject=="string"&&t.idIndex[i.subject]&&(n[i.subject]=t.idIndex[i.subject])});return n},Wte=class{constructor(t){this.editor=t}undo(){this.editor.transform.undo()}redo(){this.editor.transform.redo()}addPage(t){var e,n;const r=this.editor.getPages();t=t??r.length;const i=(e=r[t-1])!=null?e:null,s=new ws;return s.size=(n=i==null?void 0:i.size)!=null?n:null,s.name=`Page ${t+1}`,this.editor.transform.startAction(xt.ADD_PAGE),this.editor.transform.transact(o=>{NC(o,this.editor.getDoc(),s),t>=0&&t<this.editor.getPages().length&&G2(o,s,t),Rt(o,s,this.editor.canvas)}),this.editor.transform.endAction(),s}removePage(t){this.editor.transform.startAction(xt.REMOVE_PAGE),this.editor.transform.transact(e=>{DD(e,t)}),this.editor.transform.endAction()}reorderPage(t,e){this.editor.transform.startAction(xt.REORDER_PAGE),this.editor.transform.transact(n=>{G2(n,t,e)}),this.editor.transform.endAction()}duplicatePage(t,e,n){const r=iw([t]),i=sw(this.editor.store,r,Y2)[0];return n&&n(i),this.editor.transform.startAction(xt.DUPLICATE_PAGE),this.editor.transform.transact(s=>{NC(s,this.editor.getDoc(),i),G2(s,i,e)}),this.editor.transform.endAction(),this.editor.setCurrentPage(i),i}insert(t,e){const n=this.editor.getCurrentPage();n&&(this.editor.transform.startAction(xt.INSERT),this.editor.transform.transact(r=>{vs(r,t,e??n),Rt(r,n,this.editor.canvas)}),this.editor.transform.endAction())}update(t,e){const n=this.editor.getCurrentPage();n&&(this.editor.transform.startAction(xt.UPDATE),this.editor.transform.transact(r=>{e=e??this.editor.selection.getShapes();for(let i in t){const s=t[i];switch(i){case"reference":{e.forEach(o=>{o.hasOwnProperty(i)&&r.assignRef(o,i,s)});break}case"subject":{e.forEach(o=>{o.hasOwnProperty(i)&&r.assignRef(o,i,s)});break}case"horzAlign":e.forEach(o=>{if(o instanceof St){const a=structuredClone(o.text);wl(a,l=>{var c;(c=l.attrs)!=null&&c.textAlign&&(l.attrs.textAlign=s)}),o.hasOwnProperty(i)&&(r.assign(o,i,s),r.assign(o,"text",a))}});break;case"fontColor":case"fontFamily":case"fontSize":case"fontWeight":e.forEach(o=>{if(o instanceof St){const a=structuredClone(o.text);wl(a,l=>{Array.isArray(l.marks)&&l.marks.forEach(c=>{c.attrs&&delete c.attrs[i==="fontColor"?"color":i]})}),o.hasOwnProperty(i)&&(r.assign(o,i,s),r.assign(o,"text",a))}});break;default:e.forEach(o=>{o.hasOwnProperty(i)&&r.assign(o,i,s)})}}Rt(r,n,this.editor.canvas)}),this.editor.transform.endAction())}remove(t){const e=this.editor.getDoc(),n=this.editor.getCurrentPage();n&&(this.editor.transform.startAction(xt.DELETE),this.editor.transform.transact(r=>{t=t??this.editor.selection.getShapes(),ow(r,e,n,t),Rt(r,n,this.editor.canvas)}),this.editor.transform.endAction(),this.editor.selection.deselectAll())}copy(t){return Vu(this,null,function*(){t=t??this.editor.selection.getShapes(),yield this.editor.clipboard.write({objs:t})})}cut(t){return Vu(this,null,function*(){const e=this.editor.getDoc(),n=this.editor.getCurrentPage();n&&(t=t??this.editor.selection.getShapes(),yield this.editor.clipboard.write({objs:t}),this.editor.transform.startAction(xt.CUT),this.editor.transform.transact(i=>{ow(i,e,n,t)}),this.editor.transform.endAction(),this.editor.selection.deselectAll())})}paste(t){return Vu(this,null,function*(){const e=t??this.editor.getCurrentPage();if(e){const n=this.editor.canvas,i=yield this.editor.clipboard.read(Y2),s=this.editor.getCenter();if(Array.isArray(i.objs)){const o=i.objs,a=o.map(f=>f.getBoundingRect()).reduce(hl),l=nn(a),c=rn(a),d=s[0]-(a[0][0]+l/2),u=s[1]-(a[0][1]+c/2);this.editor.transform.startAction(xt.PASTE),this.editor.transform.transact(f=>{o.toReversed().forEach(h=>{f.appendObj(h),Sl(f,h,e)}),Hn(f,e,o,d,u)}),this.editor.transform.endAction(),this.editor.selection.select(o);return}if(i.image){const o=yield this.editor.factory.createImage(i.image,s);this.editor.transform.startAction(xt.PASTE),this.editor.transform.transact(a=>{vs(a,o,e),Rt(a,e,n)}),this.editor.transform.endAction(),this.editor.selection.select([o]);return}if(i.text){const o=this.editor.factory.createText([s,s],i.text);this.editor.transform.startAction(xt.PASTE),this.editor.transform.transact(a=>{vs(a,o,e),Rt(a,e,n)}),this.editor.transform.endAction(),this.editor.selection.select([o]);return}}})}duplicate(t,e=30,n=30,r){const i=this.editor.canvas,s=this.editor.getCurrentPage();if(s){t=t??this.editor.selection.getShapes();const o=iw(t);if(o.length>0){const a=sw(this.editor.store,o,Y2);return this.editor.transform.startAction(xt.DUPLICATE),this.editor.transform.transact(l=>{a.toReversed().forEach(c=>{l.appendObj(c),Sl(l,c,r??s)}),Hn(l,s,a,e,n),Rt(l,s,i)}),this.editor.transform.endAction(),this.editor.selection.select(a),a}}return[]}move(t,e,n){const r=this.editor.getCurrentPage();r&&(n=n??this.editor.selection.getShapes(),n.length>0&&(this.editor.transform.startAction(xt.MOVE),this.editor.transform.transact(i=>{var s;if(n.every(o=>o instanceof St&&o.anchored)){for(let o of n)if(o instanceof St&&o.anchored){const a=ps((s=o.parent.getOutline())!=null?s:[],o.anchorPosition),l=o.getCenter();l[0]+=t,l[1]+=e;const c=bl(a,l),d=Math.round(Gn(l,a));TE(i,o,c,d)}}else Hn(i,r,n,t,e);Rt(i,r,this.editor.canvas)}),this.editor.transform.endAction()))}group(t){const e=this.editor.getDoc(),n=this.editor.getCurrentPage();if(n){t=t??this.editor.selection.getShapes();let r=null;this.editor.transform.startAction(xt.GROUP),this.editor.transform.transact(i=>{zD(i,e,n,this.editor.canvas,t),r=i.recentlyAppendedObj,Rt(i,n,this.editor.canvas)}),this.editor.transform.endAction(),r&&this.editor.selection.select([r])}}ungroup(t){const e=this.editor.getDoc(),n=this.editor.getCurrentPage();if(n&&(t=t??this.editor.selection.getShapes(),t.some(r=>r instanceof $f))){const r=t.filter(i=>i instanceof $f).flatMap(i=>i.children);this.editor.transform.startAction(xt.UNGROUP),this.editor.transform.transact(i=>{BD(i,e,n,this.editor.canvas,t),Rt(i,n,this.editor.canvas)}),this.editor.transform.endAction(),this.editor.selection.select(r)}}bringToFront(t){const e=this.editor.getCurrentPage();e&&(t=t??this.editor.selection.getShapes(),t.length>0&&(this.editor.transform.startAction(xt.BRING_TO_FRONT),this.editor.transform.transact(n=>{for(let r of t)UD(n,r);Rt(n,e,this.editor.canvas)}),this.editor.transform.endAction()))}sendToBack(t){const e=this.editor.getCurrentPage();e&&(t=t??this.editor.selection.getShapes(),t.length>0&&(this.editor.transform.startAction(xt.SEND_TO_BACK),this.editor.transform.transact(n=>{for(let r of t)HD(n,r);Rt(n,e,this.editor.canvas)}),this.editor.transform.endAction()))}bringForward(t){const e=this.editor.getCurrentPage();e&&(t=t??this.editor.selection.getShapes(),t.length>0&&(this.editor.transform.startAction(xt.BRING_FORWARD),this.editor.transform.transact(n=>{for(let r of t)VD(n,r);Rt(n,e,this.editor.canvas)}),this.editor.transform.endAction()))}sendBackward(t){const e=this.editor.getCurrentPage();e&&(t=t??this.editor.selection.getShapes(),t.length>0&&(this.editor.transform.startAction(xt.SEND_BACKWARD),this.editor.transform.transact(n=>{for(let r of t)WD(n,r);Rt(n,e,this.editor.canvas)}),this.editor.transform.endAction()))}alignLeft(t){const e=this.editor.getCurrentPage();e&&(t=t??this.editor.selection.getShapes(),t.length>0&&(this.editor.transform.startAction(xt.ALIGN_LEFT),this.editor.transform.transact(n=>{const r=t.map(s=>s.getBoundingRect()[0][0]),i=Math.min(...r);for(const s of t)if(s instanceof St){const o=i-s.left;Hn(n,e,[s],o,0)}else if(s instanceof gn){const o=i-Math.min(...s.path.map(a=>a[0]));Hn(n,e,[s],o,0)}Rt(n,e,this.editor.canvas)}),this.editor.transform.endAction()))}alignRight(t){const e=this.editor.getCurrentPage();e&&(t=t??this.editor.selection.getShapes(),t.length>0&&(this.editor.transform.startAction(xt.ALIGN_RIGHT),this.editor.transform.transact(n=>{const r=t.map(s=>s.getBoundingRect()[1][0]),i=Math.max(...r);for(const s of t)if(s instanceof St){const o=i-s.right;Hn(n,e,[s],o,0)}else if(s instanceof gn){const o=i-Math.max(...s.path.map(a=>a[0]));Hn(n,e,[s],o,0)}Rt(n,e,this.editor.canvas)}),this.editor.transform.endAction()))}alignCenter(t){const e=this.editor.getCurrentPage();e&&(t=t??this.editor.selection.getShapes(),t.length>0&&(this.editor.transform.startAction(xt.ALIGN_CENTER),this.editor.transform.transact(n=>{const r=t.map(l=>l.getBoundingRect()[0][0]),i=t.map(l=>l.getBoundingRect()[1][0]),s=Math.min(...r),o=Math.max(...i),a=Math.round((s+o)/2);for(const l of t)if(l instanceof St){const c=a-Math.round((l.left+l.right)/2);Hn(n,e,[l],c,0)}else if(l instanceof gn){const c=Math.min(...l.path.map(f=>f[0])),d=Math.max(...l.path.map(f=>f[0])),u=a-Math.round((c+d)/2);Hn(n,e,[l],u,0)}Rt(n,e,this.editor.canvas)}),this.editor.transform.endAction()))}alignTop(t){const e=this.editor.getCurrentPage();e&&(t=t??this.editor.selection.getShapes(),t.length>0&&(this.editor.transform.startAction(xt.ALIGN_TOP),this.editor.transform.transact(n=>{const r=t.map(s=>s.getBoundingRect()[0][1]),i=Math.min(...r);for(const s of t)if(s instanceof St){const o=i-s.top;Hn(n,e,[s],0,o)}else if(s instanceof gn){const o=i-Math.min(...s.path.map(a=>a[1]));Hn(n,e,[s],0,o)}Rt(n,e,this.editor.canvas)}),this.editor.transform.endAction()))}alignBottom(t){const e=this.editor.getCurrentPage();e&&(t=t??this.editor.selection.getShapes(),t.length>0&&(this.editor.transform.startAction(xt.ALIGN_BOTTOM),this.editor.transform.transact(n=>{const r=t.map(s=>s.getBoundingRect()[1][1]),i=Math.max(...r);for(const s of t)if(s instanceof St){const o=i-s.bottom;Hn(n,e,[s],0,o)}else if(s instanceof gn){const o=i-Math.max(...s.path.map(a=>a[1]));Hn(n,e,[s],0,o)}Rt(n,e,this.editor.canvas)}),this.editor.transform.endAction()))}alignMiddle(t){const e=this.editor.getCurrentPage();e&&(t=t??this.editor.selection.getShapes(),t.length>0&&(this.editor.transform.startAction(xt.ALIGN_MIDDLE),this.editor.transform.transact(n=>{const r=t.map(l=>l.getBoundingRect()[0][1]),i=t.map(l=>l.getBoundingRect()[1][1]),s=Math.min(...r),o=Math.max(...i),a=Math.round((s+o)/2);for(const l of t)if(l instanceof St){const c=a-Math.round((l.top+l.bottom)/2);Hn(n,e,[l],0,c)}else if(l instanceof gn){const c=Math.min(...l.path.map(f=>f[1])),d=Math.max(...l.path.map(f=>f[1])),u=a-Math.round((c+d)/2);Hn(n,e,[l],0,u)}Rt(n,e,this.editor.canvas)}),this.editor.transform.endAction()))}alignHorizontalSpaceAround(t){const e=this.editor.getCurrentPage();if(e){t=t??this.editor.selection.getShapes();const n=t.sort((r,i)=>r.getBoundingRect()[0][0]-i.getBoundingRect()[0][0]);if(n.length>0){const r=n.map(u=>u.getBoundingRect()[0][0]),i=n.map(u=>u.getBoundingRect()[1][0]),s=n.map(u=>nn(u.getBoundingRect())),o=Math.min(...r),l=Math.max(...i)-o,c=s.reduce((u,f)=>u+f,0),d=(l-c)/(n.length-1);this.editor.transform.startAction(xt.DISTRIBUTE_HORIZONTALLY),this.editor.transform.transact(u=>{let f=o;for(let h=0;h<n.length;h++){const p=n[h];if(p instanceof St){const g=f-p.left;Hn(u,e,[p],g,0)}else if(p instanceof gn){const g=Math.min(...p.path.map(v=>v[0])),b=f-g;Hn(u,e,[p],b,0)}f+=s[h]+d}Rt(u,e,this.editor.canvas)}),this.editor.transform.endAction()}}}alignVerticalSpaceAround(t){const e=this.editor.getCurrentPage();if(e){t=t??this.editor.selection.getShapes();const n=t.sort((r,i)=>r.getBoundingRect()[0][1]-i.getBoundingRect()[0][1]);if(n.length>0){const r=n.map(u=>u.getBoundingRect()[0][1]),i=n.map(u=>u.getBoundingRect()[1][1]),s=n.map(u=>rn(u.getBoundingRect())),o=Math.min(...r),l=Math.max(...i)-o,c=s.reduce((u,f)=>u+f,0),d=(l-c)/(n.length-1);this.editor.transform.startAction(xt.DISTRIBUTE_VERTICALLY),this.editor.transform.transact(u=>{let f=o;for(let h=0;h<n.length;h++){const p=n[h];if(p instanceof St){const g=f-p.top;Hn(u,e,[p],0,g)}else if(p instanceof gn){const g=Math.min(...p.path.map(v=>v[1])),b=f-g;Hn(u,e,[p],0,b)}f+=s[h]+d}Rt(u,e,this.editor.canvas)}),this.editor.transform.endAction()}}}};function Vg(t){const e=Ate(t);for(let n of t)n.traverse(r=>{e.includes(r)||e.push(r)});return e}function ME(t,e){const n=[];return t==null||t.traverse(r=>{r instanceof Bs&&(e.includes(r.head)||e.includes(r.tail))&&n.push(r)}),n}function JD(t,e){const n=[];return t.traverse(r=>{r instanceof zr&&e.find(i=>r.reference===i)&&n.push(r)}),n}function YD(t,e){const n=[];return t.traverse(r=>{r instanceof ah&&e.find(i=>r.subject===i)&&n.push(r)}),n}function ZD(t,e){const r=e.map(s=>s.traverseSequence()).flat().map(s=>s.getViewport(t));return r.length>0?r.reduce(hl):[[0,0],[0,0]]}function XD(t,e){return e.length>0?e.map(n=>ei(n.getOutline().map(r=>n.localCoordTransform(t,r,!0)))).reduce(hl):[[0,0],[0,0]]}function qte(t,e){const n=iw(e);return n.length>0?sw(t,n,Y2):null}function oN(t,e,n,r,i,s){var o,a;const l=(o=i.fill)!=null?o:"none",c=(a=i.stroke)!=null?a:"currentColor";switch(i.cmd){case"path":{const u=i.d.map(f=>{switch(f[0]){case"M":return["M",f[1]*r[0]+n[0],f[2]*r[1]+n[1]];case"m":return["m",f[1]*r[0],f[2]*r[1]];case"L":return["L",f[1]*r[0]+n[0],f[2]*r[1]+n[1]];case"l":return["l",f[1]*r[0],f[2]*r[1]];case"H":return["H",f[1]*r[0]+n[0]];case"h":return["h",f[1]*r[0]];case"V":return["V",f[1]*r[1]+n[1]];case"v":return["v",f[1]*r[1]];case"C":return["C",f[1]*r[0]+n[0],f[2]*r[1]+n[1],f[3]*r[0]+n[0],f[4]*r[1]+n[1],f[5]*r[0]+n[0],f[6]*r[1]+n[1]];case"c":return["c",f[1]*r[0],f[2]*r[1],f[3]*r[0],f[4]*r[1],f[5]*r[0],f[6]*r[1]];case"S":return["S",f[1]*r[0]+n[0],f[2]*r[1]+n[1],f[3]*r[0]+n[0],f[4]*r[1]+n[1]];case"s":return["s",f[1]*r[0],f[2]*r[1],f[3]*r[0],f[4]*r[1]];case"Q":return["Q",f[1]*r[0]+n[0],f[2]*r[1]+n[1],f[3]*r[0]+n[0],f[4]*r[1]+n[1]];case"q":return["q",f[1]*r[0],f[2]*r[1],f[3]*r[0],f[4]*r[1]];case"T":return["T",f[1]*r[0]+n[0],f[2]*r[1]+n[1]];case"t":return["t",f[1]*r[0],f[2]*r[1]];case"A":return["A",f[1]*r[0],f[2]*r[1],f[3],f[4],f[5],f[6]*r[0]+n[0],f[7]*r[1]+n[1]];case"a":return["a",f[1]*r[0],f[2]*r[1],f[3],f[4],f[5],f[6]*r[0],f[7]*r[1]];default:return f}});l!=="none"&&(e.fillColor=l==="currentColor"?t.fillColor:l,e.fillPath(u,s)),c!=="none"&&(e.strokeColor=c==="currentColor"?t.strokeColor:c,e.strokePath(u,s));break}case"rect":{const d=i,u=d.x*r[0]+n[0],f=d.y*r[1]+n[1],h=d.w*r[0],p=d.h*r[1],g=d.r*r[0];l!=="none"&&(e.fillColor=l==="currentColor"?t.fillColor:l,e.fillRoundRect(u,f,u+h,f+p,g,s)),c!=="none"&&(e.strokeColor=c==="currentColor"?t.strokeColor:c,e.strokeRoundRect(u,f,u+h,f+p,g,s));break}case"circle":{const d=i,u=d.cx*r[0]+n[0],f=d.cy*r[1]+n[1],h=d.r*r[0],p=u-h,g=f-h,b=u+h,v=f+h;l!=="none"&&(e.fillColor=l==="currentColor"?t.fillColor:l,e.fillEllipse(p,g,b,v,s)),c!=="none"&&(e.strokeColor=c==="currentColor"?t.strokeColor:c,e.strokeEllipse(p,g,b,v,s));break}case"ellipse":{const d=i,u=d.cx*r[0]+n[0],f=d.cy*r[1]+n[1],h=d.rx*r[0],p=d.ry*r[1],g=u-h,b=f-p,v=u+h,x=f+p;l!=="none"&&(e.fillColor=l==="currentColor"?t.fillColor:l,e.fillEllipse(g,b,v,x,s)),c!=="none"&&(e.strokeColor=c==="currentColor"?t.strokeColor:c,e.strokeEllipse(g,b,v,x,s));break}case"line":{const d=i,u=d.x1*r[0]+n[0],f=d.y1*r[1]+n[1],h=d.x2*r[0]+n[0],p=d.y2*r[1]+n[1];c!=="none"&&(e.strokeColor=c==="currentColor"?t.strokeColor:c,e.line(u,f,h,p,s));break}case"polyline":{const u=i.points.map(([f,h])=>[f*r[0]+n[0],h*r[1]+n[1]]);c!=="none"&&(e.strokeColor=c==="currentColor"?t.strokeColor:c,e.polyline(u,s));break}case"polygon":{const u=i.points.map(([f,h])=>[f*r[0]+n[0],h*r[1]+n[1]]);l!=="none"&&(e.fillColor=l==="currentColor"?t.fillColor:l,e.fillPolygon(u,s)),c!=="none"&&(e.strokeColor=c==="currentColor"?t.strokeColor:c,e.strokePolygon(u,s));break}}}var U0={RENDER:"render",OUTLINE:"outline",VIEWPORT:"viewport"},Lr={NONE:"none",HORZ:"horz",VERT:"vert",FREE:"free",PARENT:"parent"},_r={NONE:"none",HORZ:"horz",VERT:"vert",FREE:"free",RATIO:"ratio"},yf={CENTER:"center",INSIDE:"inside",OUTSIDE:"outside"},di={STRAIGHT:"straight",CURVE:"curve"},Bt={FLAT:"flat",ARROW:"arrow",SOLID_ARROW:"solid-arrow",TRIANGLE:"triangle",TRIANGLE_FILLED:"triangle-filled",DIAMOND:"diamond",DIAMOND_FILLED:"diamond-filled",PLUS:"plus",CIRCLE:"circle",CIRCLE_PLUS:"circle-plus",CIRCLE_FILLED:"circle-filled",CROWFOOT_ONE:"crowfoot-one",CROWFOOT_ONLY_ONE:"crowfoot-only-one",CROWFOOT_ZERO_ONE:"crowfoot-zero-one",CROWFOOT_MANY:"crowfoot-many",CROWFOOT_ONE_MANY:"crowfoot-one-many",CROWFOOT_ZERO_MANY:"crowfoot-zero-many",CROSS:"cross",DOT:"dot",BAR:"bar",SQUARE:"square"},uo={LEFT:"left",RIGHT:"right",CENTER:"center"},jo={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},zr=class d0 extends MD{constructor(){super(),this.type="Shape",this.name="",this.description="",this.proto=!1,this.tags=[],this.enable=!0,this.visible=!0,this.movable=Lr.FREE,this.sizable=_r.FREE,this.rotatable=!0,this.containable=!0,this.containableFilter="",this.connectable=!0,this.left=0,this.top=0,this.width=0,this.height=0,this.rotate=0,this.strokeColor="$foreground",this.strokeWidth=1,this.strokePattern=[],this.fillColor="$background",this.fillStyle=en.SOLID,this.fontColor="$foreground",this.fontFamily="Inter",this.fontSize=hQ,this.fontStyle="normal",this.fontWeight=400,this.opacity=1,this.roughness=0,this.shadow=!1,this.shadowColor="$foreground",this.shadowOffset=[0,0],this.link="",this.reference=null,this.constraints=[],this.properties=[],this.scripts=[],this._memoSeed=null,this._memoCanvas=new RD,this._memoOutline=[],this._memoViewport=[],this._linkDOM=null}toJSON(e=!1,n=!1){const r=super.toJSON(e,n);return r.name=this.name,r.description=this.description,r.proto=this.proto,r.tags=structuredClone(this.tags),r.enable=this.enable,r.visible=this.visible,r.movable=this.movable,r.sizable=this.sizable,r.rotatable=this.rotatable,r.containable=this.containable,r.containableFilter=this.containableFilter,r.connectable=this.connectable,r.left=this.left,r.top=this.top,r.width=this.width,r.height=this.height,r.rotate=this.rotate,r.strokeColor=this.strokeColor,r.strokeWidth=this.strokeWidth,r.strokePattern=structuredClone(this.strokePattern),r.fillColor=this.fillColor,r.fillStyle=this.fillStyle,r.fontColor=this.fontColor,r.fontFamily=this.fontFamily,r.fontSize=this.fontSize,r.fontStyle=this.fontStyle,r.fontWeight=this.fontWeight,r.opacity=this.opacity,r.roughness=this.roughness,r.shadow=this.shadow,r.shadowColor=this.shadowColor,r.shadowOffset=structuredClone(this.shadowOffset),r.link=this.link,r.reference=this.reference?this.reference.id:null,r.constraints=structuredClone(this.constraints),r.properties=structuredClone(this.properties),r.scripts=structuredClone(this.scripts),n&&(r.reference=this.reference),r}fromJSON(e){var n,r,i,s,o,a,l,c,d,u,f,h,p,g,b,v,x,w,C,P,O,T,M,D,I,R,$,H,z,ee,ce,le,te,Z,de,Ce,F;super.fromJSON(e),this.name=(n=e.name)!=null?n:this.name,this.description=(r=e.description)!=null?r:this.description,this.proto=(i=e.proto)!=null?i:this.proto,this.tags=(s=e.tags)!=null?s:this.tags,this.enable=(o=e.enable)!=null?o:this.enable,this.visible=(a=e.visible)!=null?a:this.visible,this.movable=(l=e.movable)!=null?l:this.movable,this.sizable=(c=e.sizable)!=null?c:this.sizable,this.rotatable=(d=e.rotatable)!=null?d:this.rotatable,this.containable=(u=e.containable)!=null?u:this.containable,this.containableFilter=(f=e.containableFilter)!=null?f:this.containableFilter,this.connectable=(h=e.connectable)!=null?h:this.connectable,this.left=(p=e.left)!=null?p:this.left,this.top=(g=e.top)!=null?g:this.top,this.width=(b=e.width)!=null?b:this.width,this.height=(v=e.height)!=null?v:this.height,this.rotate=(x=e.rotate)!=null?x:this.rotate,this.strokeColor=(w=e.strokeColor)!=null?w:this.strokeColor,this.strokeWidth=(C=e.strokeWidth)!=null?C:this.strokeWidth,this.strokePattern=(P=e.strokePattern)!=null?P:this.strokePattern,this.fillColor=(O=e.fillColor)!=null?O:this.fillColor,this.fillStyle=(T=e.fillStyle)!=null?T:this.fillStyle,this.fontColor=(M=e.fontColor)!=null?M:this.fontColor,this.fontFamily=(D=e.fontFamily)!=null?D:this.fontFamily,this.fontSize=(I=e.fontSize)!=null?I:this.fontSize,this.fontStyle=(R=e.fontStyle)!=null?R:this.fontStyle,this.fontWeight=($=e.fontWeight)!=null?$:this.fontWeight,this.opacity=(H=e.opacity)!=null?H:this.opacity,this.roughness=(z=e.roughness)!=null?z:this.roughness,this.shadow=(ee=e.shadow)!=null?ee:this.shadow,this.shadowColor=(ce=e.shadowColor)!=null?ce:this.shadowColor,this.shadowOffset=(le=e.shadowOffset)!=null?le:this.shadowOffset,this.link=(te=e.link)!=null?te:this.link,this.reference=(Z=e.reference)!=null?Z:this.reference,this.constraints=(de=e.constraints)!=null?de:this.constraints,this.properties=(Ce=e.properties)!=null?Ce:this.properties,this.scripts=(F=e.scripts)!=null?F:this.scripts}resolveRefs(e,n=!1){super.resolveRefs(e,n),typeof this.reference=="string"&&(e[this.reference]?this.reference=e[this.reference]:n&&(this.reference=null))}getPage(){return this.findParent(e=>e instanceof ws)}get right(){return this.left+this.width}get bottom(){return this.top+this.height}getSeed(){return this._memoSeed||(this._memoSeed=kte(this.id)),this._memoSeed}initialze(e){}finalize(e){this._linkDOM&&(this._linkDOM.remove(),this._linkDOM=null)}update(e){this._memoCanvas.clear(),this._memoCanvas.setCanvas(e),this.render(this._memoCanvas),this.children.forEach(n=>n.update(e))}getShapeAt(e,n,r=[],i=!1){for(let o=this.children.length-1;o>=0;o--){const l=this.children[o].getShapeAt(e,n,r,i);if(l&&!r.includes(l))return l}return(i||this.enable&&this.visible)&&this.containsPoint(e,n)?this:null}visit(e,n=null){e(this,n);for(let r=this.children.length-1;r>=0;r--)this.children[r].visit(e,this)}computeOpacity(){return this.parent instanceof $f||this.parent instanceof LE?this.opacity*this.parent.computeOpacity():this.opacity}assignStyles(e){e.strokeColor=this.strokeColor,e.strokeWidth=this.strokeWidth,e.strokePattern=this.strokePattern,e.fillColor=this.fillColor,e.fillStyle=this.fillStyle,e.fontColor=this.fontColor,e.font=fg(this.fontStyle,this.fontWeight,this.fontSize,this.fontFamily),e.roughness=this.roughness,e.alpha=this.computeOpacity()}localTransform(e,n=!1){if(n&&this.parent instanceof d0&&this.parent.localTransform(e,n),this.rotate!==0){const r=this.getCenter();e.translateTransform(r[0],r[1]),e.rotateTransform(this.rotate),e.translateTransform(-r[0],-r[1])}}localCoordTransform(e,n,r=!1){let i=[n[0],n[1]];if(this.rotate!==0){let s=this.getCenter();i=N1(i,this.rotate,s)}return r&&this.parent instanceof d0&&(i=this.parent.localCoordTransform(e,i,r)),i}localCoordTransformRev(e,n,r=!1){let i=[n[0],n[1]];if(r&&this.parent instanceof d0&&(i=this.parent.localCoordTransformRev(e,i,r)),this.rotate!==0){let s=this.getCenter();i=N1(i,-this.rotate,s)}return i}render(e){this.assignStyles(e),this.renderOutline(e),this.renderViewport(e),this.renderShadow(e);const n=this.getScript(U0.RENDER);if(n)try{q2({canvas:e,shape:this},n)}catch(r){console.error("[Script Error]",r)}else this.renderDefault(e)}renderDefault(e){}renderOutline(e){const n=this.getScript(U0.OUTLINE);if(n)try{this._memoOutline=q2({shape:this},n)}catch(r){console.error("[Script Error]",r)}else this._memoOutline=this.renderOutlineDefault(e)}renderOutlineDefault(e){return[]}renderShadow(e){}getOutline(){return this._memoOutline}draw(e,n=!1){this.visible&&(e.save(),this.localTransform(e),this.drawLink(e,n),this._memoCanvas.draw(e),this.children.forEach(r=>r.draw(e,n)),e.restore())}drawLink(e,n=!1){var r,i;if(this.link.trim().length===0&&(n=!1),n){this._linkDOM||(this._linkDOM=document.createElement("a"),this._linkDOM.style.position="absolute",this._linkDOM.style.color="var(--colors-blue9)",this._linkDOM.style.display="flex",this._linkDOM.style.alignItems="center",this._linkDOM.style.justifyContent="center",this._linkDOM.style.cursor="pointer",this._linkDOM.style.zIndex="10",this._linkDOM.setAttribute("target","_blank"),this._linkDOM.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link"><path d="M15 3h6v6"/><path d="M10 14 21 3"/><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/></svg>',(r=e.element.parentElement)==null||r.appendChild(this._linkDOM)),this._linkDOM.parentElement!==e.element.parentElement&&((i=e.element.parentElement)==null||i.appendChild(this._linkDOM));const s=this.getBoundingRect().map(c=>AC(e,c)),o=s[1][0],a=s[0][1],l=16;this._linkDOM.style.left=`${o+6}px`,this._linkDOM.style.top=`${a-l-6}px`,this._linkDOM.style.width=`${l}px`,this._linkDOM.style.height=`${l}px`,this._linkDOM.setAttribute("title",this.link),this._linkDOM.setAttribute("href",this.link)}else this.finalize(e)}getCenter(){return hc(this.getBoundingRect())}getBoundingRect(e=!1){return[[this.left,this.top],[this.right,this.bottom]]}renderViewport(e){const n=this.getScript(U0.VIEWPORT);if(n)try{this._memoViewport=q2({shape:this},n)}catch(r){console.error("[Script Error]",r)}else this._memoViewport=this.renderViewportDefault(e)}renderViewportDefault(e){var n,r;const i=this.getOutline().map(o=>this.localCoordTransform(e.canvas,o,!0)),s=xx(ei(i),this.strokeWidth/2+this.roughness*1.5);return this.shadow&&(s[1][0]+=(n=this.shadowOffset[0])!=null?n:0,s[1][1]+=(r=this.shadowOffset[1])!=null?r:0),s}getViewport(e){return this._memoViewport.length===0?this.getBoundingRect():this._memoViewport}getChildrenBoundingRect(){return this.children.filter(e=>e.visible).map(e=>e.getBoundingRect()).reduce(hl)}getRectInDCS(e,n=!1){const r=this.getBoundingRect(n).map(c=>AC(e,c)),i=e.scale;let s=nn(r)*(1/i),o=rn(r)*(1/i);const a=r[0][0]-s*(1-i)/2,l=r[0][1]-o*(1-i)/2;return[[a,l],[a+s,l+o]]}getEnclosure(){return[[this.left,this.top],[this.right,this.top],[this.right,this.bottom],[this.left,this.bottom],[this.left,this.top]]}containsPoint(e,n){const r=this.getOutline().map(i=>this.localCoordTransform(e,i,!0));return this.fillStyle===en.NONE?Ug(n,r,ZL*e.px)>-1:Bg(n,r)}overlapClippingArea(e,n){return!0}overlapRect(e,n){if(this.fillStyle===en.NONE){const i=this.getOutline().map(s=>this.localCoordTransform(e,s,!0));for(let s=0;s<i.length-1;s++)if(bE([i[s],i[s+1]],n))return!0;return!1}return(this.parent instanceof d0?this.parent.overlapClippingArea(e,n):!0)&&wE(n,this.getBoundingRect())}parseQueryString(e){return e==null?void 0:e.trim().split("|").filter(n=>n.length>0).map(n=>{const r=n.trim().split("&");return Object.fromEntries(r.map(i=>{const s=i.trim();return s.startsWith("@")?["type",s.substring(1)]:s.startsWith("#")?["tag",s.substring(1)]:["name",s]}))})}match(e){if(e.length===0)return!0;for(let n of e)if(Object.entries(n).every(([s,o])=>{switch(s){case"name":return this.name===o;case"tag":return this.tags.includes(o);case"type":return!1;default:return!1}}))return!0;return!1}findByQuery(e){const n=typeof e=="string"?this.parseQueryString(e):e;return n?this.find(r=>r.match(n)):null}findAllByQuery(e){const n=this.parseQueryString(e);return this.traverseSequence().filter(r=>r.match(n))}canContain(e){return this.containable&&(this.containableFilter.trim()?e.match(this.parseQueryString(this.containableFilter)):!0)}getProperty(e){if(this.properties)return this.properties.find(n=>n.name===e)}getPropertyValue(e){const n=this.getProperty(e);return n?n.value:void 0}getScript(e){const n=this.scripts.find(r=>r.id===e);if(n)return n.script}},I1=class extends MD{constructor(){super(),this.type="Doc",this.version=1}toJSON(t=!1,e=!1){const n=super.toJSON(t,e);return n.version=this.version,n}fromJSON(t){var e;super.fromJSON(t),this.version=(e=t.version)!=null?e:this.version}},ws=class extends zr{constructor(){super(),this.type="Page",this.enable=!1,this.size=null,this.pageOrigin=null,this.pageScale=1}toJSON(t=!1,e=!1){const n=super.toJSON(t,e);return n.size=structuredClone(this.size),n.pageOrigin=structuredClone(this.pageOrigin),n.pageScale=this.pageScale,n}fromJSON(t){var e,n,r;super.fromJSON(t),this.size=(e=t.size)!=null?e:this.size,this.pageOrigin=(n=t.pageOrigin)!=null?n:this.pageOrigin,this.pageScale=(r=t.pageScale)!=null?r:this.pageScale}getPage(){return this}finalize(t){this.traverseSequence().forEach(e=>{e!==this&&e.finalize(t)})}update(t){this.children.forEach(e=>e.update(t))}draw(t,e=!1,n=[]){this.visible&&(t.save(),t.globalTransform(),n.length>0?n.forEach(r=>r.draw(t,e)):this.children.forEach(r=>r.draw(t,e)),t.restore())}getBoundingRect(){return this.children.length>0?this.traverseSequence().filter(t=>t!==this).map(t=>t.getBoundingRect()).reduce(hl):[[0,0],[0,0]]}getViewport(t,e){return e&&e.length>0?e.map(n=>n.getViewport(t)).reduce(hl):this.children.length>0?this.traverseSequence().filter(n=>n!==this).map(n=>n.getViewport(t)).reduce(hl):[[0,0],[0,0]]}getOrderedShapes(t){return this.traverseSequence().toReversed().filter(n=>t.includes(n))}containsPoint(t,e){return!1}overlapRect(t,e){return!1}},St=class QD extends zr{constructor(){super(),this.type="Box",this.containable=!1,this.padding=[0,0,0,0],this.corners=[0,0,0,0],this.borders=[!0,!0,!0,!0],this.borderPosition="center",this.anchored=!1,this.anchorAngle=0,this.anchorLength=0,this.anchorPosition=.5,this.textEditable=!0,this.text=O1("",uo.CENTER),this.wordWrap=!1,this.horzAlign=uo.CENTER,this.vertAlign=jo.MIDDLE,this.lineHeight=1.2,this.paragraphSpacing=0,this.allowRenderText=!0}toJSON(e=!1,n=!1){const r=super.toJSON(e,n);return r.padding=structuredClone(this.padding),r.corners=structuredClone(this.corners),r.borders=structuredClone(this.borders),r.borderPosition=this.borderPosition,r.anchored=this.anchored,r.anchorAngle=this.anchorAngle,r.anchorLength=this.anchorLength,r.anchorPosition=this.anchorPosition,r.textEditable=this.textEditable,r.text=structuredClone(this.text),r.wordWrap=this.wordWrap,r.horzAlign=this.horzAlign,r.vertAlign=this.vertAlign,r.lineHeight=this.lineHeight,r.paragraphSpacing=this.paragraphSpacing,r}fromJSON(e){var n,r,i,s,o,a,l,c,d,u,f,h,p,g,b;super.fromJSON(e),this.padding=(n=e.padding)!=null?n:this.padding,this.corners=(r=e.corners)!=null?r:this.corners,this.borders=(i=e.borders)!=null?i:this.borders,this.borderPosition=(s=e.borderPosition)!=null?s:this.borderPosition,this.anchored=(o=e.anchored)!=null?o:this.anchored,this.anchorAngle=(a=e.anchorAngle)!=null?a:this.anchorAngle,this.anchorLength=(l=e.anchorLength)!=null?l:this.anchorLength,this.anchorPosition=(c=e.anchorPosition)!=null?c:this.anchorPosition,this.textEditable=(d=e.textEditable)!=null?d:this.textEditable,this.text=(u=e.text)!=null?u:this.text,this.wordWrap=(f=e.wordWrap)!=null?f:this.wordWrap,this.horzAlign=(h=e.horzAlign)!=null?h:this.horzAlign,this.vertAlign=(p=e.vertAlign)!=null?p:this.vertAlign,this.lineHeight=(g=e.lineHeight)!=null?g:this.lineHeight,this.paragraphSpacing=(b=e.paragraphSpacing)!=null?b:this.paragraphSpacing}get innerLeft(){return this.left+this.padding[3]}get innerRight(){return this.right-this.padding[1]}get innerTop(){return this.top+this.padding[0]}get innerBottom(){return this.bottom-this.padding[2]}get innerWidth(){return this.innerRight-this.innerLeft}get innerHeight(){return this.innerBottom-this.innerTop}renderBorders(e,n,r,i,s){const o=this.borders,a=this.corners;o[0]&&o[1]&&o[2]&&o[3]?e.strokeRoundRect(n,r,i,s,a,this.getSeed()):o[0]&&!o[1]&&!o[2]&&!o[3]?e.line(n+a[0],r,i-a[1],r,this.getSeed()):!o[0]&&o[1]&&!o[2]&&!o[3]?e.line(i,r+a[1],i,s-a[2],this.getSeed()):!o[0]&&!o[1]&&o[2]&&!o[3]?e.line(n+a[3],s,i-a[2],s,this.getSeed()):!o[0]&&!o[1]&&!o[2]&&o[3]?e.line(n,r+a[0],n,s-a[3],this.getSeed()):o[0]&&o[1]&&!o[2]&&!o[3]?e.strokePath([["M",n+a[0],r],["L",i-a[1],r],["Q",i,r,i,r+a[1]],["L",i,s-a[2]]],this.getSeed()):!o[0]&&o[1]&&o[2]&&!o[3]?e.strokePath([["M",i,r+a[1]],["L",i,s-a[2]],["Q",i,s,i-a[2],s],["L",n+a[3],s]],this.getSeed()):!o[0]&&!o[1]&&o[2]&&o[3]?e.strokePath([["M",i-a[2],s],["L",n+a[3],s],["Q",n,s,n,s-a[3]],["L",n,r+a[0]]],this.getSeed()):o[0]&&!o[1]&&!o[2]&&o[3]?e.strokePath([["M",n,s-a[3]],["L",n,r+a[0]],["Q",n,r,n+a[0],r],["L",i-a[1],r]],this.getSeed()):o[0]&&o[1]&&o[2]&&!o[3]?e.strokePath([["M",n+a[0],r],["L",i-a[1],r],["Q",i,r,i,r+a[1]],["L",i,s-a[2]],["Q",i,s,i-a[2],s],["L",n+a[3],s]],this.getSeed()):!o[0]&&o[1]&&o[2]&&o[3]?e.strokePath([["M",i,r+a[1]],["L",i,s-a[2]],["Q",i,s,i-a[2],s],["L",n+a[3],s],["Q",n,s,n,s-a[3]],["L",n,r+a[0]]],this.getSeed()):o[0]&&!o[1]&&o[2]&&o[3]?e.strokePath([["M",i-a[2],s],["L",n+a[3],s],["Q",n,s,n,s-a[3]],["L",n,r+a[0]],["Q",n,r,n+a[0],r],["L",i-a[1],r]],this.getSeed()):o[0]&&o[1]&&!o[2]&&o[3]?e.strokePath([["M",n,s-a[3]],["L",n,r+a[0]],["Q",n,r,n+a[0],r],["L",i-a[1],r],["Q",i,r,i,r+a[1]],["L",i,s-a[2]]],this.getSeed()):o[0]&&!o[1]&&o[2]&&!o[3]?(e.line(n+a[0],r,i-a[1],r,this.getSeed()),e.line(n+a[3],s,i-a[2],s,this.getSeed())):!o[0]&&o[1]&&!o[2]&&o[3]&&(e.line(n,r+a[0],n,s-a[3],this.getSeed()),e.line(i,r+a[1],i,s-a[2],this.getSeed()))}renderDefault(e){if(this.fillStyle!==en.NONE&&e.fillRoundRect(this.left,this.top,this.right,this.bottom,this.corners,this.getSeed()),this.strokeWidth>0)switch(this.borderPosition){case yf.CENTER:{this.renderBorders(e,this.left,this.top,this.right,this.bottom);break}case yf.INSIDE:{const n=this.strokeWidth/2;this.renderBorders(e,this.left+n,this.top+n,this.right-n,this.bottom-n);break}case yf.OUTSIDE:{const n=this.strokeWidth/2;this.renderBorders(e,this.left-n,this.top-n,this.right+n,this.bottom+n);break}}this.renderText(e)}renderText(e){this.allowRenderText&&CE(e,this)}renderShadow(e){if(this.shadow){const[n=0,r=0]=this.shadowOffset;e.storeState(),e.fillColor=this.shadowColor,e.fillStyle=en.SOLID,e.fillRoundRect(this.left+n,this.top+r,this.right+n,this.bottom+r,this.corners,this.getSeed()),e.restoreState()}}preprocess(e,n,r,i){}wordWrapTextSize(e,n,r){let i=0,s=0,o=0,a=0;const l=e.textMetric("|").height*this.lineHeight;return wl(this.text,c=>{switch(c.type){case"text":let d=this.fontStyle,u=this.fontWeight,f=this.fontSize,h=this.fontFamily;c.marks&&c.marks.forEach(g=>{switch(g.type){case"strong":u=700;break;case"em":d="italic";break}}),e.font=fg(d,u,f,h),c.text.split(" ").forEach((g,b)=>{const v=e.textMetric(g),x=e.textMetric(" "+g);i+x.width<=this.innerWidth?i+=i===0?v.width:x.width:(s+=l,i=0,i+=v.width),o=Math.max(o,i),a=Math.max(a,s)});break;case"paragraph":s+=l+10,i=0;break;case"hard_break":s+=l,i=0;break}}),[o,a]}renderOutlineDefault(e){return[[this.left,this.top],[this.right,this.top],[this.right,this.bottom],[this.left,this.bottom],[this.left,this.top]]}getAnchorVector(e){const n=this.parent;let r=[0,0],i=[0,0];if(n instanceof gn){const s=n.getOutline(),o=ps(s,this.anchorPosition),a=Ug(o,s,Ec*2);r=o,i=s[a+1]}else n instanceof QD&&(r=hc(n.getBoundingRect()),i=[r[0],r[1]-1]);return[r,i]}},gn=class extends zr{constructor(){super(),this.type="Path",this.pathEditable=!0,this.path=[],this.containable=!1}toJSON(t=!1,e=!1){const n=super.toJSON(t,e);return n.pathEditable=this.pathEditable,n.path=structuredClone(this.path),n}fromJSON(t){var e,n;super.fromJSON(t),this.pathEditable=(e=t.pathEditable)!=null?e:this.pathEditable,this.path=(n=t.path)!=null?n:this.path}isClosed(){return iD(this.path)}getEndSegment(t){let e=t?this.path.length-2:1,n=t?this.path.length-1:0;return[this.path[e],this.path[n]]}containsPoint(t,e){if(this.isClosed()&&this.fillStyle!==en.NONE){const n=this.getOutline().map(r=>this.localCoordTransform(t,r,!0));return Bg(e,n)}else{const n=this.getOutline().map(r=>this.localCoordTransform(t,r,!0));return Ug(e,n,ZL*t.px)>-1}}overlapRect(t,e){for(let n=0;n<this.path.length-1;n++)if(bE([this.path[n],this.path[n+1]],e))return!0;return!1}renderOutlineDefault(t){return Bn(this.path)}},eI=class extends St{constructor(){super(),this.type="Rectangle",this.wordWrap=!0}},tI=class extends St{constructor(){super(),this.type="Ellipse",this.wordWrap=!0}renderDefault(t){if(this.fillStyle!==en.NONE&&t.fillEllipse(this.left,this.top,this.right,this.bottom,this.getSeed()),this.strokeWidth>0)switch(this.borderPosition){case yf.CENTER:t.strokeEllipse(this.left,this.top,this.right,this.bottom,this.getSeed());break;case yf.INSIDE:{const e=this.strokeWidth/2;t.strokeEllipse(this.left+e,this.top+e,this.right-e,this.bottom-e,this.getSeed());break}case yf.OUTSIDE:{const e=this.strokeWidth/2;t.strokeEllipse(this.left-e,this.top-e,this.right+e,this.bottom+e,this.getSeed());break}}this.renderText(t)}renderOutlineDefault(t){return oD(this.getCenter(),this.width/2,this.height/2,Math.max(Math.round((this.width+this.height)/5),30))}renderShadow(t){if(this.shadow){const[e=0,n=0]=this.shadowOffset;t.storeState(),t.fillColor=this.shadowColor,t.fillStyle=en.SOLID,t.fillEllipse(this.left+e,this.top+n,this.right+e,this.bottom+n,this.getSeed()),t.restoreState()}}},hg=class extends St{constructor(){super(),this.type="Text",this.fillColor="$transparent",this.strokeColor="$transparent",this.horzAlign=uo.LEFT,this.vertAlign=jo.TOP}containsPoint(t,e){const n=this.getOutline().map(r=>this.localCoordTransform(t,r,!0));return Bg(e,n)}renderDefault(t){this.fillStyle!==en.NONE&&t.fillRoundRect(this.left,this.top,this.right,this.bottom,this.corners,this.getSeed()),this.renderText(t)}renderShadow(t){if(this.shadow){const[e=0,n=0]=this.shadowOffset;if(this.allowRenderText){const r=this.left,i=this.top,s=this.fontColor,o=structuredClone(this.text);this.left+=e,this.top+=n,this.fontColor=this.shadowColor,wl(this.text,a=>{Array.isArray(a.marks)&&a.marks.forEach(l=>{delete l.attrs.color})}),CE(t,this),this.left=r,this.top=i,this.fontColor=s,this.text=o}}}},nI=class extends St{constructor(){super(),this.type="Image",this.imageData="",this.imageWidth=0,this.imageHeight=0,this.sizable=_r.RATIO,this._imageDOM=null}toJSON(t=!1,e=!1){const n=super.toJSON(t,e);return n.imageData=this.imageData,n.imageWidth=this.imageWidth,n.imageHeight=this.imageHeight,n}fromJSON(t){var e,n,r;super.fromJSON(t),this.imageData=(e=t.imageData)!=null?e:this.imageData,this.imageWidth=(n=t.imageWidth)!=null?n:this.imageWidth,this.imageHeight=(r=t.imageHeight)!=null?r:this.imageHeight}renderDefault(t){this._imageDOM||(this._imageDOM=new globalThis.Image,this._imageDOM.src=this.imageData),t.drawImage(this._imageDOM,this.left,this.top,this.width,this.height,this.corners)}},$f=class extends St{constructor(){super(),this.type="Group"}getShapeAt(e,n,r=[],i=!1){return(i||this.enable&&this.visible)&&this.containsPoint(e,n)?this:null}overlapClippingArea(e,n){return!1}visit(e,n=null){e(this,n)}renderDefault(e){}renderShadow(e){}},OE=class extends St{constructor(){super(),this.type="Icon",this.viewWidth=0,this.viewHeight=0,this.data=[]}toJSON(e=!1,n=!1){const r=super.toJSON(e,n);return r.viewWidth=this.viewWidth,r.viewHeight=this.viewHeight,r.data=structuredClone(this.data),r}fromJSON(e){var n,r,i;super.fromJSON(e),this.viewWidth=(n=e.viewWidth)!=null?n:this.viewWidth,this.viewHeight=(r=e.viewHeight)!=null?r:this.viewHeight,this.data=(i=e.data)!=null?i:this.data}containsPoint(e,n){const r=this.getOutline().map(i=>this.localCoordTransform(e,i,!0));return Bg(n,r)}renderDefault(e){const n=[this.left,this.top],r=[this.width/this.viewWidth,this.height/this.viewHeight];this.data.forEach(i=>{oN(this,e,n,r,i,this.getSeed())})}renderShadow(e){if(this.shadow){const[n=0,r=0]=this.shadowOffset;e.storeState();const i=this.fillColor,s=this.strokeColor;this.strokeColor=this.shadowColor;const o=[this.left+n,this.top+r],a=[this.width/this.viewWidth,this.height/this.viewHeight];this.data.forEach(l=>{oN(this,e,o,a,l,this.getSeed())}),this.fillColor=i,this.strokeColor=s,e.restoreState()}}},Cx=class extends gn{constructor(){super(),this.type="Line",this.lineType=di.STRAIGHT,this.headEndType=Bt.FLAT,this.tailEndType=Bt.FLAT,this.containable=!1}toJSON(t=!1,e=!1){const n=super.toJSON(t,e);return n.lineType=this.lineType,n.headEndType=this.headEndType,n.tailEndType=this.tailEndType,n}fromJSON(t){var e,n,r;super.fromJSON(t),this.lineType=(e=t.lineType)!=null?e:this.lineType,this.headEndType=(n=t.headEndType)!=null?n:this.headEndType,this.tailEndType=(r=t.tailEndType)!=null?r:this.tailEndType}renderDefault(t){let e=Bn(this.path);if(e.length>=2){const n=this.renderLineEnd(t,this.headEndType,!0),r=this.renderLineEnd(t,this.tailEndType,!1);e[0]=r,e[e.length-1]=n}if(this.assignStyles(t),this.isClosed()&&this.fillStyle!==en.NONE)switch(this.lineType){case di.STRAIGHT:t.fillPolygon(e,this.getSeed());break;case di.CURVE:t.fillCurve(e,this.getSeed());break}if(this.strokeWidth>0)switch(this.lineType){case di.STRAIGHT:t.polyline(e,this.getSeed());break;case di.CURVE:t.strokeCurve(e,this.getSeed());break}}renderLineEnd(t,e,n){let r=[[0,0],[0,0]];const i=this.path;n?r=[i[i.length-1],i[i.length-2]]:r=[i[0],i[1]];const s=r[1][1]-r[0][1],o=r[1][0]-r[0][0];let a=Math.atan(s/o);(s<0&&o<0||s>0&&o<0||s===0&&o<0)&&(a=a+Math.PI);const l=4,c=11,d=7;let u=[];const f=Math.floor(d/2);for(let h=0;h<c;h++){let p=[];for(let g=-f;g<=f;g++){const b=Math.sqrt(Math.pow(l*h,2)+Math.pow(l*g,2)),v=Math.acos(l*h/b),x=a+(g<0?-v:v);let w=[b*Math.cos(x)+r[0][0],b*Math.sin(x)+r[0][1]];h===0&&g===0&&(w=r[0]),p.push(w)}u.push(p)}switch(t.strokeColor=this.strokeColor,t.strokeWidth=this.strokeWidth,t.strokePattern=[],t.fillColor=this.strokeColor,t.fillStyle=en.SOLID,e){case Bt.ARROW:return t.polyline([u[3][1],u[0][3],u[3][5]],this.getSeed()),u[0][3];case Bt.SOLID_ARROW:return t.polygon([u[3][3],u[3][1],u[0][3],u[3][5],u[3][3]],this.getSeed()),u[0][3];case Bt.TRIANGLE:return t.strokePolygon([u[7][3],u[7][0],u[0][3],u[7][6],u[7][3]],this.getSeed()),u[7][3];case Bt.TRIANGLE_FILLED:return t.polygon([u[7][3],u[7][0],u[0][3],u[7][6],u[7][3]],this.getSeed()),u[7][3];case Bt.DIAMOND:return t.strokePolygon([u[0][3],u[3][1],u[6][3],u[3][5]],this.getSeed()),u[6][3];case Bt.DIAMOND_FILLED:return t.polygon([u[0][3],u[3][1],u[6][3],u[3][5]],this.getSeed()),u[6][3];case Bt.PLUS:return t.polyline([u[2][1],u[2][5]],this.getSeed()),u[0][3];case Bt.CIRCLE:return t.strokeEllipse(u[2][3][0]-l*2,u[2][3][1]-l*2,u[2][3][0]+l*2,u[2][3][1]+l*2,this.getSeed()),u[4][3];case Bt.CIRCLE_PLUS:return t.strokeEllipse(u[2][3][0]-l*2,u[2][3][1]-l*2,u[2][3][0]+l*2,u[2][3][1]+l*2,this.getSeed()),t.polyline([u[2][1],u[2][5]]),u[0][3];case Bt.CIRCLE_FILLED:return t.ellipse(u[2][3][0]-l*2,u[2][3][1]-l*2,u[2][3][0]+l*2,u[2][3][1]+l*2,this.getSeed()),u[4][3];case Bt.CROWFOOT_ONE:return t.polyline([u[2][1],u[2][5]],this.getSeed()),u[0][3];case Bt.CROWFOOT_ONLY_ONE:return t.polyline([u[4][1],u[4][5]],this.getSeed()),t.polyline([u[2][1],u[2][5]],this.getSeed()),u[0][3];case Bt.CROWFOOT_MANY:return t.polyline([u[0][1],u[4][3],u[0][5]],this.getSeed()),u[0][3];case Bt.CROWFOOT_ONE_MANY:return t.polyline([u[4][1],u[4][5]],this.getSeed()),t.polyline([u[0][1],u[4][3],u[0][5]],this.getSeed()),u[0][3];case Bt.CROWFOOT_ZERO_ONE:return t.polyline([u[2][1],u[2][5]],this.getSeed()),t.polyline([u[0][3],u[4][3]],this.getSeed()),t.strokeEllipse(u[6][3][0]-l*2,u[6][3][1]-l*2,u[6][3][0]+l*2,u[6][3][1]+l*2,this.getSeed()),u[8][3];case Bt.CROWFOOT_ZERO_MANY:return t.polyline([u[0][1],u[4][3],u[0][5]],this.getSeed()),t.polyline([u[0][3],u[4][3]],this.getSeed()),t.strokeEllipse(u[6][3][0]-l*2,u[6][3][1]-l*2,u[6][3][0]+l*2,u[6][3][1]+l*2,this.getSeed()),u[8][3];case Bt.CROSS:return t.polyline([u[1][2],u[3][4]],this.getSeed()),t.polyline([u[3][2],u[1][4]],this.getSeed()),u[0][3];case Bt.DOT:return t.ellipse(u[1][3][0]-l,u[1][3][1]-l,u[1][3][0]+l,u[1][3][1]+l,this.getSeed()),u[0][3];case Bt.BAR:return t.polyline([u[0][1],u[0][5]],this.getSeed()),u[0][3];case Bt.SQUARE:return t.strokeRect(u[2][3][0]-l*2,u[2][3][1]-l*2,u[2][3][0]+l*2,u[2][3][1]+l*2,this.getSeed()),u[4][3];default:return u[0][3]}}renderOutlineDefault(t){switch(this.lineType){case di.CURVE:return this.path.length>2?dg(this.path):Bn(this.path)}return Bn(this.path)}renderViewportDefault(t){const e=this.getOutline().map(r=>this.localCoordTransform(t.canvas,r,!0));return xx(ei(e),Math.max(this.strokeWidth/2,12))}renderShadow(t){if(this.shadow){const[e=0,n=0]=this.shadowOffset;t.storeState(),t.fillColor=this.shadowColor;const r=Bn(this.path),i=this.fillColor,s=this.strokeColor;if(this.path=this.path.map(o=>[o[0]+e,o[1]+n]),this.fillColor=this.shadowColor,this.strokeColor=this.shadowColor,this.path.length>=2){const o=this.renderLineEnd(t,this.headEndType,!0),a=this.renderLineEnd(t,this.tailEndType,!1);this.path[0]=a,this.path[this.path.length-1]=o}if(this.isClosed()&&this.fillStyle!==en.NONE)switch(this.lineType){case di.STRAIGHT:t.fillPolygon(this.path,this.getSeed());break;case di.CURVE:t.fillCurve(this.path,this.getSeed());break}if(this.strokeWidth>0)switch(this.lineType){case di.STRAIGHT:t.polyline(this.path,this.getSeed());break;case di.CURVE:t.strokeCurve(this.path,this.getSeed());break}this.path=r,this.fillColor=i,this.strokeColor=s,t.restoreState()}}},Bs=class extends Cx{constructor(){super(),this.type="Connector",this.head=null,this.tail=null,this.headAnchor=[.5,.5],this.tailAnchor=[.5,.5],this.headMargin=0,this.tailMargin=0}toJSON(t=!1,e=!1){const n=super.toJSON(t,e);return n.head=this.head?this.head.id:null,n.tail=this.tail?this.tail.id:null,n.headAnchor=structuredClone(this.headAnchor),n.tailAnchor=structuredClone(this.tailAnchor),n.headMargin=this.headMargin,n.tailMargin=this.tailMargin,e&&(n.head=this.head,n.tail=this.tail),n}fromJSON(t){var e,n,r,i,s,o;super.fromJSON(t),this.head=(e=t.head)!=null?e:this.head,this.tail=(n=t.tail)!=null?n:this.tail,this.headAnchor=(r=t.headAnchor)!=null?r:this.headAnchor,this.tailAnchor=(i=t.tailAnchor)!=null?i:this.tailAnchor,this.headMargin=(s=t.headMargin)!=null?s:this.headMargin,this.tailMargin=(o=t.tailMargin)!=null?o:this.tailMargin}resolveRefs(t,e=!1){super.resolveRefs(t,e),typeof this.tail=="string"&&(t[this.tail]?this.tail=t[this.tail]:e&&(this.tail=null)),typeof this.head=="string"&&(t[this.head]?this.head=t[this.head]:e&&(this.head=null))}getBoundingRect(t=!1){const e=[[this.left,this.top],[this.right,this.bottom]];if(t){const n=this.getHeadAnchorPoint(),r=this.getTailAnchorPoint();return hl(e,Zi([n,r]))}return e}getHeadAnchorPoint(){if(this.head instanceof gn&&!this.head.isClosed()){const t=this.head.path.map(e=>this.head.localCoordTransform(null,e,!0));return ps(t,this.headAnchor[0])}else if(this.head instanceof zr){const t=this.head.getBoundingRect(),e=nn(t),n=rn(t);return[t[0][0]+e*this.headAnchor[0],t[0][1]+n*this.headAnchor[1]]}return this.path[this.path.length-1]}getTailAnchorPoint(){if(this.tail instanceof gn&&!this.tail.isClosed()){const t=this.tail.path.map(e=>this.tail.localCoordTransform(null,e,!0));return ps(t,this.tailAnchor[0])}else if(this.tail instanceof zr){const t=this.tail.getBoundingRect(),e=nn(t),n=rn(t);return[t[0][0]+e*this.tailAnchor[0],t[0][1]+n*this.tailAnchor[1]]}return this.path[0]}getHeadOutline(){var t,e;return(e=(t=this.head)==null?void 0:t.getOutline())!=null?e:null}getTailOutline(){var t,e;return(e=(t=this.tail)==null?void 0:t.getOutline())!=null?e:null}},RE=class extends gn{constructor(){super(),this.type="Freehand",this.thinning=0,this.tailTaper=0,this.headTaper=0}toJSON(t=!1,e=!1){const n=super.toJSON(t,e);return n.thinning=this.thinning,n.tailTaper=this.tailTaper,n.headTaper=this.headTaper,n}fromJSON(t){var e,n,r;super.fromJSON(t),this.thinning=(e=t.thinning)!=null?e:this.thinning,this.tailTaper=(n=t.tailTaper)!=null?n:this.tailTaper,this.headTaper=(r=t.headTaper)!=null?r:this.headTaper}renderDefault(t){this.isClosed()&&this.fillStyle!==en.NONE&&t.fillPolygon(this.path,this.getSeed()),this.strokeWidth>0&&t.strokeFreehand(this.path,this.thinning,this.tailTaper,this.headTaper)}renderShadow(t){if(this.shadow){const[e=0,n=0]=this.shadowOffset;t.storeState();const r=Bn(this.path);this.path=this.path.map(i=>[i[0]+e,i[1]+n]),t.fillColor=this.shadowColor,t.strokeColor=this.shadowColor,this.isClosed()&&this.fillStyle!==en.NONE&&t.fillPolygon(this.path,this.getSeed()),this.strokeWidth>0&&t.strokeFreehand(this.path,this.thinning,this.tailTaper,this.headTaper),this.path=r,t.restoreState()}}},rI=class extends gn{constructor(){super(),this.type="Highlighter"}renderDefault(e){this.strokeWidth>0&&e.strokeFreehand(this.path)}renderShadow(e){if(this.shadow){const[n=0,r=0]=this.shadowOffset;e.storeState();const i=Bn(this.path);this.path=this.path.map(s=>[s[0]+n,s[1]+r]),e.fillColor=this.shadowColor,e.strokeColor=this.shadowColor,this.strokeWidth>0&&e.strokeFreehand(this.path),this.path=i,e.restoreState()}}},LE=class extends St{constructor(){super(),this.type="Frame",this.name="Frame",this.containable=!0,this._memoShadowCanvas=new RD}getShapeAt(e,n,r=[],i=!1){if((i||this.enable&&this.visible)&&this.containsPoint(e,n)){for(let o=this.children.length-1;o>=0;o--){const l=this.children[o].getShapeAt(e,n,r);if(l&&!r.includes(l))return l}return this}return null}overlapClippingArea(e,n){return wE(n,this.getBoundingRect())}overlapRect(e,n){return nD(n,this.getBoundingRect())}update(e){this._memoCanvas.clear(),this._memoShadowCanvas.clear(),this._memoCanvas.setCanvas(e),this._memoShadowCanvas.setCanvas(e),this.render(this._memoCanvas),this.children.forEach(n=>n.update(e))}draw(e,n=!1){this.visible&&(this.drawLink(e,n),e.save(),this.localTransform(e),this._memoShadowCanvas.draw(e),e.fillColor=this.fillColor,e.fillStyle=this.fillStyle,e.strokeWidth=this.strokeWidth,e.roughness=this.roughness,this.fillStyle!==en.NONE&&e.fillRoundRect(this.left,this.top,this.right,this.bottom,this.corners,this.getSeed()),e.fillColor="$transparent",e.fillStyle=en.SOLID,e.roughness=0,e.fillRoundRect(this.left,this.top,this.right,this.bottom,this.corners,this.getSeed()),e.context.clip(),this.children.forEach(r=>r.draw(e,n)),e.restore(),e.save(),this.localTransform(e),this._memoCanvas.draw(e),e.restore())}render(e){this.assignStyles(e),this.renderOutline(e),this.renderViewport(e),this.renderShadow(this._memoShadowCanvas);const n=this.getScript(U0.RENDER);if(n)try{q2({canvas:e,shape:this},n)}catch(r){console.error("[Script Error]",r)}else this.renderDefault(e)}renderDefault(e){const r=e.textMetric(this.name).descent*1.2;e.fillText(this.left,this.top-r,this.name),this.strokeWidth>0&&e.strokeRoundRect(this.left,this.top,this.right,this.bottom,this.corners,this.getSeed())}},ah=class extends St{constructor(){super(),this.type="Mirror",this.name="Mirror",this.rotatable=!1,this.containable=!0,this.subject=null}toJSON(t=!1,e=!1){const n=super.toJSON(t,e);return n.subject=this.subject?this.subject.id:null,e&&(n.subject=this.subject),n}fromJSON(t){var e;super.fromJSON(t),this.subject=(e=t.subject)!=null?e:this.subject}resolveRefs(t,e=!1){super.resolveRefs(t,e),typeof this.subject=="string"&&(t[this.subject]?this.subject=t[this.subject]:e&&(this.subject=null))}draw(t,e=!1){if(this.visible){if(this.drawLink(t,e),t.save(),this.localTransform(t),this.subject){const n=this.subject.getBoundingRect(),r=n[0][0],i=n[0][1],s=nn(n),o=rn(n),a=this.width/s,l=this.height/o,c=this.left-r*a,d=this.top-i*l;t.translateTransform(c,d),t.scaleTransform(a,l),this.subject.draw(t,e),t.translateTransform(-c,-d)}t.restore(),t.save(),this.children.forEach(n=>n.draw(t,e)),t.restore(),this._memoCanvas.draw(t)}}renderDefault(t){this.subject||(t.strokeRect(this.left,this.top,this.right,this.bottom,this.getSeed()),t.line(this.left,this.top,this.right,this.bottom,this.getSeed()),t.line(this.right,this.top,this.left,this.bottom,this.getSeed()))}getScale(){if(this.subject){const t=this.subject.getBoundingRect(),e=nn(t),n=rn(t),r=this.width/e,i=this.height/n;return[r,i]}return[1,1]}renderViewportDefault(t){const e=this.getOutline().map(r=>this.localCoordTransform(t.canvas,r,!0)),n=ei(e);if(this.subject){const r=this.subject.getBoundingRect(),i=this.subject.getViewport(t.canvas),s=nn(r),o=rn(r),a=this.width/s,l=this.height/o,c=(r[0][1]-i[0][1])*l,d=(i[1][1]-r[1][1])*l,u=(r[0][0]-i[0][0])*a,f=(i[1][0]-r[1][0])*a;return[[n[0][0]-u,n[0][1]-c],[n[1][0]+f,n[1][1]+d]]}return n}},iI=class extends St{constructor(){super(),this.type="Embed",this.src="https://www.youtube.com/embed/MTdbhePtCco?si=6-6HWSoOtx0qAmM6",this._iframeDOM=null}finalize(t){this._iframeDOM&&(this._iframeDOM.remove(),this._iframeDOM=null),super.finalize(t)}toJSON(t=!1,e=!1){const n=super.toJSON(t,e);return n.src=this.src,n}fromJSON(t){var e;super.fromJSON(t),this.src=(e=t.src)!=null?e:this.src}drawFrame(t,e=!1){var n,r;if(this.src.trim().length===0&&(e=!1),e){this._iframeDOM||(this._iframeDOM=document.createElement("iframe"),this._iframeDOM.style.position="absolute",this._iframeDOM.style.pointerEvents="none",(n=t.element.parentElement)==null||n.appendChild(this._iframeDOM)),this._iframeDOM.parentElement!==t.element.parentElement&&((r=t.element.parentElement)==null||r.appendChild(this._iframeDOM)),this._iframeDOM.src!==this.src&&(this._iframeDOM.src=this.src);const i=this.getRectInDCS(t),s=t.scale,o=i[0][0],a=i[0][1],l=nn(i),c=rn(i);this._iframeDOM.style.left=`${o}px`,this._iframeDOM.style.top=`${a}px`,this._iframeDOM.style.width=`${l}px`,this._iframeDOM.style.height=`${c}px`,this._iframeDOM.style.transform=`scale(${s})`}else this.finalize(t)}renderDefault(t,e=!1){}},Gte=class f0{constructor(){this.constraints={},this.constraintSchema={}}define(e,n,r){CC(!this.constraints[e],`A constraint of '${e}' already defined.`),this.constraints[e]=n,this.constraintSchema[e]=r}get(e){return CC(typeof this.constraints[e]=="function",`Constraint not found of id '${e}'`),this.constraints[e]}getSchema(e){return typeof this.constraintSchema[e]=="object"?this.constraintSchema[e]:(console.error(`Constraint schema not found of id '${e}'`),null)}getIds(){return Object.keys(this.constraints)}create(e){const n=this.getSchema(e);if(n){const r=n.safeParse({id:e,args:{}});return De({id:e},r.success?r.data:{})}else return console.error(`Unknown constraint id: ${e}`),null}static getInstance(){return f0.instance||(f0.instance=new f0),f0.instance}},Qo=Gte.getInstance();function sI(t,e,n=!1,r=[960,720],i=[200,150],s=1,o=1,a=!1,l=!1){var c;const d=(c=window.devicePixelRatio)!=null?c:1,u=new gy(e,d);u.colorVariables=xl[n?"dark":"light"],t.forEach(T=>T.update(u));const f=ZD(u,t),h=r?r[0]:nn(f),p=r?r[1]:rn(f),g=tD([h,p],[i[0],i[1]],s);let b=g[0],v=g[1],x=g[2]*o;const w=b,C=v,P=r?0:-f[0][0]+(b/x-h)/2,O=r?0:-f[0][1]+(v/x-p)/2;e.setAttribute("width",(w*d).toString()),e.setAttribute("height",(C*d).toString()),e.style.width=`${w}px`,e.style.height=`${C}px`,u.origin=[P,O],u.scale=x,u.save(),a&&t.forEach(T=>{T instanceof zr&&T.update(u)}),t.every(T=>!(T instanceof ws))&&u.globalTransform(),t.forEach(T=>{T.draw(u,l)}),u.restore()}var Kte=new Cte({Shape:()=>new zr,Doc:()=>new I1,Page:()=>new ws,Box:()=>new St,Path:()=>new gn,Line:()=>new Cx,Rectangle:()=>new eI,Ellipse:()=>new tI,Text:()=>new hg,Image:()=>new nI,Icon:()=>new OE,Connector:()=>new Bs,Freehand:()=>new RE,Highlighter:()=>new rI,Group:()=>new $f,Frame:()=>new LE,Mirror:()=>new ah,Embed:()=>new iI});function Jte(t){let e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),i=new Uint8Array(r);for(let o=0;o<e.length;o++)i[o]=e.charCodeAt(o);return new Blob([r],{type:n})}function Yte(){return document.createElement("img")}function Zte(){return document.createElement("canvas")}function Xte(t,e){let n=e.width/e.height,r=Math.min(e.width,t.maxWidth,n*t.maxHeight);return t.maxSize>0&&t.maxSize<e.width*e.height/1e3&&(r=Math.min(r,Math.floor(t.maxSize*1e3/e.height))),t.scaleRatio&&(r=Math.min(r,Math.floor(t.scaleRatio*e.width))),t.debug&&(console.log("browser-image-resizer: original image size = "+e.width+" px (width) X "+e.height+" px (height)"),console.log("browser-image-resizer: scaled image size = "+r+" px (width) X "+Math.floor(r/n)+" px (height)")),r<=0&&(r=1,console.warn("browser-image-resizer: image size is too small")),r}function Qte(t,e){let n=document.createElement("canvas"),r=e.outputWidth/t.width;n.width=t.width*r,n.height=t.height*r;let i=t.getContext("2d").getImageData(0,0,t.width,t.height),s=n.getContext("2d").createImageData(n.width,n.height);return tne(i,s,r),n.getContext("2d").putImageData(s,0,0),n}function ene(t){let e=document.createElement("canvas");return e.width=t.width/2,e.height=t.height/2,e.getContext("2d").drawImage(t,0,0,e.width,e.height),e}function tne(t,e,n){function r(T,M,D,I,R,$){let H=1-R,z=1-$;return T*H*z+M*R*z+D*H*$+I*R*$}let i,s,o,a,l,c,d,u,f,h,p,g,b,v,x,w,C,P,O;for(i=0;i<e.height;++i)for(o=i/n,a=Math.floor(o),l=Math.ceil(o)>t.height-1?t.height-1:Math.ceil(o),s=0;s<e.width;++s)c=s/n,d=Math.floor(c),u=Math.ceil(c)>t.width-1?t.width-1:Math.ceil(c),f=(s+e.width*i)*4,h=(d+t.width*a)*4,p=(u+t.width*a)*4,g=(d+t.width*l)*4,b=(u+t.width*l)*4,v=c-d,x=o-a,w=r(t.data[h],t.data[p],t.data[g],t.data[b],v,x),e.data[f]=w,C=r(t.data[h+1],t.data[p+1],t.data[g+1],t.data[b+1],v,x),e.data[f+1]=C,P=r(t.data[h+2],t.data[p+2],t.data[g+2],t.data[b+2],v,x),e.data[f+2]=P,O=r(t.data[h+3],t.data[p+3],t.data[g+3],t.data[b+3],v,x),e.data[f+3]=O}function nne({img:t,config:e,orientation:n=1}={}){let r=Zte();r.width=t.width,r.height=t.height;let i=r.getContext("2d");e.mimeType==="image/jpeg"&&(i.fillStyle="#ffffff",i.fillRect(0,0,r.width,r.height),i.save()),i.drawImage(t,0,0),i.restore();let s=Xte(e,r);for(;r.width>=2*s;)r=ene(r);r.width>s&&(r=Qte(r,Object.assign(e,{outputWidth:s})));let o=r.toDataURL(e.mimeType,e.quality);return typeof e.onScale=="function"&&e.onScale(o),Jte(o)}var rne={quality:.5,maxWidth:800,maxHeight:600,autoRotate:!0,debug:!1,mimeType:"image/jpeg"};function ine(t,e){return new Promise((n,r)=>{let i=Yte(),s=new FileReader,o=Object.assign({},rne,e);s.onload=function(a){i.onerror=function(){r("cannot load image.")},i.onload=function(){let l={img:i,config:o};try{let c=nne(l);n(c)}catch(c){r(c)}},i.src=a.target.result};try{s.onerror=function(){r("cannot read image file.")},s.readAsDataURL(t)}catch(a){r(a)}})}function sne(t){return new Promise((e,n)=>{let r=new FileReader;r.readAsDataURL(t),r.addEventListener("load",()=>{const i=r.result;let s=new Image;s.src=i,s.onload=()=>{e(s)}})})}function one(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=function(){const i=r.result,s=new Image;s.src=i,s.onload=()=>{e(s)},s.onerror=o=>{n(o)}},r.onerror=function(){n(r.error)},r.readAsDataURL(t)})}function ane(t,e){return Vu(this,null,function*(){if(t.type==="image/svg+xml")return sne(t);{const n={quality:.7,maxWidth:800,maxHeight:800,mimeType:t.type},r=yield ine(t,Object.assign(n,e));return yield one(r)}})}var lne=class{constructor(t){this.editor=t,this.onCreate=new Wn,this.onShapeInitialize=new Wn}triggerCreate(t){this.onCreate.emit(t)}createRectangle(t){const e=new eI;e.left=t[0][0],e.top=t[0][1];let n=nn(t),r=rn(t);return e.width=n,e.height=r,e.horzAlign=uo.CENTER,e.vertAlign=jo.MIDDLE,this.onShapeInitialize.emit(e),e}createEllipse(t){const e=new tI;e.left=t[0][0],e.top=t[0][1];let n=nn(t),r=rn(t);return e.width=n,e.height=r,e.horzAlign=uo.CENTER,e.vertAlign=jo.MIDDLE,this.onShapeInitialize.emit(e),e}createText(t,e=""){const n=new hg;n.text=O1(e,n.horzAlign),n.strokeColor="$foreground",n.fillColor="$background",n.fillStyle=en.NONE,n.left=t[0][0],n.top=t[0][1];let r=nn(t),i=rn(t);return n.width=r,n.height=i,n.horzAlign=uo.LEFT,n.vertAlign=jo.TOP,n.constraints.push({id:"set-size",width:"text",height:"text"}),this.onShapeInitialize.emit(n),n}createAnchoredText(t,e=""){const n=new hg;return n.text=O1(e,n.horzAlign),n.strokeColor="$foreground",n.fillColor="$background",n.fillStyle=en.SOLID,n.horzAlign=uo.LEFT,n.vertAlign=jo.TOP,n.anchored=!0,n.anchorPosition=t,n.constraints.push({id:"anchor-on-parent"}),n.constraints.push({id:"set-size",width:"text",height:"text"}),this.onShapeInitialize.emit(n),n}createImage(t,e){return Vu(this,null,function*(){const n=yield ane(t,this.editor.options.imageResize),r=new nI,i=n.width,s=n.height;return r.imageData=n.src,r.imageWidth=i,r.imageHeight=s,r.width=i,r.height=s,r.left=e[0]-i/2,r.top=e[1]-s/2,r.sizable=_r.RATIO,r.textEditable=!1,this.onShapeInitialize.emit(r),r})}createLine(t,e=!1){const n=new Cx,r=structuredClone(t);e&&(r[r.length-1]=On(r[0])),n.path=r;const i=ei(n.path);return n.left=i[0][0],n.top=i[0][1],n.width=nn(i),n.height=rn(i),this.onShapeInitialize.emit(n),n}createConnector(t,e,n,r,i){const s=new Bs;s.lineType=di.CURVE,s.constraints=[{id:"adjust-route"}],s.tail=t,s.tailAnchor=e,s.head=n,s.headAnchor=r,s.path=structuredClone(i);const o=ei(s.path);return s.left=o[0][0],s.top=o[0][1],s.width=nn(o),s.height=rn(o),this.onShapeInitialize.emit(s),s}createFreehand(t,e=!1){const n=new RE,r=structuredClone(t);e&&(r[r.length-1]=On(r[0])),n.strokeWidth=8,n.path=r;const i=ei(n.path);return n.left=i[0][0],n.top=i[0][1],n.width=nn(i),n.height=rn(i),n.pathEditable=!1,this.onShapeInitialize.emit(n),n}createHighlighter(t){const e=new rI,n=structuredClone(t);closed&&(n[n.length-1]=On(n[0])),e.strokeWidth=28,e.strokeColor="#FFE629",e.opacity=.5,e.pathEditable=!1,e.path=n;const r=ei(e.path);return e.left=r[0][0],e.top=r[0][1],e.width=nn(r),e.height=rn(r),this.onShapeInitialize.emit(e),e}createIcon(t,e,n,r){const i=new OE;return i.left=t[0][0],i.top=t[0][1],i.width=nn(t),i.height=rn(t),i.viewWidth=e,i.viewHeight=n,i.data=structuredClone(r),this.onShapeInitialize.emit(i),i}createFrame(t){const e=new LE;e.left=t[0][0],e.top=t[0][1];let n=nn(t),r=rn(t);return Gn(t[0],t[1])<=US&&(n=100,r=100),e.width=n,e.height=r,e.horzAlign=uo.CENTER,e.vertAlign=jo.MIDDLE,e.textEditable=!1,this.onShapeInitialize.emit(e),e}createMirror(t,e){const n=new ah;n.left=t[0][0],n.top=t[0][1];let r=nn(t),i=rn(t);return Gn(t[0],t[1])<=US&&(r=100,i=100),n.width=r,n.height=i,n.horzAlign=uo.CENTER,n.vertAlign=jo.MIDDLE,n.textEditable=!1,e&&(n.subject=e),this.onShapeInitialize.emit(n),n}createEmbed(t){const e=new iI;e.left=t[0][0],e.top=t[0][1];let n=nn(t),r=rn(t);return Gn(t[0],t[1])<=US&&(n=100,r=100),e.width=n,e.height=r,e.horzAlign=uo.CENTER,e.vertAlign=jo.MIDDLE,e.textEditable=!1,this.onShapeInitialize.emit(e),e}},cne=class{constructor(t){this.editor=t,this.keymap={}}add(t){Object.keys(t).forEach(e=>{if(e){const n=this.normalizeKeyDescriptor(e);this.keymap[n]=t[e]}})}getKeymap(){return this.keymap}formatKeyDescriptor(t){t=t.replace("--","-minus");let e=t.split("-");return this.editor.platform==="darwin"?(e=e.map(n=>{switch(n){case"mod":return"";case"ctrl":return"";case"cmd":return"";case"shift":return"";case"alt":return"";case"space":return"Space";case"escape":return"Escape";case"minus":return"-";case"enter":return"Enter";case"backspace":return"";case"delete":return"";case"up":return"";case"down":return"";case"left":return"";case"right":return"";default:return n.length===1?n.toUpperCase():n}}),e.join("")):(e=e.map(n=>{switch(n){case"mod":return"Ctrl";case"ctrl":return"Ctrl";case"shift":return"Shift";case"alt":return"Alt";case"space":return"Space";case"escape":return"Escape";case"enter":return"Enter";case"backspace":return"Backspace";case"delete":return"Delete";case"up":return"";case"down":return"";case"left":return"";case"right":return"";default:return n.length===1?n.toUpperCase():n}}),e.join("+"))}normalizeKeyDescriptor(t){const e=t.toLowerCase().split("-");let n=!1,r=!1,i=!1,s=!1,o;return e.includes("mod")&&(this.editor.platform==="darwin"?n=!0:r=!0,e.splice(e.indexOf("mod"),1)),e.includes("cmd")&&(n=!0,e.splice(e.indexOf("cmd"),1)),e.includes("ctrl")&&(r=!0,e.splice(e.indexOf("ctrl"),1)),e.includes("alt")&&(i=!0,e.splice(e.indexOf("alt"),1)),e.includes("shift")&&(s=!0,e.splice(e.indexOf("shift"),1)),o=e[0],o==="delete"&&this.editor.platform==="darwin"&&(o="backspace"),this.buildKeyDescriptor(n,r,i,s,o)}buildKeyDescriptor(t,e,n,r,i){if(!i)return console.log("KeymapManager buildKeyDescriptor() - No key provided!"),"";const s=[];return t&&s.push("cmd"),e&&s.push("ctrl"),n&&s.push("alt"),r&&s.push("shift"),i==="plus"?s.push("+"):i==="minus"?s.push("-"):s.push(i),s.join("-")}mapKeycodeToKey(t,e){if(t>=An("0")&&t<=An("9"))return String(t-An("0"));if(t>=An("numpad 0")&&t<=An("numpad 9"))return String(t-An("numpad 0"));switch(t){case An(";"):return";";case An("="):return"=";case An(","):return",";case An("numpad -"):case An("-"):return"-";case An("numpad +"):return"+";case An("numpad ."):case 190:return".";case An("numpad /"):case An("/"):return"/";case An("``"):return"`";case An("["):return"[";case An("\\"):return"\\";case An("]"):return"]";case An("''"):return"'";case An("up"):return"up";case An("down"):return"down";case An("left"):return"left";case An("right"):return"right";default:return e.toLowerCase()}}translateKeyboardEvent(t){const e=t.metaKey,n=t.ctrlKey,r=t.altKey,i=t.shiftKey,s=t.key;let o=String.fromCharCode(t.keyCode);return s&&(s.charAt(0)==="U"&&s.charAt(1)==="+"?o=String.fromCharCode(parseInt(s.substring(2),16)):o=s),o==="	"?o="tab":o===" "?o="space":o=this.mapKeycodeToKey(t.keyCode,o),this.buildKeyDescriptor(e,n,r,i,o)}inModalDialog(){return document.querySelectorAll("[role='dialog']").length>0}inEditMode(){var t,e,n,r;return(r=((t=document.activeElement)==null?void 0:t.nodeName)==="TEXTAREA"||((e=document.activeElement)==null?void 0:e.nodeName)==="INPUT"||((n=document.activeElement)==null?void 0:n.getAttribute("contenteditable"))==="true")!=null?r:!1}isEditKey(t){return(t.ctrlKey||t.metaKey)&&t.which===An("c")||(t.ctrlKey||t.metaKey)&&t.which===An("x")||(t.ctrlKey||t.metaKey)&&t.which===An("v")||(t.ctrlKey||t.metaKey)&&t.which===An("z")||(t.ctrlKey||t.metaKey)&&t.which===An("y")||t.which===An("delete")||t.which===An("backspace")}handleKey(t){return this.keymap[t]?(this.keymap[t](this.editor),!0):!1}bind(t){this.add(t),(this.editor.options.keymapEventTarget||this.editor.canvasElement).addEventListener("keydown",n=>{this.editor.getEnabled()&&(this.inEditMode()||this.inModalDialog()||this.handleKey(this.translateKeyboardEvent(n))&&(n.stopPropagation(),n.preventDefault()))},!0)}},aN=2,une=50,dne=30,fne=class{constructor(t){this.editor=t,this.enabled=!1,this.dx=0,this.dy=0,this.timerId=null,this.timerHandler=()=>{let e=!1;if(this.dx!==0){let n=Math.round(this.editor.canvas.origin[0]+this.dx);this.editor.canvas.origin[0]!==n&&(this.editor.canvas.origin[0]=n,e=!0)}if(this.dy!==0){let n=Math.round(this.editor.canvas.origin[1]+this.dy);this.editor.canvas.origin[1]!==n&&(this.editor.canvas.origin[1]=n,e=!0)}e&&this.editor.repaint(!0)}}setEnabled(t){this.enabled=t}pointerDown(t){if(this.enabled&&this.editor.leftButtonDown){const e=Math.round(une/1e3);this.timerId=setInterval(this.timerHandler,e)}}pointerMove(t){if(this.enabled&&this.editor.leftButtonDown&&this.timerId){const e=dne*this.editor.canvas.px;t.x>this.editor.canvasElement.width-e?this.dx=-2:t.x<e?this.dx=aN:this.dx=0,t.y>this.editor.canvasElement.height-e?this.dy=-2:t.y<e?this.dy=aN:this.dy=0}}pointerUp(t){this.enabled&&this.timerId&&(clearInterval(this.timerId),this.timerId=null,this.dx=0,this.dy=0)}},hne=class{constructor(t){this.editor=t,this.shapes=[],this.onChange=new Wn}isChanged(t){t=t||[];for(let e=0,n=t.length;e<n;e++){let r=t[e];if(!this.shapes.includes(r))return!0}for(let e=0,n=this.shapes.length;e<n;e++){let r=this.shapes[e];if(!t.includes(r))return!0}return!1}getShapes(){return this.shapes}size(){return this.shapes.length}isSelected(t){return this.shapes.includes(t)}select(t,e=!0){e&&(this.shapes=[]);for(let n of t)this.isSelected(n)||this.shapes.push(n);this.onChange.emit(this.shapes)}selectArea(t,e,n,r,i=!0){var s;const o=this.editor.canvas;let a=Zi([[t,e],[n,r]]);i&&(this.shapes=[]),(s=this.editor.getCurrentPage())==null||s.visit(l=>{l.visible&&l.enable&&l.overlapRect(o,a)&&!this.isSelected(l)&&this.shapes.push(l)}),this.onChange.emit(this.shapes)}selectAll(){var t;this.shapes=[],(t=this.editor.getCurrentPage())==null||t.visit(e=>{e.visible&&e.enable&&this.shapes.push(e)}),this.onChange.emit(this.shapes)}deselect(t){for(let e of t)this.isSelected(e)&&this.shapes.splice(this.shapes.indexOf(e),1);this.onChange.emit(this.shapes)}deselectAll(){this.shapes.length>0&&(this.shapes=[],this.onChange.emit(this.shapes))}getBoundingRect(t){return this.shapes.length>0?this.shapes.map(e=>ei(e.getOutline().map(n=>e.localCoordTransform(t,n,!0)))).reduce(hl):[[0,0],[0,0]]}getEnclosure(t){const e=this.getBoundingRect(t);return qs(e)}},pne=class{constructor(t){this.store=t}write(t){return Vu(this,null,function*(){const e={};if(Array.isArray(t.objs)&&t.objs.length>0){const n=iw(t.objs),r=`<dgm>${GT.encode(JSON.stringify(n))}</dgm>`,i=new Blob([r],{type:"text/plain"});e["text/plain"]=i}else if(t.text&&t.text.length>0){const n=new Blob([t.text],{type:"text/plain"});e["text/plain"]=n}Object.entries(e).length>0&&(yield navigator.clipboard.write([new ClipboardItem(e)]))})}read(t){return Vu(this,null,function*(){const e=yield navigator.clipboard.read(),n={};for(let r of e)for(let i of r.types){if(i==="text/plain"){const o=yield(yield r.getType(i)).text(),a=o.match(/<dgm>(.*)<\/dgm>/),l=o.match(/<svg.*<\/svg>/);if(a){const c=JSON.parse(GT.decode(a[1]));n.objs=sw(this.store,c,t)}else l?n.image=new Blob([l[0]],{type:"image/svg+xml"}):n.text=o}if(i==="image/png"){const s=yield r.getType(i);n.image=s}}return n})}};function lN(t,e,n){const r=t.getBoundingClientRect(),i=n.touches.length===2?(n.touches[0].clientX+n.touches[1].clientX)/2:n.touches[0].clientX,s=n.touches.length===2?(n.touches[0].clientY+n.touches[1].clientY)/2:n.touches[0].clientY;let o=[i-r.left,s-r.top],a=[o[0]*e.ratio,o[1]*e.ratio];const l={button:0,shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,touchDistance:0};if(n.touches.length===2){const c=n.touches[0].clientX-n.touches[1].clientX,d=n.touches[0].clientY-n.touches[1].clientY;l.touchDistance=Math.sqrt(c*c+d*d)}return new uD(a[0],a[1],l)}function Xh(t,e,n){const r=t.getBoundingClientRect();let i=[n.clientX-r.left,n.clientY-r.top],s=[i[0]*e.ratio,i[1]*e.ratio];return new uD(s[0],s[1],n)}var gne=class{constructor(e,n,r=[]){this.duplicatedDragging=!1;var i;this.options=De({handlers:[],defaultHandlerId:"",keymap:{},keymapEventTarget:null,allowAutoScroll:!0,allowCreateTextOnCanvas:!0,allowCreateTextOnConnector:!0,showCreateConnectorController:!0,showDOM:!0,imageResize:{quality:.7,maxWidth:800,maxHeight:800},blankColor:jn.BLANK,canvasColor:jn.CANVAS,gridColor:jn.GRID,onReady:()=>{}},n),this.plugins={},r.forEach(s=>{this.plugins[s.id]=s}),this.onCurrentPageChange=new Wn,this.onActiveHandlerChange=new Wn,this.onActiveHandlerLockChange=new Wn,this.onZoom=new Wn,this.onScroll=new Wn,this.onPointerDown=new Wn,this.onPointerMove=new Wn,this.onPointerUp=new Wn,this.onDblClick=new Wn,this.onKeyDown=new Wn,this.onKeyUp=new Wn,this.onDragStart=new Wn,this.onDrag=new Wn,this.onDragEnd=new Wn,this.onFileDrop=new Wn,this.onRepaint=new Wn,this.store=new Vte(Kte,{objInitializer:s=>{s instanceof zr&&(s.initialze(this.canvas),s.update(this.canvas))},objFinalizer:s=>{s instanceof zr&&s.finalize(this.canvas)},objUpdater:s=>{s instanceof zr&&s.update(this.canvas)}}),this.transform=new KD(this.store),this.clipboard=new pne(this.store),this.selection=new hne(this),this.factory=new lne(this),this.actions=new Wte(this),this.keymap=new cne(this),this.platform=this.detectPlatform(),this.currentPage=null,this.parent=e,this.parent.style.overflow="hidden",this.autoScroller=new fne(this),this.autoScroller.setEnabled((i=this.options.allowAutoScroll)!=null?i:!0),this.canvasElement=null,this.canvas=null,this.enabled=!0,this.darkMode=!1,this.gridSize=[8,8],this.showGrid=!1,this.snapToGrid=!1,this.snapToObjects=!1,this.handlers={},this.activeHandler=null,this.activeHandlerLock=!1,this.spaceKeyDown=!1,this.leftButtonDown=!1,this.midButtonDown=!1,this.downX=0,this.downY=0,this.isPinching=!1,this.initialScale=1,this.initialDistance=0,this.touchPoint=[-1,-1],this.pointerDownUnselectedShape=!1,this.initializeState(),this.initializeHandlers(),this.initializeCanvas(),this.initializeKeymap(),this.activatePlugins(),this.options.onReady&&this.options.onReady(this)}detectPlatform(){const e=navigator.platform.toLowerCase();return e.indexOf("mac")>-1?"darwin":e.indexOf("win")>-1?"win32":e.indexOf("linux")>-1?"linux":"unknown"}initializeState(){this.selection.onChange.addListener(()=>this.repaint()),this.transform.onTransaction.addListener(()=>this.repaint()),this.transform.onUndo.addListener(()=>{this.activeHandler&&this.activeHandler.onActionPerformed(this),this.repaint()}),this.transform.onRedo.addListener(()=>{this.activeHandler&&this.activeHandler.onActionPerformed(this),this.repaint()}),this.transform.onAction.addListener(()=>{this.activeHandler&&this.activeHandler.onActionPerformed(this)})}initializeHandlers(){this.options.handlers.forEach(e=>{this.handlers[e.id]=e}),!this.options.defaultHandlerId&&this.options.handlers.length>0&&(this.options.defaultHandlerId=this.options.handlers[0].id)}initializeCanvas(){var e;this.canvasElement=document.createElement("canvas"),this.canvasElement.tabIndex=0,this.canvasElement.style.touchAction="none",this.canvasElement.style.outline="none",this.parent.appendChild(this.canvasElement);const n=(e=window.devicePixelRatio)!=null?e:1;this.canvas=new gy(this.canvasElement,n),this.canvas.colorVariables=De({},xl.light),this.canvasElement.addEventListener("pointerdown",r=>{if(this.enabled){this.focus(),r.button===Fr.BUTTON1&&(this.leftButtonDown=!0),r.button===Fr.BUTTON2&&(this.midButtonDown=!0);const i=Xh(this.canvasElement,this.canvas,r);this.autoScroller.pointerDown(i),this.spaceKeyDown&&this.setCursor(_t.GRAB),this.midButtonDown||this.spaceKeyDown&&this.leftButtonDown?(this.setCursor(_t.GRABBING),this.downX=r.offsetX,this.downY=r.offsetY):!this.isPinching&&!this.spaceKeyDown&&this.activeHandler&&(this.activeHandler.pointerMove(this,i),this.activeHandler.pointerDown(this,i)),this.onPointerDown.emit(i)}}),this.canvasElement.addEventListener("pointermove",r=>{if(this.enabled){const i=Xh(this.canvasElement,this.canvas,r);if(i.leftButtonDown=this.leftButtonDown,this.autoScroller.pointerMove(i),this.spaceKeyDown&&this.setCursor(_t.GRAB),this.midButtonDown||this.spaceKeyDown&&this.leftButtonDown){this.setCursor(_t.GRABBING);let s=(r.offsetX-this.downX)/this.getScale(),o=(r.offsetY-this.downY)/this.getScale();this.moveOrigin(s,o),this.downX=r.offsetX,this.downY=r.offsetY}else!this.isPinching&&!this.spaceKeyDown&&this.activeHandler&&this.activeHandler.pointerMove(this,i);this.onPointerMove.emit(i)}}),this.canvasElement.addEventListener("pointerup",r=>{if(this.enabled){const i=Xh(this.canvasElement,this.canvas,r);this.spaceKeyDown&&this.setCursor(_t.GRAB),(this.midButtonDown||this.spaceKeyDown&&this.leftButtonDown)&&(this.downX=0,this.downY=0),this.autoScroller.pointerUp(i),!this.isPinching&&!this.spaceKeyDown&&this.activeHandler&&this.activeHandler.pointerUp(this,i),r.button===Fr.BUTTON1&&(this.leftButtonDown=!1),r.button===Fr.BUTTON2&&(this.midButtonDown=!1),this.onPointerUp.emit(i)}}),this.canvasElement.addEventListener("pointercancel",r=>{this.enabled}),this.canvasElement.addEventListener("touchstart",r=>{if(this.enabled&&(this.focus(),r.touches.length===2)){const i=lN(this.canvasElement,this.canvas,r);this.isPinching=!0,this.initialScale=this.canvas.scale,this.initialDistance=i.touchDistance,this.touchPoint=[i.x,i.y]}}),this.canvasElement.addEventListener("touchmove",r=>{if(this.enabled&&this.isPinching&&r.touches.length===2){const i=lN(this.canvasElement,this.canvas,r),o=i.touchDistance/this.initialDistance,a=this.canvas.globalCoordTransformRev(this.touchPoint);this.setScale(this.initialScale*o);const l=this.canvas.globalCoordTransformRev([i.x,i.y]);this.moveOrigin(l[0]-a[0],l[1]-a[1]),this.touchPoint=[i.x,i.y]}}),this.canvasElement.addEventListener("touchend",r=>{this.enabled&&(r.stopImmediatePropagation(),this.isPinching=!1,this.initialScale=1,this.initialDistance=0,this.touchPoint=[-1,-1])}),this.canvasElement.addEventListener("dblclick",r=>{if(this.enabled){this.focus(),this.selection.deselectAll();const i=Xh(this.canvasElement,this.canvas,r),s=this.canvas.globalCoordTransformRev([i.x,i.y]),o=s[0],a=s[1];if(this.currentPage){const l=d=>d.visible&&d.containsPoint(this.canvas,s),c=this.currentPage.findDepthFirst(l);if(this.options.allowCreateTextOnCanvas&&!c){const d=this.factory.createText([[o,a],[o,a]]);this.actions.insert(d),this.factory.triggerCreate(d)}if(this.options.allowCreateTextOnConnector&&c instanceof Bs){const d=c.getOutline(),u=wx([o,a],d,Ec*2),f=u?ad(d,u):.5,h=this.factory.createAnchoredText(f);this.actions.insert(h,c),this.factory.triggerCreate(h)}this.onDblClick.emit({shape:c,point:[o,a]})}}}),this.canvasElement.addEventListener("wheel",r=>{if(this.enabled){const i=Xh(this.canvasElement,this.canvas,r),s=-r.deltaX,o=-r.deltaY,a=this.getSize()[1]/(this.canvas.px*4);if(r.ctrlKey||r.metaKey){if(r.preventDefault(),o<0){const l=this.canvas.globalCoordTransformRev([i.x,i.y]);this.setScale(this.canvas.scale*(1+o/a));const c=this.canvas.globalCoordTransformRev([i.x,i.y]);this.moveOrigin(c[0]-l[0],c[1]-l[1])}else if(o>0){const l=this.canvas.globalCoordTransformRev([i.x,i.y]);this.setScale(this.canvas.scale*(1+o/a));const c=this.canvas.globalCoordTransformRev([i.x,i.y]);this.moveOrigin(c[0]-l[0],c[1]-l[1])}}else r.shiftKey&&Math.abs(s)===0?this.moveOrigin(o,s):this.moveOrigin(s,o)}r.preventDefault()}),this.canvasElement.addEventListener("dragover",r=>{r.preventDefault()}),this.canvasElement.addEventListener("drop",r=>{if(this.enabled){this.focus(),r.preventDefault();const i=Xh(this.canvasElement,this.canvas,r);this.onFileDrop.emit({event:i,dataTransfer:r.dataTransfer})}}),this.canvasElement.addEventListener("keydown",r=>{this.enabled&&(r.preventDefault(),r.code==="Space"&&this.spaceKeyDown===!1&&(this.spaceKeyDown=!0,this.setCursor(_t.GRAB)),this.focus(),this.onKeyDown.emit(r))}),this.canvasElement.addEventListener("keyup",r=>{this.enabled&&(r.preventDefault(),r.code==="Space"&&this.spaceKeyDown===!0&&(this.spaceKeyDown=!1,this.setCursor(_t.DEFAULT)),this.focus(),this.onKeyUp.emit(r))})}initializeKeymap(){var e;this.keymap.bind((e=this.options.keymap)!=null?e:{}),this.canvasElement.addEventListener("keydown",n=>{this.enabled&&(this.activeHandler&&this.activeHandler.keyDown(this,n),n.key==="Escape"&&this.options.defaultHandlerId&&this.activateHandler(this.options.defaultHandlerId))}),this.canvasElement.addEventListener("keyup",n=>{this.enabled&&this.activeHandler&&this.activeHandler.keyUp(this,n)})}activatePlugins(){for(const e of Object.values(this.plugins))e.activate(this)}deactivatePlugins(){for(const e of Object.values(this.plugins))e.deactivate(this)}getPlugin(e){return this.plugins[e]}getEnabled(){return this.enabled}setEnabled(e){this.enabled=e,this.canvasElement.style.opacity=e?"1":"0.5"}getCurrentPage(){return this.currentPage}setCurrentPage(e){this.currentPage!==e&&(this.currentPage&&(this.currentPage.finalize(this.canvas),this.selection.deselectAll()),this.currentPage=e,e.pageOrigin?this.setOrigin(e.pageOrigin[0],e.pageOrigin[1]):(this.scrollToCenter(),this.currentPage.pageOrigin=this.getOrigin()),this.setScale(e.pageScale),this.repaint(),this.onCurrentPageChange.emit(e))}getPages(){return this.store.root?this.store.root.children:[]}focus(){this.canvasElement.focus()}getDarkMode(){return this.darkMode}setDarkMode(e){this.darkMode=e,this.canvas.colorVariables=De({},xl[this.darkMode?"dark":"light"]),this.update(),this.repaint()}getGridSize(){return this.gridSize}setGridSize(e){this.gridSize=e,this.repaint()}getShowGrid(){return this.showGrid}setShowGrid(e){this.showGrid=e,this.repaint()}getSnapToGrid(){return this.snapToGrid}setSnapToGrid(e){this.snapToGrid=e}getSnapToObjects(){return this.snapToObjects}setSnapToObjects(e){this.snapToObjects=e}fit(){const e=this.parent.getBoundingClientRect();this.setSize(e.width,e.height)}getOrigin(){return this.canvas.origin}setOrigin(e,n){this.canvas.origin=[e,n],this.currentPage&&(this.currentPage.pageOrigin=[e,n],this.repaint()),this.onScroll.emit([e,n])}moveOrigin(e,n){this.setOrigin(this.canvas.origin[0]+e,this.canvas.origin[1]+n)}getSize(){return[this.canvasElement.width,this.canvasElement.height]}setSize(e,n){this.canvasElement.width=e,this.canvasElement.height=n,this.canvasElement.width=Math.floor(e*this.canvas.ratio),this.canvasElement.height=Math.floor(n*this.canvas.ratio),this.canvasElement.style.width=e+"px",this.canvasElement.style.height=n+"px",this.repaint()}getCenter(){const e=this.getSize();return this.canvas.globalCoordTransformRev([e[0]/2,e[1]/2])}getBoundingRect(){return[[0,0],this.getSize()].map(n=>this.canvas.globalCoordTransformRev(n))}getScale(){return this.canvas.scale}setScale(e){e<.1&&(e=.1),e>10&&(e=10),this.canvas.scale=e,this.currentPage&&(this.currentPage.pageScale=e,this.repaint()),this.onZoom.emit(e)}zoom(e=1){const n=this.getCenter();this.setScale(e),this.scrollCenterTo(n),this.repaint()}fitToScreen(e=1,n=1){if(this.currentPage){const r=this.currentPage;let i=Array.isArray(r.size)?[[0,0],r.size]:r.getViewport(this.canvas);const s=hc(i),o=nn(i),a=rn(i),l=this.getSize(),c=Math.round(l[0]/this.canvas.ratio),d=Math.round(l[1]/this.canvas.ratio),u=Math.min(c/o,d/a,n);this.setScale(u*e),this.scrollCenterTo(s)}}scroll(e,n){this.moveOrigin(e,n)}scrollCenterTo(e){if(this.currentPage){const n=this.currentPage;let r=Array.isArray(n.size)?[[0,0],n.size]:n.getViewport(this.canvas);e||(e=hc(r));const i=this.getSize(),s=Math.round(i[0]/this.canvas.ratio),o=Math.round(i[1]/this.canvas.ratio),a=s/this.canvas.scale,l=o/this.canvas.scale,c=Math.round(e[0]-a/2),d=Math.round(e[1]-l/2);this.setOrigin(-c,-d)}}scrollToCenter(){if(this.currentPage){const e=this.currentPage;let n=Array.isArray(e.size)?[[0,0],e.size]:e.getViewport(this.canvas);const r=hc(n);this.scrollCenterTo(r)}}getActiveHandler(){return this.activeHandler}activateHandler(e){const n=this.handlers[e];this.activeHandler!==n&&(this.activeHandler&&this.activeHandler.deactivate(this),n&&(this.activeHandler=n,this.activeHandler.activate(this),this.onActiveHandlerChange.emit(n.id)))}activateDefaultHandler(){this.options.defaultHandlerId&&this.activateHandler(this.options.defaultHandlerId)}setActiveHandlerLock(e){this.activeHandlerLock!==e&&(this.activeHandlerLock=e,this.onActiveHandlerLockChange.emit(e))}getActiveHandlerLock(){return this.activeHandlerLock}clearBackground(e){var n,r,i;const s=e.context,o=(n=this.currentPage)==null?void 0:n.size;s.fillStyle=this.canvas.resolveColor(o?(r=this.options.blankColor)!=null?r:jn.BLANK:(i=this.options.canvasColor)!=null?i:jn.CANVAS),s.globalAlpha=1,s.fillRect(0,0,this.canvasElement.width,this.canvasElement.height)}drawPageAndGrid(e){var n,r,i;const s=this.getScale(),o=(n=this.currentPage)==null?void 0:n.size;if(e.save(),e.globalTransform(),o&&(e.roughness=0,e.alpha=1,e.fillStyle=en.SOLID,e.fillColor=this.canvas.resolveColor((r=this.options.canvasColor)!=null?r:jn.CANVAS),e.fillRect(0,0,o[0],o[1])),this.showGrid){const a=this.getSize(),l=e.globalCoordTransformRev([0,0]),c=e.globalCoordTransformRev(a);let d=this.gridSize[0]*2,u=this.gridSize[1]*2,f=Math.max(Math.round(1/s),1);s<.2?(d=this.gridSize[0]*16,u=this.gridSize[1]*16):s<.4?(d=this.gridSize[0]*8,u=this.gridSize[1]*8):s<.8&&(d=this.gridSize[0]*4,u=this.gridSize[1]*4);const h=Math.floor((c[0]-l[0])/d),p=Math.floor((c[1]-l[1])/u);e.strokeColor=this.canvas.resolveColor((i=this.options.gridColor)!=null?i:jn.GRID),e.strokeWidth=f,e.strokePattern=[],e.roughness=0,e.alpha=1;for(let g=0;g<=h;g++){const b=l[0]+g*d-l[0]%d;e.line(b,l[1],b,c[1])}for(let g=0;g<=p;g++){const b=l[1]+g*u-l[1]%u;e.line(l[0],b,c[0],b)}}o&&(e.strokeColor=this.canvas.resolveColor(jn.BORDER),e.strokeWidth=1/s,e.strokePattern=[],e.roughness=0,e.alpha=1,e.strokeRect(0,0,o[0],o[1])),e.restore()}drawSelection(){this.activeHandler&&this.activeHandler.drawSelection(this)}update(){this.store.root&&this.store.root.children.forEach(e=>{e instanceof zr&&e.update(this.canvas)})}repaint(e=!0){this.clearBackground(this.canvas),this.currentPage&&(this.drawPageAndGrid(this.canvas),this.currentPage.draw(this.canvas,this.options.showDOM),e&&this.drawSelection(),this.onRepaint.emit())}getCursor(){return this.canvasElement.style.cursor}setCursor(e,n=0){const r=e.replace("{{angle}}",n.toString());this.canvasElement.style.cursor=r}getDoc(){return this.store.root}setDoc(e){this.store.setRoot(e)}newDoc(){const e=new I1,n=new ws;return n.name="Page 1",e.children.push(n),n.parent=e,this.store.setRoot(e),this.setCurrentPage(e.children[0]),e}loadFromJSON(e){e&&(this.selection.deselectAll(),this.store.fromJSON(e),this.store.root instanceof I1&&this.store.root.children.length>0&&this.store.root.children[0]instanceof ws&&this.setCurrentPage(this.store.root.children[0]))}saveToJSON(){return this.store.toJSON()}},mne=class h0{constructor(){this.manipulators={}}define(e,n){CC(!this.manipulators[e],`A manipulator of '${e}' already defined.`),this.manipulators[e]=n}get(e){const n=this.manipulators[e];return n??null}getTypes(){return Object.keys(this.manipulators)}static getInstance(){return h0.instance||(h0.instance=new h0),h0.instance}},Es=class{constructor(t,e){this.id=t,this.options=De({defaultLock:!1},e),this.dragging=!1,this.dragStartPoint=[-1,-1],this.dragPoint=[-1,-1],this.reset()}reset(){this.dragging=!1,this.dragStartPoint=[-1,-1],this.dragPoint=[-1,-1]}complete(t){t.getActiveHandlerLock()||t.activateDefaultHandler()}activate(t){t.setActiveHandlerLock(this.options.defaultLock),this.onActivate(t)}deactivate(t){this.onDeactivate(t)}onActivate(t){}onDeactivate(t){}onActionPerformed(t){}initialize(t,e){}update(t,e){}updateHovering(t,e){}finalize(t,e){}pointerDown(t,e){if(e.button===Fr.BUTTON1){const n=t.canvas;this.dragging=!0,this.dragStartPoint=n.globalCoordTransformRev([e.x,e.y]),this.dragPoint=On(this.dragStartPoint),this.initialize(t,e),t.repaint(),this.drawDragging(t,e)}}pointerUp(t,e){e.button===Fr.BUTTON1&&this.dragging&&(this.finalize(t,e),t.repaint(),this.reset(),this.complete(t))}pointerMove(t,e){const n=t.canvas;this.dragging?(this.dragPoint=n.globalCoordTransformRev([e.x,e.y]),this.update(t,e),t.repaint(),this.drawDragging(t,e)):(this.updateHovering(t,e),t.repaint(),this.drawHovering(t,e))}keyDown(t,e){return e.key==="Escape"&&this.dragging&&(t.transform.cancelAction(),t.repaint(),this.reset(),this.complete(t)),!1}keyUp(t,e){}drawSelection(t){}drawHovering(t,e){}drawDragging(t,e){}},na=class{constructor(t){this.hasHandle=!1,this.dragging=!1,this.dragStartPoint=[-1,-1],this.dragStartPointGCS=[-1,-1],this.dragStartPointCCS=[-1,-1],this.dragPrevPoint=[-1,-1],this.dragPrevPointGCS=[-1,-1],this.dragPrevPointCCS=[-1,-1],this.dragPoint=[-1,-1],this.dragPointGCS=[-1,-1],this.dragPointCCS=[-1,-1],this.dx=0,this.dy=0,this.dxStep=0,this.dyStep=0,this.dxGCS=0,this.dyGCS=0,this.dxStepGCS=0,this.dyStepGCS=0,this.manipulator=t,this.reset()}reset(){this.dragging=!1,this.dragStartPoint=[-1,-1],this.dragStartPointGCS=[-1,-1],this.dragStartPointCCS=[-1,-1],this.dragPrevPoint=[-1,-1],this.dragPrevPointGCS=[-1,-1],this.dragPrevPointCCS=[-1,-1],this.dragPoint=[-1,-1],this.dragPointGCS=[-1,-1],this.dragPointCCS=[-1,-1],this.dx=0,this.dy=0,this.dxStep=0,this.dyStep=0,this.dxGCS=0,this.dyGCS=0,this.dxStepGCS=0,this.dyStepGCS=0}active(t,e){return!0}mouseIn(t,e,n){const r=t.canvas;let i=r.globalCoordTransformRev([n.x,n.y]);return e.visible&&e.enable&&e.containsPoint(r,i)}mouseCursor(t,e,n){return null}draw(t,e){}drawDragging(t,e,n){}drawHovering(t,e,n){}initialize(t,e,n){}update(t,e,n){}finalize(t,e,n){}pointerDown(t,e,n){const r=t.canvas;let i=!1;return n.button===Fr.BUTTON1&&this.mouseIn(t,e,n)&&(this.reset(),this.dragging=!0,this.dragStartPoint=If(r,e,[n.x,n.y]),this.dragPrevPoint=On(this.dragStartPoint),this.dragPoint=On(this.dragStartPoint),this.dragStartPointGCS=_C(r,[n.x,n.y]),this.dragPrevPointGCS=On(this.dragStartPointGCS),this.dragPointGCS=On(this.dragStartPointGCS),this.dragStartPointCCS=[n.x,n.y],this.dragPrevPointCCS=On(this.dragStartPointCCS),this.dragPointCCS=On(this.dragStartPointCCS),i=!0,this.initialize(t,e,n),this.update(t,e,n),t.repaint(),this.drawDragging(t,e,n),t.onDragStart.emit({controller:this,dragPoint:this.dragStartPoint})),i}pointerMove(t,e,n){const r=t.canvas;let i=!1;return this.dragging&&(this.dragPrevPoint=On(this.dragPoint),this.dragPrevPointGCS=On(this.dragPointGCS),this.dragPrevPointCCS=On(this.dragPointCCS),this.dragPoint=If(r,e,[n.x,n.y]),this.dragPointGCS=_C(r,[n.x,n.y]),this.dragPointCCS=[n.x,n.y],this.dx=this.dragPoint[0]-this.dragStartPoint[0],this.dy=this.dragPoint[1]-this.dragStartPoint[1],this.dxStep=this.dragPoint[0]-this.dragPrevPoint[0],this.dyStep=this.dragPoint[1]-this.dragPrevPoint[1],this.dxGCS=this.dragPointGCS[0]-this.dragStartPointGCS[0],this.dyGCS=this.dragPointGCS[1]-this.dragStartPointGCS[1],this.dxStepGCS=this.dragPointGCS[0]-this.dragPrevPointGCS[0],this.dyStepGCS=this.dragPointGCS[1]-this.dragPrevPointGCS[1],i=!0,this.update(t,e,n),t.repaint(),this.drawDragging(t,e,n),t.onDrag.emit({controller:this,dragPoint:this.dragPoint})),i}pointerUp(t,e,n){let r=!1;return n.button===Fr.BUTTON1&&this.dragging&&(this.finalize(t,e,n),this.reset(),r=!0,t.repaint(),t.onDragEnd.emit({controller:this,dragPoint:this.dragPoint})),r}keyDown(t,e,n){return this.dragging&&n.key==="Escape"?(this.reset(),t.transform.cancelAction(),t.repaint(),!0):!1}keyUp(t,e,n){return!1}},Cd=class{constructor(){this.controllers=[],this.draggingController=null}isDragging(){return this.controllers.some(t=>t.dragging)}mouseIn(t,e,n){return this.controllers.some(r=>r.active(t,e)&&r.mouseIn(t,e,n))}mouseInHandles(t,e,n){return this.controllers.some(r=>r.hasHandle&&r.active(t,e)&&r.mouseIn(t,e,n))}mouseCursor(t,e,n){for(let r of this.controllers)if(r.dragging)return r.mouseCursor(t,e,n);for(let r of this.controllers)if(r.active(t,e)&&r.mouseIn(t,e,n))return r.mouseCursor(t,e,n);return null}pointerDown(t,e,n){let r=!1;for(let i of this.controllers)if(i.active(t,e)&&i.mouseIn(t,e,n)&&(r=i.pointerDown(t,e,n),r)){this.draggingController=i;break}return r}pointerMove(t,e,n){this.mouseIn(t,e,n)&&!t.selection.isSelected(e)&&this.drawHovering(t,e,n);let r=!1;return this.draggingController&&(r=this.draggingController.pointerMove(t,e,n)),r}pointerUp(t,e,n){let r=!1;return this.draggingController&&(r=this.draggingController.pointerUp(t,e,n)),this.draggingController=null,r}keyDown(t,e,n){for(let r=0;r<this.controllers.length;r++){const i=this.controllers[r];if(i.active(t,e)&&i.keyDown(t,e,n))return!0}return!1}keyUp(t,e,n){for(let r=0;r<this.controllers.length;r++){const i=this.controllers[r];if(i.active(t,e)&&i.keyUp(t,e,n))return!0}return!1}draw(t,e){if(!this.draggingController)for(let n=this.controllers.length-1;n>=0;n--){const r=this.controllers[n];r.active(t,e)&&r.draw(t,e)}}drawHovering(t,e,n){const r=t.canvas;let s=e.getOutline().map(o=>It(r,e,o));r.storeState(),r.strokeColor=jn.SELECTION,r.strokeWidth=r.px*1.5,r.strokePattern=[],r.roughness=0,r.alpha=1,r.polyline(s),r.restoreState(),this.controllers.forEach(o=>o.active(t,e)&&o.drawHovering(t,e,n))}},oI=class{constructor(e){this.id=e}},vn=mne.getInstance(),gu={RECT:0,CIRCLE:1,RECT_WITH_PLUS:2,CROSS:3,CIRCLE_WITH_PLUS:4,FILLED_CIRCLE:5,FILLED_CIRCLE_WITH_OUTERLINE:6};function ni(t,e,n,r=0){t.fillColor=jn.BACKGROUND,t.fillStyle=en.SOLID,t.strokeColor=jn.SELECTION,t.strokeWidth=t.px*1.5,t.strokePattern=[],t.roughness=0,t.alpha=1;const i=Ec*t.px,s=[e[0]-i,e[1]-i],o=[e[0]+i,e[1]+i];switch(t.save(),t.translateTransform(e[0],e[1]),t.rotateTransform(r),t.translateTransform(-e[0],-e[1]),n){case gu.RECT:{t.fillRoundRect(s[0],s[1],o[0],o[1],0),t.strokeRoundRect(s[0],s[1],o[0],o[1],0);break}case gu.CIRCLE:{t.fillEllipse(s[0],s[1],o[0],o[1]),t.strokeEllipse(s[0],s[1],o[0],o[1]);break}case gu.RECT_WITH_PLUS:{t.fillRect(s[0],s[1],o[0],o[1]),t.strokeRect(s[0],s[1],o[0],o[1]);const a=i-3;t.line(e[0],e[1]-a,e[0],e[1]+a),t.line(e[0]-a,e[1],e[0]+a,e[1]);break}case gu.CROSS:{const a=3*t.px;t.line(e[0]-a,e[1]-a,e[0]+a,e[1]+a),t.line(e[0]+a,e[1]-a,e[0]-a,e[1]+a);break}case gu.CIRCLE_WITH_PLUS:{t.fillEllipse(s[0],s[1],o[0],o[1]),t.strokeEllipse(s[0],s[1],o[0],o[1]);const a=i-3;t.line(e[0],e[1]-a,e[0],e[1]+a),t.line(e[0]-a,e[1],e[0]+a,e[1]);break}case gu.FILLED_CIRCLE:{t.fillColor=t.strokeColor,t.fillEllipse(s[0],s[1],o[0],o[1]);break}case gu.FILLED_CIRCLE_WITH_OUTERLINE:{t.fillColor=t.strokeColor,t.fillEllipse(s[0],s[1],o[0],o[1]);const a=t.px*2;t.strokeWidth=t.px*1.5,t.strokeEllipse(s[0]-a,s[1]-a,o[0]+a,o[1]+a);break}}t.restore()}function aw(t,e,n){t.storeState(),t.strokeColor=jn.SELECTION,t.strokeWidth=t.px*1.5,t.strokePattern=[],t.fillColor=jn.SELECTION,t.roughness=0,t.alpha=1,t.line(e[0],e[1],n[0],n[1]),t.restoreState()}function Pc(t,e,n){t.storeState(),t.strokeColor=jn.SELECTION,t.strokeWidth=t.px*1.5,t.strokePattern=[t.px*2,t.px*2],t.fillColor=jn.SELECTION,t.roughness=0,t.alpha=1,t.line(e[0],e[1],n[0],n[1]),t.restoreState()}function Ta(t,e,n,r=0){const i=(Ec+4)*t.px,s=[[n[0]-i,n[1]-i],[n[0]+i,n[1]+i]],o=qs(s).map(a=>N1(a,r,n));return Bg(e,o)}function jf(t,e,n,r=di.STRAIGHT,i=!1){const s=n.map(o=>It(t,e,o));if(t.storeState(),t.strokeColor=jn.SELECTION,t.strokeWidth=t.px*1.5,t.strokePattern=[],t.fillColor=jn.SELECTION,t.roughness=0,t.alpha=.5,i)switch(r){case di.STRAIGHT:t.fillPolygon(s);break;case di.CURVE:t.fillCurve(s);break}switch(t.alpha=1,r){case di.STRAIGHT:t.polyline(s);break;case di.CURVE:t.strokeCurve(s);break}t.restoreState()}function yne(t,e,n){const r=vn.get(e.type);r&&r.drawHovering(t,e,n)}function vne(t){for(var e=[],n=0;n<t.length;n++)e.push(n);for(var n=0;n<t.length;n++){var r=Math.floor(Math.random()*n),i=e[n];e[n]=e[r],e[r]=i}return e}var aI=function(t,e){for(var n=.01,r=!1,i=e.slice(),s=.001,o=Math.exp(10),a=t(i);!r;){var l=vne(i);r=!0;for(var c=0;c<l.length;c++){i[l[c]]+=1e-6;var d=t(i);i[l[c]]-=1e-6;var u=(d-a)/1e-6;Math.abs(u)>n&&(r=!1),i[l[c]]=i[l[c]]-s*u,a=t(i)}s=o>a?s*1.1:s*.7,o=a}var f={};return f.argument=i,f.fncvalue=a,f};function bne(t,e,n,r,i,s,o){let a=e.toJSON(!1,!0);e.left=n,e.top=r,e.width=i,e.height=s;let l=e.toJSON(!1,!0),u=aI(f=>{e.fromJSON(l),e.left=e.left+f[0],e.top=e.top+f[1];let h=e.getEnclosure().map(g=>It(t,e,g));return o.map((g,b)=>Math.pow(Gn(g,h[b]),2)).reduce((g,b)=>g+b)},[0,0]);return e.fromJSON(a),u.argument}function wne(t,e,n,r){let i=e.toJSON(!1,!0);const s=ei(n);e.path=Bn(n),e.left=s[0][0],e.top=s[0][1],e.width=nn(s),e.height=rn(s);let o=e.toJSON(!1,!0),c=aI(d=>{e.fromJSON(o),e.path=e.path.map(h=>zg(h,d[0],d[1])),e.left=e.left+d[0],e.top=e.top+d[1];let u=e.path.map(h=>It(t,e,h));return r.map((h,p)=>Math.pow(Gn(h,u[p]),2)).reduce((h,p)=>h+p)},[0,0]);return e.fromJSON(i),c.argument}function pg(t,e,n){var r,i;const s=t.canvas;let o=(i=(r=t.getCurrentPage())==null?void 0:r.getShapeAt(s,n,e?[e]:[]))!=null?i:null,a=[.5,.5];if(o!=null&&o.connectable||(o=null),o instanceof gn&&!o.isClosed()){const l=o.path.map(d=>o.localCoordTransform(null,d,!0)),c=wx(n,l,Ec*2);if(c){const d=ad(l,c);a=[d,1-d]}else o=null,a=[.5,.5]}else if(o){const l=o.getBoundingRect(),c=l[0][0],d=l[0][1],u=nn(l),f=rn(l);a=[(n[0]-c)/u,(n[1]-d)/f]}return a[0]<0&&(a[0]=0),a[0]>1&&(a[0]=1),a[1]<0&&(a[1]=0),a[1]>1&&(a[1]=1),[o,a]}function cN(t,e,n){const r=t.canvas,i=e.path,s=Da(r,e),o=It(r,e,n);if(i.length>1)for(let a=0;a<i.length;a++){const l=i[a],c=It(r,e,l);if(Ta(r,o,c,s))return a}return-1}function uN(t,e,n,r=!0){const i=t.canvas,s=Da(i,e),o=e.path,a=r?e.getOutline():o,l=It(i,e,n);if(o.length>1)for(let c=0;c<o.length-1;c++){const d=o[c],u=o[c+1],f=c===0?0:ad(a,d),h=c===o.length-2?1:ad(a,u),p=(f+h)/2,b=ps(a,p),v=It(i,e,b);if(Ta(i,l,v,s))return c}return-1}function H0(t,e,n,r=0){const i=r/t.scale,s=e.getEnclosure();if(s&&s.length>0)switch(n){case Oe.TOP:{const o=Wo(s[0],s[1]);return[o[0],o[1]-i]}case Oe.RIGHT:{const o=Wo(s[1],s[2]);return[o[0]+i,o[1]]}case Oe.BOTTOM:{const o=Wo(s[3],s[2]);return[o[0],o[1]+i]}case Oe.LEFT:{const o=Wo(s[0],s[3]);return[o[0]-i,o[1]]}case Oe.LEFT_TOP:return[s[0][0]-i,s[0][1]-i];case Oe.RIGHT_TOP:return[s[1][0]+i,s[1][1]-i];case Oe.RIGHT_BOTTOM:return[s[2][0]+i,s[2][1]+i];case Oe.LEFT_BOTTOM:return[s[3][0]-i,s[3][1]+i]}return[-1,-1]}function VS(t,e){switch(e){case Oe.TOP:return[(t[0][0]+t[1][0])/2,t[0][1]];case Oe.RIGHT:return[t[1][0],(t[0][1]+t[1][1])/2];case Oe.BOTTOM:return[(t[0][0]+t[1][0])/2,t[1][1]];case Oe.LEFT:return[t[0][0],(t[0][1]+t[1][1])/2];case Oe.LEFT_TOP:return t[0];case Oe.RIGHT_TOP:return[t[1][0],t[0][1]];case Oe.RIGHT_BOTTOM:return t[1];case Oe.LEFT_BOTTOM:return[t[0][0],t[1][1]]}return[-1,-1]}function DE(t,e){return!(e.find(i=>i instanceof ah&&(i.subject===t||t.findParent(s=>i.subject===s)!==null))||e.find(i=>i.id===(t==null?void 0:t.id))||!t.canContain(e))}var yy=class extends na{constructor(t,e){super(t),this.hasHandle=!0,this.options=De({position:Oe.LEFT_TOP,distance:Ec*3},e)}active(t,e){let n=t.selection.size()===1&&t.selection.isSelected(e)&&e.rotatable&&!t.pointerDownUnselectedShape;return e instanceof gn&&e.path.length===2&&(n=!1),e instanceof gn&&e.pathEditable&&(n=!1),t.duplicatedDragging&&(n=!1),n}getControlPoint(t,e){return H0(t,e,this.options.position,this.options.distance)}mouseIn(t,e,n){const r=t.canvas,i=[n.x,n.y],s=It(r,e,this.getControlPoint(r,e));return Ta(r,i,s,0)}mouseCursor(t,e,n){const r=t.canvas;let i=Da(r,e);switch(i=Math.round(i),this.options.position){case Oe.TOP:break;case Oe.BOTTOM:i+=180;break;case Oe.LEFT:i-=90;break;case Oe.RIGHT:i+=90;break;case Oe.LEFT_TOP:i-=45;break;case Oe.RIGHT_TOP:i+=45;break;case Oe.RIGHT_BOTTOM:i+=135;break;case Oe.LEFT_BOTTOM:i-=135;break}return i=Gs(i),[_t.ROTATE,i]}initialize(t,e,n){t.transform.startAction(xt.ROTATE)}update(t,e,n){const r=e.getEnclosure(),i=this.getControlPoint(t.canvas,e),s=Wo(r[0],r[2]),o=bl(s,i),a=bl(s,this.dragPoint),l=Gs(a-o),c=Math.round(l/QT)*QT;let d=Math.round(Gs(e.rotate+c));t.transform.transact(u=>{const f=t.getCurrentPage();u.assign(e,"rotate",d),Rt(u,f,t.canvas)})}finalize(t,e,n){t.transform.endAction()}draw(t,e){const n=t.canvas,r=It(n,e,this.getControlPoint(n,e));ni(n,r,1,0)}drawDragging(t,e,n){const r=t.canvas,i=e.getEnclosure();jf(r,e,i)}},p0=class extends na{constructor(t,e){super(t),this.hasHandle=!0,this.options=De({position:Oe.RIGHT_BOTTOM},e),this.keepSizeRatio=!1,this.gridSnapper=new Ll,this.sizeSnapper=new dI,this.initialEnclosure=[],this.initialSnapshot={}}isKeepSizeRatio(){return this.keepSizeRatio}active(t,e){let n=t.selection.size()>1;return t.pointerDownUnselectedShape&&(n=!1),t.duplicatedDragging&&(n=!1),n}mouseIn(t,e,n){const r=t.canvas,i=[n.x,n.y],s=t.selection.getBoundingRect(r),o=It(r,e,VS(s,this.options.position)),a=Da(r,e);return Ta(r,i,o,a)}mouseCursor(t,e,n){const r=t.canvas;let i=Da(r,e);switch(i=Math.round(i),this.options.position){case Oe.LEFT:case Oe.RIGHT:i+=90;break;case Oe.LEFT_TOP:case Oe.RIGHT_BOTTOM:i+=135;break;case Oe.RIGHT_TOP:case Oe.LEFT_BOTTOM:i+=45;break}return i=Gs(i),i>=180&&(i-=180),[_t.RESIZE,i]}initialize(t,e,n){const r=t.canvas,i=t.selection.getShapes(),s=t.selection.getBoundingRect(r);this.keepSizeRatio=!n.shiftDown,this.gridSnapper.setPointToSnap(t,this,VS(s,this.options.position)),this.sizeSnapper.setSizeToSnap(t,e,this),this.sizeSnapper.setReferencePoints(t,i),t.transform.startAction(xt.RESIZE),this.initialEnclosure=qs(s),this.initialSnapshot={};for(const o of i)o.traverse(a=>this.initialSnapshot[a.id]=a.toJSON(!1,!0))}update(t,e,n){const r=t.selection.getShapes(),i=t.canvas;this.gridSnapper.snap(t,e,this),this.sizeSnapper.snap(t,e,this);let s=this.dx,o=this.dy,a=Bn(this.initialEnclosure);const l=ei(a),c=nn(l),u=rn(l)/c;switch(this.options.position){case Oe.LEFT_TOP:this.keepSizeRatio&&(s*u>o/u?o=s*u:s=o/u),a[0][0]+=s,a[0][1]+=o,a[4][0]+=s,a[4][1]+=o,a[1][1]+=o,a[3][0]+=s;break;case Oe.RIGHT_TOP:this.keepSizeRatio&&(s*u>o/u?o=-s*u:s=-o/u),a[1][0]+=s,a[1][1]+=o,a[0][1]+=o,a[2][0]+=s,a[4][1]+=o;break;case Oe.RIGHT_BOTTOM:this.keepSizeRatio&&(s*u>o/u?o=s*u:s=o/u),a[2][0]+=s,a[2][1]+=o,a[1][0]+=s,a[3][1]+=o;break;case Oe.LEFT_BOTTOM:this.keepSizeRatio&&(s*u>o/u?o=-s*u:s=-o/u),a[3][0]+=s,a[3][1]+=o,a[2][1]+=o,a[0][0]+=s,a[4][0]+=s;break}a=qs(Zi(ei(a)));const f=a[0][0],h=a[0][1],p=a[2][0],g=a[2][1],b=p-f,v=[[f,h],[p,g]],x=b/c;t.transform.transact(w=>{const C=t.getCurrentPage();for(const P of r)P.traverse(O=>{if(O!==e&&O instanceof zr){const T=this.initialSnapshot[O.id],M=[[T.left,T.top],[T.left+T.width,T.top+T.height]],D=mf(M,l,v),I=D[0][0],R=D[0][1],$=D[1][0],H=D[1][1],z=$-I,ee=H-R;if(D1(w,O,I-O.left,R-O.top),ld(w,O,z,ee),O instanceof gn){const ce=mf(T.path,M,D);w.assign(O,"path",ce)}this.keepSizeRatio&&(w.assign(O,"fontSize",T.fontSize*x),O instanceof St&&w.assign(O,"padding",T.padding.map(ce=>ce*x)))}});Rt(w,C,i)})}finalize(t,e,n){t.transform.endAction()}draw(t,e){const n=t.canvas,r=t.selection.getBoundingRect(n),i=It(n,e,VS(r,this.options.position)),s=Da(n,e);ni(n,i,0,s)}drawDragging(t,e,n){super.drawDragging(t,e,n);const r=t.canvas,i=t.selection.getBoundingRect(r),s=qs(i);jf(r,e,s),this.sizeSnapper.draw(t)}};function Ou(t,e){return Math.abs(t-e)<1e-4}var lI=class{moveDragPointGCS(t,e,n,r,i){n.dragPointGCS=[n.dragPointGCS[0]+r,n.dragPointGCS[1]+i],n.dragPointCCS=zs(t.canvas,n.dragPointGCS),n.dragPoint=If(t.canvas,e,n.dragPointCCS),n.dx=n.dragPoint[0]-n.dragStartPoint[0],n.dy=n.dragPoint[1]-n.dragStartPoint[1],n.dxStep=n.dragPoint[0]-n.dragPrevPoint[0],n.dyStep=n.dragPoint[1]-n.dragPrevPoint[1],n.dxGCS=n.dragPointGCS[0]-n.dragStartPointGCS[0],n.dyGCS=n.dragPointGCS[1]-n.dragStartPointGCS[1],n.dxStepGCS=n.dragPointGCS[0]-n.dragPrevPointGCS[0],n.dyStepGCS=n.dragPointGCS[1]-n.dragPrevPointGCS[1]}snapX(t,e){let n=null,r=po;for(let i=0;i<e.length;i++){const s=e[i],o=Math.abs(s[0]-t[0]);o<po&&o<r&&(n=s[0],r=o)}return n}snapY(t,e){let n=null,r=po;for(let i=0;i<e.length;i++){const s=e[i],o=Math.abs(s[1]-t[1]);o<po&&o<r&&(n=s[1],r=o)}return n}},cI=class extends lI{snap(t,e,n){}},uI=class extends cI{constructor(){super(...arguments),this.initialPointsToSnap=[],this.pointsToSnap=[],this.referencePoints=[],this.guidePoints=[],this.snappedX=null,this.snappedY=null}setReferencePoints(t,e){const n=t.canvas;this.referencePoints=[],t.getCurrentPage().traverse(i=>{if(!e.includes(i)&&i instanceof St){const s=i.getBoundingRect(),o=hc(s);this.referencePoints.push(...qs(s,!1).map(a=>Sx(n,i,a)),o)}})}sortReferencePoints(t){this.referencePoints.sort((e,n)=>{const r=Gn(e,t),i=Gn(n,t);return r-i})}drawSnappingX(t,e){const n=t.canvas,r=[];if(this.guidePoints.forEach(i=>{Ou(i[0],e)&&r.push(i)}),this.referencePoints.forEach(i=>{Ou(i[0],e)&&r.push(i)}),r.length>1){r.forEach(l=>{const c=zs(n,l);ni(n,c,3)});const i=Math.min(...r.map(l=>l[1])),s=Math.max(...r.map(l=>l[1])),o=zs(n,[e,i]),a=zs(n,[e,s]);aw(n,o,a)}}drawSnappingY(t,e){const n=t.canvas,r=[];if(this.guidePoints.forEach(i=>{Ou(i[1],e)&&r.push(i)}),this.referencePoints.forEach(i=>{Ou(i[1],e)&&r.push(i)}),r.length>1){r.forEach(l=>{const c=zs(n,l);ni(n,c,3)});const i=Math.min(...r.map(l=>l[0])),s=Math.max(...r.map(l=>l[0])),o=zs(n,[i,e]),a=zs(n,[s,e]);aw(n,o,a)}}draw(t){for(let e=0;e<this.guidePoints.length;e++){const n=this.guidePoints[e];this.snappedX!==null&&this.drawSnappingX(t,n[0]),this.snappedY!==null&&this.drawSnappingY(t,n[1])}}},Ll=class extends cI{constructor(){super(...arguments),this.initialPointToSnap=[0,0],this.pointToSnap=[0,0]}setPointToSnap(t,e,n){this.initialPointToSnap=n}snap(t,e,n){if(!t.getSnapToGrid())return;const r=n.dxGCS,i=n.dyGCS;if(r===0&&i===0)return;const[s,o]=t.getGridSize();this.pointToSnap=zg(this.initialPointToSnap,r,i);const a=[Math.round(this.pointToSnap[0]/s)*s,Math.round(this.pointToSnap[1]/o)*o],l=a[0]-this.pointToSnap[0],c=a[1]-this.pointToSnap[1];this.pointToSnap[0]+=l,this.pointToSnap[1]+=c,this.moveDragPointGCS(t,e,n,l,c)}},_x=class extends uI{setRectToSnap(t,e,n){const r=t.canvas,i=hc(n);this.initialPointsToSnap=[i,...qs(n,!1).map(s=>Sx(r,e,s))],this.snappedX=null,this.snappedY=null}snap(t,e,n,r=!0,i=!0){if(!t.getSnapToObjects())return;e.movable===Lr.HORZ&&(i=!1),e.movable===Lr.VERT&&(r=!1),e.movable===Lr.NONE&&(r=!1,i=!1);const s=r?n.dxGCS:0,o=i?n.dyGCS:0;if(s===0&&o===0)return;this.pointsToSnap=XL(this.initialPointsToSnap,s,o);const a=xE(this.pointsToSnap);if(this.sortReferencePoints(a),this.snappedX=null,r){let l=po;if(this.snappedX===null)for(let c=0;c<this.pointsToSnap.length;c++){const d=this.pointsToSnap[c],u=this.snapX(d,this.referencePoints);if(u!==null){const f=Math.abs(u-d[0]);f<l&&(this.snappedX=u,l=f)}}this.snappedX!==null&&(this.moveDragPointGCS(t,e,n,l,0),this.pointsToSnap.forEach(c=>c[0]+=l))}if(this.snappedY=null,i){let l=po;if(this.snappedY===null)for(let c=0;c<this.pointsToSnap.length;c++){const d=this.pointsToSnap[c],u=this.snapY(d,this.referencePoints);if(u!==null){const f=Math.abs(u-d[1]);f<l&&(this.snappedY=u,l=f)}}this.snappedY!==null&&(this.moveDragPointGCS(t,e,n,0,l),this.pointsToSnap.forEach(c=>c[1]+=l))}this.guidePoints=Bn(this.pointsToSnap)}},dI=class extends uI{constructor(){super(...arguments),this.initialEnclosure=[],this.sizingRatio=0}movePointsToSnap(t,e,n,r){switch(t){case Oe.TOP:return this.sizingRatio!==0?[[e[0][0],e[0][1]+r],[e[1][0]+n,e[1][1]+r]]:[[e[0][0],e[0][1]+r],[e[1][0],e[1][1]+r]];case Oe.BOTTOM:return this.sizingRatio!==0?[[e[0][0]+n,e[0][1]+r],[e[1][0],e[1][1]+r]]:[[e[0][0],e[0][1]+r],[e[1][0],e[1][1]+r]];case Oe.LEFT:return this.sizingRatio!==0?[[e[0][0]+n,e[0][1]+r],[e[1][0]+n,e[1][1]]]:[[e[0][0]+n,e[0][1]],[e[1][0]+n,e[1][1]]];case Oe.RIGHT:return this.sizingRatio!==0?[[e[0][0]+n,e[0][1]],[e[1][0]+n,e[1][1]+r]]:[[e[0][0]+n,e[0][1]],[e[1][0]+n,e[1][1]]];case Oe.LEFT_TOP:return[[e[0][0]+n,e[0][1]+r],[e[1][0],e[1][1]+r],[e[2][0]+n,e[2][1]]];case Oe.RIGHT_TOP:return[[e[0][0]+n,e[0][1]+r],[e[1][0]+n,e[1][1]],[e[2][0],e[2][1]+r]];case Oe.RIGHT_BOTTOM:return[[e[0][0]+n,e[0][1]+r],[e[1][0],e[1][1]+r],[e[2][0]+n,e[2][1]]];case Oe.LEFT_BOTTOM:return[[e[0][0]+n,e[0][1]+r],[e[1][0]+n,e[1][1]],[e[2][0],e[2][1]+r]];default:return[]}}makeGuidePoints(t){switch(t){case Oe.TOP:return[...this.pointsToSnap,[this.pointsToSnap[1][0],this.initialEnclosure[2][1]],this.initialEnclosure[3]];case Oe.BOTTOM:return[...this.pointsToSnap,this.initialEnclosure[0],[this.pointsToSnap[0][0],this.initialEnclosure[1][1]]];case Oe.LEFT:return[...this.pointsToSnap,this.initialEnclosure[1],[this.initialEnclosure[2][0],this.pointsToSnap[0][1]]];case Oe.RIGHT:return[...this.pointsToSnap,this.initialEnclosure[0],[this.initialEnclosure[3][0],this.pointsToSnap[1][1]]];case Oe.LEFT_TOP:return[...this.pointsToSnap,this.initialEnclosure[2]];case Oe.RIGHT_TOP:return[...this.pointsToSnap,this.initialEnclosure[3]];case Oe.RIGHT_BOTTOM:return[...this.pointsToSnap,this.initialEnclosure[0]];case Oe.LEFT_BOTTOM:return[...this.pointsToSnap,this.initialEnclosure[1]];default:return[]}}setSizeToSnap(t,e,n){let r=e.getBoundingRect();n instanceof p0&&(r=t.selection.getBoundingRect(t.canvas));const i=qs(r,!1),s=nn(r),o=rn(r);switch(n.isKeepSizeRatio()?this.sizingRatio=o/s:this.sizingRatio=0,n.options.position){case Oe.TOP:{this.initialPointsToSnap=[i[0],i[1]];break}case Oe.RIGHT:{this.initialPointsToSnap=[i[1],i[2]];break}case Oe.BOTTOM:{this.initialPointsToSnap=[i[2],i[3]];break}case Oe.LEFT:{this.initialPointsToSnap=[i[3],i[0]];break}case Oe.LEFT_TOP:{this.initialPointsToSnap=[i[0],i[1],i[3]];break}case Oe.RIGHT_TOP:{this.initialPointsToSnap=[i[1],i[2],i[0]];break}case Oe.RIGHT_BOTTOM:{this.initialPointsToSnap=[i[2],i[3],i[1]];break}case Oe.LEFT_BOTTOM:{this.initialPointsToSnap=[i[3],i[0],i[2]];break}}this.pointsToSnap=Bn(this.initialPointsToSnap),this.initialEnclosure=Bn(i),this.snappedX=null,this.snappedY=null}adjustDelta(t,e,n){if(this.sizingRatio!==0)switch(t.options.position){case Oe.TOP:{e=-n/this.sizingRatio;break}case Oe.BOTTOM:{e=n/this.sizingRatio;break}case Oe.LEFT:{n=-e*this.sizingRatio;break}case Oe.RIGHT:{n=e*this.sizingRatio;break}case Oe.LEFT_TOP:{e*this.sizingRatio>n/this.sizingRatio?n=e*this.sizingRatio:e=n/this.sizingRatio;break}case Oe.RIGHT_TOP:{e*this.sizingRatio>n/this.sizingRatio?n=-e*this.sizingRatio:e=-n/this.sizingRatio;break}case Oe.LEFT_BOTTOM:{e*this.sizingRatio>n/this.sizingRatio?n=-e*this.sizingRatio:e=-n/this.sizingRatio;break}case Oe.RIGHT_BOTTOM:{e*this.sizingRatio>n/this.sizingRatio?n=e*this.sizingRatio:e=n/this.sizingRatio;break}}return[e,n]}snap(t,e,n){if(!t.getSnapToObjects()||Gs(e.rotate)!==0||e instanceof St&&e.anchored)return;let i=n.dxGCS,s=n.dyGCS;if(i===0&&s===0)return;this.sizingRatio!==0&&([i,s]=this.adjustDelta(n,i,s)),this.pointsToSnap=this.movePointsToSnap(n.options.position,this.initialPointsToSnap,i,s);const o=xE(this.pointsToSnap);this.sortReferencePoints(o),this.snappedX=null,this.snappedY=null;for(let a=0;a<this.pointsToSnap.length;a++){const l=this.pointsToSnap[a];if(this.snappedX===null&&(this.snappedX=this.snapX(l,this.referencePoints),this.snappedX!==null)){let c=this.snappedX-l[0],d=0;this.sizingRatio!==0&&([c,d]=this.adjustDelta(n,c,d)),this.moveDragPointGCS(t,e,n,c,d),this.pointsToSnap=this.movePointsToSnap(n.options.position,this.pointsToSnap,c,d)}if(this.snappedY===null&&(this.snappedY=this.snapY(l,this.referencePoints),this.snappedY!==null)){let c=this.snappedY-l[1],d=0;this.sizingRatio!==0&&([d,c]=this.adjustDelta(n,d,c)),this.moveDragPointGCS(t,e,n,d,c),this.pointsToSnap=this.movePointsToSnap(n.options.position,this.pointsToSnap,d,c)}this.guidePoints=this.makeGuidePoints(n.options.position)}}},jc=class extends lI{constructor(t=!0,e=!0){super(),this.allowSnapToObjects=!0,this.allowSnapToGrid=!0,this.pointToSnap=[],this.referencePoints=[],this.snappedX=null,this.snappedY=null,this.drawSnappedX=!1,this.drawSnappedY=!1,this.snapDX=0,this.snapDY=0,this.guidePoints=[],this.allowSnapToObjects=t,this.allowSnapToGrid=e}setReferences(t,e=[]){const n=t.canvas;this.referencePoints=[],t.getCurrentPage().traverse(i=>{if(!e.includes(i)&&i instanceof St){const s=i.getBoundingRect(),o=hc(s);this.referencePoints.push(...qs(s,!1).map(a=>Sx(n,i,a)),o)}})}sortReferencePoints(t){this.referencePoints.sort((e,n)=>{const r=Gn(e,t),i=Gn(n,t);return r-i})}snap(t,e){return this.snappedX=null,this.snappedY=null,this.drawSnappedX=!1,this.drawSnappedY=!1,this.snapDX=0,this.snapDY=0,this.sortReferencePoints(e),this.snapToObjects(t,e),this.snapToGrid(t,e),this.snappedX!==null||this.snappedY!==null?(this.pointToSnap=zg(this.pointToSnap,this.snapDX,this.snapDY),this.guidePoints=[this.pointToSnap],[this.snapDX,this.snapDY]):null}snapToObjects(t,e){if(!t.getSnapToObjects()||!this.allowSnapToObjects)return;this.pointToSnap=On(e),this.snappedX=null,this.snappedY=null;const n=this.pointToSnap;this.snappedX===null&&(this.snappedX=this.snapX(n,this.referencePoints),this.snappedX!==null&&(this.drawSnappedX=!0,this.snapDX=this.snappedX-n[0])),this.snappedY===null&&(this.snappedY=this.snapY(n,this.referencePoints),this.snappedY!==null&&(this.drawSnappedY=!0,this.snapDY=this.snappedY-n[1]))}snapToGrid(t,e){if(!t.getSnapToGrid()||!this.allowSnapToGrid)return;const[n,r]=t.getGridSize();this.pointToSnap=On(e);const i=[Math.round(this.pointToSnap[0]/n)*n,Math.round(this.pointToSnap[1]/r)*r];this.snappedX===null&&(this.snappedX=i[0],this.snapDX=i[0]-this.pointToSnap[0],this.guidePoints=[]),this.snappedY===null&&(this.snappedY=i[1],this.snapDY=i[1]-this.pointToSnap[1],this.guidePoints=[])}draw(t){const e=t.canvas;if(this.snappedX!==null&&this.drawSnappedX){const n=[];if(this.guidePoints.forEach(r=>{Ou(r[0],this.snappedX)&&n.push(r)}),this.referencePoints.forEach(r=>{Ou(r[0],this.snappedX)&&n.push(r)}),n.forEach(r=>{const i=zs(e,r);ni(e,i,3)}),n.length>1){const r=Math.min(...n.map(a=>a[1])),i=Math.max(...n.map(a=>a[1])),s=zs(e,[this.snappedX,r]),o=zs(e,[this.snappedX,i]);aw(e,s,o)}}if(this.snappedY!==null&&this.drawSnappedY){const n=[];if(this.guidePoints.forEach(r=>{Ou(r[1],this.snappedY)&&n.push(r)}),this.referencePoints.forEach(r=>{Ou(r[1],this.snappedY)&&n.push(r)}),n.forEach(r=>{const i=zs(e,r);ni(e,i,3)}),n.length>1){const r=Math.min(...n.map(a=>a[0])),i=Math.max(...n.map(a=>a[0])),s=zs(e,[r,this.snappedY]),o=zs(e,[i,this.snappedY]);aw(e,s,o)}}}},an=class extends na{constructor(t,e){super(t),this.hasHandle=!0,this.options=De({position:Oe.RIGHT_BOTTOM,doScale:!1,doScaleChildren:!1},e),this.keepSizeRatio=!1,this.gridSnapper=new Ll,this.sizeSnapper=new dI,this.initialEnclosure=[],this.initialSnapshot={}}isKeepSizeRatio(){return this.options.doScale||this.keepSizeRatio}active(t,e){const n=Ec*4,r=Ec*4;let i=t.selection.size()===1&&t.selection.isSelected(e);switch(this.options.position){case Oe.TOP:i=i&&(e.sizable===_r.VERT||e.sizable===_r.FREE&&e.width>n);break;case Oe.RIGHT:i=i&&(e.sizable===_r.HORZ||e.sizable===_r.FREE&&e.height>n);break;case Oe.BOTTOM:i=i&&(e.sizable===_r.VERT||e.sizable===_r.FREE&&e.width>n);break;case Oe.LEFT:i=i&&(e.sizable===_r.HORZ||e.sizable===_r.FREE&&e.height>n);break;case Oe.LEFT_TOP:i=i&&e.width>r&&e.height>r&&(e.sizable===_r.FREE||e.sizable===_r.RATIO);break;case Oe.RIGHT_TOP:i=i&&e.width>r&&e.height>r&&(e.sizable===_r.FREE||e.sizable===_r.RATIO);break;case Oe.RIGHT_BOTTOM:i=i&&(e.sizable===_r.FREE||e.sizable===_r.RATIO);break;case Oe.LEFT_BOTTOM:i=i&&e.width>r&&e.height>r&&(e.sizable===_r.FREE||e.sizable===_r.RATIO);break}return e instanceof gn&&e.path.length===2&&(i=!1),e instanceof gn&&e.pathEditable&&(i=!1),t.pointerDownUnselectedShape&&(i=!1),t.duplicatedDragging&&(i=!1),i}mouseIn(t,e,n){const r=t.canvas,i=[n.x,n.y],s=It(r,e,H0(r,e,this.options.position)),o=Da(r,e);return Ta(r,i,s,o)}mouseCursor(t,e,n){const r=t.canvas;let i=Da(r,e);switch(i=Math.round(i),this.options.position){case Oe.LEFT:case Oe.RIGHT:i+=90;break;case Oe.LEFT_TOP:case Oe.RIGHT_BOTTOM:i+=135;break;case Oe.RIGHT_TOP:case Oe.LEFT_BOTTOM:i+=45;break}return i=Gs(i),i>=180&&(i-=180),[_t.RESIZE,i]}initialize(t,e,n){n.shiftDown?this.keepSizeRatio=e.sizable!==_r.RATIO:this.keepSizeRatio=e.sizable===_r.RATIO,this.gridSnapper.setPointToSnap(t,this,H0(t.canvas,e,this.options.position)),this.sizeSnapper.setSizeToSnap(t,e,this),this.sizeSnapper.setReferencePoints(t,[e]),t.transform.startAction(xt.RESIZE),this.initialEnclosure=e.getEnclosure(),this.initialSnapshot={},e.traverse(r=>this.initialSnapshot[r.id]=r.toJSON(!1,!0))}update(t,e,n){const r=t.canvas;this.gridSnapper.snap(t,e,this),this.sizeSnapper.snap(t,e,this);const i=e.toJSON(!1,!0),s=this.initialSnapshot[e.id];e.fromJSON(s);let o=this.dx,a=this.dy,l=Bn(this.initialEnclosure);const c=ei(l),d=nn(c),f=rn(c)/d;switch(this.options.position){case Oe.TOP:l[0][1]+=a,l[1][1]+=a,l[4][1]+=a,this.isKeepSizeRatio()&&(l[1][0]+=-a/f,l[2][0]+=-a/f);break;case Oe.RIGHT:l[1][0]+=o,l[2][0]+=o,this.isKeepSizeRatio()&&(l[2][1]+=o*f,l[3][1]+=o*f);break;case Oe.BOTTOM:l[2][1]+=a,l[3][1]+=a,this.isKeepSizeRatio()&&(l[1][0]+=a/f,l[2][0]+=a/f);break;case Oe.LEFT:l[0][0]+=o,l[3][0]+=o,l[4][0]+=o,this.isKeepSizeRatio()&&(l[2][1]+=-o*f,l[3][1]+=-o*f);break;case Oe.LEFT_TOP:this.isKeepSizeRatio()&&(o*f>a/f?a=o*f:o=a/f),l[0][0]+=o,l[0][1]+=a,l[4][0]+=o,l[4][1]+=a,l[1][1]+=a,l[3][0]+=o;break;case Oe.RIGHT_TOP:this.isKeepSizeRatio()&&(o*f>a/f?a=-o*f:o=-a/f),l[1][0]+=o,l[1][1]+=a,l[0][1]+=a,l[2][0]+=o,l[4][1]+=a;break;case Oe.RIGHT_BOTTOM:this.isKeepSizeRatio()&&(o*f>a/f?a=o*f:o=a/f),l[2][0]+=o,l[2][1]+=a,l[1][0]+=o,l[3][1]+=a;break;case Oe.LEFT_BOTTOM:this.isKeepSizeRatio()&&(o*f>a/f?a=-o*f:o=-a/f),l[3][0]+=o,l[3][1]+=a,l[2][1]+=a,l[0][0]+=o,l[4][0]+=o;break}l=qs(Zi(ei(l)));const h=l.map(M=>It(r,e,M)),p=bne(t.canvas,e,l[0][0],l[0][1],l[2][0]-l[0][0],l[2][1]-l[0][1],h);l.forEach(M=>{M[0]+=p[0],M[1]+=p[1]});const g=l[0][0],b=l[0][1],v=l[2][0],x=l[2][1],w=v-g,C=x-b,P=[[g,b],[v,x]],O=w/e.width;e.fromJSON(i);const T=e instanceof hg&&!e.wordWrap&&d!==w&&(this.options.position===Oe.RIGHT||this.options.position===Oe.LEFT);t.transform.transact(M=>{const D=t.getCurrentPage();if(T&&M.assign(e,"wordWrap",!0),ld(M,e,w,C),Hn(M,D,[e],g-e.left,b-e.top),e instanceof gn){const I=mf(s.path,c,P);M.assign(e,"path",I)}this.options.doScale&&(M.assign(e,"fontSize",s.fontSize*O),e instanceof St&&M.assign(e,"padding",s.padding.map(I=>I*O))),this.options.doScaleChildren&&e.traverse(I=>{if(I!==e&&I instanceof zr){const R=this.initialSnapshot[I.id],$=[[R.left,R.top],[R.left+R.width,R.top+R.height]],H=mf($,c,P),z=H[0][0],ee=H[0][1],ce=H[1][0],le=H[1][1],te=ce-z,Z=le-ee;if(D1(M,I,z-I.left,ee-I.top),ld(M,I,te,Z),I instanceof gn){const de=mf(R.path,$,H);M.assign(I,"path",de)}this.options.doScale&&(M.assign(I,"fontSize",R.fontSize*O),I instanceof St&&M.assign(I,"padding",R.padding.map(de=>de*O)))}}),Rt(M,D,r)})}finalize(t,e,n){t.transform.endAction()}draw(t,e){const n=t.canvas,r=It(n,e,H0(n,e,this.options.position)),i=Da(n,e);ni(n,r,0,i)}drawDragging(t,e,n){super.drawDragging(t,e,n);const r=t.canvas,i=e.getEnclosure();jf(r,e,i),this.sizeSnapper.draw(t)}},Wg=class extends na{constructor(t){super(t),this.hasHandle=!1,this.gridSnapper=new Ll,this.moveSnapper=new _x,this.container=null,this.shiftMove="none"}active(t,e){return t.selection.size()===1&&t.selection.isSelected(e)&&e.movable!==Lr.NONE&&!e.anchored}mouseCursor(t,e,n){return[_t.MOVE,0]}getTargetShape(t,e){let n=e;return n.movable===Lr.PARENT&&(n=n.findParent(r=>r.movable!==Lr.PARENT)),n}initialize(t,e,n){const r=this.getTargetShape(t,e);!r||r instanceof ws||(this.shiftMove="none",this.gridSnapper.setPointToSnap(t,this,[r.left,r.top]),this.moveSnapper.setRectToSnap(t,r,e.getBoundingRect()),this.moveSnapper.setReferencePoints(t,Vg([r])),t.transform.startAction(xt.MOVE))}update(t,e,n){var r,i;const s=this.getTargetShape(t,e);if(!s||s instanceof ws||this.dxStepGCS===0&&this.dyStepGCS===0)return;n.shiftDown&&this.shiftMove==="none"&&(this.shiftMove=Math.abs(this.dxStepGCS)>Math.abs(this.dyStepGCS)?"horz":"vert"),this.gridSnapper.snap(t,e,this),this.moveSnapper.snap(t,e,this,this.shiftMove!=="vert",this.shiftMove!=="horz"),n.shiftDown&&(this.shiftMove==="horz"?(this.dyStepGCS=0,this.dyGCS=0,this.dy=0):this.shiftMove==="vert"&&(this.dxStepGCS=0,this.dxGCS=0,this.dx=0)),(s.movable===Lr.VERT||s.movable===Lr.NONE)&&(this.dxStepGCS=0),(s.movable===Lr.HORZ||s.movable===Lr.NONE)&&(this.dyStepGCS=0);const o=t.canvas;let a=s.localCoordTransform(o,this.dragPoint,!1);this.container=(i=(r=t.getCurrentPage())==null?void 0:r.getShapeAt(o,a,[e]))!=null?i:null,this.container&&!DE(this.container,s)&&(this.container=null),this.container||(this.container=t.getCurrentPage());const l=t.getCurrentPage();t.transform.transact(c=>{Hn(c,l,[s],this.dxStepGCS,this.dyStepGCS,this.container),Rt(c,l,o)})}finalize(t,e,n){t.transform.endAction()}draw(t,e){const n=t.canvas;e instanceof gn&&(e.path.length===2||e.pathEditable)||jf(n,e,e.getEnclosure())}drawDragging(t,e,n){if(super.drawDragging(t,e,n),this.container){const r=vn.get(this.container.type);r&&r.drawHovering(t,this.container,n)}this.moveSnapper.draw(t)}},IE=class extends na{constructor(t){super(t),this.hasHandle=!1,this.gridSnapper=new Ll,this.moveSnapper=new _x,this.shiftMove="none"}active(t,e){return t.selection.size()===1&&t.selection.isSelected(e)&&e instanceof St&&e.movable!==Lr.NONE&&e.anchored&&!t.duplicatedDragging}mouseCursor(t,e,n){return[_t.MOVE,0]}initialize(t,e,n){this.shiftMove="none",this.gridSnapper.setPointToSnap(t,this,[e.left,e.top]),this.moveSnapper.setRectToSnap(t,e,e.getBoundingRect()),this.moveSnapper.setReferencePoints(t,Vg([e])),t.transform.startAction(xt.MOVE_ANCHOR)}update(t,e,n){var r;if(this.dxStepGCS===0&&this.dyStepGCS===0)return;n.shiftDown&&this.shiftMove==="none"&&(this.shiftMove=Math.abs(this.dxStepGCS)>Math.abs(this.dyStepGCS)?"horz":"vert"),this.gridSnapper.snap(t,e,this),this.moveSnapper.snap(t,e,this,this.shiftMove!=="vert",this.shiftMove!=="horz"),n.shiftDown&&(this.shiftMove==="horz"?(this.dyStepGCS=0,this.dyGCS=0,this.dy=0):this.shiftMove==="vert"&&(this.dxStepGCS=0,this.dxGCS=0,this.dx=0));const i=t.canvas,s=ps((r=e.parent.getOutline())!=null?r:[],e.anchorPosition),o=e.getCenter();o[0]+=this.dxStepGCS,o[1]+=this.dyStepGCS;const a=bl(s,o),l=Gn(o,s);t.transform.transact(c=>{const d=t.getCurrentPage();TE(c,e,a,l),Rt(c,d,i)})}finalize(t,e,n){t.transform.endAction()}draw(t,e){var n,r;const i=t.canvas,s=e.getEnclosure(),o=Wo(s[0],s[2]),a=It(i,e,o),l=ps((n=e.parent.getOutline())!=null?n:[],e.anchorPosition),c=It(i,(r=e.parent)!=null?r:e,l);jf(i,e,s),Pc(i,a,c)}drawDragging(t,e,n){var r,i;super.drawDragging(t,e,n);const s=t.canvas,o=e.getEnclosure(),a=Wo(o[0],o[2]),l=It(s,e,a),c=ps((r=e.parent.getOutline())!=null?r:[],e.anchorPosition),d=It(s,(i=e.parent)!=null?i:e,c);jf(s,e,o),Pc(s,l,d),this.moveSnapper.draw(t)}},$E=class extends na{constructor(t){super(t),this.hasHandle=!0,this.ghost=[],this.anchorPosition=.5,this.anchorPoint=[-1,-1],this.outOfPath=!1}active(t,e){return t.selection.size()===1&&t.selection.isSelected(e)&&e instanceof St&&e.movable!==Lr.NONE&&e.anchored&&!t.duplicatedDragging}mouseIn(t,e,n){const r=t.canvas,i=[n.x,n.y],s=ps(e.parent.getOutline(),e.anchorPosition),o=It(r,e.parent,s);return Ta(r,i,o)}mouseCursor(t,e,n){return[_t.POINTER,0]}initialize(t,e,n){var r;this.ghost=e.getEnclosure(),this.anchorPosition=e.anchorPosition,this.anchorPoint=ps((r=e.parent.getOutline())!=null?r:[],e.anchorPosition),this.outOfPath=!1,t.transform.startAction(xt.MOVE_ANCHOR)}update(t,e,n){const r=t.canvas;let i=e.getEnclosure();const s=It(r,e,this.dragPoint),o=If(r,e.parent,s),a=e.parent.getOutline(),l=wx(o,a,po);l&&Gn(l,o)<=po?(this.anchorPosition=ad(a,l),this.anchorPoint=l,this.outOfPath=!1):(this.anchorPosition=e.anchorPosition,this.anchorPoint=ps(a,e.anchorPosition),this.outOfPath=!0),this.ghost=i.map(c=>[c[0]+this.dxStep,c[1]+this.dyStep]),t.transform.transact(c=>{const d=t.getCurrentPage();c.assign(e,"anchorPosition",this.anchorPosition),Rt(c,d,r)})}finalize(t,e,n){t.transform.endAction()}draw(t,e){var n,r;const i=t.canvas,s=ps((n=e.parent.getOutline())!=null?n:[],e.anchorPosition),o=It(i,(r=e.parent)!=null?r:e,s);ni(i,o,5)}drawDragging(t,e,n){var r;super.drawDragging(t,e,n);const i=t.canvas,s=e.getEnclosure();if(jf(i,e,s),!this.outOfPath){const o=Wo(s[0],s[2]),a=It(i,e,o),l=It(i,(r=e.parent)!=null?r:e,this.anchorPoint);Pc(i,a,l),ni(i,l,5)}}},Gi=class extends na{constructor(t,e){super(t),this.hasHandle=!0,this.gridSnapper=new Ll,this.connector=null,this.options=De({position:Oe.BOTTOM,distance:Ec*4},e)}active(t,e){return t.options.showCreateConnectorController&&t.selection.size()===1&&t.selection.isSelected(e)&&e.connectable&&!t.pointerDownUnselectedShape&&!t.duplicatedDragging}getControlPoint(t,e){return H0(t,e,this.options.position,this.options.distance)}mouseIn(t,e,n){const r=t.canvas,i=[n.x,n.y],s=It(r,e,this.getControlPoint(r,e));return Ta(r,i,s,0)}mouseCursor(t,e,n){return[_t.POINTER,0]}initialize(t,e,n){this.gridSnapper.setPointToSnap(t,this,this.dragPointGCS),this.connector=t.factory.createConnector(e,[.5,.5],null,[.5,.5],[this.dragStartPointGCS,this.dragPointGCS]);const r=t.getCurrentPage();t.transform.startAction(xt.INSERT),t.transform.transact(i=>{vs(i,this.connector,r),Rt(i,r,t.canvas)})}update(t,e,n){if(this.connector){this.gridSnapper.snap(t,e,this);const[r,i]=pg(t,this.connector,this.dragPointGCS);t.transform.transact(s=>{const o=t.getCurrentPage();ko(s,this.connector,[this.dragStartPointGCS,this.dragPointGCS]),s.assignRef(this.connector,"head",r),s.assign(this.connector,"headAnchor",i),Rt(s,o,t.canvas)})}}finalize(t,e,n){this.dx===0&&this.dy===0?t.transform.cancelAction():t.transform.endAction()}draw(t,e){const n=t.canvas,r=It(n,e,this.getControlPoint(n,e));ni(n,r,gu.FILLED_CIRCLE,0)}drawDragging(t,e,n){if(this.connector){const r=t.canvas,i=this.connector.getTailAnchorPoint(),s=this.connector.getHeadAnchorPoint(),o=It(r,e,i),a=It(r,this.connector,s),l=this.connector.path.map(c=>It(r,this.connector,c));Pc(r,o,l[0]),Pc(r,a,l[l.length-1]),ni(r,o,this.connector.tail?5:1),ni(r,a,this.connector.head?5:1)}}},vy=class extends Cd{constructor(){super(),this.controllers.push(new an(this,{position:Oe.TOP})),this.controllers.push(new an(this,{position:Oe.RIGHT})),this.controllers.push(new an(this,{position:Oe.BOTTOM})),this.controllers.push(new an(this,{position:Oe.LEFT})),this.controllers.push(new an(this,{position:Oe.LEFT_TOP})),this.controllers.push(new an(this,{position:Oe.RIGHT_TOP})),this.controllers.push(new an(this,{position:Oe.RIGHT_BOTTOM})),this.controllers.push(new an(this,{position:Oe.LEFT_BOTTOM})),this.controllers.push(new yy(this)),this.controllers.push(new IE(this)),this.controllers.push(new $E(this)),this.controllers.push(new Wg(this)),this.controllers.push(new Gi(this,{position:Oe.TOP})),this.controllers.push(new Gi(this,{position:Oe.BOTTOM})),this.controllers.push(new Gi(this,{position:Oe.LEFT})),this.controllers.push(new Gi(this,{position:Oe.RIGHT}))}};vn.define("Rectangle",new vy);vn.define("Ellipse",new vy);vn.define("Image",new vy);vn.define("Frame",new vy);vn.define("Icon",new vy);var xne=class extends Cd{constructor(){super(),this.controllers.push(new an(this,{position:Oe.LEFT})),this.controllers.push(new an(this,{position:Oe.RIGHT})),this.controllers.push(new an(this,{position:Oe.LEFT_TOP,doScale:!0})),this.controllers.push(new an(this,{position:Oe.RIGHT_TOP,doScale:!0})),this.controllers.push(new an(this,{position:Oe.RIGHT_BOTTOM,doScale:!0})),this.controllers.push(new an(this,{position:Oe.LEFT_BOTTOM,doScale:!0})),this.controllers.push(new yy(this)),this.controllers.push(new IE(this)),this.controllers.push(new $E(this)),this.controllers.push(new Wg(this)),this.controllers.push(new Gi(this,{position:Oe.TOP})),this.controllers.push(new Gi(this,{position:Oe.BOTTOM})),this.controllers.push(new Gi(this,{position:Oe.LEFT})),this.controllers.push(new Gi(this,{position:Oe.RIGHT}))}};vn.define("Text",new xne);var Sne=class extends na{constructor(t){super(t),this.hasHandle=!0,this.gridSnapper=new Ll,this.controlPoint=-1,this.controlPath=[]}active(t,e){return t.selection.size()===1&&t.selection.isSelected(e)&&e instanceof Bs&&!t.pointerDownUnselectedShape&&!t.duplicatedDragging}mouseIn(t,e,n){if(e instanceof Bs){const r=[n.x,n.y],i=It(t.canvas,e,e.getTailAnchorPoint()),s=It(t.canvas,e,e.getHeadAnchorPoint());if(Ta(t.canvas,r,i)||Ta(t.canvas,r,s))return!0}return!1}mouseCursor(t,e,n){return[_t.POINTER,0]}initialize(t,e,n){if(e instanceof Bs){const r=It(t.canvas,e,e.getTailAnchorPoint()),i=It(t.canvas,e,e.getHeadAnchorPoint());Ta(t.canvas,this.dragStartPointCCS,i)&&(this.controlPoint=e.path.length-1),Ta(t.canvas,this.dragStartPointCCS,r)&&(this.controlPoint=0),this.controlPath=Bn(e.path)}this.controlPoint>=0&&this.gridSnapper.setPointToSnap(t,this,this.dragPointGCS),t.transform.startAction(xt.RECONNECT)}update(t,e,n){this.gridSnapper.snap(t,e,this);const[r,i]=pg(t,e,this.dragPoint);let s=Bn(this.controlPath);r||(s[this.controlPoint]=this.dragPoint);const o=this.controlPoint>0;t.transform.transact(a=>{const l=t.getCurrentPage();ko(a,e,s),a.assignRef(e,o?"head":"tail",r),a.assign(e,o?"headAnchor":"tailAnchor",i),Rt(a,l,t.canvas)})}finalize(t,e,n){t.transform.endAction()}draw(t,e){if(e instanceof Bs){const n=t.canvas,r=e.getTailAnchorPoint(),i=e.getHeadAnchorPoint(),s=It(n,e,r),o=It(n,e,i),a=e.path.map(l=>It(n,e,l));Pc(n,s,a[0]),Pc(n,o,a[a.length-1]),ni(n,s,e.tail?5:1),ni(n,o,e.head?5:1)}}drawDragging(t,e,n){if(this.draw(t,e),e instanceof Bs){const r=this.controlPoint>0;if(!r&&e.tail&&e.tail.connectable){const i=vn.get(e.tail.type);i&&i.drawHovering(t,e.tail,n)}if(r&&e.head&&e.head.connectable){const i=vn.get(e.head.type);i&&i.drawHovering(t,e.head,n)}}}},kne=class extends na{constructor(t){super(t),this.hasHandle=!1,this.gridSnapper=new Ll,this.moveSnapper=new _x,this.controlPath=[],this.initialHead=null,this.initialTail=null,this.container=null,this.shiftMove="none"}active(t,e){return t.selection.size()===1&&t.selection.isSelected(e)&&e.movable!==Lr.NONE&&e instanceof Bs}mouseCursor(t,e,n){return[_t.MOVE,0]}initialize(t,e,n){this.shiftMove="none",this.initialHead=e.head,this.initialTail=e.tail,this.gridSnapper.setPointToSnap(t,this,[e.left,e.top]),(this.initialHead===null||this.initialTail===null)&&(this.moveSnapper.setRectToSnap(t,e,e.getBoundingRect()),this.moveSnapper.setReferencePoints(t,Vg([e]))),this.controlPath=Bn(e.path),this.controlPath[0]=e.getTailAnchorPoint(),this.controlPath[this.controlPath.length-1]=e.getHeadAnchorPoint(),t.transform.startAction(xt.REPATH)}update(t,e,n){var r,i;let s=e;if(s.movable===Lr.PARENT&&(s=s.findParent(p=>p.movable!==Lr.PARENT)),!s||s instanceof ws||this.dxStepGCS===0&&this.dyStepGCS===0)return;n.shiftDown&&this.shiftMove==="none"&&(this.shiftMove=Math.abs(this.dxStepGCS)>Math.abs(this.dyStepGCS)?"horz":"vert"),this.gridSnapper.snap(t,s,this),(this.initialHead===null||this.initialTail===null)&&this.moveSnapper.snap(t,s,this,this.shiftMove!=="vert",this.shiftMove!=="horz"),n.shiftDown&&(this.shiftMove==="horz"?(this.dyStepGCS=0,this.dyGCS=0,this.dy=0):this.shiftMove==="vert"&&(this.dxStepGCS=0,this.dxGCS=0,this.dx=0)),(s.movable===Lr.VERT||s.movable===Lr.NONE)&&(this.dx=0),(s.movable===Lr.HORZ||s.movable===Lr.NONE)&&(this.dy=0);const o=t.canvas;let a=s.localCoordTransform(o,this.dragPoint,!1);this.container=(i=(r=t.getCurrentPage())==null?void 0:r.getShapeAt(o,a,[e]))!=null?i:null,this.container&&!DE(this.container,s)&&(this.container=null),this.container||(this.container=t.getCurrentPage());let l=this.controlPath.map(p=>[p[0]+this.dx,p[1]+this.dy]),[c,d]=pg(t,e,l[l.length-1]),[u,f]=pg(t,e,l[0]);this.initialHead!==c&&(c=null,d=[.5,.5]),this.initialTail!==u&&(u=null,f=[.5,.5]);const h=t.getCurrentPage();t.transform.transact(p=>{(this.dx!==0||this.dy!==0)&&(ko(p,e,l),p.assignRef(e,"head",c),p.assignRef(e,"tail",u),p.assign(e,"headAnchor",d),p.assign(e,"tailAnchor",f),this.container&&e.parent!==this.container&&Sl(p,e,this.container),Rt(p,h,o))})}finalize(t,e,n){t.transform.endAction()}drawDragging(t,e,n){if(super.drawDragging(t,e,n),this.container){const r=vn.get(this.container.type);r&&r.drawHovering(t,this.container,n)}(this.initialHead===null||this.initialTail===null)&&this.moveSnapper.draw(t)}},fI=class extends na{constructor(t,e){super(t),this.hasHandle=!0,this.options=De({exceptEndPoints:!1},e),this.gridSnapper=new Ll,this.controlPoint=0,this.controlPath=[]}active(t,e){return t.selection.size()===1&&t.selection.isSelected(e)&&e instanceof gn&&e.pathEditable&&!t.pointerDownUnselectedShape&&!t.duplicatedDragging}mouseIn(t,e,n){const r=If(t.canvas,e,[n.x,n.y]),i=cN(t,e,r);return this.options.exceptEndPoints?i>0&&i<e.path.length-1:i>=0}mouseCursor(t,e,n){return[_t.POINTER,0]}initialize(t,e,n){this.controlPoint=cN(t,e,this.dragStartPoint),this.controlPath=Bn(e.path),this.controlPoint>=0&&this.gridSnapper.setPointToSnap(t,this,this.controlPath[this.controlPoint]),t.transform.startAction(xt.REPATH)}update(t,e,n){this.gridSnapper.snap(t,e,this);let r=Bn(this.controlPath);r[this.controlPoint][0]+=this.dx,r[this.controlPoint][1]+=this.dy,this.controlPoint===0&&Gn(r[0],r[r.length-1])<po&&(r[0][0]=r[r.length-1][0],r[0][1]=r[r.length-1][1]),this.controlPoint===r.length-1&&Gn(r[0],r[r.length-1])<po&&(r[r.length-1][0]=r[0][0],r[r.length-1][1]=r[0][1]),r=PE(r,gE),t.transform.transact(i=>{const s=t.canvas,o=t.getCurrentPage();ko(i,e,r),Rt(i,o,s)})}finalize(t,e,n){t.transform.endAction()}draw(t,e){const n=t.canvas,r=e.path,i=this.options.exceptEndPoints?1:0,s=this.options.exceptEndPoints?r.length-2:r.length-1;if(s>=i)for(let o=i;o<=s;o++){const a=It(n,e,r[o]);ni(n,a,1)}if(e.isClosed()){const o=It(n,e,r[0]);ni(n,o,5)}}drawDragging(t,e,n){}},hI=class extends na{constructor(t){super(t),this.hasHandle=!0,this.gridSnapper=new Ll,this.controlPoint=-1,this.controlPath=[]}active(t,e){return t.selection.size()===1&&t.selection.isSelected(e)&&e instanceof gn&&e.pathEditable&&!t.pointerDownUnselectedShape&&!t.duplicatedDragging}mouseIn(t,e,n){const r=If(t.canvas,e,[n.x,n.y]);return uN(t,e,r)>=0}mouseCursor(t,e,n){return[_t.POINTER,0]}initialize(t,e,n){this.controlPath=Bn(e.path),this.controlPoint=uN(t,e,this.dragStartPoint),this.controlPoint>=0&&this.gridSnapper.setPointToSnap(t,this,Wo(this.controlPath[this.controlPoint],this.controlPath[this.controlPoint+1])),t.transform.startAction(xt.REPATH)}update(t,e,n){this.gridSnapper.snap(t,e,this);let r=Bn(this.controlPath);r.splice(this.controlPoint+1,0,Wo(r[this.controlPoint],r[this.controlPoint+1])),r[this.controlPoint+1][0]+=this.dx,r[this.controlPoint+1][1]+=this.dy,r=PE(r,gE);const i=t.canvas,s=r.map(a=>It(i,e,a)),o=wne(i,e,r,s);r=r.map(a=>[a[0]+o[0],a[1]+o[1]]),t.transform.transact(a=>{const l=t.getCurrentPage();ko(a,e,r),Rt(a,l,i)})}finalize(t,e,n){t.transform.endAction()}draw(t,e){const n=t.canvas,r=e.path,i=e.getOutline(),s=Da(n,e);if(r.length>1)for(let o=0;o<r.length-1;o++){const a=r[o],l=r[o+1],c=o===0?0:ad(i,a),d=o===r.length-2?1:ad(i,l),u=(c+d)/2,f=ps(i,u),h=It(n,e,f);ni(n,h,4,s)}}drawDragging(t,e,n){}},Cne=class extends Cd{constructor(){super(),this.controllers.push(new Sne(this)),this.controllers.push(new fI(this,{exceptEndPoints:!0})),this.controllers.push(new hI(this)),this.controllers.push(new kne(this))}};vn.define("Connector",new Cne);var jE=class extends Cd{constructor(){super(),this.controllers.push(new fI(this)),this.controllers.push(new hI(this)),this.controllers.push(new yy(this)),this.controllers.push(new an(this,{position:Oe.TOP})),this.controllers.push(new an(this,{position:Oe.RIGHT})),this.controllers.push(new an(this,{position:Oe.BOTTOM})),this.controllers.push(new an(this,{position:Oe.LEFT})),this.controllers.push(new an(this,{position:Oe.LEFT_TOP,doScale:!0})),this.controllers.push(new an(this,{position:Oe.RIGHT_TOP,doScale:!0})),this.controllers.push(new an(this,{position:Oe.RIGHT_BOTTOM,doScale:!0})),this.controllers.push(new an(this,{position:Oe.LEFT_BOTTOM,doScale:!0})),this.controllers.push(new Wg(this))}};vn.define("Line",new jE);vn.define("Freehand",new jE);vn.define("Highlighter",new jE);var _ne=class extends Cd{constructor(){super(),this.controllers.push(new an(this,{position:Oe.LEFT_TOP,doScale:!0,doScaleChildren:!0})),this.controllers.push(new an(this,{position:Oe.RIGHT_TOP,doScale:!0,doScaleChildren:!0})),this.controllers.push(new an(this,{position:Oe.RIGHT_BOTTOM,doScale:!0,doScaleChildren:!0})),this.controllers.push(new an(this,{position:Oe.LEFT_BOTTOM,doScale:!0,doScaleChildren:!0})),this.controllers.push(new yy(this)),this.controllers.push(new Wg(this))}};vn.define("Group",new _ne);var Ane=class extends Cd{constructor(){super(),this.controllers.push(new an(this,{position:Oe.TOP})),this.controllers.push(new an(this,{position:Oe.BOTTOM})),this.controllers.push(new an(this,{position:Oe.LEFT})),this.controllers.push(new an(this,{position:Oe.RIGHT})),this.controllers.push(new an(this,{position:Oe.LEFT_TOP,doScale:!0})),this.controllers.push(new an(this,{position:Oe.RIGHT_TOP,doScale:!0})),this.controllers.push(new an(this,{position:Oe.RIGHT_BOTTOM,doScale:!0})),this.controllers.push(new an(this,{position:Oe.LEFT_BOTTOM,doScale:!0})),this.controllers.push(new Wg(this)),this.controllers.push(new Gi(this,{position:Oe.TOP})),this.controllers.push(new Gi(this,{position:Oe.BOTTOM})),this.controllers.push(new Gi(this,{position:Oe.LEFT})),this.controllers.push(new Gi(this,{position:Oe.RIGHT}))}};vn.define("Embed",new Ane);var Ene=class extends na{constructor(t){super(t),this.hasHandle=!1,this.gridSnapper=new Ll,this.moveSnapper=new _x,this.container=null,this.shiftMove="none"}active(t,e){return t.selection.size()>1}mouseIn(t,e,n){if(e instanceof ws){const r=t.canvas,i=r.globalCoordTransformRev([n.x,n.y]);for(let s of t.selection.getShapes())if(s.visible&&s.enable&&s.containsPoint(r,i))return!0}return!1}mouseCursor(t,e,n){return[_t.MOVE,0]}initialize(t,e,n){const r=t.selection.getBoundingRect(t.canvas),i=t.selection.getShapes();this.shiftMove="none",this.gridSnapper.setPointToSnap(t,this,r[0]),this.moveSnapper.setRectToSnap(t,e,r),this.moveSnapper.setReferencePoints(t,Vg(i)),t.transform.startAction(xt.MOVE)}update(t,e,n){var r,i;const s=t.canvas;t.selection.getBoundingRect(t.canvas);const o=t.selection.getShapes();if(!(this.dxStepGCS===0&&this.dyStepGCS===0)){if(n.shiftDown&&this.shiftMove==="none"&&(this.shiftMove=Math.abs(this.dxStepGCS)>Math.abs(this.dyStepGCS)?"horz":"vert"),this.gridSnapper.snap(t,e,this),this.moveSnapper.snap(t,e,this,this.shiftMove!=="vert",this.shiftMove!=="horz"),n.shiftDown&&(this.shiftMove==="horz"?(this.dyStepGCS=0,this.dyGCS=0,this.dy=0):this.shiftMove==="vert"&&(this.dxStepGCS=0,this.dxGCS=0,this.dx=0)),this.container=(i=(r=t.getCurrentPage())==null?void 0:r.getShapeAt(s,this.dragPointGCS,o))!=null?i:null,this.container){for(let a of o)if(!DE(this.container,a)){this.container=null;break}}this.container||(this.container=t.getCurrentPage()),t.transform.transact(a=>{const l=t.getCurrentPage();Hn(a,l,o,this.dxStepGCS,this.dyStepGCS,this.container),Rt(a,l,s)})}}finalize(t,e,n){t.transform.endAction()}draw(t,e){if(e instanceof ws){const n=t.canvas;let r=t.selection.getEnclosure(t.canvas).map(i=>It(n,e,i));n.storeState(),n.strokeColor=jn.SELECTION,n.strokeWidth=n.px*1.5,n.strokePattern=[],n.roughness=0,n.alpha=1,n.polyline(r),t.selection.getShapes().forEach(i=>{const s=i.getEnclosure().map(o=>It(n,i,o));n.polyline(s)}),n.restoreState()}}drawDragging(t,e,n){if(this.container){const r=vn.get(this.container.type);r&&r.drawHovering(t,this.container,n)}this.moveSnapper.draw(t)}},Pne=class extends Cd{constructor(){super(),this.controllers.push(new p0(this,{position:Oe.LEFT_TOP})),this.controllers.push(new p0(this,{position:Oe.RIGHT_TOP})),this.controllers.push(new p0(this,{position:Oe.RIGHT_BOTTOM})),this.controllers.push(new p0(this,{position:Oe.LEFT_BOTTOM})),this.controllers.push(new Ene(this))}};vn.define("selections",new Pne);var Tne=class extends Cd{constructor(){super(),this.controllers.push(new an(this,{position:Oe.LEFT_TOP,doScale:!0})),this.controllers.push(new an(this,{position:Oe.RIGHT_TOP,doScale:!0})),this.controllers.push(new an(this,{position:Oe.RIGHT_BOTTOM,doScale:!0})),this.controllers.push(new an(this,{position:Oe.LEFT_BOTTOM,doScale:!0})),this.controllers.push(new yy(this)),this.controllers.push(new IE(this)),this.controllers.push(new $E(this)),this.controllers.push(new Wg(this)),this.controllers.push(new Gi(this,{position:Oe.TOP})),this.controllers.push(new Gi(this,{position:Oe.BOTTOM})),this.controllers.push(new Gi(this,{position:Oe.LEFT})),this.controllers.push(new Gi(this,{position:Oe.RIGHT}))}};vn.define("Mirror",new Tne);var Nne=Pn.object({orient:Pn.enum(["top","bottom","left","right","center"]).default("top"),align:Pn.enum(["left","left-outside","left-border","center","right","right-outside","right-border","top","top-outside","top-border","middle","bottom","bottom-outside","bottom-border","fill"]).default("left"),query:Pn.string().default(""),gap:Pn.number().default(0),fillLast:Pn.boolean().default(!1)});function dN(t,e,n,r,i,s=0){let o=!1;const a=r.innerLeft,l=r.left,c=r.innerRight,d=r.right,u=r.innerWidth;let f=0,h=0,p=-1;switch(i){case"left":f=a-n.left;break;case"left-outside":f=l-n.right;break;case"left-border":f=Math.round(l-n.width/2)-n.left;break;case"center":f=a+Math.round((r.innerWidth-n.width)/2)-n.left;break;case"right":f=c-n.right;break;case"right-outside":f=d-n.left;break;case"right-border":f=Math.round(d-n.width/2)-n.left;break;case"fill":f=a-n.left,p=u;break}return f+=s,o=Hn(t,e,[n],f,h),p>-1&&(o=ld(t,n,p<0?n.width:p,n.height)||o),o}function fN(t,e,n,r,i,s=0){let o=!1;const a=r.innerTop,l=r.top,c=r.innerBottom,d=r.bottom,u=r.innerHeight;let f=0,h=0,p=-1;switch(i){case"top":h=a-n.top;break;case"top-outside":h=l-n.bottom;break;case"top-border":h=Math.round(l-n.height/2)-n.top;break;case"middle":h=a+Math.round((r.innerHeight-n.height)/2)-n.top;break;case"bottom":h=c-n.bottom;break;case"bottom-outside":h=d-n.top;break;case"bottom-border":h=Math.round(d-n.height/2)-n.top;break;case"fill":h=a-n.top,p=u;break}return h+=s,o=Hn(t,e,[n],f,h),p>-1&&(o=ld(t,n,n.width,p<0?n.height:p)||o),o}function Mne(t,e,n,r,i){var s,o,a,l;let c=!1;if(n instanceof St){const d=n.parseQueryString(typeof i.query=="string"?i.query:"");switch(i.orient){case"top":{const u=[...n.children].sort((h,p)=>h.top-p.top).filter(h=>h instanceof St&&h.visible&&h.match(d));let f=n.innerTop;for(let h of u)if(h instanceof St&&(c=J2(t,h,f)||c,f=h.bottom+((s=i.gap)!=null?s:0),c=dN(t,e,h,n,i.align)||c,i.fillLast&&h===u[u.length-1])){const p=n.innerBottom-h.top;c=OC(t,h,Math.max(p,0))||c}break}case"bottom":{const u=[...n.children].sort((h,p)=>h.top-p.top).filter(h=>h instanceof St&&h.visible&&h.match(d));let f=n.innerBottom;for(let h of u.reverse())if(h instanceof St&&(c=$D(t,h,f)||c,f=h.top-((o=i.gap)!=null?o:0),c=dN(t,e,h,n,i.align)||c,i.fillLast&&h===u[u.length-1])){const p=h.bottom-n.innerTop;c=J2(t,h,n.innerTop)||c,c=OC(t,h,Math.max(p,0))||c}break}case"left":{const u=[...n.children].sort((h,p)=>h.left-p.left).filter(h=>h instanceof St&&h.visible&&h.match(d));let f=n.innerLeft;for(let h of u)if(h instanceof St&&(c=K2(t,h,f)||c,f=h.right+((a=i.gap)!=null?a:0),c=fN(t,e,h,n,i.align)||c,i.fillLast&&h===u[u.length-1])){const p=n.innerRight-h.left;c=MC(t,h,Math.max(p,0))||c}break}case"right":{const u=[...n.children].sort((h,p)=>h.left-p.left).filter(h=>h instanceof St&&h.visible&&h.match(d));let f=n.innerRight;for(let h of u.reverse())if(h instanceof St&&(c=ID(t,h,f)||c,f=h.left-((l=i.gap)!=null?l:0),c=fN(t,e,h,n,i.align)||c,i.fillLast&&h===u[u.length-1])){const p=h.right-n.innerLeft;c=K2(t,h,n.innerLeft)||c,c=MC(t,h,Math.max(p,0))||c}break}case"center":{const u=[...n.children].filter(p=>p instanceof St&&p.visible&&p.match(d)),f=n.innerLeft+Math.round(n.innerWidth/2),h=n.innerTop+Math.round(n.innerHeight/2);for(let p of u)if(p instanceof St){const g=f-Math.round(p.width/2),b=h-Math.round(p.height/2);c=K2(t,p,g)||c,c=J2(t,p,b)||c}}}}return c}Qo.define("align-children",Mne,Nne);var One=Pn.object({horz:Pn.enum(["none","left","left-outside","left-border","right","right-outside","right-border","center","inside","border","outside","fill"]).default("left"),vert:Pn.enum(["none","top","top-outside","top-border","bottom","bottom-outside","bottom-border","middle","inside","border","outside","fill"]).default("top"),horzOffset:Pn.number().default(0),vertOffset:Pn.number().default(0)});function Rne(t,e,n,r,i){let s=!1;const o=n.parent;if(o instanceof zr&&!(o instanceof ws)){let a=i.horz,l=i.vert;const c=o.left,d=o.right,u=o.top,f=o.bottom,h=o.width,p=o.height,g=n.getCenter();let b=0,v=0,x=-1,w=-1;if(i.horz==="inside"&&(a=Math.abs(c-g[0])<Math.abs(d-g[0])?"left":"right"),i.vert==="inside"&&(l=Math.abs(u-g[1])<Math.abs(f-g[1])?"top":"bottom"),i.horz==="inside"&&i.vert==="inside"){const C=Math.min(Math.abs(c-g[0]),Math.abs(d-g[0])),P=Math.min(Math.abs(u-g[1]),Math.abs(f-g[1]));C<P?l="none":a="none"}if(i.horz==="border"&&(a=Math.abs(c-g[0])<Math.abs(d-g[0])?"left-border":"right-border"),i.vert==="border"&&(l=Math.abs(u-g[1])<Math.abs(f-g[1])?"top-border":"bottom-border"),i.horz==="border"&&i.vert==="border"){const C=Math.min(Math.abs(c-g[0]),Math.abs(d-g[0])),P=Math.min(Math.abs(u-g[1]),Math.abs(f-g[1]));C<P?l="none":a="none"}if(i.horz==="outside"&&(a=Math.abs(c-g[0])<Math.abs(d-g[0])?"left-outside":"right-outside"),i.vert==="outside"&&(l=Math.abs(u-g[1])<Math.abs(f-g[1])?"top-outside":"bottom-outside"),i.horz==="outside"&&i.vert==="outside"){const C=Math.min(Math.abs(c-g[0]),Math.abs(d-g[0])),P=Math.min(Math.abs(u-g[1]),Math.abs(f-g[1]));C<P?l="none":a="none"}switch(i.horz==="fill"&&(a="left",x=h),i.vert==="fill"&&(l="top",w=p),a){case"left":b=c-n.left;break;case"left-outside":b=c-n.right;break;case"left-border":b=c-g[0];break;case"right":b=d-n.right;break;case"right-outside":b=d-n.left;break;case"right-border":b=d-g[0];break;case"center":b=o.getCenter()[0]-g[0];break}switch(l){case"top":v=u-n.top;break;case"top-outside":v=u-n.bottom;break;case"top-border":v=u-g[1];break;case"bottom":v=f-n.bottom;break;case"bottom-outside":v=f-n.top;break;case"bottom-border":v=f-g[1];break;case"middle":v=o.getCenter()[1]-g[1];break}b+=i.horzOffset||0,v+=i.vertOffset||0,s=Hn(t,e,[n],b,v),(x>-1||w>-1)&&(s=ld(t,n,x<0?n.width:x,w<0?n.height:w)||s)}return s}Qo.define("align-to-parent",Rne,One);var Lne=Pn.object({});function Dne(t,e,n,r,i){var s;let o=!1;const a=n.parent;if(n instanceof St&&a instanceof zr&&!(a instanceof ws)){const l=ps((s=a.getOutline())!=null?s:[],n.anchorPosition),c=N1([l[0],l[1]-n.anchorLength],n.anchorAngle,l),d=c[0]-n.width/2,u=c[1]-n.height/2,f=d-n.left,h=u-n.top;o=Hn(t,e,[n],f,h)}return o}Qo.define("anchor-on-parent",Dne,Lne);var Ine=Pn.object({opacity:Pn.boolean().default(!1),stroke:Pn.boolean().default(!1),fill:Pn.boolean().default(!1),font:Pn.boolean().default(!1),textAlignment:Pn.boolean().default(!1)});function $ne(t,e,n,r,i){let s=!1;const o=n.parent;return o&&!(o instanceof I1)&&(i.opacity&&(s=t.assign(n,"opacity",o.computeOpacity())||s),i.stroke&&(s=t.assign(n,"strokeColor",o.strokeColor)||s,s=t.assign(n,"strokeWidth",o.strokeWidth)||s,s=t.assign(n,"strokePattern",o.strokePattern)||s,s=t.assign(n,"roughness",o.roughness)||s),i.fill&&(s=t.assign(n,"fillColor",o.fillColor)||s,s=t.assign(n,"fillStyle",o.fillStyle)||s),i.font&&(s=t.assign(n,"fontColor",o.fontColor)||s,s=t.assign(n,"fontFamily",o.fontFamily)||s,s=t.assign(n,"fontSize",o.fontSize)||s,s=t.assign(n,"fontStyle",o.fontStyle)||s,s=t.assign(n,"fontWeight",o.fontWeight)||s),i.textAlignment&&o instanceof St&&(s=t.assign(n,"horzAlign",o.horzAlign)||s,s=t.assign(n,"vertAlign",o.vertAlign)||s,s=t.assign(n,"wordWrap",o.wordWrap)||s,s=t.assign(n,"lineHeight",o.lineHeight)||s,s=t.assign(n,"paragraphSpacing",o.paragraphSpacing)||s)),s}Qo.define("inherit-styles",$ne,Ine);var jne=Pn.object({});function Fne(t,e,n,r,i){let s=!1;return n instanceof Bs&&(s=FD(t,n)||s),s}Qo.define("adjust-route",Fne,jne);var zne=Pn.object({query:Pn.string().default(""),state:Pn.enum(["enable","visible","connectable","containable","editable","text"]).default("enable"),property:Pn.string().default("")});function Bne(t,e,n,r,i){var s;let o=!1;i.query=(s=i.query)!=null?s:{};const a=n.findByQuery(i.query);if(a){const l=n.getPropertyValue(i.property);typeof l=="boolean"&&(i.state==="enable"||i.state==="visible"||i.state==="connectable"||i.state==="containable"||i.state==="editable")&&(o=t.assign(a,i.state,l)||o),typeof l=="string"&&i.state==="text"&&(o=t.assign(a,i.state,l)||o)}return o}Qo.define("set-state-from-property",Bne,zne);var Une=Pn.object({width:Pn.enum(["ignore","children","text","text-min","parent","value"]).default("ignore"),height:Pn.enum(["ignore","children","text","text-min","parent","value"]).default("ignore"),widthValue:Pn.number().default(0),heightValue:Pn.number().default(0)});function Hne(t,e,n,r,i){if(n instanceof St){let s=n.width,o=n.height;if(i.width==="value"&&(s=i.widthValue),i.width==="value"&&(o=i.heightValue),i.width==="children"||i.height==="children"){const a=n.getChildrenBoundingRect();s=nn(a)+n.padding[1]+n.padding[3],o=rn(a)+n.padding[0]+n.padding[2]}if(n instanceof St&&(i.width==="text"||i.width==="text-min"||i.height==="text"||i.height==="text-min")){const a=kE(r,n,n.text);i.width==="text"&&(s=Math.ceil(a.minWidth+n.padding[1]+n.padding[3])),i.width==="text-min"&&(s=Math.max(n.width,Math.ceil(a.width+n.padding[1]+n.padding[3]))),i.height==="text"&&(o=Math.ceil(a.height+n.padding[0]+n.padding[2])),i.height==="text-min"&&(o=Math.max(n.height,Math.ceil(a.height+n.padding[0]+n.padding[2])))}return n.parent instanceof St&&(i.width==="parent"&&(s=n.parent.innerWidth),i.height==="parent"&&(o=n.parent.innerHeight)),ld(t,n,s,o)}return!1}Qo.define("set-size",Hne,Une);var Vne=Pn.object({type:Pn.enum(["free","horizontal","vertical"]).default("free")});function Wne(t,e,n,r,i){if(n instanceof gn){const s=n.getCenter();let o=Bn(n.path);switch(i.type){case"horizontal":o=[[o[0][0],s[1]],[o[o.length-1][0],s[1]]];break;case"vertical":o=[[s[0],o[0][1]],[s[0],o[o.length-1][1]]];break}return ko(t,n,o)}return!1}Qo.define("set-line",Wne,Vne);var qne={};Fg(qne,{ConnectorFactoryHandler:()=>wI,EllipseFactoryHandler:()=>vI,EmbedFactoryHandler:()=>EI,EraserHandler:()=>mI,FrameFactoryHandler:()=>_I,FreehandFactoryHandler:()=>SI,HandHandler:()=>pI,HighlighterFactoryHandler:()=>kI,ImageFactoryHandler:()=>CI,LineFactoryHandler:()=>xI,MirrorFactoryHandler:()=>AI,RectangleFactoryHandler:()=>yI,SelectHandler:()=>gI,TextFactoryHandler:()=>bI});var pI=class extends Es{constructor(){super(...arguments),this.dragging=!1,this.dragStartPoint=[-1,-1],this.dragPoint=[-1,-1],this.dx=0,this.dy=0}reset(){this.dragging=!1,this.dragStartPoint=[-1,-1],this.dragPoint=[-1,-1],this.dx=0,this.dy=0}pointerDown(t,e){if(e.button===Fr.BUTTON1){t.setCursor(_t.GRABBING);const n=t.canvas;this.dragging=!0,this.dragStartPoint=n.globalCoordTransformRev([e.x,e.y]),this.dragPoint=On(this.dragStartPoint),this.dx=0,this.dy=0}}pointerMove(t,e){if(t.repaint(),this.dragging){const n=t.canvas;this.dragPoint=n.globalCoordTransformRev([e.x,e.y]),this.dx=this.dragPoint[0]-this.dragStartPoint[0],this.dy=this.dragPoint[1]-this.dragStartPoint[1],t.moveOrigin(this.dx,this.dy)}}pointerUp(t,e){e.button===Fr.BUTTON1&&this.dragging&&(t.setCursor(_t.GRAB),this.reset(),this.complete(t))}onActivate(t){t.setCursor(_t.GRAB)}onDeactivate(t){t.setCursor(_t.DEFAULT)}},gI=class extends Es{constructor(){super(...arguments),this.deselectOnPointerUp=[]}getShapeAt(t,e){const n=t.canvas,r=t.getCurrentPage();if(r){let i=n.globalCoordTransformRev([e.x,e.y]);for(let s of t.selection.getShapes()){const o=vn.get(s.type);if(o&&o.mouseInHandles(t,s,e))return s}return r.getShapeAt(n,i)}return null}pointerDown(t,e){var n,r;const i=t.canvas,s=t.getCurrentPage();if(!s)return;t.duplicatedDragging=!1,t.pointerDownUnselectedShape=!1;const o=vn.get("selections");if(e.button===Fr.BUTTON1){const l=this.getShapeAt(t,e);if(l?e.shiftDown?t.selection.isSelected(l)?this.deselectOnPointerUp=[l]:t.selection.select([l],!1):t.selection.isSelected(l)||(t.pointerDownUnselectedShape=!0,t.selection.select([l])):t.selection.size()>1&&o&&o.mouseIn(t,s,e)||(e.shiftDown||t.selection.deselectAll(),this.dragging=!0,this.dragStartPoint=i.globalCoordTransformRev([e.x,e.y]),t.onDragStart.emit({controller:null,dragPoint:this.dragStartPoint})),e.altDown&&!e.modDown&&!e.shiftDown){if(l&&t.selection.isSelected(l)){const c=i.globalCoordTransformRev([e.x,e.y]);l.containsPoint(i,c)||t.selection.deselect([l])}if(t.selection.size()>0){const c=t.actions.duplicate(t.selection.getShapes(),0,0);t.selection.select(c)}t.duplicatedDragging=!0}}if(e.button===Fr.BUTTON3){const l=i.globalCoordTransformRev([e.x,e.y]),c=s.getShapeAt(i,l,[],!0);c&&!t.selection.isSelected(c)&&t.selection.select([c]),t.repaint(!0)}else t.repaint(!1);let a=[_t.DEFAULT,0];if(t.selection.size()>1&&o)try{o.pointerDown(t,s,e),o.mouseIn(t,s,e)&&(a=(n=o.mouseCursor(t,s,e))!=null?n:a)}catch(l){console.error(l)}if(t.selection.size()===1){const l=t.selection.getShapes()[0],c=vn.get(l.type);if(c)try{c.pointerDown(t,l,e),c.mouseIn(t,l,e)&&(a=(r=c.mouseCursor(t,l,e))!=null?r:a)}catch(d){console.error(d)}}Array.isArray(a)&&a.length>1?t.setCursor(a[0],a[1]):t.setCursor(_t.DEFAULT)}pointerMove(t,e){var n,r;const i=t.canvas,s=t.getCurrentPage(),o=i.globalCoordTransformRev([e.x,e.y]);if(t.repaint(!1),s){if(this.dragging){const l=i.globalCoordTransform(this.dragStartPoint),c=i.globalCoordTransform(o),d=Zi([l,c]);i.strokeColor=jn.SELECTION,i.strokeWidth=i.px*1.5,i.strokePattern=[],i.roughness=0,i.alpha=1,i.strokeRect(d[0][0],d[0][1],d[1][0],d[1][1]);for(let u of s.children)u.visit(f=>{let h=Zi([this.dragStartPoint,o]);if(f.enable&&f.visible&&f.overlapRect(i,h)){const p=vn.get(f.type);p&&p.drawHovering(t,f,e)}});t.onDrag.emit({controller:null,dragPoint:o})}else if(!e.leftButtonDown){const l=s.getShapeAt(i,o);l&&!t.selection.isSelected(l)&&yne(t,l,e)}}t.drawSelection();let a=[_t.DEFAULT,0];if(s){if(t.selection.size()>1){const l=vn.get("selections");if(l)try{l.pointerMove(t,s,e)&&(this.deselectOnPointerUp=[]),l.mouseIn(t,s,e)&&(a=(n=l.mouseCursor(t,s,e))!=null?n:a)}catch(c){console.error(c)}}if(t.selection.size()===1){const l=t.selection.getShapes()[0],c=vn.get(l.type);if(c)try{c.pointerMove(t,l,e)&&(this.deselectOnPointerUp=[]),(c.mouseIn(t,l,e)||c.isDragging())&&(a=(r=c.mouseCursor(t,l,e))!=null?r:a)}catch(d){console.error(d)}}}Array.isArray(a)&&a.length>1?t.setCursor(a[0],a[1]):t.setCursor(_t.DEFAULT)}pointerUp(t,e){var n,r;t.pointerDownUnselectedShape=!1;const i=t.canvas,s=t.getCurrentPage(),o=i.globalCoordTransformRev([e.x,e.y]);this.deselectOnPointerUp.length>0&&(t.selection.deselect(this.deselectOnPointerUp),this.deselectOnPointerUp=[]),e.button===Fr.BUTTON1&&this.dragging&&t.selection.selectArea(this.dragStartPoint[0],this.dragStartPoint[1],o[0],o[1],!e.shiftDown);let a=[_t.DEFAULT,0];if(s){if(t.selection.size()>1){const l=vn.get("selections");if(l)try{l.mouseIn(t,s,e)&&(a=(n=l.mouseCursor(t,s,e))!=null?n:a),l.pointerUp(t,s,e)}catch(c){console.error(c)}}if(t.selection.size()===1){const l=t.selection.getShapes()[0],c=vn.get(l.type);if(c)try{c.mouseIn(t,l,e)&&(a=(r=c.mouseCursor(t,l,e))!=null?r:a),c.pointerUp(t,l,e)}catch(d){console.error(d)}}}if(Array.isArray(a)&&a.length>1?t.setCursor(a[0],a[1]):t.setCursor(_t.DEFAULT),t.repaint(),this.dragging&&t.onDragEnd.emit({controller:null,dragPoint:o}),this.dragging=!1,this.dragStartPoint=[-1,-1],t.duplicatedDragging){if(t.transform.undoHistory.size()>0){const l=t.transform.undoHistory.get();if(l&&l.name===xt.MOVE){if(t.transform.undoHistory.size()>1){const c=t.transform.undoHistory.get(1);c&&c.name===xt.DUPLICATE&&t.transform.mergeAction()}}else l&&l.name===xt.DUPLICATE&&t.transform.undo()}t.duplicatedDragging=!1}}keyDown(t,e){const n=t.getCurrentPage();if(n){if(t.selection.size()===1){const r=t.selection.getShapes()[0],i=vn.get(r.type);if(i)try{i.keyDown(t,r,e)}catch(s){console.error(s)}}else if(t.selection.size()>1){const r=vn.get("selections");if(r)try{r.keyDown(t,n,e)}catch(i){console.error(i)}}}return e.key==="Escape"&&(this.dragging=!1,this.dragStartPoint=[-1,-1],t.selection.deselectAll(),t.repaint()),!1}keyUp(t,e){}drawSelection(t){const e=t.getCurrentPage();if(e){if(t.selection.size()>1){const n=vn.get("selections");n&&n.draw(t,e)}e.traverse(n=>{const r=n,i=vn.get(r.type);i&&t.selection.isSelected(r)&&i.draw(t,r)})}}},mI=class extends Es{constructor(){super(...arguments),this.dragging=!1,this.dragStartPoint=[-1,-1],this.dragPoint=[-1,-1],this.dx=0,this.dy=0,this.deletingShapes=[]}reset(){this.dragging=!1,this.dragStartPoint=[-1,-1],this.dragPoint=[-1,-1],this.dx=0,this.dy=0,this.deletingShapes=[]}addToDeletingShapes(t,e){const n=t.getCurrentPage();if(n){const r=n.getShapeAt(t.canvas,e);r&&!this.deletingShapes.includes(r)&&(t.transform.transact(i=>{i.assign(r,"opacity",r.opacity*.15),Rt(i,n,t.canvas)}),this.deletingShapes.push(r))}}initialize(t,e){t.transform.startAction(xt.DELETE),this.addToDeletingShapes(t,this.dragStartPoint)}update(t,e){this.addToDeletingShapes(t,this.dragPoint)}finalize(t,e){const n=t.getDoc(),r=t.getCurrentPage();r&&t.transform.transact(i=>{ow(i,n,r,this.deletingShapes),Rt(i,r,t.canvas)}),t.transform.endAction()}pointerDown(t,e){if(e.button===Fr.BUTTON1){const n=t.canvas;this.dragging=!0,this.dragStartPoint=n.globalCoordTransformRev([e.x,e.y]),this.dragPoint=On(this.dragStartPoint),this.dx=0,this.dy=0,this.initialize(t,e)}}pointerMove(t,e){if(t.repaint(),this.dragging){const n=t.canvas;this.dragPoint=n.globalCoordTransformRev([e.x,e.y]),this.dx=this.dragPoint[0]-this.dragStartPoint[0],this.dy=this.dragPoint[1]-this.dragStartPoint[1],this.update(t,e)}}pointerUp(t,e){e.button===Fr.BUTTON1&&this.dragging&&(this.finalize(t,e),t.repaint(),this.reset(),this.complete(t))}keyDown(t,e){return e.key==="Escape"&&this.dragging&&(t.transform.cancelAction(),t.repaint(),this.reset(),this.complete(t)),!1}onActivate(t){t.setCursor(_t.CROSSHAIR)}onDeactivate(t){t.setCursor(_t.DEFAULT)}},yI=class extends Es{constructor(){super(...arguments),this.shape=null,this.snapper=new jc}reset(){super.reset(),this.shape=null}initialize(t,e){const n=this.snapper.snap(t,this.dragStartPoint);if(n){const[i,s]=n;this.dragStartPoint=[this.dragStartPoint[0]+i,this.dragStartPoint[1]+s]}const r=t.getCurrentPage();r&&(this.shape=t.factory.createRectangle([this.dragStartPoint,this.dragPoint]),t.transform.startAction(xt.INSERT),t.transform.transact(i=>{vs(i,this.shape,r)}))}update(t,e){const n=this.snapper.snap(t,this.dragPoint);if(n){const[i,s]=n;this.dragPoint=[this.dragPoint[0]+i,this.dragPoint[1]+s],this.snapper.guidePoints=[this.dragStartPoint,[this.dragPoint[0],this.dragStartPoint[1]],[this.dragStartPoint[0],this.dragPoint[1]],this.dragPoint]}const r=t.getCurrentPage();if(r&&this.shape){const i=Zi([this.dragStartPoint,this.dragPoint]);t.transform.transact(s=>{s.assign(this.shape,"left",i[0][0]),s.assign(this.shape,"top",i[0][1]),s.assign(this.shape,"width",nn(i)),s.assign(this.shape,"height",rn(i)),Rt(s,r,t.canvas)})}}updateHovering(t,e){const n=t.canvas.globalCoordTransformRev([e.x,e.y]);this.snapper.snap(t,n)}finalize(t,e){var n,r;this.shape&&(((n=this.shape)==null?void 0:n.width)<2&&((r=this.shape)==null?void 0:r.height)<2?t.transform.cancelAction():(t.transform.endAction(),t.factory.triggerCreate(this.shape)))}onActivate(t){this.snapper.setReferences(t,[]),t.setCursor(_t.CROSSHAIR)}onDeactivate(t){t.setCursor(_t.DEFAULT)}onActionPerformed(t){this.snapper.setReferences(t,[])}drawHovering(t,e){this.snapper.draw(t)}drawDragging(t,e){this.snapper.draw(t)}},vI=class extends Es{constructor(){super(...arguments),this.shape=null,this.snapper=new jc}reset(){super.reset(),this.shape=null}initialize(t,e){const n=this.snapper.snap(t,this.dragStartPoint);if(n){const[i,s]=n;this.dragStartPoint=[this.dragStartPoint[0]+i,this.dragStartPoint[1]+s]}const r=t.getCurrentPage();r&&(this.shape=t.factory.createEllipse([this.dragStartPoint,this.dragPoint]),t.transform.startAction(xt.INSERT),t.transform.transact(i=>{vs(i,this.shape,r)}))}update(t,e){const n=this.snapper.snap(t,this.dragPoint);if(n){const[i,s]=n;this.dragPoint=[this.dragPoint[0]+i,this.dragPoint[1]+s],this.snapper.guidePoints=[this.dragStartPoint,[this.dragPoint[0],this.dragStartPoint[1]],[this.dragStartPoint[0],this.dragPoint[1]],this.dragPoint]}const r=t.getCurrentPage();if(r&&this.shape){const i=Zi([this.dragStartPoint,this.dragPoint]);t.transform.transact(s=>{s.assign(this.shape,"left",i[0][0]),s.assign(this.shape,"top",i[0][1]),s.assign(this.shape,"width",nn(i)),s.assign(this.shape,"height",rn(i)),Rt(s,r,t.canvas)})}}updateHovering(t,e){const n=t.canvas.globalCoordTransformRev([e.x,e.y]);this.snapper.snap(t,n)}finalize(t,e){var n,r;this.shape&&(((n=this.shape)==null?void 0:n.width)<2&&((r=this.shape)==null?void 0:r.height)<2?t.transform.cancelAction():(t.transform.endAction(),t.factory.triggerCreate(this.shape)))}onActivate(t){this.snapper.setReferences(t,[]),t.setCursor(_t.CROSSHAIR)}onDeactivate(t){t.setCursor(_t.DEFAULT)}onActionPerformed(t){this.snapper.setReferences(t,[])}drawHovering(t,e){this.snapper.draw(t)}drawDragging(t,e){this.snapper.draw(t)}},bI=class extends Es{constructor(){super(...arguments),this.shape=null,this.snapper=new jc}reset(){super.reset(),this.shape=null}initialize(t,e){const n=this.snapper.snap(t,this.dragStartPoint);if(n){const[i,s]=n;this.dragStartPoint=[this.dragStartPoint[0]+i,this.dragStartPoint[1]+s]}t.getCurrentPage()&&(this.shape=t.factory.createText([this.dragStartPoint,this.dragPoint]),t.actions.insert(this.shape),t.factory.triggerCreate(this.shape),this.complete(t))}update(t,e){const n=this.snapper.snap(t,this.dragPoint);if(n){const[r,i]=n;this.dragPoint=[this.dragPoint[0]+r,this.dragPoint[1]+i],this.snapper.guidePoints=[this.dragStartPoint,[this.dragPoint[0],this.dragStartPoint[1]],[this.dragStartPoint[0],this.dragPoint[1]],this.dragPoint]}}updateHovering(t,e){const n=t.canvas.globalCoordTransformRev([e.x,e.y]);this.snapper.snap(t,n)}onActivate(t){this.snapper.setReferences(t,[]),t.setCursor(_t.CROSSHAIR)}onDeactivate(t){t.setCursor(_t.DEFAULT)}onActionPerformed(t){this.snapper.setReferences(t,[])}drawHovering(t,e){this.snapper.draw(t)}drawDragging(t,e){this.snapper.draw(t)}},wI=class extends Es{constructor(){super(...arguments),this.tailEnd=null,this.tailAnchor=[.5,.5],this.headEnd=null,this.headAnchor=[.5,.5],this.shape=null,this.snapper=new jc(!1,!0)}reset(){super.reset(),this.tailEnd=null,this.tailAnchor=[.5,.5],this.headEnd=null,this.headAnchor=[.5,.5],this.shape=null}initialize(t,e){const n=this.snapper.snap(t,this.dragStartPoint);if(n){const[i,s]=n;this.dragStartPoint=[this.dragStartPoint[0]+i,this.dragStartPoint[1]+s]}const r=t.getCurrentPage();if(r){const[i,s]=pg(t,null,this.dragStartPoint);this.tailEnd=i,this.tailAnchor=s,this.shape=t.factory.createConnector(this.tailEnd,this.tailAnchor,this.headEnd,this.headAnchor,[this.dragStartPoint,this.dragPoint]),this.shape.path=[this.dragStartPoint,this.dragPoint],t.transform.startAction(xt.INSERT),t.transform.transact(o=>{vs(o,this.shape,r)})}}update(t,e){const n=this.snapper.snap(t,this.dragPoint);if(n){const[i,s]=n;this.dragPoint=[this.dragPoint[0]+i,this.dragPoint[1]+s],this.snapper.guidePoints=[this.dragStartPoint,[this.dragPoint[0],this.dragStartPoint[1]],[this.dragStartPoint[0],this.dragPoint[1]],this.dragPoint]}const r=t.getCurrentPage();if(r){const[i,s]=pg(t,this.shape,this.dragPoint);this.headEnd=i,this.headAnchor=s;const o=Bn(this.shape.path);o[1]=this.dragPoint,t.transform.transact(a=>{ko(a,this.shape,o),a.assignRef(this.shape,"head",this.headEnd),a.assign(this.shape,"headAnchor",this.headAnchor),Rt(a,r,t.canvas)})}}updateHovering(t,e){const n=t.canvas.globalCoordTransformRev([e.x,e.y]);this.snapper.snap(t,n)}finalize(t,e){this.shape&&(kd(this.shape.path)<2?t.transform.cancelAction():(t.transform.endAction(),t.factory.triggerCreate(this.shape)))}onActivate(t){this.snapper.setReferences(t,[]),t.setCursor(_t.CROSSHAIR)}onDeactivate(t){t.setCursor(_t.DEFAULT)}onActionPerformed(t){this.snapper.setReferences(t,[])}drawTailHovering(t,e){if(this.tailEnd&&this.tailEnd.connectable){const n=vn.get(this.tailEnd.type);n&&n.drawHovering(t,this.tailEnd,e)}}drawHeadHovering(t,e){if(this.headEnd&&this.headEnd.connectable){const n=vn.get(this.headEnd.type);n&&n.drawHovering(t,this.headEnd,e)}}drawHovering(t,e){this.drawTailHovering(t,e),this.snapper.draw(t)}drawDragging(t,e){if(this.drawTailHovering(t,e),this.drawHeadHovering(t,e),this.shape instanceof Bs){const n=t.canvas,r=this.shape.getTailAnchorPoint(),i=this.shape.getHeadAnchorPoint(),s=It(n,this.shape,r),o=It(n,this.shape,i),a=this.shape.path.map(l=>It(n,this.shape,l));Pc(n,s,a[0]),Pc(n,o,a[a.length-1]),ni(n,s,this.shape.tail?5:1),ni(n,o,this.shape.head?5:1)}this.snapper.draw(t)}},xI=class extends Es{constructor(){super(...arguments),this.points=[],this.closed=!1,this.draggingMoved=!1,this.multiPointMode=!1,this.shape=null,this.snapper=new jc(!1,!0)}reset(){super.reset(),this.points=[],this.closed=!1,this.draggingMoved=!1,this.multiPointMode=!1,this.shape=null}initialize(t,e){const n=this.snapper.snap(t,this.dragStartPoint);if(n){const[i,s]=n;this.dragStartPoint=[this.dragStartPoint[0]+i,this.dragStartPoint[1]+s]}const r=t.getCurrentPage();r&&(this.points=[this.dragStartPoint],this.shape=t.factory.createLine(this.points,!1),t.transform.startAction(xt.INSERT),t.transform.transact(i=>{vs(i,this.shape,r)}))}update(t,e){const n=this.snapper.snap(t,this.dragPoint);if(n){const[i,s]=n;this.dragPoint=[this.dragPoint[0]+i,this.dragPoint[1]+s],this.snapper.guidePoints=[this.dragStartPoint,[this.dragPoint[0],this.dragStartPoint[1]],[this.dragStartPoint[0],this.dragPoint[1]],this.dragPoint]}const r=t.getCurrentPage();if(r&&this.shape){const i=[...this.points,this.dragPoint];t.transform.transact(s=>{ko(s,this.shape,i),Rt(s,r,t.canvas)})}}updateHovering(t,e){const n=t.canvas.globalCoordTransformRev([e.x,e.y]);this.snapper.snap(t,n)}finalize(t,e){t.getCurrentPage()&&this.shape&&(kd(this.shape.path)<2?t.transform.cancelAction():(t.transform.endAction(),t.factory.triggerCreate(this.shape)))}pointerDown(t,e){if(e.button===Fr.BUTTON1){const n=t.canvas;if(this.multiPointMode)if(this.closed)this.finalize(t,e),this.reset(),this.complete(t);else{const r=n.globalCoordTransformRev([e.x,e.y]),i=this.snapper.snap(t,r);i&&(r[0]+=i[0],r[1]+=i[1]),this.points.push(r)}else this.dragging=!0,this.dragStartPoint=n.globalCoordTransformRev([e.x,e.y]),this.dragPoint=On(this.dragStartPoint),this.points.push(this.dragPoint),this.initialize(t,e);t.repaint()}}pointerMove(t,e){if(this.dragging){const n=t.canvas;this.draggingMoved=!0,this.dragPoint=n.globalCoordTransformRev([e.x,e.y]),this.closed=this.points.length>2&&Gn(this.points[0],this.dragPoint)<=po,this.closed&&(this.dragPoint=On(this.points[0])),this.update(t,e),t.repaint(),this.drawDragging(t,e)}else this.updateHovering(t,e),t.repaint(),this.drawHovering(t,e)}pointerUp(t,e){e.button===Fr.BUTTON1&&this.dragging&&(this.draggingMoved||(this.multiPointMode=!0),this.multiPointMode||(this.points.push(On(this.dragPoint)),this.finalize(t,e),this.reset(),this.complete(t),t.repaint()))}keyDown(t,e){if(e.key==="Escape"&&this.dragging){const n=t.getCurrentPage();n&&this.shape&&(t.transform.transact(r=>{ko(r,this.shape,structuredClone(this.points)),Rt(r,n,t.canvas)}),this.shape.update(t.canvas)),this.finalize(t),t.repaint(),this.reset(),this.complete(t)}return!1}onActivate(t){this.reset(),this.snapper.setReferences(t,[]),t.setCursor(_t.CROSSHAIR)}onDeactivate(t){this.reset(),t.setCursor(_t.DEFAULT)}onActionPerformed(t){this.snapper.setReferences(t,[])}drawHovering(t,e){this.snapper.draw(t)}drawDragging(t,e){this.snapper.draw(t)}},SI=class extends Es{constructor(){super(...arguments),this.dragging=!1,this.dragStartPoint=[-1,-1],this.dragPoint=[-1,-1],this.draggingPoints=[],this.closed=!1,this.shape=null}reset(){this.dragging=!1,this.dragStartPoint=[-1,-1],this.dragPoint=[-1,-1],this.draggingPoints=[],this.closed=!1,this.shape=null}initialize(t,e){const n=t.getCurrentPage();n&&(this.draggingPoints.push(this.dragStartPoint),this.shape=t.factory.createFreehand(this.draggingPoints,!1),t.transform.startAction(xt.INSERT),t.transform.transact(r=>{vs(r,this.shape,n)}))}update(t,e){const n=t.getCurrentPage();this.draggingPoints.push(this.dragPoint);const r=structuredClone(this.draggingPoints);this.closed=Gn(r[0],r[r.length-1])<=po,this.closed&&(r[r.length-1]=On(r[0])),t.transform.transact(i=>{n&&this.shape&&(ko(i,this.shape,r),Rt(i,n,t.canvas))})}finalize(t,e){this.shape&&(kd(this.draggingPoints)<2?t.transform.cancelAction():(t.transform.endAction(),t.factory.triggerCreate(this.shape)))}pointerDown(t,e){if(e.button===Fr.BUTTON1){const n=t.canvas;this.dragging=!0,this.dragStartPoint=n.globalCoordTransformRev([e.x,e.y]),this.dragPoint=On(this.dragStartPoint),this.initialize(t,e),t.repaint()}}pointerMove(t,e){if(this.dragging){const n=t.canvas;this.dragPoint=n.globalCoordTransformRev([e.x,e.y]),this.update(t,e),t.repaint()}else t.repaint()}pointerUp(t,e){e.button===Fr.BUTTON1&&this.dragging&&(this.finalize(t,e),t.repaint(),this.reset(),this.complete(t))}keyDown(t,e){return e.key==="Escape"&&this.dragging&&(t.transform.cancelAction(),t.repaint(),this.reset(),this.complete(t)),!1}onActivate(t){t.setCursor(_t.CROSSHAIR)}onDeactivate(t){t.setCursor(_t.DEFAULT)}},kI=class extends Es{constructor(){super(...arguments),this.dragging=!1,this.dragStartPoint=[-1,-1],this.dragPoint=[-1,-1],this.draggingPoints=[],this.closed=!1,this.shape=null}reset(){this.dragging=!1,this.dragStartPoint=[-1,-1],this.dragPoint=[-1,-1],this.draggingPoints=[],this.closed=!1,this.shape=null}initialize(t,e){const n=t.getCurrentPage();n&&(this.draggingPoints.push(this.dragStartPoint),this.shape=t.factory.createHighlighter(this.draggingPoints),t.transform.startAction(xt.INSERT),t.transform.transact(r=>{vs(r,this.shape,n)}))}update(t,e){const n=t.getCurrentPage();this.draggingPoints.push(this.dragPoint);const r=structuredClone(this.draggingPoints);t.transform.transact(i=>{n&&this.shape&&(ko(i,this.shape,r),Rt(i,n,t.canvas))})}finalize(t,e){this.shape&&(kd(this.draggingPoints)<2?t.transform.cancelAction():(t.transform.endAction(),t.factory.triggerCreate(this.shape)))}pointerDown(t,e){if(e.button===Fr.BUTTON1){const n=t.canvas;this.dragging=!0,this.dragStartPoint=n.globalCoordTransformRev([e.x,e.y]),this.dragPoint=On(this.dragStartPoint),this.initialize(t,e),t.repaint()}}pointerMove(t,e){if(this.dragging){const n=t.canvas;this.dragPoint=n.globalCoordTransformRev([e.x,e.y]),this.update(t,e),t.repaint()}else t.repaint()}pointerUp(t,e){e.button===Fr.BUTTON1&&this.dragging&&(this.finalize(t,e),t.repaint(),this.reset(),this.complete(t))}keyDown(t,e){return e.key==="Escape"&&this.dragging&&(t.transform.cancelAction(),t.repaint(),this.reset(),this.complete(t)),!1}onActivate(t){t.setCursor(_t.CROSSHAIR)}onDeactivate(t){t.setCursor(_t.DEFAULT)}},CI=class extends Es{onActivate(t){Vu(this,null,function*(){try{const n=t.getCurrentPage();if(n){const r=yield KL([{description:"Image files",mimeTypes:["image/png","image/jpeg","image/svg+xml","image/webp"],extensions:[".png",".jpeg",".jpg",".svg",".webp"],multiple:!1}]),i=t.getCenter(),s=yield t.factory.createImage(r,i);t.transform.startAction(xt.INSERT),t.transform.transact(o=>{vs(o,s,n),Rt(o,n,t.canvas)}),t.transform.endAction(),t.factory.triggerCreate(s),this.complete(t)}}catch{this.complete(t)}})}},_I=class extends Es{constructor(){super(...arguments),this.shape=null,this.snapper=new jc}reset(){super.reset(),this.shape=null}initialize(t,e){const n=this.snapper.snap(t,this.dragStartPoint);if(n){const[i,s]=n;this.dragStartPoint=[this.dragStartPoint[0]+i,this.dragStartPoint[1]+s]}const r=t.getCurrentPage();r&&(this.shape=t.factory.createFrame([this.dragStartPoint,this.dragPoint]),t.transform.startAction(xt.INSERT),t.transform.transact(i=>{vs(i,this.shape,r)}))}update(t,e){const n=this.snapper.snap(t,this.dragPoint);if(n){const[i,s]=n;this.dragPoint=[this.dragPoint[0]+i,this.dragPoint[1]+s],this.snapper.guidePoints=[this.dragStartPoint,[this.dragPoint[0],this.dragStartPoint[1]],[this.dragStartPoint[0],this.dragPoint[1]],this.dragPoint]}const r=t.getCurrentPage();if(r&&this.shape){const i=Zi([this.dragStartPoint,this.dragPoint]);t.transform.transact(s=>{s.assign(this.shape,"left",i[0][0]),s.assign(this.shape,"top",i[0][1]),s.assign(this.shape,"width",nn(i)),s.assign(this.shape,"height",rn(i)),Rt(s,r,t.canvas)})}}updateHovering(t,e){const n=t.canvas.globalCoordTransformRev([e.x,e.y]);this.snapper.snap(t,n)}finalize(t,e){var n,r;this.shape&&((n=this.shape)==null?void 0:n.width)<2&&((r=this.shape)==null?void 0:r.height)<2?t.transform.cancelAction():(t.transform.endAction(),t.factory.triggerCreate(this.shape))}onActivate(t){this.snapper.setReferences(t,[]),t.setCursor(_t.CROSSHAIR)}onDeactivate(t){t.setCursor(_t.DEFAULT)}onActionPerformed(t){this.snapper.setReferences(t,[])}drawHovering(t,e){this.snapper.draw(t)}drawDragging(t,e){this.snapper.draw(t)}},AI=class extends Es{constructor(){super(...arguments),this.shape=null,this.snapper=new jc}reset(){super.reset(),this.shape=null}initialize(t,e){const n=this.snapper.snap(t,this.dragStartPoint);if(n){const[i,s]=n;this.dragStartPoint=[this.dragStartPoint[0]+i,this.dragStartPoint[1]+s]}const r=t.getCurrentPage();r&&(this.shape=t.factory.createMirror([this.dragStartPoint,this.dragPoint]),t.transform.startAction(xt.INSERT),t.transform.transact(i=>{vs(i,this.shape,r)}))}update(t,e){const n=this.snapper.snap(t,this.dragPoint);if(n){const[i,s]=n;this.dragPoint=[this.dragPoint[0]+i,this.dragPoint[1]+s],this.snapper.guidePoints=[this.dragStartPoint,[this.dragPoint[0],this.dragStartPoint[1]],[this.dragStartPoint[0],this.dragPoint[1]],this.dragPoint]}const r=t.getCurrentPage();if(r&&this.shape){const i=Zi([this.dragStartPoint,this.dragPoint]);t.transform.transact(s=>{s.assign(this.shape,"left",i[0][0]),s.assign(this.shape,"top",i[0][1]),s.assign(this.shape,"width",nn(i)),s.assign(this.shape,"height",rn(i)),Rt(s,r,t.canvas)})}}updateHovering(t,e){const n=t.canvas.globalCoordTransformRev([e.x,e.y]);this.snapper.snap(t,n)}finalize(t,e){var n,r;this.shape&&((n=this.shape)==null?void 0:n.width)<2&&((r=this.shape)==null?void 0:r.height)<2?t.transform.cancelAction():(t.transform.endAction(),t.factory.triggerCreate(this.shape))}onActivate(t){this.snapper.setReferences(t,[]),t.setCursor(_t.CROSSHAIR)}onDeactivate(t){t.setCursor(_t.DEFAULT)}onActionPerformed(t){this.snapper.setReferences(t,[])}drawHovering(t,e){this.snapper.draw(t)}drawDragging(t,e){this.snapper.draw(t)}},EI=class extends Es{constructor(){super(...arguments),this.snapper=new jc}initialize(t,e){const n=this.snapper.snap(t,this.dragStartPoint);if(n){const[r,i]=n;this.dragStartPoint=[this.dragStartPoint[0]+r,this.dragStartPoint[1]+i]}}update(t,e){const n=this.snapper.snap(t,this.dragPoint);if(n){const[r,i]=n;this.dragPoint=[this.dragPoint[0]+r,this.dragPoint[1]+i],this.snapper.guidePoints=[this.dragStartPoint,[this.dragPoint[0],this.dragStartPoint[1]],[this.dragStartPoint[0],this.dragPoint[1]],this.dragPoint]}}updateHovering(t,e){const n=t.canvas.globalCoordTransformRev([e.x,e.y]);this.snapper.snap(t,n)}finalize(t,e){const n=Zi([this.dragStartPoint,this.dragPoint]),r=t.factory.createEmbed(n);t.actions.insert(r),t.factory.triggerCreate(r)}onActivate(t){this.snapper.setReferences(t,[]),t.setCursor(_t.CROSSHAIR)}onDeactivate(t){t.setCursor(_t.DEFAULT)}onActionPerformed(t){this.snapper.setReferences(t,[])}drawHovering(t,e){this.snapper.draw(t)}drawDragging(t,e){const n=t.canvas,r=n.globalCoordTransform(this.dragStartPoint),i=n.globalCoordTransform(this.dragPoint),s=Zi([r,i]);n.strokeColor=jn.SELECTION,n.strokeWidth=n.px,n.strokePattern=[],n.roughness=0,n.alpha=1,n.strokeRect(s[0][0],s[0][1],s[1][0],s[1][1]),this.snapper.draw(t)}},Gne=class extends Es{constructor(){super(...arguments),this.shape=null,this.snapper=new jc}reset(){super.reset(),this.shape=null}initialize(t,e){const n=this.snapper.snap(t,this.dragStartPoint);if(n){const[i,s]=n;this.dragStartPoint=[this.dragStartPoint[0]+i,this.dragStartPoint[1]+s]}const r=t.getCurrentPage();r&&(this.shape=t.factory.createIcon([this.dragStartPoint,this.dragPoint],28,28,[]),t.transform.startAction(xt.INSERT),t.transform.transact(i=>{vs(i,this.shape,r)}))}update(t,e){const n=this.snapper.snap(t,this.dragPoint);if(n){const[i,s]=n;this.dragPoint=[this.dragPoint[0]+i,this.dragPoint[1]+s],this.snapper.guidePoints=[this.dragStartPoint,[this.dragPoint[0],this.dragStartPoint[1]],[this.dragStartPoint[0],this.dragPoint[1]],this.dragPoint]}const r=t.getCurrentPage();if(r&&this.shape){const i=Zi([this.dragStartPoint,this.dragPoint]);t.transform.transact(s=>{s.assign(this.shape,"left",i[0][0]),s.assign(this.shape,"top",i[0][1]),s.assign(this.shape,"width",nn(i)),s.assign(this.shape,"height",rn(i)),Rt(s,r,t.canvas)})}}updateHovering(t,e){const n=t.canvas.globalCoordTransformRev([e.x,e.y]);this.snapper.snap(t,n)}finalize(t,e){var n,r;this.shape&&(((n=this.shape)==null?void 0:n.width)<2&&((r=this.shape)==null?void 0:r.height)<2?t.transform.cancelAction():(t.transform.endAction(),t.factory.triggerCreate(this.shape)))}onActivate(t){this.snapper.setReferences(t,[]),t.setCursor(_t.CROSSHAIR)}onDeactivate(t){t.setCursor(_t.DEFAULT)}onActionPerformed(t){this.snapper.setReferences(t,[])}drawHovering(t,e){this.snapper.draw(t)}drawDragging(t,e){this.snapper.draw(t)}};function Kne(t){return De({handlers:[new gI("Select"),new pI("Hand",{defaultLock:!0}),new mI("Eraser",{defaultLock:!0}),new yI("Rectangle",{defaultLock:!1}),new vI("Ellipse",{defaultLock:!1}),new bI("Text",{defaultLock:!1}),new wI("Connector",{defaultLock:!1}),new xI("Line",{defaultLock:!1}),new SI("Freehand",{defaultLock:!0}),new kI("Highlighter",{defaultLock:!0}),new CI("Image",{defaultLock:!1}),new Gne("Icon",{defaultLock:!1}),new _I("Frame",{defaultLock:!1}),new AI("Mirror",{defaultLock:!1}),new EI("Embed",{defaultLock:!1})],defaultHandlerId:"Select",keymap:{"mod-z":e=>e.actions.undo(),"mod-shift-z":e=>e.actions.redo(),"mod-x":e=>e.actions.cut(),"mod-c":e=>e.actions.copy(),"mod-d":e=>e.actions.duplicate(),"mod-v":e=>e.actions.paste(),delete:e=>e.actions.remove(),backspace:e=>e.actions.remove(),"mod-a":e=>e.selection.selectAll(),"]":e=>e.actions.bringForward(),"[":e=>e.actions.sendBackward(),"mod-]":e=>e.actions.bringToFront(),"mod-[":e=>e.actions.sendToBack(),"mod-g":e=>e.actions.group(),"mod-shift-g":e=>e.actions.ungroup(),"shift-up":e=>e.actions.move(0,-e.getGridSize()[1]),"shift-down":e=>e.actions.move(0,e.getGridSize()[1]),"shift-left":e=>e.actions.move(-e.getGridSize()[0],0),"shift-right":e=>e.actions.move(e.getGridSize()[0],0),up:e=>e.actions.move(0,-1),down:e=>e.actions.move(0,1),left:e=>e.actions.move(-1,0),right:e=>e.actions.move(1,0),"mod-'":e=>e.setShowGrid(!e.getShowGrid()),"mod-=":e=>e.zoom(e.getScale()+.1),"mod-plus":e=>e.zoom(e.getScale()+.1),"mod-minus":e=>e.zoom(e.getScale()-.1),"mod-0":e=>e.zoom(1),"mod-9":e=>e.fitToScreen(),"mod-up":e=>e.scroll(0,-e.getGridSize()[1]),"mod-down":e=>e.scroll(0,e.getGridSize()[1]),"mod-left":e=>e.scroll(-e.getGridSize()[0],0),"mod-right":e=>e.scroll(e.getGridSize()[0],0)},keymapEventTarget:null,allowAutoScroll:!0,allowCreateTextOnCanvas:!0,allowCreateTextOnConnector:!0},t??{})}const Ks=()=>new Map,LC=t=>{const e=Ks();return t.forEach((n,r)=>{e.set(r,n)}),e},Co=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},Jne=(t,e)=>{const n=[];for(const[r,i]of t)n.push(e(i,r));return n},Yne=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},cd=()=>new Set,WS=t=>t[t.length-1],Zne=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},Tc=Array.from,Xne=Array.isArray;class Qne{constructor(){this._observers=Ks()}on(e,n){return Co(this._observers,e,cd).add(n),n}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return Tc((this._observers.get(e)||Ks()).values()).forEach(r=>r(...n))}destroy(){this._observers=Ks()}}class FE{constructor(){this._observers=Ks()}on(e,n){Co(this._observers,e,cd).add(n)}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return Tc((this._observers.get(e)||Ks()).values()).forEach(r=>r(...n))}destroy(){this._observers=Ks()}}const kl=Math.floor,Z2=Math.abs,ere=Math.log10,zE=(t,e)=>t<e?t:e,lh=(t,e)=>t>e?t:e,PI=t=>t!==0?t<0:1/t<0,hN=1,pN=2,qS=4,GS=8,$1=32,gc=64,wo=128,Ax=31,DC=63,vf=127,tre=2147483647,TI=Number.MAX_SAFE_INTEGER,nre=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&kl(t)===t),rre=String.fromCharCode,ire=t=>t.toLowerCase(),sre=/^\s*/g,ore=t=>t.replace(sre,""),are=/([A-Z])/g,gN=(t,e)=>ore(t.replace(are,n=>`${e}${ire(n)}`)),lre=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},j1=typeof TextEncoder<"u"?new TextEncoder:null,cre=t=>j1.encode(t),IC=j1?cre:lre;let V0=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});V0&&V0.decode(new Uint8Array).length===1&&(V0=null);class by{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const pi=()=>new by,ure=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},yr=t=>{const e=new Uint8Array(ure(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},dre=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(lh(n,e)*2),t.cpos=0)},ui=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},F1=ui,kt=(t,e)=>{for(;e>vf;)ui(t,wo|vf&e),e=kl(e/128);ui(t,vf&e)},BE=(t,e)=>{const n=PI(e);for(n&&(e=-e),ui(t,(e>DC?wo:0)|(n?gc:0)|DC&e),e=kl(e/64);e>0;)ui(t,(e>vf?wo:0)|vf&e),e=kl(e/128)},$C=new Uint8Array(3e4),fre=$C.length/3,hre=(t,e)=>{if(e.length<fre){const n=j1.encodeInto(e,$C).written||0;kt(t,n);for(let r=0;r<n;r++)ui(t,$C[r])}else Er(t,IC(e))},pre=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;kt(t,r);for(let i=0;i<r;i++)ui(t,n.codePointAt(i))},pl=j1&&j1.encodeInto?hre:pre,Ex=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=zE(n-r,e.length),s=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(lh(n*2,s)),t.cbuf.set(e.subarray(i)),t.cpos=s)},Er=(t,e)=>{kt(t,e.byteLength),Ex(t,e)},UE=(t,e)=>{dre(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},gre=(t,e)=>UE(t,4).setFloat32(0,e,!1),mre=(t,e)=>UE(t,8).setFloat64(0,e,!1),yre=(t,e)=>UE(t,8).setBigInt64(0,e,!1),mN=new DataView(new ArrayBuffer(4)),vre=t=>(mN.setFloat32(0,t),mN.getFloat32(0)===t),gg=(t,e)=>{switch(typeof e){case"string":ui(t,119),pl(t,e);break;case"number":nre(e)&&Z2(e)<=tre?(ui(t,125),BE(t,e)):vre(e)?(ui(t,124),gre(t,e)):(ui(t,123),mre(t,e));break;case"bigint":ui(t,122),yre(t,e);break;case"object":if(e===null)ui(t,126);else if(Xne(e)){ui(t,117),kt(t,e.length);for(let n=0;n<e.length;n++)gg(t,e[n])}else if(e instanceof Uint8Array)ui(t,116),Er(t,e);else{ui(t,118);const n=Object.keys(e);kt(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];pl(t,i),gg(t,e[i])}}break;case"boolean":ui(t,e?120:121);break;default:ui(t,127)}};class yN extends by{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&kt(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const vN=t=>{t.count>0&&(BE(t.encoder,t.count===1?t.s:-t.s),t.count>1&&kt(t.encoder,t.count-2))};class X2{constructor(){this.encoder=new by,this.s=0,this.count=0}write(e){this.s===e?this.count++:(vN(this),this.count=1,this.s=e)}toUint8Array(){return vN(this),yr(this.encoder)}}const bN=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);BE(t.encoder,e),t.count>1&&kt(t.encoder,t.count-2)}};class KS{constructor(){this.encoder=new by,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(bN(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return bN(this),yr(this.encoder)}}class bre{constructor(){this.sarr=[],this.s="",this.lensE=new X2}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new by;return this.sarr.push(this.s),this.s="",pl(e,this.sarr.join("")),Ex(e,this.lensE.toUint8Array()),yr(e)}}const Cl=t=>new Error(t),gl=()=>{throw Cl("Method unimplemented")},_l=()=>{throw Cl("Unexpected case")},NI=Cl("Unexpected end of array"),MI=Cl("Integer out of Range");class Px{constructor(e){this.arr=e,this.pos=0}}const Ha=t=>new Px(t),wre=t=>t.pos!==t.arr.length,xre=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},Jr=t=>xre(t,Ut(t)),Ff=t=>t.arr[t.pos++],Ut=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const i=t.arr[t.pos++];if(e=e+(i&vf)*n,n*=128,i<wo)return e;if(e>TI)throw MI}throw NI},HE=t=>{let e=t.arr[t.pos++],n=e&DC,r=64;const i=(e&gc)>0?-1:1;if(!(e&wo))return i*n;const s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&vf)*r,r*=128,e<wo)return i*n;if(n>TI)throw MI}throw NI},Sre=t=>{let e=Ut(t);if(e===0)return"";{let n=String.fromCodePoint(Ff(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(Ff(t));else for(;e>0;){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},kre=t=>V0.decode(Jr(t)),mc=V0?kre:Sre,VE=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},Cre=t=>VE(t,4).getFloat32(0,!1),_re=t=>VE(t,8).getFloat64(0,!1),Are=t=>VE(t,8).getBigInt64(0,!1),Ere=[t=>{},t=>null,HE,Cre,_re,Are,t=>!1,t=>!0,mc,t=>{const e=Ut(t),n={};for(let r=0;r<e;r++){const i=mc(t);n[i]=mg(t)}return n},t=>{const e=Ut(t),n=[];for(let r=0;r<e;r++)n.push(mg(t));return n},Jr],mg=t=>Ere[127-Ff(t)](t);class wN extends Px{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),wre(this)?this.count=Ut(this)+1:this.count=-1),this.count--,this.s}}class Q2 extends Px{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=HE(this);const e=PI(this.s);this.count=1,e&&(this.s=-this.s,this.count=Ut(this)+2)}return this.count--,this.s}}class JS extends Px{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=HE(this),n=e&1;this.diff=kl(e/2),this.count=1,n&&(this.count=Ut(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Pre{constructor(e){this.decoder=new Q2(e),this.str=mc(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const Tre=crypto.getRandomValues.bind(crypto),Nre=Math.random,OI=()=>Tre(new Uint32Array(1))[0],Mre="10000000-1000-4000-8000"+-1e11,RI=()=>Mre.replace(/[018]/g,t=>(t^OI()&15>>t/4).toString(16)),Nc=Date.now,xN=t=>new Promise(t);Promise.all.bind(Promise);const Ore=t=>Promise.reject(t),WE=t=>Promise.resolve(t),SN=t=>t===void 0?null:t;class Rre{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let LI=new Rre,qE=!0;try{typeof localStorage<"u"&&localStorage&&(LI=localStorage,qE=!1)}catch{}const DI=LI,Lre=t=>qE||addEventListener("storage",t),Dre=t=>qE||removeEventListener("storage",t),Ire=Object.assign,$re=Object.keys,jre=(t,e)=>{for(const n in t)e(t[n],n)},lw=t=>$re(t).length,Fre=t=>{for(const e in t)return!1;return!0},zre=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},II=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Bre=(t,e)=>t===e||lw(t)===lw(e)&&zre(t,(n,r)=>(n!==void 0||II(e,r))&&e[r]===n),GE=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&GE(t,e,n+1)}},Ure=()=>{},Hre=t=>t,Vre=(t,e)=>t===e,W0=(t,e)=>{if(t==null||e==null)return Vre(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!W0(t.get(n),e.get(n)))return!1;break}case Object:if(lw(t)!==lw(e))return!1;for(const n in t)if(!II(t,n)||!W0(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!W0(t[n],e[n]))return!1;break;default:return!1}return!0},Wre=(t,e)=>e.includes(t);var $I={};const yg=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",jI=typeof window<"u"&&typeof document<"u"&&!yg;let tl;const qre=()=>{if(tl===void 0)if(yg){tl=Ks();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&tl.set(e,""),e=r):e!==null&&(tl.set(e,r),e=null)}e!==null&&tl.set(e,"")}else typeof location=="object"?(tl=Ks(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");tl.set(`--${gN(e,"-")}`,n),tl.set(`-${gN(e,"-")}`,n)}})):tl=Ks();return tl},jC=t=>qre().has(t),cw=t=>SN(yg?$I[t.toUpperCase().replaceAll("-","_")]:DI.getItem(t)),Gre=t=>jC("--"+t)||cw(t)!==null;Gre("production");const kN=yg&&Wre($I.FORCE_COLOR,["true","1","2"]),Kre=!jC("no-colors")&&(!yg||process.stdout.isTTY||kN)&&(!yg||jC("color")||kN||cw("COLORTERM")!==null||(cw("TERM")||"").includes("color")),FI=t=>new Uint8Array(t),Jre=(t,e,n)=>new Uint8Array(t,e,n),Yre=t=>new Uint8Array(t),Zre=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=rre(t[n]);return btoa(e)},Xre=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),Qre=t=>{const e=atob(t),n=FI(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},eie=t=>{const e=Buffer.from(t,"base64");return Jre(e.buffer,e.byteOffset,e.byteLength)},zI=jI?Zre:Xre,BI=jI?Qre:eie,tie=t=>{const e=FI(t.byteLength);return e.set(t),e};class nie{constructor(e,n){this.left=e,this.right=n}}const Xl=(t,e)=>new nie(t,e);typeof DOMParser<"u"&&new DOMParser;const rie=t=>Jne(t,(e,n)=>`${n}:${e};`).join(""),iie=JSON.stringify,Fc=Symbol,qo=Fc(),zf=Fc(),UI=Fc(),KE=Fc(),HI=Fc(),VI=Fc(),WI=Fc(),JE=Fc(),Tx=Fc(),sie=t=>{var r;t.length===1&&((r=t[0])==null?void 0:r.constructor)===Function&&(t=t[0]());const e=[];let n=0;for(;n<t.length;n++){const i=t[n];i===void 0||i.constructor===String||i.constructor===Number||i.constructor===Object&&e.push(JSON.stringify(i))}return e},CN=[HI,WI,JE,UI];let YS=0,_N=Nc();const oie=(t,e)=>{const n=CN[YS],r=cw("log"),i=r!==null&&(r==="*"||r==="true"||new RegExp(r,"gi").test(e));return YS=(YS+1)%CN.length,e+=": ",i?(...s)=>{var l;s.length===1&&((l=s[0])==null?void 0:l.constructor)===Function&&(s=s[0]());const o=Nc(),a=o-_N;_N=o,t(n,e,Tx,...s.map(c=>{switch(c!=null&&c.constructor===Uint8Array&&(c=Array.from(c)),typeof c){case"string":case"symbol":return c;default:return iie(c)}}),n," +"+a+"ms")}:Ure},aie={[qo]:Xl("font-weight","bold"),[zf]:Xl("font-weight","normal"),[UI]:Xl("color","blue"),[HI]:Xl("color","green"),[KE]:Xl("color","grey"),[VI]:Xl("color","red"),[WI]:Xl("color","purple"),[JE]:Xl("color","orange"),[Tx]:Xl("color","black")},lie=t=>{var o;t.length===1&&((o=t[0])==null?void 0:o.constructor)===Function&&(t=t[0]());const e=[],n=[],r=Ks();let i=[],s=0;for(;s<t.length;s++){const a=t[s],l=aie[a];if(l!==void 0)r.set(l.left,l.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const c=rie(r);s>0||c.length>0?(e.push("%c"+a),n.push(c)):e.push(a)}else break}}for(s>0&&(i=n,i.unshift(e.join("")));s<t.length;s++){const a=t[s];a instanceof Symbol||i.push(a)}return i},cie=Kre?lie:sie,qI=(...t)=>{console.log(...cie(t)),uie.forEach(e=>e.print(t))},uie=cd(),die=t=>oie(qI,t),GI=t=>({[Symbol.iterator](){return this},next:t}),fie=(t,e)=>GI(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),ZS=(t,e)=>GI(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class YE{constructor(e,n){this.clock=e,this.len=n}}class wy{constructor(){this.clients=new Map}}const KI=(t,e,n)=>e.clients.forEach((r,i)=>{const s=t.doc.store.clients.get(i);for(let o=0;o<r.length;o++){const a=r[o];a9(t,s,a.clock,a.len,n)}}),hie=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const i=kl((n+r)/2),s=t[i],o=s.clock;if(o<=e){if(e<o+s.len)return i;n=i+1}else r=i-1}return null},JI=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&hie(n,e.clock)!==null},ZE=t=>{t.clients.forEach(e=>{e.sort((i,s)=>i.clock-s.clock);let n,r;for(n=1,r=1;n<e.length;n++){const i=e[r-1],s=e[n];i.clock+i.len>=s.clock?i.len=lh(i.len,s.clock+s.len-i.clock):(r<n&&(e[r]=s),r++)}e.length=r})},pie=t=>{const e=new wy;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,i)=>{if(!e.clients.has(i)){const s=r.slice();for(let o=n+1;o<t.length;o++)Zne(s,t[o].clients.get(i)||[]);e.clients.set(i,s)}});return ZE(e),e},uw=(t,e,n,r)=>{Co(t.clients,e,()=>[]).push(new YE(n,r))},gie=()=>new wy,mie=t=>{const e=gie();return t.clients.forEach((n,r)=>{const i=[];for(let s=0;s<n.length;s++){const o=n[s];if(o.deleted){const a=o.id.clock;let l=o.length;if(s+1<n.length)for(let c=n[s+1];s+1<n.length&&c.deleted;c=n[++s+1])l+=c.length;i.push(new YE(a,l))}}i.length>0&&e.clients.set(r,i)}),e},qg=(t,e)=>{kt(t.restEncoder,e.clients.size),Tc(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),kt(t.restEncoder,n);const i=r.length;kt(t.restEncoder,i);for(let s=0;s<i;s++){const o=r[s];t.writeDsClock(o.clock),t.writeDsLen(o.len)}})},XE=t=>{const e=new wy,n=Ut(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const i=Ut(t.restDecoder),s=Ut(t.restDecoder);if(s>0){const o=Co(e.clients,i,()=>[]);for(let a=0;a<s;a++)o.push(new YE(t.readDsClock(),t.readDsLen()))}}return e},AN=(t,e,n)=>{const r=new wy,i=Ut(t.restDecoder);for(let s=0;s<i;s++){t.resetDsCurVal();const o=Ut(t.restDecoder),a=Ut(t.restDecoder),l=n.clients.get(o)||[],c=mi(n,o);for(let d=0;d<a;d++){const u=t.readDsClock(),f=u+t.readDsLen();if(u<c){c<f&&uw(r,o,c,f-c);let h=Al(l,u),p=l[h];for(!p.deleted&&p.id.clock<u&&(l.splice(h+1,0,yw(e,p,u-p.id.clock)),h++);h<l.length&&(p=l[h++],p.id.clock<f);)p.deleted||(f<p.id.clock+p.length&&l.splice(h,0,yw(e,p,f-p.id.clock)),p.delete(e))}else uw(r,o,u,f-u)}}if(r.clients.size>0){const s=new Bf;return kt(s.restEncoder,0),qg(s,r),s.toUint8Array()}return null},YI=OI;class Gg extends Qne{constructor({guid:e=RI(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:s=null,autoLoad:o=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=YI(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new s9,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=o,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=xN(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const l=()=>xN(c=>{const d=u=>{(u===void 0||u===!0)&&(this.off("sync",d),c())};this.on("sync",d)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&Xn(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Tc(this.subdocs).map(e=>e.guid))}transact(e,n=null){return Xn(this,e,n)}get(e,n=Pi){const r=Co(this.share,e,()=>{const s=new n;return s._integrate(this,null),s}),i=r.constructor;if(n!==Pi&&i!==n)if(i===Pi){const s=new n;s._map=r._map,r._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=s}),s._start=r._start;for(let o=s._start;o!==null;o=o.right)o.parent=s;return s._length=r._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,Gp)}getText(e=""){return this.get(e,bg)}getMap(e=""){return this.get(e,Uf)}getXmlElement(e=""){return this.get(e,wg)}getXmlFragment(e=""){return this.get(e,Hf)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){Tc(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new Gg({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,Xn(e.parent.doc,r=>{const i=n.doc;e.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class ZI{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return Ut(this.restDecoder)}readDsLen(){return Ut(this.restDecoder)}}class XI extends ZI{readLeftID(){return mn(Ut(this.restDecoder),Ut(this.restDecoder))}readRightID(){return mn(Ut(this.restDecoder),Ut(this.restDecoder))}readClient(){return Ut(this.restDecoder)}readInfo(){return Ff(this.restDecoder)}readString(){return mc(this.restDecoder)}readParentInfo(){return Ut(this.restDecoder)===1}readTypeRef(){return Ut(this.restDecoder)}readLen(){return Ut(this.restDecoder)}readAny(){return mg(this.restDecoder)}readBuf(){return tie(Jr(this.restDecoder))}readJSON(){return JSON.parse(mc(this.restDecoder))}readKey(){return mc(this.restDecoder)}}class yie{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Ut(this.restDecoder),this.dsCurrVal}readDsLen(){const e=Ut(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class vg extends yie{constructor(e){super(e),this.keys=[],Ut(e),this.keyClockDecoder=new JS(Jr(e)),this.clientDecoder=new Q2(Jr(e)),this.leftClockDecoder=new JS(Jr(e)),this.rightClockDecoder=new JS(Jr(e)),this.infoDecoder=new wN(Jr(e),Ff),this.stringDecoder=new Pre(Jr(e)),this.parentInfoDecoder=new wN(Jr(e),Ff),this.typeRefDecoder=new Q2(Jr(e)),this.lenDecoder=new Q2(Jr(e))}readLeftID(){return new qp(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new qp(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return mg(this.restDecoder)}readBuf(){return Jr(this.restDecoder)}readJSON(){return mg(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class QI{constructor(){this.restEncoder=pi()}toUint8Array(){return yr(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){kt(this.restEncoder,e)}writeDsLen(e){kt(this.restEncoder,e)}}class xy extends QI{writeLeftID(e){kt(this.restEncoder,e.client),kt(this.restEncoder,e.clock)}writeRightID(e){kt(this.restEncoder,e.client),kt(this.restEncoder,e.clock)}writeClient(e){kt(this.restEncoder,e)}writeInfo(e){F1(this.restEncoder,e)}writeString(e){pl(this.restEncoder,e)}writeParentInfo(e){kt(this.restEncoder,e?1:0)}writeTypeRef(e){kt(this.restEncoder,e)}writeLen(e){kt(this.restEncoder,e)}writeAny(e){gg(this.restEncoder,e)}writeBuf(e){Er(this.restEncoder,e)}writeJSON(e){pl(this.restEncoder,JSON.stringify(e))}writeKey(e){pl(this.restEncoder,e)}}class e9{constructor(){this.restEncoder=pi(),this.dsCurrVal=0}toUint8Array(){return yr(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,kt(this.restEncoder,n)}writeDsLen(e){e===0&&_l(),kt(this.restEncoder,e-1),this.dsCurrVal+=e}}class Bf extends e9{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new KS,this.clientEncoder=new X2,this.leftClockEncoder=new KS,this.rightClockEncoder=new KS,this.infoEncoder=new yN(F1),this.stringEncoder=new bre,this.parentInfoEncoder=new yN(F1),this.typeRefEncoder=new X2,this.lenEncoder=new X2}toUint8Array(){const e=pi();return kt(e,0),Er(e,this.keyClockEncoder.toUint8Array()),Er(e,this.clientEncoder.toUint8Array()),Er(e,this.leftClockEncoder.toUint8Array()),Er(e,this.rightClockEncoder.toUint8Array()),Er(e,yr(this.infoEncoder)),Er(e,this.stringEncoder.toUint8Array()),Er(e,yr(this.parentInfoEncoder)),Er(e,this.typeRefEncoder.toUint8Array()),Er(e,this.lenEncoder.toUint8Array()),Ex(e,yr(this.restEncoder)),yr(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){gg(this.restEncoder,e)}writeBuf(e){Er(this.restEncoder,e)}writeJSON(e){gg(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const vie=(t,e,n,r)=>{r=lh(r,e[0].id.clock);const i=Al(e,r);kt(t.restEncoder,e.length-i),t.writeClient(n),kt(t.restEncoder,r);const s=e[i];s.write(t,r-s.id.clock);for(let o=i+1;o<e.length;o++)e[o].write(t,0)},QE=(t,e,n)=>{const r=new Map;n.forEach((i,s)=>{mi(e,s)>i&&r.set(s,i)}),Nx(e).forEach((i,s)=>{n.has(s)||r.set(s,0)}),kt(t.restEncoder,r.size),Tc(r.entries()).sort((i,s)=>s[0]-i[0]).forEach(([i,s])=>{vie(t,e.clients.get(i),i,s)})},bie=(t,e)=>{const n=Ks(),r=Ut(t.restDecoder);for(let i=0;i<r;i++){const s=Ut(t.restDecoder),o=new Array(s),a=t.readClient();let l=Ut(t.restDecoder);n.set(a,{i:0,refs:o});for(let c=0;c<s;c++){const d=t.readInfo();switch(Ax&d){case 0:{const u=t.readLen();o[c]=new Uo(mn(a,l),u),l+=u;break}case 10:{const u=Ut(t.restDecoder);o[c]=new Ho(mn(a,l),u),l+=u;break}default:{const u=(d&(gc|wo))===0,f=new Ki(mn(a,l),null,(d&wo)===wo?t.readLeftID():null,null,(d&gc)===gc?t.readRightID():null,u?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,u&&(d&$1)===$1?t.readString():null,A9(t,d));o[c]=f,l+=f.length}}}}return n},wie=(t,e,n)=>{const r=[];let i=Tc(n.keys()).sort((h,p)=>h-p);if(i.length===0)return null;const s=()=>{if(i.length===0)return null;let h=n.get(i[i.length-1]);for(;h.refs.length===h.i;)if(i.pop(),i.length>0)h=n.get(i[i.length-1]);else return null;return h};let o=s();if(o===null)return null;const a=new s9,l=new Map,c=(h,p)=>{const g=l.get(h);(g==null||g>p)&&l.set(h,p)};let d=o.refs[o.i++];const u=new Map,f=()=>{for(const h of r){const p=h.id.client,g=n.get(p);g?(g.i--,a.clients.set(p,g.refs.slice(g.i)),n.delete(p),g.i=0,g.refs=[]):a.clients.set(p,[h]),i=i.filter(b=>b!==p)}r.length=0};for(;;){if(d.constructor!==Ho){const p=Co(u,d.id.client,()=>mi(e,d.id.client))-d.id.clock;if(p<0)r.push(d),c(d.id.client,d.id.clock-1),f();else{const g=d.getMissing(t,e);if(g!==null){r.push(d);const b=n.get(g)||{refs:[],i:0};if(b.refs.length===b.i)c(g,mi(e,g)),f();else{d=b.refs[b.i++];continue}}else(p===0||p<d.length)&&(d.integrate(t,p),u.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(o!==null&&o.i<o.refs.length)d=o.refs[o.i++];else{if(o=s(),o===null)break;d=o.refs[o.i++]}}if(a.clients.size>0){const h=new Bf;return QE(h,a,new Map),kt(h.restEncoder,0),{missing:l,update:h.toUint8Array()}}return null},xie=(t,e)=>QE(t,e.doc.store,e.beforeState),Sie=(t,e,n,r=new vg(t))=>Xn(e,i=>{i.local=!1;let s=!1;const o=i.doc,a=o.store,l=bie(r,o),c=wie(i,a,l),d=a.pendingStructs;if(d){for(const[f,h]of d.missing)if(h<mi(a,f)){s=!0;break}if(c){for(const[f,h]of c.missing){const p=d.missing.get(f);(p==null||p>h)&&d.missing.set(f,h)}d.update=dw([d.update,c.update])}}else a.pendingStructs=c;const u=AN(r,i,a);if(a.pendingDs){const f=new vg(Ha(a.pendingDs));Ut(f.restDecoder);const h=AN(f,i,a);u&&h?a.pendingDs=dw([u,h]):a.pendingDs=u||h}else a.pendingDs=u;if(s){const f=a.pendingStructs.update;a.pendingStructs=null,t9(i.doc,f)}},n,!1),t9=(t,e,n,r=vg)=>{const i=Ha(e);Sie(i,t,n,new r(i))},kie=(t,e,n)=>t9(t,e,n,XI),Cie=(t,e,n=new Map)=>{QE(t,e.store,n),qg(t,mie(e.store))},_ie=(t,e=new Uint8Array([0]),n=new Bf)=>{const r=n9(e);Cie(n,t,r);const i=[n.toUint8Array()];if(t.store.pendingDs&&i.push(t.store.pendingDs),t.store.pendingStructs&&i.push(Bie(t.store.pendingStructs.update,e)),i.length>1){if(n.constructor===xy)return Fie(i.map((s,o)=>o===0?s:Hie(s)));if(n.constructor===Bf)return dw(i)}return i[0]},Aie=(t,e)=>_ie(t,e,new xy),Eie=t=>{const e=new Map,n=Ut(t.restDecoder);for(let r=0;r<n;r++){const i=Ut(t.restDecoder),s=Ut(t.restDecoder);e.set(i,s)}return e},n9=t=>Eie(new ZI(Ha(t))),r9=(t,e)=>(kt(t.restEncoder,e.size),Tc(e.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{kt(t.restEncoder,n),kt(t.restEncoder,r)}),t),Pie=(t,e)=>r9(t,Nx(e.store)),Tie=(t,e=new e9)=>(t instanceof Map?r9(e,t):Pie(e,t),e.toUint8Array()),Nie=t=>Tie(t,new QI);class Mie{constructor(){this.l=[]}}const EN=()=>new Mie,PN=(t,e)=>t.l.push(e),TN=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(i=>e!==i),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},i9=(t,e,n)=>GE(t.l,[e,n]);class qp{constructor(e,n){this.client=e,this.clock=n}}const Gv=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,mn=(t,e)=>new qp(t,e),Oie=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw _l()},cp=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!JI(e.ds,t.id),FC=(t,e)=>{const n=Co(t.meta,FC,cd),r=t.doc.store;n.has(e)||(e.sv.forEach((i,s)=>{i<mi(r,s)&&ud(t,mn(s,i))}),KI(t,e.ds,i=>{}),n.add(e))};class s9{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Nx=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const i=n[n.length-1];e.set(r,i.id.clock+i.length)}),e},mi=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},o9=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw _l()}n.push(e)},Al=(t,e)=>{let n=0,r=t.length-1,i=t[r],s=i.id.clock;if(s===e)return r;let o=kl(e/(s+i.length-1)*r);for(;n<=r;){if(i=t[o],s=i.id.clock,s<=e){if(e<s+i.length)return o;n=o+1}else r=o-1;o=kl((n+r)/2)}throw _l()},Rie=(t,e)=>{const n=t.clients.get(e.client);return n[Al(n,e.clock)]},XS=Rie,zC=(t,e,n)=>{const r=Al(e,n),i=e[r];return i.id.clock<n&&i instanceof Ki?(e.splice(r+1,0,yw(t,i,n-i.id.clock)),r+1):r},ud=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[zC(t,n,e.clock)]},NN=(t,e,n)=>{const r=e.clients.get(n.client),i=Al(r,n.clock),s=r[i];return n.clock!==s.id.clock+s.length-1&&s.constructor!==Uo&&r.splice(i+1,0,yw(t,s,n.clock-s.id.clock+1)),s},Lie=(t,e,n)=>{const r=t.clients.get(e.id.client);r[Al(r,e.id.clock)]=n},a9=(t,e,n,r,i)=>{if(r===0)return;const s=n+r;let o=zC(t,e,n),a;do a=e[o++],s<a.id.clock+a.length&&zC(t,e,s),i(a);while(o<e.length&&e[o].id.clock<s)};let Die=class{constructor(e,n,r){this.doc=e,this.deleteSet=new wy,this.beforeState=Nx(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}};const MN=(t,e)=>e.deleteSet.clients.size===0&&!Yne(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(ZE(e.deleteSet),xie(t,e),qg(t,e.deleteSet),!0),ON=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&Co(t.changed,e,cd).add(n)},eb=(t,e)=>{let n=t[e],r=t[e-1],i=e;for(;i>0;n=r,r=t[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Ki&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const s=e-i;return s&&t.splice(e+1-s,s),s},Iie=(t,e,n)=>{for(const[r,i]of t.clients.entries()){const s=e.clients.get(r);for(let o=i.length-1;o>=0;o--){const a=i[o],l=a.clock+a.len;for(let c=Al(s,a.clock),d=s[c];c<s.length&&d.id.clock<l;d=s[++c]){const u=s[c];if(a.clock+a.len<=u.id.clock)break;u instanceof Ki&&u.deleted&&!u.keep&&n(u)&&u.gc(e,!1)}}}},$ie=(t,e)=>{t.clients.forEach((n,r)=>{const i=e.clients.get(r);for(let s=n.length-1;s>=0;s--){const o=n[s],a=zE(i.length-1,1+Al(i,o.clock+o.len-1));for(let l=a,c=i[l];l>0&&c.id.clock>=o.clock;c=i[l])l-=1+eb(i,l)}})},l9=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,i=r.store,s=n.deleteSet,o=n._mergeStructs;try{ZE(s),n.afterState=Nx(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((l,c)=>a.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,l)})),a.push(()=>{n.changedParentTypes.forEach((l,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(l=l.filter(d=>d.target._item===null||!d.target._item.deleted),l.forEach(d=>{d.currentTarget=c,d._path=null}),l.sort((d,u)=>d.path.length-u.path.length),i9(c._dEH,l,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),GE(a,[]),n._needFormattingCleanup&&rse(n)}finally{r.gc&&Iie(s,i,r.gcFilter),$ie(s,i),n.afterState.forEach((d,u)=>{const f=n.beforeState.get(u)||0;if(f!==d){const h=i.clients.get(u),p=lh(Al(h,f),1);for(let g=h.length-1;g>=p;)g-=1+eb(h,g)}});for(let d=o.length-1;d>=0;d--){const{client:u,clock:f}=o[d].id,h=i.clients.get(u),p=Al(h,f);p+1<h.length&&eb(h,p+1)>1||p>0&&eb(h,p)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(qI(JE,qo,"[yjs] ",zf,VI,"Changed the client-id because another client seems to be using it."),r.clientID=YI()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const d=new xy;MN(d,n)&&r.emit("update",[d.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const d=new Bf;MN(d,n)&&r.emit("updateV2",[d.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=n;(a.size>0||c.size>0||l.size>0)&&(a.forEach(d=>{d.clientID=r.clientID,d.collectionid==null&&(d.collectionid=r.collectionid),r.subdocs.add(d)}),c.forEach(d=>r.subdocs.delete(d)),r.emit("subdocs",[{loaded:l,added:a,removed:c},r,n]),c.forEach(d=>d.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):l9(t,e+1)}}},Xn=(t,e,n=null,r=!0)=>{const i=t._transactionCleanups;let s=!1,o=null;t._transaction===null&&(s=!0,t._transaction=new Die(t,n,r),i.push(t._transaction),i.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{o=e(t._transaction)}finally{if(s){const a=t._transaction===i[0];t._transaction=null,a&&l9(i,0)}}return o};function*jie(t){const e=Ut(t.restDecoder);for(let n=0;n<e;n++){const r=Ut(t.restDecoder),i=t.readClient();let s=Ut(t.restDecoder);for(let o=0;o<r;o++){const a=t.readInfo();if(a===10){const l=Ut(t.restDecoder);yield new Ho(mn(i,s),l),s+=l}else if(Ax&a){const l=(a&(gc|wo))===0,c=new Ki(mn(i,s),null,(a&wo)===wo?t.readLeftID():null,null,(a&gc)===gc?t.readRightID():null,l?t.readParentInfo()?t.readString():t.readLeftID():null,l&&(a&$1)===$1?t.readString():null,A9(t,a));yield c,s+=c.length}else{const l=t.readLen();yield new Uo(mn(i,s),l),s+=l}}}}class e4{constructor(e,n){this.gen=jie(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Ho);return this.curr}}class t4{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const Fie=t=>dw(t,XI,xy),zie=(t,e)=>{if(t.constructor===Uo){const{client:n,clock:r}=t.id;return new Uo(mn(n,r+e),t.length-e)}else if(t.constructor===Ho){const{client:n,clock:r}=t.id;return new Ho(mn(n,r+e),t.length-e)}else{const n=t,{client:r,clock:i}=n.id;return new Ki(mn(r,i+e),null,mn(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},dw=(t,e=vg,n=Bf)=>{if(t.length===1)return t[0];const r=t.map(d=>new e(Ha(d)));let i=r.map(d=>new e4(d,!0)),s=null;const o=new n,a=new t4(o);for(;i=i.filter(f=>f.curr!==null),i.sort((f,h)=>{if(f.curr.id.client===h.curr.id.client){const p=f.curr.id.clock-h.curr.id.clock;return p===0?f.curr.constructor===h.curr.constructor?0:f.curr.constructor===Ho?1:-1:p}else return h.curr.id.client-f.curr.id.client}),i.length!==0;){const d=i[0],u=d.curr.id.client;if(s!==null){let f=d.curr,h=!1;for(;f!==null&&f.id.clock+f.length<=s.struct.id.clock+s.struct.length&&f.id.client>=s.struct.id.client;)f=d.next(),h=!0;if(f===null||f.id.client!==u||h&&f.id.clock>s.struct.id.clock+s.struct.length)continue;if(u!==s.struct.id.client)Au(a,s.struct,s.offset),s={struct:f,offset:0},d.next();else if(s.struct.id.clock+s.struct.length<f.id.clock)if(s.struct.constructor===Ho)s.struct.length=f.id.clock+f.length-s.struct.id.clock;else{Au(a,s.struct,s.offset);const p=f.id.clock-s.struct.id.clock-s.struct.length;s={struct:new Ho(mn(u,s.struct.id.clock+s.struct.length),p),offset:0}}else{const p=s.struct.id.clock+s.struct.length-f.id.clock;p>0&&(s.struct.constructor===Ho?s.struct.length-=p:f=zie(f,p)),s.struct.mergeWith(f)||(Au(a,s.struct,s.offset),s={struct:f,offset:0},d.next())}}else s={struct:d.curr,offset:0},d.next();for(let f=d.curr;f!==null&&f.id.client===u&&f.id.clock===s.struct.id.clock+s.struct.length&&f.constructor!==Ho;f=d.next())Au(a,s.struct,s.offset),s={struct:f,offset:0}}s!==null&&(Au(a,s.struct,s.offset),s=null),n4(a);const l=r.map(d=>XE(d)),c=pie(l);return qg(o,c),o.toUint8Array()},Bie=(t,e,n=vg,r=Bf)=>{const i=n9(e),s=new r,o=new t4(s),a=new n(Ha(t)),l=new e4(a,!1);for(;l.curr;){const d=l.curr,u=d.id.client,f=i.get(u)||0;if(l.curr.constructor===Ho){l.next();continue}if(d.id.clock+d.length>f)for(Au(o,d,lh(f-d.id.clock,0)),l.next();l.curr&&l.curr.id.client===u;)Au(o,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===u&&l.curr.id.clock+l.curr.length<=f;)l.next()}n4(o);const c=XE(a);return qg(s,c),s.toUint8Array()},c9=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:yr(t.encoder.restEncoder)}),t.encoder.restEncoder=pi(),t.written=0)},Au=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&c9(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),kt(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},n4=t=>{c9(t);const e=t.encoder.restEncoder;kt(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];kt(e,r.written),Ex(e,r.restEncoder)}},Uie=(t,e,n,r)=>{const i=new n(Ha(t)),s=new e4(i,!1),o=new r,a=new t4(o);for(let c=s.curr;c!==null;c=s.next())Au(a,e(c),0);n4(a);const l=XE(i);return qg(o,l),o.toUint8Array()},Hie=t=>Uie(t,Hre,vg,xy),RN="You must not compute changes after the event-handler fired.";class Mx{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=Vie(this.currentTarget,this.target))}deletes(e){return JI(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Cl(RN);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){const s=n._map.get(i);let o,a;if(this.adds(s)){let l=s.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(s))if(l!==null&&this.deletes(l))o="delete",a=WS(l.content.getContent());else return;else l!==null&&this.deletes(l)?(o="update",a=WS(l.content.getContent())):(o="add",a=void 0)}else if(this.deletes(s))o="delete",a=WS(s.content.getContent());else return;e.set(i,{action:o,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Cl(RN);const n=this.target,r=cd(),i=cd(),s=[];if(e={added:r,deleted:i,delta:s,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const l=()=>{a&&s.push(a)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=c.length,i.add(c)):this.adds(c)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(c.content.getContent()),r.add(c)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=c.length);a!==null&&a.retain===void 0&&l()}this._changes=e}return e}}const Vie=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,i=e._item.parent._start;for(;i!==e._item&&i!==null;)i.deleted||r++,i=i.right;n.unshift(r)}e=e._item.parent}return n},u9=80;let r4=0;class Wie{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=r4++}}const qie=t=>{t.timestamp=r4++},d9=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=r4++},Gie=(t,e,n)=>{if(t.length>=u9){const r=t.reduce((i,s)=>i.timestamp<s.timestamp?i:s);return d9(r,e,n),r}else{const r=new Wie(e,n);return t.push(r),r}},Ox=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((s,o)=>Z2(e-s.index)<Z2(e-o.index)?s:o);let r=t._start,i=0;for(n!==null&&(r=n.p,i=n.index,qie(n));r.right!==null&&i<e;){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>e;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&Z2(n.index-i)<r.parent.length/u9?(d9(n,r,i),n):Gie(t._searchMarker,r,i)},z1=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const i=t[r];if(n>0){let s=i.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(i.index-=s.length);if(s===null||s.marker===!0){t.splice(r,1);continue}i.p=s,s.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=lh(e,i.index+n))}},Rx=(t,e,n)=>{const r=t,i=e.changedParentTypes;for(;Co(i,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;i9(r._eH,n,e)};class Pi{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=EN(),this._dEH=EN(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw gl()}clone(){throw gl()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){PN(this._eH,e)}observeDeep(e){PN(this._dEH,e)}unobserve(e){TN(this._eH,e)}unobserveDeep(e){TN(this._dEH,e)}toJSON(){}}const f9=(t,e,n)=>{e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const i=[];let s=t._start;for(;s!==null&&r>0;){if(s.countable&&!s.deleted){const o=s.content.getContent();if(o.length<=e)e-=o.length;else{for(let a=e;a<o.length&&r>0;a++)i.push(o[a]),r--;e=0}}s=s.right}return i},h9=t=>{const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let i=0;i<r.length;i++)e.push(r[i])}n=n.right}return e},B1=(t,e)=>{let n=0,r=t._start;for(;r!==null;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let s=0;s<i.length;s++)e(i[s],n++,t)}r=r.right}},p9=(t,e)=>{const n=[];return B1(t,(r,i)=>{n.push(e(r,i,t))}),n},Kie=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},g9=(t,e)=>{const n=Ox(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},fw=(t,e,n,r)=>{let i=n;const s=t.doc,o=s.clientID,a=s.store,l=n===null?e._start:n.right;let c=[];const d=()=>{c.length>0&&(i=new Ki(mn(o,mi(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new Vf(c)),i.integrate(t,0),c=[])};r.forEach(u=>{if(u===null)c.push(u);else switch(u.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(u);break;default:switch(d(),u.constructor){case Uint8Array:case ArrayBuffer:i=new Ki(mn(o,mi(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new Sy(new Uint8Array(u))),i.integrate(t,0);break;case Gg:i=new Ki(mn(o,mi(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new ky(u)),i.integrate(t,0);break;default:if(u instanceof Pi)i=new Ki(mn(o,mi(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new zc(u)),i.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),d()},m9=()=>Cl("Length exceeded!"),y9=(t,e,n,r)=>{if(n>e._length)throw m9();if(n===0)return e._searchMarker&&z1(e._searchMarker,n,r.length),fw(t,e,null,r);const i=n,s=Ox(e,n);let o=e._start;for(s!==null&&(o=s.p,n-=s.index,n===0&&(o=o.prev,n+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(n<=o.length){n<o.length&&ud(t,mn(o.id.client,o.id.clock+n));break}n-=o.length}return e._searchMarker&&z1(e._searchMarker,i,r.length),fw(t,e,o,r)},Jie=(t,e,n)=>{let i=(e._searchMarker||[]).reduce((s,o)=>o.index>s.index?o:s,{index:0,p:e._start}).p;if(i)for(;i.right;)i=i.right;return fw(t,e,i,n)},v9=(t,e,n,r)=>{if(r===0)return;const i=n,s=r,o=Ox(e,n);let a=e._start;for(o!==null&&(a=o.p,n-=o.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&ud(t,mn(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&ud(t,mn(a.id.client,a.id.clock+r)),a.delete(t),r-=a.length),a=a.right;if(r>0)throw m9();e._searchMarker&&z1(e._searchMarker,i,-s+r)},hw=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},i4=(t,e,n,r)=>{const i=e._map.get(n)||null,s=t.doc,o=s.clientID;let a;if(r==null)a=new Vf([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new Vf([r]);break;case Uint8Array:a=new Sy(r);break;case Gg:a=new ky(r);break;default:if(r instanceof Pi)a=new zc(r);else throw new Error("Unexpected content type")}new Ki(mn(o,mi(s.store,o)),i,i&&i.lastId,null,null,e,n,a).integrate(t,0)},s4=(t,e)=>{const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},b9=t=>{const e={};return t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},w9=(t,e)=>{const n=t._map.get(e);return n!==void 0&&!n.deleted},Yie=(t,e)=>{const n={};return t._map.forEach((r,i)=>{let s=r;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&cp(s,e)&&(n[i]=s.content.getContent()[s.length-1])}),n},Kv=t=>fie(t.entries(),e=>!e[1].deleted);class Zie extends Mx{constructor(e,n){super(e,n),this._transaction=n}}class Gp extends Pi{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new Gp;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Gp}clone(){const e=new Gp;return e.insert(0,this.toArray().map(n=>n instanceof Pi?n.clone():n)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(e,n){super._callObserver(e,n),Rx(this,e,new Zie(this,e))}insert(e,n){this.doc!==null?Xn(this.doc,r=>{y9(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?Xn(this.doc,n=>{Jie(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?Xn(this.doc,r=>{v9(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return g9(this,e)}toArray(){return h9(this)}slice(e=0,n=this.length){return f9(this,e,n)}toJSON(){return this.map(e=>e instanceof Pi?e.toJSON():e)}map(e){return p9(this,e)}forEach(e){B1(this,e)}[Symbol.iterator](){return Kie(this)}_write(e){e.writeTypeRef(xse)}}const Xie=t=>new Gp;class Qie extends Mx{constructor(e,n,r){super(e,n),this.keysChanged=r}}class Uf extends Pi{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new Uf}clone(){const e=new Uf;return this.forEach((n,r)=>{e.set(r,n instanceof Pi?n.clone():n)}),e}_callObserver(e,n){Rx(this,e,new Qie(this,e,n))}toJSON(){const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const i=n.content.getContent()[n.length-1];e[r]=i instanceof Pi?i.toJSON():i}}),e}get size(){return[...Kv(this._map)].length}keys(){return ZS(Kv(this._map),e=>e[0])}values(){return ZS(Kv(this._map),e=>e[1].content.getContent()[e[1].length-1])}entries(){return ZS(Kv(this._map),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?Xn(this.doc,n=>{hw(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?Xn(this.doc,r=>{i4(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return s4(this,e)}has(e){return w9(this,e)}clear(){this.doc!==null?Xn(this.doc,e=>{this.forEach(function(n,r,i){hw(e,i,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(Sse)}}const ese=t=>new Uf,Ru=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&Bre(t,e);class BC{constructor(e,n,r,i){this.left=e,this.right=n,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&_l(),this.right.content.constructor){case ii:this.right.deleted||Kg(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const LN=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case ii:e.right.deleted||Kg(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&ud(t,mn(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},Jv=(t,e,n,r)=>{const i=new Map,s=r?Ox(e,n):null;if(s){const o=new BC(s.p.left,s.p,s.index,i);return LN(t,o,n-s.index)}else{const o=new BC(null,e._start,0,i);return LN(t,o,n)}},x9=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===ii&&Ru(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=t.doc,s=i.clientID;r.forEach((o,a)=>{const l=n.left,c=n.right,d=new Ki(mn(s,mi(i.store,s)),l,l&&l.lastId,c,c&&c.id,e,null,new ii(a,o));d.integrate(t,0),n.right=d,n.forward()})},Kg=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},S9=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===ii&&Ru(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},k9=(t,e,n,r)=>{const i=t.doc,s=i.clientID,o=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)??null;if(!Ru(c,l)){o.set(a,c);const{left:d,right:u}=n;n.right=new Ki(mn(s,mi(i.store,s)),d,d&&d.lastId,u,u&&u.id,e,null,new ii(a,l)),n.right.integrate(t,0),n.forward()}}return o},QS=(t,e,n,r,i)=>{n.currentAttributes.forEach((f,h)=>{i[h]===void 0&&(i[h]=null)});const s=t.doc,o=s.clientID;S9(n,i);const a=k9(t,e,n,i),l=r.constructor===String?new El(r):r instanceof Pi?new zc(r):new ch(r);let{left:c,right:d,index:u}=n;e._searchMarker&&z1(e._searchMarker,n.index,l.getLength()),d=new Ki(mn(o,mi(s.store,o)),c,c&&c.lastId,d,d&&d.id,e,null,l),d.integrate(t,0),n.right=d,n.index=u,n.forward(),x9(t,e,n,a)},DN=(t,e,n,r,i)=>{const s=t.doc,o=s.clientID;S9(n,i);const a=k9(t,e,n,i);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===ii));){if(!n.right.deleted)switch(n.right.content.constructor){case ii:{const{key:l,value:c}=n.right.content,d=i[l];if(d!==void 0){if(Ru(d,c))a.delete(l);else{if(r===0)break e;a.set(l,c)}n.right.delete(t)}else n.currentAttributes.set(l,c);break}default:r<n.right.length&&ud(t,mn(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;n.right=new Ki(mn(o,mi(s.store,o)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new El(l)),n.right.integrate(t,0),n.forward()}x9(t,e,n,a)},C9=(t,e,n,r,i)=>{let s=e;const o=Ks();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===ii){const c=s.content;o.set(c.key,c)}s=s.right}let a=0,l=!1;for(;e!==s;){if(n===e&&(l=!0),!e.deleted){const c=e.content;switch(c.constructor){case ii:{const{key:d,value:u}=c,f=r.get(d)??null;(o.get(d)!==c||f===u)&&(e.delete(t),a++,!l&&(i.get(d)??null)===u&&f!==u&&(f===null?i.delete(d):i.set(d,f))),!l&&!e.deleted&&Kg(i,c);break}}}e=e.right}return a},tse=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===ii){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},nse=t=>{let e=0;return Xn(t.doc,n=>{let r=t._start,i=t._start,s=Ks();const o=LC(s);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case ii:Kg(o,i.content);break;default:e+=C9(n,r,i,s,o),s=LC(o),r=i;break}i=i.right}}),e},rse=t=>{const e=new Set,n=t.doc;for(const[r,i]of t.afterState.entries()){const s=t.beforeState.get(r)||0;i!==s&&a9(t,n.store.clients.get(r),s,i,o=>{!o.deleted&&o.content.constructor===ii&&o.constructor!==Uo&&e.add(o.parent)})}Xn(n,r=>{KI(t,t.deleteSet,i=>{if(i instanceof Uo||!i.parent._hasFormatting||e.has(i.parent))return;const s=i.parent;i.content.constructor===ii?e.add(s):tse(r,i)});for(const i of e)nse(i)})},IN=(t,e,n)=>{const r=n,i=LC(e.currentAttributes),s=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case zc:case ch:case El:n<e.right.length&&ud(t,mn(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&C9(t,s,e.right,i,e.currentAttributes);const o=(e.left||e.right).parent;return o._searchMarker&&z1(o._searchMarker,e.index,-r+n),e};class ise extends Mx{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];Xn(e,r=>{const i=new Map,s=new Map;let o=this.target._start,a=null;const l={};let c="",d=0,u=0;const f=()=>{if(a!==null){let h=null;switch(a){case"delete":u>0&&(h={delete:u}),u=0;break;case"insert":(typeof c=="object"||c.length>0)&&(h={insert:c},i.size>0&&(h.attributes={},i.forEach((p,g)=>{p!==null&&(h.attributes[g]=p)}))),c="";break;case"retain":d>0&&(h={retain:d},Fre(l)||(h.attributes=Ire({},l))),d=0;break}h&&n.push(h),a=null}};for(;o!==null;){switch(o.content.constructor){case zc:case ch:this.adds(o)?this.deletes(o)||(f(),a="insert",c=o.content.getContent()[0],f()):this.deletes(o)?(a!=="delete"&&(f(),a="delete"),u+=1):o.deleted||(a!=="retain"&&(f(),a="retain"),d+=1);break;case El:this.adds(o)?this.deletes(o)||(a!=="insert"&&(f(),a="insert"),c+=o.content.str):this.deletes(o)?(a!=="delete"&&(f(),a="delete"),u+=o.length):o.deleted||(a!=="retain"&&(f(),a="retain"),d+=o.length);break;case ii:{const{key:h,value:p}=o.content;if(this.adds(o)){if(!this.deletes(o)){const g=i.get(h)??null;Ru(g,p)?p!==null&&o.delete(r):(a==="retain"&&f(),Ru(p,s.get(h)??null)?delete l[h]:l[h]=p)}}else if(this.deletes(o)){s.set(h,p);const g=i.get(h)??null;Ru(g,p)||(a==="retain"&&f(),l[h]=g)}else if(!o.deleted){s.set(h,p);const g=l[h];g!==void 0&&(Ru(g,p)?g!==null&&o.delete(r):(a==="retain"&&f(),p===null?delete l[h]:l[h]=p))}o.deleted||(a==="insert"&&f(),Kg(i,o.content));break}}o=o.right}for(f();n.length>0;){const h=n[n.length-1];if(h.retain!==void 0&&h.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class bg extends Pi{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new bg}clone(){const e=new bg;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new ise(this,e,n);Rx(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===El&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?Xn(this.doc,r=>{const i=new BC(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const o=e[s];if(o.insert!==void 0){const a=!n&&typeof o.insert=="string"&&s===e.length-1&&i.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof a!="string"||a.length>0)&&QS(r,this,i,a,o.attributes||{})}else o.retain!==void 0?DN(r,this,i,o.retain,o.attributes||{}):o.delete!==void 0&&IN(r,i,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){const i=[],s=new Map,o=this.doc;let a="",l=this._start;function c(){if(a.length>0){const u={};let f=!1;s.forEach((p,g)=>{f=!0,u[g]=p});const h={insert:a};f&&(h.attributes=u),i.push(h),a=""}}const d=()=>{for(;l!==null;){if(cp(l,e)||n!==void 0&&cp(l,n))switch(l.content.constructor){case El:{const u=s.get("ychange");e!==void 0&&!cp(l,e)?(u===void 0||u.user!==l.id.client||u.type!=="removed")&&(c(),s.set("ychange",r?r("removed",l.id):{type:"removed"})):n!==void 0&&!cp(l,n)?(u===void 0||u.user!==l.id.client||u.type!=="added")&&(c(),s.set("ychange",r?r("added",l.id):{type:"added"})):u!==void 0&&(c(),s.delete("ychange")),a+=l.content.str;break}case zc:case ch:{c();const u={insert:l.content.getContent()[0]};if(s.size>0){const f={};u.attributes=f,s.forEach((h,p)=>{f[p]=h})}i.push(u);break}case ii:cp(l,e)&&(c(),Kg(s,l.content));break}l=l.right}c()};return e||n?Xn(o,u=>{e&&FC(u,e),n&&FC(u,n),d()},"cleanup"):d(),i}insert(e,n,r){if(n.length<=0)return;const i=this.doc;i!==null?Xn(i,s=>{const o=Jv(s,this,e,!r);r||(r={},o.currentAttributes.forEach((a,l)=>{r[l]=a})),QS(s,this,o,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const i=this.doc;i!==null?Xn(i,s=>{const o=Jv(s,this,e,!r);QS(s,this,o,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?Xn(r,i=>{IN(i,Jv(i,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const i=this.doc;i!==null?Xn(i,s=>{const o=Jv(s,this,e,!1);o.right!==null&&DN(s,this,o,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?Xn(this.doc,n=>{hw(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?Xn(this.doc,r=>{i4(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return s4(this,e)}getAttributes(){return b9(this)}_write(e){e.writeTypeRef(kse)}}const sse=t=>new bg;class ek{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===wg||n.constructor===Hf)&&n._start!==null)e=n._start;else for(;e!==null;)if(e.right!==null){e=e.right;break}else e.parent===this._root?e=null:e=e.parent._item;while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Hf extends Pi{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Hf}clone(){const e=new Hf;return e.insert(0,this.toArray().map(n=>n instanceof Pi?n.clone():n)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new ek(this,e)}querySelector(e){e=e.toUpperCase();const r=new ek(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),Tc(new ek(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){Rx(this,e,new lse(this,n,e))}toString(){return p9(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const i=e.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),B1(this,s=>{i.insertBefore(s.toDOM(e,n,r),null)}),i}insert(e,n){this.doc!==null?Xn(this.doc,r=>{y9(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)Xn(this.doc,r=>{const i=e&&e instanceof Pi?e._item:e;fw(r,this,i,n)});else{const r=this._prelimContent,i=e===null?0:r.findIndex(s=>s===e)+1;if(i===0&&e!==null)throw Cl("Reference item not found");r.splice(i,0,...n)}}delete(e,n=1){this.doc!==null?Xn(this.doc,r=>{v9(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return h9(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return g9(this,e)}slice(e=0,n=this.length){return f9(this,e,n)}forEach(e){B1(this,e)}_write(e){e.writeTypeRef(_se)}}const ose=t=>new Hf;class wg extends Hf{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new wg(this.nodeName)}clone(){const e=new wg(this.nodeName),n=this.getAttributes();return jre(n,(r,i)=>{typeof r=="string"&&e.setAttribute(i,r)}),e.insert(0,this.toArray().map(r=>r instanceof Pi?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const a in e)r.push(a);r.sort();const i=r.length;for(let a=0;a<i;a++){const l=r[a];n.push(l+'="'+e[l]+'"')}const s=this.nodeName.toLocaleLowerCase(),o=n.length>0?" "+n.join(" "):"";return`<${s}${o}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?Xn(this.doc,n=>{hw(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?Xn(this.doc,r=>{i4(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return s4(this,e)}hasAttribute(e){return w9(this,e)}getAttributes(e){return e?Yie(this,e):b9(this)}toDOM(e=document,n={},r){const i=e.createElement(this.nodeName),s=this.getAttributes();for(const o in s){const a=s[o];typeof a=="string"&&i.setAttribute(o,a)}return B1(this,o=>{i.appendChild(o.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(Cse),e.writeKey(this.nodeName)}}const ase=t=>new wg(t.readKey());class lse extends Mx{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class pw extends Uf{constructor(e){super(),this.hookName=e}_copy(){return new pw(this.hookName)}clone(){const e=new pw(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const i=n[this.hookName];let s;return i!==void 0?s=i.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(Ase),e.writeKey(this.hookName)}}const cse=t=>new pw(t.readKey());class gw extends bg{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new gw}clone(){const e=new gw;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const i=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(e=>{const n=[];for(const i in e.attributes){const s=[];for(const o in e.attributes[i])s.push({key:o,value:e.attributes[i][o]});s.sort((o,a)=>o.key<a.key?-1:1),n.push({nodeName:i,attrs:s})}n.sort((i,s)=>i.nodeName<s.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){const s=n[i];r+=`<${s.nodeName}`;for(let o=0;o<s.attrs.length;o++){const a=s.attrs[o];r+=` ${a.key}="${a.value}"`}r+=">"}r+=e.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(Ese)}}const use=t=>new gw;class o4{constructor(e,n){this.id=e,this.length=n}get deleted(){throw gl()}mergeWith(e){return!1}write(e,n,r){throw gl()}integrate(e,n){throw gl()}}const dse=0;class Uo extends o4{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),o9(e.doc.store,this)}write(e,n){e.writeInfo(dse),e.writeLen(this.length-n)}getMissing(e,n){return null}}class Sy{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Sy(this.content)}splice(e){throw gl()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const fse=t=>new Sy(t.readBuf());class U1{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new U1(this.len)}splice(e){const n=new U1(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){uw(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const hse=t=>new U1(t.readLen()),_9=(t,e)=>new Gg({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class ky{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new ky(_9(this.doc.guid,this.opts))}splice(e){throw gl()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const pse=t=>new ky(_9(t.readString(),t.readAny()));class ch{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new ch(this.embed)}splice(e){throw gl()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const gse=t=>new ch(t.readJSON());class ii{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new ii(this.key,this.value)}splice(e){throw gl()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const mse=t=>new ii(t.readKey(),t.readJSON());class mw{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new mw(this.arr)}splice(e){const n=new mw(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const s=this.arr[i];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const yse=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const i=t.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new mw(n)};class Vf{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Vf(this.arr)}splice(e){const n=new Vf(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const s=this.arr[i];e.writeAny(s)}}getRef(){return 8}}const vse=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Vf(n)};class El{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new El(this.str)}splice(e){const n=new El(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const bse=t=>new El(t.readString()),wse=[Xie,ese,sse,ase,ose,cse,use],xse=0,Sse=1,kse=2,Cse=3,_se=4,Ase=5,Ese=6;class zc{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new zc(this.type._copy())}splice(e){throw gl()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const Pse=t=>new zc(wse[t.readTypeRef()](t)),yw=(t,e,n)=>{const{client:r,clock:i}=e.id,s=new Ki(mn(r,i+n),e,mn(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=mn(e.redone.client,e.redone.clock+n)),e.right=s,s.right!==null&&(s.right.left=s),t._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=n,s};let Ki=class UC extends o4{constructor(e,n,r,i,s,o,a,l){super(e,l.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=s,this.parent=o,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?pN:0}set marker(e){(this.info&GS)>0!==e&&(this.info^=GS)}get marker(){return(this.info&GS)>0}get keep(){return(this.info&hN)>0}set keep(e){this.keep!==e&&(this.info^=hN)}get countable(){return(this.info&pN)>0}get deleted(){return(this.info&qS)>0}set deleted(e){this.deleted!==e&&(this.info^=qS)}markDeleted(){this.info|=qS}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=mi(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=mi(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===qp&&this.id.client!==this.parent.client&&this.parent.clock>=mi(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=NN(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=ud(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Uo||this.right&&this.right.constructor===Uo)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===UC&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===UC&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===qp){const r=XS(n,this.parent);r.constructor===Uo?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=NN(e,e.doc.store,mn(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const s=new Set,o=new Set;for(;i!==null&&i!==this.right;){if(o.add(i),s.add(i),Gv(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,s.clear();else if(Gv(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&o.has(XS(e.doc.store,i.origin)))s.has(XS(e.doc.store,i.origin))||(r=i,s.clear());else break;i=i.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),o9(e.doc.store,this),this.content.integrate(e,this),ON(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Uo(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:mn(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Gv(e.origin,this.lastId)&&this.right===e&&Gv(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),uw(e.deleteSet,this.id.client,this.id.clock,this.length),ON(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw _l();this.content.gc(e),n?Lie(e,this,new Uo(this.id,this.length)):this.content=new U1(this.length)}write(e,n){const r=n>0?mn(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,s=this.parentSub,o=this.content.getRef()&Ax|(r===null?0:wo)|(i===null?0:gc)|(s===null?0:$1);if(e.writeInfo(o),r!==null&&e.writeLeftID(r),i!==null&&e.writeRightID(i),r===null&&i===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const c=Oie(a);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===qp?(e.writeParentInfo(!1),e.writeLeftID(a)):_l();s!==null&&e.writeString(s)}this.content.write(e,n)}};const A9=(t,e)=>Tse[e&Ax](t),Tse=[()=>{_l()},hse,yse,fse,bse,gse,mse,Pse,vse,pse,()=>{_l()}],Nse=10;class Ho extends o4{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){_l()}write(e,n){e.writeInfo(Nse),kt(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const E9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},P9="__ $YJS$ __";E9[P9]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");E9[P9]=!0;function Mse(t,e){const n=e.toJSON(),r=t.instantiator.createFromJson(n);return r.resolveRefs(t.idIndex),r}function a4(t,e,n){if(e.parent&&e.parent.id!==n&&e.parent.children.splice(e.parent.children.indexOf(e),1),n){const r=t.getById(n);r?(e.parent=r,r.children.indexOf(e)<0&&r.children.push(e)):e.parent=null}else e.parent=null}function Ose(t,e,n,r){const i=n.get("id");if(!t.getById(i)&&n){const s=Mse(t,n);t.addToIndex(s);const o=n.get("parent");a4(t,s,o),r.created.add(s);const a=t.getById(o);return a&&r.reorder.add(a),s}return null}function Rse(t,e,n){const r=t.getById(e);r&&(a4(t,r,null),t.removeFromIndex(r))}function Lse(t,e,n,r,i,s,o){const a=t.getById(n),l=e.get(n);if(a&&l)if(r==="parent"){const c=l.get("parent");a4(t,a,c),o.updated.add(a)}else if(r==="parent:order"){const c=l.get("parent"),d=t.getById(c);o.updated.add(a),d&&(o.updated.add(d),o.reorder.add(d))}else if(r==="head"||r==="tail"){if(s){const c=t.getById(s);a[r]=c}else a[r]=null;o.updated.add(a)}else a[r]=s,o.updated.add(a)}function Dse(t,e,n,r){t.target===n?t.changes.keys.forEach((i,s)=>{if(i.action==="add"){const o=n.get(s);Ose(e,n,o,r)}else i.action==="delete"&&Rse(e,s)}):t.changes.keys.forEach((i,s)=>{if(i.action==="update"){const o=t.target.get("id"),a=t.target.get(s);Lse(e,n,o,s,i.oldValue,a,r)}})}function Ise(t,e,n,r){const i={created:new Set,updated:new Set,deleted:new Set,reorder:new Set};for(const s of r)Dse(s,e,n,i);return i.created.forEach(s=>{s.resolveRefs(e.idIndex,!0),s instanceof zr&&s.update(t.canvas)}),i.updated.forEach(s=>{s instanceof zr&&s.update(t.canvas)}),i.reorder.forEach(s=>{s.children.sort((o,a)=>{const l=n.get(o.id),c=n.get(a.id);return!l||!c?0:l.get("parent:order")-c.get("parent:order")})}),i}function $se(t,e){const n=[];return t.forEach((r,i)=>{r.get("parent")===e&&n.push(r)}),n}function jse(t){return t.sort((e,n)=>e.get("parent:order")-n.get("parent:order"))}function Fse(t,e){const n=t.map(i=>i.get("parent:order"));if(n.length===0)return 0;let r=0;return e===0?r=n[0]-1:e>=n.length?r=n[n.length-1]+1:r=(n[e-1]+n[e])/2,r}function T9(t,e,n,r){const i=$se(t,n).filter(a=>a.get("id")!==e),s=jse(i);return Fse(s,r)}function N9(t,e=!1){const n=t.toJSON(),r=new Uf;for(const i in n)r.set(i,n[i]);if(e&&t.parent){const i=t.parent.children.indexOf(t);r.set("parent:order",i)}return r}function M9(t,e){const n=N9(e);t.set(e.id,n)}function O9(t,e){t.delete(e)}function R9(t,e,n,r){const i=t.get(e);i&&i.set(n,r)}function L9(t,e,n,r){const i=t.get(e);i&&i.set(n,r==null?void 0:r.id)}function D9(t,e,n,r){const i=t.get(e),s=t.get(n);if(i&&s){s.set("parent",e);const o=T9(t,n,e,r);s.set("parent:order",o)}}function I9(t,e,n){const r=t.get(e),i=t.get(n);r&&i&&(i.delete("parent"),i.delete("parent:order"))}function $9(t,e,n,r){const i=t.get(e),s=t.get(n);if(i&&s){const o=T9(t,n,e,r);s.set("parent:order",o)}}function $N(t,e){if(t.mutations.length!==0)for(let n=0;n<t.mutations.length;n++){const r=t.mutations[n];switch(r.type){case Rr.CREATE:{r.obj.traverse(s=>{M9(e,s)});break}case Rr.DELETE:{r.obj.traverse(s=>{O9(e,s.id)});break}case Rr.ASSIGN:{const i=r;R9(e,i.obj.id,i.field,i.newValue);break}case Rr.ASSIGN_REF:{const i=r;L9(e,i.obj.id,i.field,i.newValue);break}case Rr.INSERT_CHILD:{const i=r;D9(e,i.parent.id,i.obj.id,i.position);break}case Rr.REMOVE_CHILD:{const i=r;I9(e,i.parent.id,i.obj.id);break}case Rr.REORDER_CHILD:{const i=r;$9(e,i.parent.id,i.obj.id,i.newPosition);break}}}}function zse(t,e){if(t.mutations.length!==0)for(let n=t.mutations.length-1;n>=0;n--){const r=t.mutations[n];switch(r.type){case Rr.CREATE:{O9(e,r.obj.id);break}case Rr.DELETE:{M9(e,r.obj);break}case Rr.ASSIGN:{const i=r;R9(e,i.obj.id,i.field,i.oldValue);break}case Rr.ASSIGN_REF:{const i=r;L9(e,i.obj.id,i.field,i.oldValue);break}case Rr.INSERT_CHILD:{const i=r;I9(e,i.parent.id,i.obj.id);break}case Rr.REMOVE_CHILD:{const i=r;D9(e,i.parent.id,i.obj.id,i.position);break}case Rr.REORDER_CHILD:{const i=r;$9(e,i.parent.id,i.obj.id,i.oldPosition);break}}}}function Bse(t,e){for(const n in t.idIndex){const r=t.idIndex[n];e.set(n,N9(r,!0))}}var j9=class F9 extends oI{constructor(){super(F9.ID),this.editor=null,this.disposables=[],this.state="idle",this.yDoc=null,this.yStore=null}activate(e){this.editor=e}deactivate(e){}start(e){this.state="syncing",this.yDoc=e,this.yStore=this.yDoc.getMap("store"),this.watch()}stop(){this.state="idle",this.yDoc=null,this.yStore=null,this.unwatch()}flush(){if(this.state==="syncing"&&this.yDoc&&this.yStore){const e=this.editor.store;Bse(e,this.yStore)}}watch(){this.disposables.push(this.editor.transform.onTransaction.addListener(n=>{this.state=="syncing"&&this.yDoc&&this.yStore&&this.yDoc.transact(()=>{$N(n,this.yStore)})})),this.disposables.push(this.editor.transform.onUndo.addListener(n=>{this.state=="syncing"&&this.yDoc&&this.yStore&&this.yDoc.transact(()=>{for(let r=n.transactions.length-1;r>=0;r--){const i=n.transactions[r];zse(i,this.yStore)}})})),this.disposables.push(this.editor.transform.onRedo.addListener(n=>{this.state=="syncing"&&this.yDoc&&this.yStore&&this.yDoc.transact(()=>{for(let r=0;r<n.transactions.length;r++){const i=n.transactions[r];$N(i,this.yStore)}})}));const e=(n,r)=>{this.yStore&&!r.local&&(Ise(this.editor,this.editor.store,this.yStore,n).created.forEach(s=>{if(s instanceof I1){const o=s;this.editor.setDoc(o),o.children.length>0&&o.children[0]instanceof ws&&this.editor.setCurrentPage(o.children[0])}}),this.editor.repaint())};this.yStore&&(this.yStore.observeDeep(e),this.disposables.push({dispose:()=>{this.yStore&&this.yStore.unobserveDeep(e)}}))}unwatch(){this.disposables.forEach(e=>e.dispose()),this.disposables=[]}logChanges(){this.yStore&&this.yStore.observeDeep((e,n)=>{for(const r of e)r.target===this.yStore?r.changes.keys.forEach((i,s)=>{i.action==="add"?console.log(`[YStore] add: ${s}`):i.action==="delete"?console.log(`[YStore] delete: ${s}`):i.action==="update"&&console.log(`[YStore] update: ${s}, old value: ${i.oldValue}`)}):r.changes.keys.forEach((i,s)=>{i.action==="add"?console.log(`[YObj] add: ${s}`):i.action==="delete"?console.log(`[YObj] delete: ${s}`):i.action==="update"&&console.log(`[YObj] update: ${s} - ${i.oldValue} --> ${r.target.get(s)}`)})})}printYStore(){var e;(e=this.yStore)==null||e.forEach((n,r)=>{const i=n.toJSON();console.log(`[${i.type}] id:${i.id}, parent:${i.parent}, order:${i["parent:order"]}`)})}printPages(){var e;(e=this.editor.getDoc())==null||e.children.forEach(n=>{var r;const i=(r=this.yStore)==null?void 0:r.get(n.id),s=i==null?void 0:i.toJSON();console.log(`[${s.type}] id:${s.id}, parent:${s.parent}, order:${s["parent:order"]}`)})}printCurrentPage(){const e=this.editor.getCurrentPage();e&&e.children.forEach(n=>{var r;const i=(r=this.yStore)==null?void 0:r.get(n.id),s=i==null?void 0:i.toJSON();console.log(`[${s.type}] id:${s.id}, parent:${s.parent}, order:${s["parent:order"]}`)})}};j9.ID="dgmjs/yjs-doc-sync";var Use=j9,Hse=class{constructor(t,e,n="unknown",r="#000000",i=null){this.yAwareness=t,this.id=e,this.name=n,this.color=r,this.cursor=[0,0],this.area=null,this.selection=[],this.pageId=i,this.setName(this.name),this.setColor(this.color),this.setCursorPosition(this.cursor),this.setArea(this.area),this.setSelection([]),this.setPageId(this.pageId)}setCursorPosition(t){this.cursor=t,this.yAwareness.setLocalStateField("cursor",this.cursor)}setName(t){this.name=t,this.yAwareness.setLocalStateField("name",this.name)}setColor(t){this.color=t,this.yAwareness.setLocalStateField("color",this.color)}setArea(t){this.area=t,this.yAwareness.setLocalStateField("area",this.area)}setSelection(t){this.selection=t.map(e=>e.id),this.yAwareness.setLocalStateField("selection",this.selection)}setPageId(t){this.pageId=t,this.yAwareness.setLocalStateField("pageId",this.pageId)}},Vse=class{constructor(t,e,n){this.cursorDOM=null,this.nameDOM=null;var r,i;this.editor=t,this.id=e,this.name="unknown",this.color="#000000",this.cursor=[0,0],this.area=null,this.selection=[],this.pageId=null,this.cursorDOM=document.createElement("div"),this.cursorDOM.className="yjs-awareness user-cursor",this.cursorDOM.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="white" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="m4 4 7.07 17 2.51-7.39L21 11.07z"/></svg>',this.cursorDOM.style.position="absolute",this.cursorDOM.style.color=this.color,this.cursorDOM.style.zIndex="1000",(r=this.editor.canvasElement.parentElement)==null||r.appendChild(this.cursorDOM),this.nameDOM=document.createElement("div"),this.nameDOM.className="yjs-awareness user-name",this.nameDOM.style.position="absolute",this.nameDOM.style.backgroundColor=this.color,this.nameDOM.style.padding="2px 6px",this.nameDOM.style.borderRadius="3px",this.nameDOM.style.border="1px solid white",this.nameDOM.style.fontSize="11px",this.nameDOM.style.whiteSpace="nowrap",this.nameDOM.style.color="white",this.nameDOM.style.zIndex="1000",this.nameDOM.innerText=this.name,(i=this.editor.canvasElement.parentElement)==null||i.appendChild(this.nameDOM),this.update(n)}update(t){var e,n,r;const i=this.editor.canvas;if(this.name=t.name,this.color=t.color,this.area=t.area,this.selection=(e=t.selection)!=null?e:[],this.cursor=t.cursor,this.pageId=t.pageId,Array.isArray(this.cursor)){const o=M1.gcs2dcs(i,this.cursor),a=o[0]-5,l=o[1]-5;this.cursorDOM&&(this.cursorDOM.style.left=`${a}px`,this.cursorDOM.style.top=`${l}px`,this.cursorDOM.style.color=t.color),this.nameDOM&&(this.nameDOM.style.left=`${a+20}px`,this.nameDOM.style.top=`${l+20}px`,this.nameDOM.innerText=this.name,this.nameDOM.style.backgroundColor=t.color)}const s=(r=(n=this.editor.getCurrentPage())==null?void 0:n.id)!=null?r:null;s&&s===t.pageId?this.showCursor():this.hideCursor(),this.editor.repaint()}showCursor(){this.cursorDOM&&(this.cursorDOM.style.display="block"),this.nameDOM&&(this.nameDOM.style.display="block")}hideCursor(){this.cursorDOM&&(this.cursorDOM.style.display="none"),this.nameDOM&&(this.nameDOM.style.display="none")}destroy(){var t,e;this.id=-1,this.name="unknown",this.color="#000000",this.cursor=[0,0],this.selection=[],this.pageId=null,(t=this.cursorDOM)==null||t.remove(),(e=this.nameDOM)==null||e.remove()}},z9=class B9 extends oI{constructor(){super(B9.ID),this.editor=null,this.yAwareness=null,this.disposables=[],this.state="idle",this.localUserState=null,this.remoteUserStates=new Map,this.onUserEnter=new Wn,this.onUserLeave=new Wn,this.onUserIdentityUpdate=new Wn}activate(e){this.editor=e}deactivate(e){}start(e,n){var r,i;this.state="syncing",this.yAwareness=e,this.watch(),this.localUserState=new Hse(this.yAwareness,this.yAwareness.clientID,n.name,n.color,(i=(r=this.editor.getCurrentPage())==null?void 0:r.id)!=null?i:null)}stop(){this.state="idle"}getLocalUserState(){return this.localUserState}getRemoteUserStates(){return[...this.remoteUserStates.values()]}watch(){this.disposables.push(this.editor.onPointerMove.addListener(n=>{var r;const i=[n.x,n.y],s=this.editor.canvas.globalCoordTransformRev(i);(r=this.localUserState)==null||r.setCursorPosition(s)})),this.disposables.push(this.editor.onCurrentPageChange.addListener(n=>{var r,i;(i=this.localUserState)==null||i.setPageId((r=n==null?void 0:n.id)!=null?r:null),this.remoteUserStates.forEach(s=>{s.update(s)})})),this.disposables.push(this.editor.selection.onChange.addListener(n=>{var r;(r=this.localUserState)==null||r.setSelection(n)})),this.disposables.push(this.editor.onDragStart.addListener(n=>{var r;if(n.controller===null){const i=[mr.copy(n.dragPoint),mr.copy(n.dragPoint)];(r=this.localUserState)==null||r.setArea(i)}})),this.disposables.push(this.editor.onDrag.addListener(n=>{var r,i,s;if(n.controller===null){const a=[(i=(r=this.localUserState)==null?void 0:r.area[0])!=null?i:[0,0],mr.copy(n.dragPoint)];(s=this.localUserState)==null||s.setArea(a)}})),this.disposables.push(this.editor.onDragEnd.addListener(n=>{var r;n.controller===null&&((r=this.localUserState)==null||r.setArea(null))})),this.disposables.push(this.editor.onRepaint.addListener(()=>{var n,r;const i=(r=(n=this.editor.getCurrentPage())==null?void 0:n.id)!=null?r:null,s=this.editor.canvas;s.storeState(),s.strokeWidth=s.px*3,s.strokePattern=[],s.roughness=0,s.alpha=.5,this.remoteUserStates.forEach(o=>{if(o.pageId===i){if(s.strokeColor=o.color,o.selection.length>0){const a=o.selection.map(c=>this.editor.store.getById(c)).filter(c=>c instanceof zr),l=a.map(c=>c.getOutline().map(d=>M1.lcs2ccs(s,c,d)));if(l.forEach(c=>{s.polyline(c)}),a.length>1){const c=l.map(d=>mr.boundingRect(d)).reduce(mr.unionRect);s.strokeRect(c[0][0],c[0][1],c[1][0],c[1][1])}}if(o.area){const a=o.area.map(l=>M1.gcs2ccs(s,l));s.strokeRect(a[0][0],a[0][1],a[1][0],a[1][1])}}}),s.restoreState()}));const e=n=>{if(n.added.length>0){const r=[];n.added.forEach(i=>{const s=this.yAwareness.getStates().get(i);if(s){const o=new Vse(this.editor,i,s);this.remoteUserStates.set(i,o),r.push(o)}}),r.length>0&&this.onUserEnter.emit(r)}if(n.removed.length>0){const r=[];n.removed.forEach(i=>{const s=this.remoteUserStates.get(i);s&&(s.destroy(),this.remoteUserStates.delete(i),r.push(s))}),r.length>0&&this.onUserLeave.emit(r)}if(n.updated.length>0){const r=[];n.updated.forEach(i=>{const s=this.yAwareness.getStates().get(i),o=this.remoteUserStates.get(i);s&&o&&((s.name!==o.name||s.color!==o.color)&&r.push(o),o.update(s))}),r.length>0&&this.onUserIdentityUpdate.emit(r)}};this.yAwareness&&(this.yAwareness.on("change",e),this.disposables.push({dispose:()=>{this.yAwareness&&this.yAwareness.off("change",e)}}))}unwatch(){this.disposables.forEach(e=>e.dispose()),this.disposables=[]}logChanges(){this.yAwareness.on("change",e=>{console.log("awareness change",[...this.yAwareness.getStates().values()])})}};z9.ID="dgmjs/yjs-user-presence";var Wse=z9;/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qse=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),U9=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gse={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kse=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>S.createElement("svg",{ref:l,...Gse,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:U9("lucide",i),...a},[...o.map(([c,d])=>S.createElement(c,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=(t,e)=>{const n=S.forwardRef(({className:r,...i},s)=>S.createElement(Kse,{ref:s,iconNode:e,className:U9(`lucide-${qse(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=Ct("Airplay",[["path",{d:"M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1",key:"ns4c3b"}],["path",{d:"m12 15 5 6H7Z",key:"14qnn2"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jse=Ct("AlignCenterHorizontal",[["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M10 16v4a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-4",key:"11f1s0"}],["path",{d:"M10 8V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v4",key:"t14dx9"}],["path",{d:"M20 16v1a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-1",key:"1w07xs"}],["path",{d:"M14 8V7c0-1.1.9-2 2-2h2a2 2 0 0 1 2 2v1",key:"1apec2"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yse=Ct("AlignCenterVertical",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"M8 10H4a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h4",key:"14d6g8"}],["path",{d:"M16 10h4a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-4",key:"1e2lrw"}],["path",{d:"M8 20H7a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2h1",key:"1fkdwx"}],["path",{d:"M16 14h1a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-1",key:"1euafb"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=Ct("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zse=Ct("AlignEndHorizontal",[["rect",{width:"6",height:"16",x:"4",y:"2",rx:"2",key:"z5wdxg"}],["rect",{width:"6",height:"9",x:"14",y:"9",rx:"2",key:"um7a8w"}],["path",{d:"M22 22H2",key:"19qnx5"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xse=Ct("AlignEndVertical",[["rect",{width:"16",height:"6",x:"2",y:"4",rx:"2",key:"10wcwx"}],["rect",{width:"9",height:"6",x:"9",y:"14",rx:"2",key:"4p5bwg"}],["path",{d:"M22 22V2",key:"12ipfv"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qse=Ct("AlignHorizontalSpaceAround",[["rect",{width:"6",height:"10",x:"9",y:"7",rx:"2",key:"yn7j0q"}],["path",{d:"M4 22V2",key:"tsjzd3"}],["path",{d:"M20 22V2",key:"1bnhr8"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=Ct("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=Ct("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eoe=Ct("AlignStartHorizontal",[["rect",{width:"6",height:"16",x:"4",y:"6",rx:"2",key:"1n4dg1"}],["rect",{width:"6",height:"9",x:"14",y:"6",rx:"2",key:"17khns"}],["path",{d:"M22 2H2",key:"fhrpnj"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toe=Ct("AlignStartVertical",[["rect",{width:"9",height:"6",x:"6",y:"14",rx:"2",key:"lpm2y7"}],["rect",{width:"16",height:"6",x:"6",y:"4",rx:"2",key:"rdj6ps"}],["path",{d:"M2 2v20",key:"1ivd8o"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const noe=Ct("AlignVerticalSpaceAround",[["rect",{width:"10",height:"6",x:"7",y:"9",rx:"2",key:"b1zbii"}],["path",{d:"M22 20H2",key:"1p1f7z"}],["path",{d:"M22 4H2",key:"1b7qnq"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const roe=Ct("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ioe=Ct("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const soe=Ct("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ooe=Ct("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aoe=Ct("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const loe=Ct("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=Ct("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const coe=Ct("Component",[["path",{d:"M5.5 8.5 9 12l-3.5 3.5L2 12l3.5-3.5Z",key:"1kciei"}],["path",{d:"m12 2 3.5 3.5L12 9 8.5 5.5 12 2Z",key:"1ome0g"}],["path",{d:"M18.5 8.5 22 12l-3.5 3.5L15 12l3.5-3.5Z",key:"vbupec"}],["path",{d:"m12 15 3.5 3.5L12 22l-3.5-3.5L12 15Z",key:"16csic"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uoe=Ct("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=Ct("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const doe=Ct("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=Ct("Frame",[["line",{x1:"22",x2:"2",y1:"6",y2:"6",key:"15w7dq"}],["line",{x1:"22",x2:"2",y1:"18",y2:"18",key:"1ip48p"}],["line",{x1:"6",x2:"6",y1:"2",y2:"22",key:"a2lnyx"}],["line",{x1:"18",x2:"18",y1:"2",y2:"22",key:"8vb6jd"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const foe=Ct("Group",[["path",{d:"M3 7V5c0-1.1.9-2 2-2h2",key:"adw53z"}],["path",{d:"M17 3h2c1.1 0 2 .9 2 2v2",key:"an4l38"}],["path",{d:"M21 17v2c0 1.1-.9 2-2 2h-2",key:"144t0e"}],["path",{d:"M7 21H5c-1.1 0-2-.9-2-2v-2",key:"rtnfgi"}],["rect",{width:"7",height:"5",x:"7",y:"7",rx:"1",key:"1eyiv7"}],["rect",{width:"7",height:"5",x:"10",y:"12",rx:"1",key:"1qlmkx"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hoe=Ct("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const poe=Ct("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=Ct("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const goe=Ct("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const moe=Ct("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yoe=Ct("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const voe=Ct("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=Ct("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const boe=Ct("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const woe=Ct("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xoe=Ct("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Soe=Ct("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const koe=Ct("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z9=Ct("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=Ct("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Coe=Ct("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _oe=Ct("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=Ct("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=Ct("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aoe=Ct("Shapes",[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=Ct("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=Ct("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eoe=Ct("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Poe=Ct("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Toe=Ct("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=Ct("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Noe=Ct("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Moe=Ct("WrapText",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["path",{d:"M3 12h15a3 3 0 1 1 0 6h-4",key:"1cl7v7"}],["polyline",{points:"16 16 14 18 16 20",key:"1jznyi"}],["line",{x1:"3",x2:"10",y1:"18",y2:"18",key:"1h33wv"}]]);/**
 * @license lucide-react v0.403.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=Ct("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),n$=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("circle",{cx:"5",cy:"19",r:"2",stroke:"currentColor",strokeWidth:e}),y.jsx("circle",{cx:"19",cy:"5",r:"2",stroke:"currentColor",strokeWidth:e}),y.jsx("path",{d:"M7 17L17 7",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),Ooe=({size:t=24,strokeWidth:e=2,...n})=>y.jsx("svg",{viewBox:"0 0 24 24",width:t,height:t,fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:y.jsx("path",{d:"M4 12h16",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})}),Roe=({size:t=24,strokeWidth:e=2,...n})=>y.jsx("svg",{viewBox:"0 0 24 24",width:t,height:t,fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:y.jsx("path",{d:"M4 12h16",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeDasharray:"1 4"})}),r$=({size:t=24,strokeWidth:e=2,...n})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:y.jsx("path",{d:"M4 20L20 4",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})}),Loe=({size:t=24,strokeWidth:e=2,...n})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:y.jsx("path",{d:"M4.125 11L12 5L19 20",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})}),Doe=({size:t=24,strokeWidth:e=2,...n})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:y.jsx("path",{d:"M18.7538 19.4308C18.1351 8.65773 12.1567 -3.01076 4 11",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})}),Ioe=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M13 12L21 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M13 6L21 6",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M13 18L21 18",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M3 7L6 4L9 7",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M6 4V20",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M9 17L6 20L3 17",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),$oe=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M3 12L21 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M9 6L12 3L15 6",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M12 3V9",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M12 15V21",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M15 18L12 21L9 18",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),joe=({size:t=24,strokeWidth:e=2,...n})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:y.jsx("rect",{x:"5",y:"5",width:"14",height:"14",rx:"1",stroke:"currentColor",strokeWidth:e})}),Foe=({size:t=24,strokeWidth:e=2,...n})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:y.jsx("rect",{x:"5",y:"5",width:"14",height:"14",rx:"1",fill:"currentColor",stroke:"currentColor",strokeWidth:e})}),zoe=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("rect",{x:"5",y:"5",width:"14",height:"14",rx:"1",stroke:"currentColor",strokeWidth:e}),y.jsx("path",{d:"M13 5L5 13",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M19 11L11 19",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M18 6L6 18",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),Boe=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("rect",{x:"5",y:"5",width:"14",height:"14",rx:"1",stroke:"currentColor",strokeWidth:e}),y.jsx("path",{d:"M13 5L5 13",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M19 11L11 19",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M18 6L6 18",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M11 5L19 13",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M5 11L13 19",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M6 6L18 18",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),Uoe=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M13 9L21 9",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M13 4L21 4",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M13 14L21 14",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M3 7L6 4L9 7",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M6 6V20",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),Hoe=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M13 17L21 17",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M13 7L21 7",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M13 12L21 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M3 17L6 14L9 17",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M6 14V21",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M6 3V10",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M9 7L6 10L3 7",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),Voe=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M13 15L21 15",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M13 10L21 10",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M13 20L21 20",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M6 6V20",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M9 17L6 20L3 17",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),jN=({size:t=24,strokeWidth:e=2,...n})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:y.jsx("path",{d:"M3 12L21 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})}),Woe=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M3 12L20 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M16 8L20 12L16 16",stroke:"currentColor",strokeWidth:e})]}),qoe=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M3 12L20 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M20 12L16 8V16L20 12Z",fill:"currentColor",stroke:"currentColor",strokeWidth:e})]}),Goe=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M3 12L12 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M12 6L20 12L12 18V6Z",stroke:"currentColor",strokeWidth:e})]}),Koe=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M3 12L12 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M12 6L20 12L12 18V6Z",fill:"currentColor",stroke:"currentColor",strokeWidth:e})]}),Joe=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M3 12L9 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M15 8L21 12L15 16L9 12L15 8Z",stroke:"currentColor",strokeWidth:e})]}),Yoe=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M3 12L9 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M15 8L21 12L15 16L9 12L15 8Z",fill:"currentColor",stroke:"currentColor",strokeWidth:e})]}),Zoe=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M3 12L21 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M17 8V16",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),Xoe=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M3 12L13 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("circle",{cx:"17",cy:"12",r:"4",stroke:"currentColor",strokeWidth:e})]}),Qoe=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M4 12L21 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("circle",{cx:"17",cy:"12",r:"4",stroke:"currentColor",strokeWidth:e}),y.jsx("path",{d:"M17 8V16",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),eae=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M4 12L13 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("circle",{cx:"17",cy:"12",r:"4",fill:"currentColor",stroke:"currentColor",strokeWidth:e})]}),tae=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M3 12L21 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M17 8V16",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),nae=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M3 12L21 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M14 8V16",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M18 8V16",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),rae=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M3 12L21 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M21 8L14 12L21 16",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),iae=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M3 12L21 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M21 8L14 12L21 16",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M13 8V16",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),sae=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M3 12H6",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M14 12L21 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("circle",{cx:"10",cy:"12",r:"4",stroke:"currentColor",strokeWidth:e}),y.jsx("path",{d:"M18 8V16",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),oae=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M14 12L21 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M21 8L15 12L21 16",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("circle",{cx:"10",cy:"12",r:"4",stroke:"currentColor",strokeWidth:e}),y.jsx("path",{d:"M3 12H6",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),aae=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M3 12L19 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M17 9L11 15M11 9L17 15",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),lae=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M4 12L20 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("circle",{cx:"19",cy:"12",r:"3",fill:"currentColor"})]}),cae=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M3 12L21 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M21 8V16",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),uae=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("path",{d:"M3 12L13 12",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("rect",{x:"13",y:"8",width:"8",height:"8",stroke:"currentColor",strokeWidth:e})]}),dae=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("rect",{x:"6",y:"4",width:"9",height:"9",stroke:"currentColor",strokeWidth:e}),y.jsx("path",{d:"M11 13V18H20V9H15V13H11Z",fill:"currentColor",stroke:"currentColor",strokeWidth:e})]}),fae=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("rect",{x:"6",y:"4",width:"9",height:"9",stroke:"currentColor",strokeWidth:e}),y.jsx("path",{d:"M11 13V18H20V9H15V13H11Z",fill:"currentColor",stroke:"currentColor",strokeWidth:e}),y.jsx("path",{d:"M9 22L2 15",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M6 22H9V19",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]}),hae=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("rect",{x:"6",y:"4",width:"9",height:"9",fill:"currentColor",stroke:"currentColor",strokeWidth:e}),y.jsx("path",{d:"M11 13V18H20V9H15V13H11Z",stroke:"currentColor",strokeWidth:e})]}),pae=({size:t=24,strokeWidth:e=2,...n})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,fill:"none",...n,children:[y.jsx("rect",{x:"6",y:"4",width:"9",height:"9",fill:"currentColor",stroke:"currentColor",strokeWidth:e}),y.jsx("path",{d:"M11 13V18H20V9H15V13H11Z",stroke:"currentColor",strokeWidth:e}),y.jsx("path",{d:"M9 22L2 15",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"}),y.jsx("path",{d:"M2 18V15H5",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round"})]});function Ie(){return Ie=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ie.apply(this,arguments)}function ot(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Xr(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function ea({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=gae({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=Xr(n),l=S.useCallback(c=>{if(s){const u=typeof c=="function"?c(t):c;u!==t&&a(u)}else i(c)},[s,t,i,a]);return[o,l]}function gae({defaultProp:t,onChange:e}){const n=S.useState(t),[r]=n,i=S.useRef(r),s=Xr(e);return S.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}function mae(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Ix(...t){return e=>t.forEach(n=>mae(n,e))}function on(...t){return S.useCallback(Ix(...t),t)}const _o=S.forwardRef((t,e)=>{const{children:n,...r}=t,i=S.Children.toArray(n),s=i.find(vae);if(s){const o=s.props.children,a=i.map(l=>l===s?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:l);return S.createElement(HC,Ie({},r,{ref:e}),S.isValidElement(o)?S.cloneElement(o,void 0,a):null)}return S.createElement(HC,Ie({},r,{ref:e}),n)});_o.displayName="Slot";const HC=S.forwardRef((t,e)=>{const{children:n,...r}=t;return S.isValidElement(n)?S.cloneElement(n,{...bae(r,n.props),ref:e?Ix(e,n.ref):n.ref}):S.Children.count(n)>1?S.Children.only(null):null});HC.displayName="SlotClone";const yae=({children:t})=>S.createElement(S.Fragment,null,t);function vae(t){return S.isValidElement(t)&&t.type===yae}function bae(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}const wae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],jt=wae.reduce((t,e)=>{const n=S.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?_o:e;return S.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),S.createElement(a,Ie({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function i$(t,e){t&&Ua.flushSync(()=>t.dispatchEvent(e))}const s$=S.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:i,...s}=t,[o=!1,a]=ea({prop:n,onChange:i,defaultProp:r});return S.createElement(jt.button,Ie({type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":t.disabled?"":void 0},s,{ref:e,onClick:ot(t.onClick,()=>{t.disabled||a(!o)})}))}),o$=s$;function a$(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=a$(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function xae(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=a$(t))&&(r&&(r+=" "),r+=e);return r}const FN=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,zN=xae,Cy=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return zN(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const d=n==null?void 0:n[c],u=s==null?void 0:s[c];if(d===null)return null;const f=FN(d)||FN(u);return i[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[u,f]=d;return f===void 0||(c[u]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:u,className:f,...h}=d;return Object.entries(h).every(p=>{let[g,b]=p;return Array.isArray(b)?b.includes({...s,...a}[g]):{...s,...a}[g]===b})?[...c,u,f]:c},[]);return zN(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function l$(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=l$(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Sae(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=l$(t))&&(r&&(r+=" "),r+=e);return r}const l4="-";function kae(t){const e=_ae(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;function i(o){const a=o.split(l4);return a[0]===""&&a.length!==1&&a.shift(),c$(a,e)||Cae(o)}function s(o,a){const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}return{getClassGroupId:i,getConflictingClassGroupIds:s}}function c$(t,e){var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?c$(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(l4);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId}const BN=/^\[(.+)\]$/;function Cae(t){if(BN.test(t)){const e=BN.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function _ae(t){const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Eae(Object.entries(t.classGroups),n).forEach(([s,o])=>{VC(o,r,s,e)}),r}function VC(t,e,n,r){t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:UN(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(Aae(i)){VC(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{VC(o,UN(e,s),n,r)})})}function UN(t,e){let n=t;return e.split(l4).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function Aae(t){return t.isThemeGetter}function Eae(t,e){return e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t}function Pae(t){if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}}const u$="!";function Tae(t){const e=t.separator,n=e.length===1,r=e[0],i=e.length;return function(o){const a=[];let l=0,c=0,d;for(let g=0;g<o.length;g++){let b=o[g];if(l===0){if(b===r&&(n||o.slice(g,g+i)===e)){a.push(o.slice(c,g)),c=g+i;continue}if(b==="/"){d=g;continue}}b==="["?l++:b==="]"&&l--}const u=a.length===0?o:o.substring(c),f=u.startsWith(u$),h=f?u.substring(1):u,p=d&&d>c?d-c:void 0;return{modifiers:a,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:p}}}function Nae(t){if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e}function Mae(t){return{cache:Pae(t.cacheSize),splitModifiers:Tae(t),...kae(t)}}const Oae=/\s+/;function Rae(t,e){const{splitModifiers:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=new Set;return t.trim().split(Oae).map(o=>{const{modifiers:a,hasImportantModifier:l,baseClassName:c,maybePostfixModifierPosition:d}=n(o);let u=r(d?c.substring(0,d):c),f=!!d;if(!u){if(!d)return{isTailwindClass:!1,originalClassName:o};if(u=r(c),!u)return{isTailwindClass:!1,originalClassName:o};f=!1}const h=Nae(a).join(":");return{isTailwindClass:!0,modifierId:l?h+u$:h,classGroupId:u,originalClassName:o,hasPostfixModifier:f}}).reverse().filter(o=>{if(!o.isTailwindClass)return!0;const{modifierId:a,classGroupId:l,hasPostfixModifier:c}=o,d=a+l;return s.has(d)?!1:(s.add(d),i(l,c).forEach(u=>s.add(a+u)),!0)}).reverse().map(o=>o.originalClassName).join(" ")}function Lae(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=d$(e))&&(r&&(r+=" "),r+=n);return r}function d$(t){if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=d$(t[r]))&&(n&&(n+=" "),n+=e);return n}function Dae(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((d,u)=>u(d),t());return n=Mae(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=Rae(l,n);return i(l,d),d}return function(){return s(Lae.apply(null,arguments))}}function tr(t){const e=n=>n[t]||[];return e.isThemeGetter=!0,e}const f$=/^\[(?:([a-z-]+):)?(.+)\]$/i,Iae=/^\d+\/\d+$/,$ae=new Set(["px","full","screen"]),jae=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Fae=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zae=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Bae=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Uae=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function Ql(t){return af(t)||$ae.has(t)||Iae.test(t)}function uu(t){return Yg(t,"length",Yae)}function af(t){return!!t&&!Number.isNaN(Number(t))}function Yv(t){return Yg(t,"number",af)}function Jm(t){return!!t&&Number.isInteger(Number(t))}function Hae(t){return t.endsWith("%")&&af(t.slice(0,-1))}function Xt(t){return f$.test(t)}function du(t){return jae.test(t)}const Vae=new Set(["length","size","percentage"]);function Wae(t){return Yg(t,Vae,h$)}function qae(t){return Yg(t,"position",h$)}const Gae=new Set(["image","url"]);function Kae(t){return Yg(t,Gae,Xae)}function Jae(t){return Yg(t,"",Zae)}function Ym(){return!0}function Yg(t,e,n){const r=f$.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1}function Yae(t){return Fae.test(t)&&!zae.test(t)}function h$(){return!1}function Zae(t){return Bae.test(t)}function Xae(t){return Uae.test(t)}function Qae(){const t=tr("colors"),e=tr("spacing"),n=tr("blur"),r=tr("brightness"),i=tr("borderColor"),s=tr("borderRadius"),o=tr("borderSpacing"),a=tr("borderWidth"),l=tr("contrast"),c=tr("grayscale"),d=tr("hueRotate"),u=tr("invert"),f=tr("gap"),h=tr("gradientColorStops"),p=tr("gradientColorStopPositions"),g=tr("inset"),b=tr("margin"),v=tr("opacity"),x=tr("padding"),w=tr("saturate"),C=tr("scale"),P=tr("sepia"),O=tr("skew"),T=tr("space"),M=tr("translate"),D=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",Xt,e],$=()=>[Xt,e],H=()=>["",Ql,uu],z=()=>["auto",af,Xt],ee=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ce=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],te=()=>["start","end","center","between","around","evenly","stretch"],Z=()=>["","0",Xt],de=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ce=()=>[af,Yv],F=()=>[af,Xt];return{cacheSize:500,separator:":",theme:{colors:[Ym],spacing:[Ql,uu],blur:["none","",du,Xt],brightness:Ce(),borderColor:[t],borderRadius:["none","","full",du,Xt],borderSpacing:$(),borderWidth:H(),contrast:Ce(),grayscale:Z(),hueRotate:F(),invert:Z(),gap:$(),gradientColorStops:[t],gradientColorStopPositions:[Hae,uu],inset:R(),margin:R(),opacity:Ce(),padding:$(),saturate:Ce(),scale:Ce(),sepia:Z(),skew:F(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",Xt]}],container:["container"],columns:[{columns:[du]}],"break-after":[{"break-after":de()}],"break-before":[{"break-before":de()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ee(),Xt]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Jm,Xt]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Xt]}],grow:[{grow:Z()}],shrink:[{shrink:Z()}],order:[{order:["first","last","none",Jm,Xt]}],"grid-cols":[{"grid-cols":[Ym]}],"col-start-end":[{col:["auto",{span:["full",Jm,Xt]},Xt]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[Ym]}],"row-start-end":[{row:["auto",{span:[Jm,Xt]},Xt]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Xt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Xt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...te()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...te(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...te(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Xt,e]}],"min-w":[{"min-w":[Xt,e,"min","max","fit"]}],"max-w":[{"max-w":[Xt,e,"none","full","min","max","fit","prose",{screen:[du]},du]}],h:[{h:[Xt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Xt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Xt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Xt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",du,uu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Yv]}],"font-family":[{font:[Ym]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Xt]}],"line-clamp":[{"line-clamp":["none",af,Yv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ql,Xt]}],"list-image":[{"list-image":["none",Xt]}],"list-style-type":[{list:["none","disc","decimal",Xt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ce(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ql,uu]}],"underline-offset":[{"underline-offset":["auto",Ql,Xt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ee(),qae]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Wae]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Kae]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...ce(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:ce()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...ce()]}],"outline-offset":[{"outline-offset":[Ql,Xt]}],"outline-w":[{outline:[Ql,uu]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Ql,uu]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",du,Jae]}],"shadow-color":[{shadow:[Ym]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",du,Xt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[w]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Xt]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",Xt]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",Xt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Jm,Xt]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Xt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ql,uu,Yv]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const ele=Dae(Qae);function qe(...t){return ele(Sae(t))}const p$=Cy("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-3",sm:"h-8 px-2",lg:"h-10 px-3"}},defaultVariants:{variant:"default",size:"default"}}),Ca=S.forwardRef(({className:t,variant:e,size:n,...r},i)=>y.jsx(o$,{ref:i,className:qe(p$({variant:e,size:n,className:t})),...r}));Ca.displayName=o$.displayName;const WC="horizontal",tle=["horizontal","vertical"],g$=S.forwardRef((t,e)=>{const{decorative:n,orientation:r=WC,...i}=t,s=m$(r)?r:WC,a=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return S.createElement(jt.div,Ie({"data-orientation":s},a,i,{ref:e}))});g$.propTypes={orientation(t,e,n){const r=t[e],i=String(r);return r&&!m$(r)?new Error(nle(i,n)):null}};function nle(t,e){return`Invalid prop \`orientation\` of value \`${t}\` supplied to \`${e}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${WC}\`.`}function m$(t){return tle.includes(t)}const y$=g$,lf=S.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>y.jsx(y$,{ref:i,decorative:n,orientation:e,className:qe("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));lf.displayName=y$.displayName;const rle={},HN=t=>{let e;const n=new Set,r=(d,u)=>{const f=typeof d=="function"?d(e):d;if(!Object.is(f,e)){const h=e;e=u??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(p=>p(e,h))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(rle?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},ile=t=>t?HN(t):HN;var v$={exports:{}},b$={},w$={exports:{}},x$={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg=S;function sle(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ole=typeof Object.is=="function"?Object.is:sle,ale=xg.useState,lle=xg.useEffect,cle=xg.useLayoutEffect,ule=xg.useDebugValue;function dle(t,e){var n=e(),r=ale({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return cle(function(){i.value=n,i.getSnapshot=e,tk(i)&&s({inst:i})},[t,n,e]),lle(function(){return tk(i)&&s({inst:i}),t(function(){tk(i)&&s({inst:i})})},[t]),ule(n),n}function tk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ole(t,n)}catch{return!0}}function fle(t,e){return e()}var hle=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fle:dle;x$.useSyncExternalStore=xg.useSyncExternalStore!==void 0?xg.useSyncExternalStore:hle;w$.exports=x$;var ple=w$.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x=S,gle=ple;function mle(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yle=typeof Object.is=="function"?Object.is:mle,vle=gle.useSyncExternalStore,ble=$x.useRef,wle=$x.useEffect,xle=$x.useMemo,Sle=$x.useDebugValue;b$.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=ble(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=xle(function(){function l(h){if(!c){if(c=!0,d=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return u=p}return u=h}if(p=u,yle(d,h))return p;var g=r(h);return i!==void 0&&i(p,g)?p:(d=h,u=g)}var c=!1,d,u,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var a=vle(t,s[0],s[1]);return wle(function(){o.hasValue=!0,o.value=a},[a]),Sle(a),a};v$.exports=b$;var kle=v$.exports;const Cle=rh(kle),S$={},{useDebugValue:_le}=Le,{useSyncExternalStoreWithSelector:Ale}=Cle;let VN=!1;const Ele=t=>t;function Ple(t,e=Ele,n){(S$?"production":void 0)!=="production"&&n&&!VN&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),VN=!0);const r=Ale(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return _le(r),r}const Tle=t=>{(S$?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?ile(t):t,n=(r,i)=>Ple(e,r,i);return Object.assign(n,e),n},k$=t=>Tle,nk={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},qC=new Map,Zv=t=>{const e=qC.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},Nle=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=qC.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return qC.set(n.name,i),{type:"tracked",store:t,...i}},Mle=(t,e={})=>(n,r,i)=>{const{enabled:s,anonymousActionType:o,store:a,...l}=e;let c;try{c=(s??(nk?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!c)return(nk?"production":void 0)!=="production"&&s&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(n,r,i);const{connection:d,...u}=Nle(a,c,l);let f=!0;i.setState=(g,b,v)=>{const x=n(g,b);if(!f)return x;const w=v===void 0?{type:o||"anonymous"}:typeof v=="string"?{type:v}:v;return a===void 0?(d==null||d.send(w,r()),x):(d==null||d.send({...w,type:`${a}/${w.type}`},{...Zv(l.name),[a]:i.getState()}),x)};const h=(...g)=>{const b=f;f=!1,n(...g),f=b},p=t(i.setState,r,i);if(u.type==="untracked"?d==null||d.init(p):(u.stores[u.store]=i,d==null||d.init(Object.fromEntries(Object.entries(u.stores).map(([g,b])=>[g,g===u.store?p:b.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let g=!1;const b=i.dispatch;i.dispatch=(...v)=>{(nk?"production":void 0)!=="production"&&v[0].type==="__setState"&&!g&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),g=!0),b(...v)}}return d.subscribe(g=>{var b;switch(g.type){case"ACTION":if(typeof g.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return rk(g.payload,v=>{if(v.type==="__setState"){if(a===void 0){h(v.state);return}Object.keys(v.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const x=v.state[a];if(x==null)return;JSON.stringify(i.getState())!==JSON.stringify(x)&&h(x);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(v)});case"DISPATCH":switch(g.payload.type){case"RESET":return h(p),a===void 0?d==null?void 0:d.init(i.getState()):d==null?void 0:d.init(Zv(l.name));case"COMMIT":if(a===void 0){d==null||d.init(i.getState());return}return d==null?void 0:d.init(Zv(l.name));case"ROLLBACK":return rk(g.state,v=>{if(a===void 0){h(v),d==null||d.init(i.getState());return}h(v[a]),d==null||d.init(Zv(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return rk(g.state,v=>{if(a===void 0){h(v);return}JSON.stringify(i.getState())!==JSON.stringify(v[a])&&h(v[a])});case"IMPORT_STATE":{const{nextLiftedState:v}=g.payload,x=(b=v.computedStates.slice(-1)[0])==null?void 0:b.state;if(!x)return;h(a===void 0?x:x[a]),d==null||d.send(null,v);return}case"PAUSE_RECORDING":return f=!f}return}}),p},C$=Mle,rk=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)},Dl=k$()(C$(t=>({scale:1,origin:[0,0],darkMode:!0,showGrid:!1,snapToGrid:!1,snapToObjects:!1,activeHandler:"Select",activeHandlerLock:!1,doc:null,currentPage:null,selection:[],libraries:[],hasCollab:null,shareRoomId:null,shareIdentity:null,setScale:e=>t(n=>({scale:e})),setOrigin:e=>t(n=>({origin:e})),setDarkMode:e=>{const n=window.document.documentElement;n.classList.remove("dark"),e&&n.classList.add("dark"),e?localStorage.setItem("is-dark-mode","true"):localStorage.removeItem("is-dark-mode"),window.editor.setDarkMode(e),t(r=>({darkMode:e}))},setShowGrid:e=>t(n=>({showGrid:e})),setSnapToGrid:e=>t(n=>({snapToGrid:e})),setSnapToObjects:e=>t(n=>({snapToObjects:e})),setActiveHandler:e=>t(n=>({activeHandler:e})),setActiveHandlerLock:e=>t(n=>({activeHandlerLock:e})),setDoc:e=>t(n=>({doc:e})),setCurrentPage:e=>t(n=>({currentPage:e})),setSelection:e=>t(n=>({selection:e})),setLibraries:e=>t(n=>({libraries:e})),setHasCollab:e=>t(n=>({hasCollab:e})),setShareRoomId:e=>t(n=>({shareRoomId:e})),setShareIdentity:e=>t(n=>({shareIdentity:e}))}),{name:"DrawStore"}));function ls({handlerId:t,children:e}){const n=Dl(i=>i.activeHandler),r=i=>{i&&window.editor.activateHandler(t)};return y.jsx(Ca,{size:"sm",title:t,pressed:n===t,onPressedChange:r,className:"w-8 h-8 p-0 dark:hover:bg-slate-700",children:e})}function Ole(){const{activeHandlerLock:t}=Dl();return y.jsx("div",{className:"absolute bottom-4 inset-x-0 flex items-center justify-center",children:y.jsxs("div",{className:"flex justify-center items-center h-10 bg-background border rounded-lg px-1 gap-0.5",children:[y.jsx(Ca,{size:"sm",pressed:t,onPressedChange:e=>{window.editor.setActiveHandlerLock(e)},children:y.jsx(Y9,{size:16})}),y.jsx(lf,{orientation:"vertical",className:"dark:bg-gray-700 mx-0.5"}),y.jsx(ls,{handlerId:"Select",children:y.jsx(xoe,{size:16})}),y.jsx(ls,{handlerId:"Hand",children:y.jsx(hoe,{size:16})}),y.jsx(ls,{handlerId:"Eraser",children:y.jsx(doe,{size:16})}),y.jsx(lf,{orientation:"vertical",className:"dark:bg-gray-700 mx-0.5"}),y.jsx(ls,{handlerId:"Rectangle",children:y.jsx(e$,{size:16})}),y.jsx(ls,{handlerId:"Ellipse",children:y.jsx(G9,{size:16})}),y.jsx(ls,{handlerId:"Text",children:y.jsx(t$,{size:16})}),y.jsx(ls,{handlerId:"Image",children:y.jsx(goe,{size:16})}),y.jsx(lf,{orientation:"vertical",className:"dark:bg-gray-700 mx-0.5"}),y.jsx(ls,{handlerId:"Connector",children:y.jsx(n$,{size:16})}),y.jsx(ls,{handlerId:"Line",children:y.jsx(r$,{size:16})}),y.jsx(ls,{handlerId:"Freehand",children:y.jsx(Z9,{size:16})}),y.jsx(ls,{handlerId:"Highlighter",children:y.jsx(J9,{size:16})}),y.jsx(lf,{orientation:"vertical",className:"dark:bg-gray-700 mx-0.5"}),y.jsx(ls,{handlerId:"Icon",children:y.jsx(Q9,{size:16})}),y.jsx(ls,{handlerId:"Frame",children:y.jsx(K9,{size:16})}),y.jsx(ls,{handlerId:"Mirror",children:y.jsx(H9,{size:16})}),y.jsx(ls,{handlerId:"Embed",children:y.jsx(X9,{size:16})})]})})}const xs=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{};function Rle(t,e){return S.useReducer((n,r)=>{const i=e[n][r];return i??n},t)}const Po=t=>{const{present:e,children:n}=t,r=Lle(e),i=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),s=on(r.ref,i.ref);return typeof n=="function"||r.isPresent?S.cloneElement(i,{ref:s}):null};Po.displayName="Presence";function Lle(t){const[e,n]=S.useState(),r=S.useRef({}),i=S.useRef(t),s=S.useRef("none"),o=t?"mounted":"unmounted",[a,l]=Rle(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=Xv(r.current);s.current=a==="mounted"?c:"none"},[a]),xs(()=>{const c=r.current,d=i.current;if(d!==t){const f=s.current,h=Xv(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),xs(()=>{if(e){const c=u=>{const h=Xv(r.current).includes(u.animationName);u.target===e&&h&&Ua.flushSync(()=>l("ANIMATION_END"))},d=u=>{u.target===e&&(s.current=Xv(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Xv(t){return(t==null?void 0:t.animationName)||"none"}function Zs(t,e=[]){let n=[];function r(s,o){const a=S.createContext(o),l=n.length;n=[...n,o];function c(u){const{scope:f,children:h,...p}=u,g=(f==null?void 0:f[t][l])||a,b=S.useMemo(()=>p,Object.values(p));return S.createElement(g.Provider,{value:b},h)}function d(u,f){const h=(f==null?void 0:f[t][l])||a,p=S.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,d]}const i=()=>{const s=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,Dle(i,...e)]}function Dle(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const u=l(s)[`__scope${c}`];return{...a,...u}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}const Ile=S.createContext(void 0);function dh(t){const e=S.useContext(Ile);return t||e||"ltr"}function H1(t,[e,n]){return Math.min(n,Math.max(e,t))}function $le(t,e){return S.useReducer((n,r)=>{const i=e[n][r];return i??n},t)}const _$="ScrollArea",[A$,U_e]=Zs(_$),[jle,ra]=A$(_$),Fle=S.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=t,[a,l]=S.useState(null),[c,d]=S.useState(null),[u,f]=S.useState(null),[h,p]=S.useState(null),[g,b]=S.useState(null),[v,x]=S.useState(0),[w,C]=S.useState(0),[P,O]=S.useState(!1),[T,M]=S.useState(!1),D=on(e,R=>l(R)),I=dh(i);return S.createElement(jle,{scope:n,type:r,dir:I,scrollHideDelay:s,scrollArea:a,viewport:c,onViewportChange:d,content:u,onContentChange:f,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:P,onScrollbarXEnabledChange:O,scrollbarY:g,onScrollbarYChange:b,scrollbarYEnabled:T,onScrollbarYEnabledChange:M,onCornerWidthChange:x,onCornerHeightChange:C},S.createElement(jt.div,Ie({dir:I},o,{ref:D,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":w+"px",...t.style}})))}),zle="ScrollAreaViewport",Ble=S.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,...i}=t,s=ra(zle,n),o=S.useRef(null),a=on(e,o,s.onViewportChange);return S.createElement(S.Fragment,null,S.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),S.createElement(jt.div,Ie({"data-radix-scroll-area-viewport":""},i,{ref:a,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...t.style}}),S.createElement("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),Bc="ScrollAreaScrollbar",E$=S.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ra(Bc,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=t.orientation==="horizontal";return S.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?S.createElement(Ule,Ie({},r,{ref:e,forceMount:n})):i.type==="scroll"?S.createElement(Hle,Ie({},r,{ref:e,forceMount:n})):i.type==="auto"?S.createElement(P$,Ie({},r,{ref:e,forceMount:n})):i.type==="always"?S.createElement(c4,Ie({},r,{ref:e})):null}),Ule=S.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ra(Bc,t.__scopeScrollArea),[s,o]=S.useState(!1);return S.useEffect(()=>{const a=i.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},d=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),S.createElement(Po,{present:n||s},S.createElement(P$,Ie({"data-state":s?"visible":"hidden"},r,{ref:e})))}),Hle=S.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ra(Bc,t.__scopeScrollArea),s=t.orientation==="horizontal",o=Fx(()=>l("SCROLL_END"),100),[a,l]=$le("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return S.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,i.scrollHideDelay,l]),S.useEffect(()=>{const c=i.viewport,d=s?"scrollLeft":"scrollTop";if(c){let u=c[d];const f=()=>{const h=c[d];u!==h&&(l("SCROLL"),o()),u=h};return c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,s,l,o]),S.createElement(Po,{present:n||a!=="hidden"},S.createElement(c4,Ie({"data-state":a==="hidden"?"hidden":"visible"},r,{ref:e,onPointerEnter:ot(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:ot(t.onPointerLeave,()=>l("POINTER_LEAVE"))})))}),P$=S.forwardRef((t,e)=>{const n=ra(Bc,t.__scopeScrollArea),{forceMount:r,...i}=t,[s,o]=S.useState(!1),a=t.orientation==="horizontal",l=Fx(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?c:d)}},10);return Sg(n.viewport,l),Sg(n.content,l),S.createElement(Po,{present:r||s},S.createElement(c4,Ie({"data-state":s?"visible":"hidden"},i,{ref:e})))}),c4=S.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=ra(Bc,t.__scopeScrollArea),s=S.useRef(null),o=S.useRef(0),[a,l]=S.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=O$(a.viewport,a.content),d={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:f=>s.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function u(f,h){return Zle(f,o.current,a,h)}return n==="horizontal"?S.createElement(Vle,Ie({},d,{ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const f=i.viewport.scrollLeft,h=WN(f,a,i.dir);s.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollLeft=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollLeft=u(f,i.dir))}})):n==="vertical"?S.createElement(Wle,Ie({},d,{ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const f=i.viewport.scrollTop,h=WN(f,a);s.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollTop=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollTop=u(f))}})):null}),Vle=S.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=ra(Bc,t.__scopeScrollArea),[o,a]=S.useState(),l=S.useRef(null),c=on(e,l,s.onScrollbarXChange);return S.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),S.createElement(N$,Ie({"data-orientation":"horizontal"},i,{ref:c,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":jx(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,u)=>{if(s.viewport){const f=s.viewport.scrollLeft+d.deltaX;t.onWheelScroll(f),L$(f,u)&&d.preventDefault()}},onResize:()=>{l.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:vw(o.paddingLeft),paddingEnd:vw(o.paddingRight)}})}}))}),Wle=S.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=ra(Bc,t.__scopeScrollArea),[o,a]=S.useState(),l=S.useRef(null),c=on(e,l,s.onScrollbarYChange);return S.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),S.createElement(N$,Ie({"data-orientation":"vertical"},i,{ref:c,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":jx(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,u)=>{if(s.viewport){const f=s.viewport.scrollTop+d.deltaY;t.onWheelScroll(f),L$(f,u)&&d.preventDefault()}},onResize:()=>{l.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:vw(o.paddingTop),paddingEnd:vw(o.paddingBottom)}})}}))}),[qle,T$]=A$(Bc),N$=S.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:d,onResize:u,...f}=t,h=ra(Bc,n),[p,g]=S.useState(null),b=on(e,D=>g(D)),v=S.useRef(null),x=S.useRef(""),w=h.viewport,C=r.content-r.viewport,P=Xr(d),O=Xr(l),T=Fx(u,10);function M(D){if(v.current){const I=D.clientX-v.current.left,R=D.clientY-v.current.top;c({x:I,y:R})}}return S.useEffect(()=>{const D=I=>{const R=I.target;(p==null?void 0:p.contains(R))&&P(I,C)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[w,p,C,P]),S.useEffect(O,[r,O]),Sg(p,T),Sg(h.content,T),S.createElement(qle,{scope:n,scrollbar:p,hasThumb:i,onThumbChange:Xr(s),onThumbPointerUp:Xr(o),onThumbPositionChange:O,onThumbPointerDown:Xr(a)},S.createElement(jt.div,Ie({},f,{ref:b,style:{position:"absolute",...f.style},onPointerDown:ot(t.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),v.current=p.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),M(D))}),onPointerMove:ot(t.onPointerMove,M),onPointerUp:ot(t.onPointerUp,D=>{const I=D.target;I.hasPointerCapture(D.pointerId)&&I.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=x.current,h.viewport&&(h.viewport.style.scrollBehavior=""),v.current=null})})))}),GC="ScrollAreaThumb",Gle=S.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=T$(GC,t.__scopeScrollArea);return S.createElement(Po,{present:n||i.hasThumb},S.createElement(Kle,Ie({ref:e},r)))}),Kle=S.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,s=ra(GC,n),o=T$(GC,n),{onThumbPositionChange:a}=o,l=on(e,u=>o.onThumbChange(u)),c=S.useRef(),d=Fx(()=>{c.current&&(c.current(),c.current=void 0)},100);return S.useEffect(()=>{const u=s.viewport;if(u){const f=()=>{if(d(),!c.current){const h=Xle(u,a);c.current=h,a()}};return a(),u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[s.viewport,d,a]),S.createElement(jt.div,Ie({"data-state":o.hasThumb?"visible":"hidden"},i,{ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ot(t.onPointerDownCapture,u=>{const h=u.target.getBoundingClientRect(),p=u.clientX-h.left,g=u.clientY-h.top;o.onThumbPointerDown({x:p,y:g})}),onPointerUp:ot(t.onPointerUp,o.onThumbPointerUp)}))}),M$="ScrollAreaCorner",Jle=S.forwardRef((t,e)=>{const n=ra(M$,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?S.createElement(Yle,Ie({},t,{ref:e})):null}),Yle=S.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=ra(M$,n),[s,o]=S.useState(0),[a,l]=S.useState(0),c=!!(s&&a);return Sg(i.scrollbarX,()=>{var d;const u=((d=i.scrollbarX)===null||d===void 0?void 0:d.offsetHeight)||0;i.onCornerHeightChange(u),l(u)}),Sg(i.scrollbarY,()=>{var d;const u=((d=i.scrollbarY)===null||d===void 0?void 0:d.offsetWidth)||0;i.onCornerWidthChange(u),o(u)}),c?S.createElement(jt.div,Ie({},r,{ref:e,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}})):null});function vw(t){return t?parseInt(t,10):0}function O$(t,e){const n=t/e;return isNaN(n)?0:n}function jx(t){const e=O$(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Zle(t,e,n,r="ltr"){const i=jx(n),s=i/2,o=e||s,a=i-o,l=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,d=n.content-n.viewport,u=r==="ltr"?[0,d]:[d*-1,0];return R$([l,c],u)(t)}function WN(t,e,n="ltr"){const r=jx(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,o=e.content-e.viewport,a=s-r,l=n==="ltr"?[0,o]:[o*-1,0],c=H1(t,l);return R$([0,o],[0,a])(c)}function R$(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function L$(t,e){return t>0&&t<e}const Xle=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const s={left:t.scrollLeft,top:t.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&e(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function Fx(t,e){const n=Xr(t),r=S.useRef(0);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),S.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Sg(t,e){const n=Xr(e);xs(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}const D$=Fle,Qle=Ble,ece=Jle,kg=S.forwardRef(({className:t,children:e,...n},r)=>y.jsxs(D$,{ref:r,className:qe("relative overflow-hidden",t),...n,children:[y.jsx(Qle,{className:"h-full w-full rounded-[inherit]",children:e}),y.jsx(I$,{}),y.jsx(ece,{})]}));kg.displayName=D$.displayName;const I$=S.forwardRef(({className:t,orientation:e="vertical",...n},r)=>y.jsx(E$,{ref:r,orientation:e,className:qe("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:y.jsx(Gle,{className:"relative flex-1 rounded-full bg-border"})}));I$.displayName=E$.displayName;function zx(t){const e=t+"CollectionProvider",[n,r]=Zs(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:p,children:g}=h,b=Le.useRef(null),v=Le.useRef(new Map).current;return Le.createElement(i,{scope:p,itemMap:v,collectionRef:b},g)},a=t+"CollectionSlot",l=Le.forwardRef((h,p)=>{const{scope:g,children:b}=h,v=s(a,g),x=on(p,v.collectionRef);return Le.createElement(_o,{ref:x},b)}),c=t+"CollectionItemSlot",d="data-radix-collection-item",u=Le.forwardRef((h,p)=>{const{scope:g,children:b,...v}=h,x=Le.useRef(null),w=on(p,x),C=s(c,g);return Le.useEffect(()=>(C.itemMap.set(x,{ref:x,...v}),()=>void C.itemMap.delete(x))),Le.createElement(_o,{[d]:"",ref:w},b)});function f(h){const p=s(t+"CollectionConsumer",h);return Le.useCallback(()=>{const b=p.collectionRef.current;if(!b)return[];const v=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(p.itemMap.values()).sort((C,P)=>v.indexOf(C.ref.current)-v.indexOf(P.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:u},f,r]}const tce=vA.useId||(()=>{});let nce=0;function Wf(t){const[e,n]=S.useState(tce());return xs(()=>{n(r=>r??String(nce++))},[t]),e?`radix-${e}`:""}const ik="rovingFocusGroup.onEntryFocus",rce={bubbles:!1,cancelable:!0},u4="RovingFocusGroup",[KC,$$,ice]=zx(u4),[sce,Zg]=Zs(u4,[ice]),[oce,ace]=sce(u4),lce=S.forwardRef((t,e)=>S.createElement(KC.Provider,{scope:t.__scopeRovingFocusGroup},S.createElement(KC.Slot,{scope:t.__scopeRovingFocusGroup},S.createElement(cce,Ie({},t,{ref:e}))))),cce=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,...d}=t,u=S.useRef(null),f=on(e,u),h=dh(s),[p=null,g]=ea({prop:o,defaultProp:a,onChange:l}),[b,v]=S.useState(!1),x=Xr(c),w=$$(n),C=S.useRef(!1),[P,O]=S.useState(0);return S.useEffect(()=>{const T=u.current;if(T)return T.addEventListener(ik,x),()=>T.removeEventListener(ik,x)},[x]),S.createElement(oce,{scope:n,orientation:r,dir:h,loop:i,currentTabStopId:p,onItemFocus:S.useCallback(T=>g(T),[g]),onItemShiftTab:S.useCallback(()=>v(!0),[]),onFocusableItemAdd:S.useCallback(()=>O(T=>T+1),[]),onFocusableItemRemove:S.useCallback(()=>O(T=>T-1),[])},S.createElement(jt.div,Ie({tabIndex:b||P===0?-1:0,"data-orientation":r},d,{ref:f,style:{outline:"none",...t.style},onMouseDown:ot(t.onMouseDown,()=>{C.current=!0}),onFocus:ot(t.onFocus,T=>{const M=!C.current;if(T.target===T.currentTarget&&M&&!b){const D=new CustomEvent(ik,rce);if(T.currentTarget.dispatchEvent(D),!D.defaultPrevented){const I=w().filter(ee=>ee.focusable),R=I.find(ee=>ee.active),$=I.find(ee=>ee.id===p),z=[R,$,...I].filter(Boolean).map(ee=>ee.ref.current);j$(z)}}C.current=!1}),onBlur:ot(t.onBlur,()=>v(!1))})))}),uce="RovingFocusGroupItem",dce=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=t,a=Wf(),l=s||a,c=ace(uce,n),d=c.currentTabStopId===l,u=$$(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return S.useEffect(()=>{if(r)return f(),()=>h()},[r,f,h]),S.createElement(KC.ItemSlot,{scope:n,id:l,focusable:r,active:i},S.createElement(jt.span,Ie({tabIndex:d?0:-1,"data-orientation":c.orientation},o,{ref:e,onMouseDown:ot(t.onMouseDown,p=>{r?c.onItemFocus(l):p.preventDefault()}),onFocus:ot(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:ot(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){c.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=pce(p,c.orientation,c.dir);if(g!==void 0){p.preventDefault();let v=u().filter(x=>x.focusable).map(x=>x.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const x=v.indexOf(p.currentTarget);v=c.loop?gce(v,x+1):v.slice(x+1)}setTimeout(()=>j$(v))}})})))}),fce={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function hce(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function pce(t,e,n){const r=hce(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return fce[r]}function j$(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function gce(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const d4=lce,f4=dce,F$="Tabs",[mce,H_e]=Zs(F$,[Zg]),z$=Zg(),[yce,h4]=mce(F$),vce=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,d=dh(a),[u,f]=ea({prop:r,onChange:i,defaultProp:s});return S.createElement(yce,{scope:n,baseId:Wf(),value:u,onValueChange:f,orientation:o,dir:d,activationMode:l},S.createElement(jt.div,Ie({dir:d,"data-orientation":o},c,{ref:e})))}),bce="TabsList",wce=S.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=h4(bce,n),o=z$(n);return S.createElement(d4,Ie({asChild:!0},o,{orientation:s.orientation,dir:s.dir,loop:r}),S.createElement(jt.div,Ie({role:"tablist","aria-orientation":s.orientation},i,{ref:e})))}),xce="TabsTrigger",Sce=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=h4(xce,n),a=z$(n),l=B$(o.baseId,r),c=U$(o.baseId,r),d=r===o.value;return S.createElement(f4,Ie({asChild:!0},a,{focusable:!i,active:d}),S.createElement(jt.button,Ie({type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l},s,{ref:e,onMouseDown:ot(t.onMouseDown,u=>{!i&&u.button===0&&u.ctrlKey===!1?o.onValueChange(r):u.preventDefault()}),onKeyDown:ot(t.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&o.onValueChange(r)}),onFocus:ot(t.onFocus,()=>{const u=o.activationMode!=="manual";!d&&!i&&u&&o.onValueChange(r)})})))}),kce="TabsContent",Cce=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=h4(kce,n),l=B$(a.baseId,r),c=U$(a.baseId,r),d=r===a.value,u=S.useRef(d);return S.useEffect(()=>{const f=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(f)},[]),S.createElement(Po,{present:i||d},({present:f})=>S.createElement(jt.div,Ie({"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0},o,{ref:e,style:{...t.style,animationDuration:u.current?"0s":void 0}}),f&&s))});function B$(t,e){return`${t}-trigger-${e}`}function U$(t,e){return`${t}-content-${e}`}const _ce=vce,H$=wce,V$=Sce,W$=Cce,p4=_ce,Bx=S.forwardRef(({className:t,...e},n)=>y.jsx(H$,{ref:n,className:qe("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));Bx.displayName=H$.displayName;const yc=S.forwardRef(({className:t,...e},n)=>y.jsx(V$,{ref:n,className:qe("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));yc.displayName=V$.displayName;const vc=S.forwardRef(({className:t,...e},n)=>y.jsx(W$,{ref:n,className:qe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));vc.displayName=W$.displayName;const qf=S.forwardRef(({className:t,type:e,...n},r)=>y.jsx("input",{type:e,className:qe("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));qf.displayName="Input";const ir=Le.forwardRef(({value:t,onChange:e,className:n,...r},i)=>{const[s,o]=S.useState("");S.useEffect(()=>{o((t==null?void 0:t.toString())??"")},[t]);const a=d=>{o(d.target.value)},l=d=>{if(d.key==="Enter"&&e){const u=parseFloat(s);!Number.isNaN(u)&&u!==t?e(u):o((t==null?void 0:t.toString())??"")}else if(d.key==="ArrowUp"){const u=parseFloat(s);Number.isNaN(u)||o((u+1).toString())}else if(d.key==="ArrowDown"){const u=parseFloat(s);Number.isNaN(u)||o((u-1).toString())}},c=d=>{if(e){const u=parseFloat(s);!Number.isNaN(u)&&u!==t&&e(u)}};return y.jsx(qf,{value:s,className:qe("",n),onChange:a,onKeyDown:l,onBlur:c,ref:i,...r})});ir.displayName="NumberField";const Ace=S.forwardRef((t,e)=>S.createElement(jt.label,Ie({},t,{ref:e,onMouseDown:n=>{var r;(r=t.onMouseDown)===null||r===void 0||r.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault()}}))),q$=Ace,Ece=Cy("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Mt=S.forwardRef(({className:t,...e},n)=>y.jsx(q$,{ref:n,className:qe(Ece(),t),...e}));Mt.displayName=q$.displayName;const Gr=({title:t,more:e,borderTop:n=!1,open:r=!0,onOpenChange:i,className:s,children:o})=>y.jsxs("div",{className:qe("px-3",n?"border-t":"",s),children:[y.jsxs("div",{className:"flex h-9 items-center justify-between",children:[y.jsx(Mt,{children:t}),y.jsx("div",{className:"flex flex-row items-center gap-1",children:e})]}),y.jsx("div",{className:"flex flex-col gap-2 pb-3",children:o})]});function Mn({content:t,sideOffset:e=4,children:n}){return y.jsx("span",{children:n})}function fh(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Pce=["color"],Tce=S.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=fh(t,Pce);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Nce=["color"],Ux=S.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=fh(t,Nce);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Mce=["color"],Oce=S.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=fh(t,Mce);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Rce=["color"],G$=S.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=fh(t,Rce);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Lce=["color"],Dce=S.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=fh(t,Lce);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Ice=["color"],$ce=S.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=fh(t,Ice);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),jce=["color"],K$=S.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=fh(t,jce);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),S.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))});function Fce(t,e=globalThis==null?void 0:globalThis.document){const n=Xr(t);S.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const JC="dismissableLayer.update",zce="dismissableLayer.pointerDownOutside",Bce="dismissableLayer.focusOutside";let qN;const Uce=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),g4=S.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,d=S.useContext(Uce),[u,f]=S.useState(null),h=(n=u==null?void 0:u.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=S.useState({}),g=on(e,M=>f(M)),b=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(v),w=u?b.indexOf(u):-1,C=d.layersWithOutsidePointerEventsDisabled.size>0,P=w>=x,O=Hce(M=>{const D=M.target,I=[...d.branches].some(R=>R.contains(D));!P||I||(s==null||s(M),a==null||a(M),M.defaultPrevented||l==null||l())},h),T=Vce(M=>{const D=M.target;[...d.branches].some(R=>R.contains(D))||(o==null||o(M),a==null||a(M),M.defaultPrevented||l==null||l())},h);return Fce(M=>{w===d.layers.size-1&&(i==null||i(M),!M.defaultPrevented&&l&&(M.preventDefault(),l()))},h),S.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(qN=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),GN(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=qN)}},[u,h,r,d]),S.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),GN())},[u,d]),S.useEffect(()=>{const M=()=>p({});return document.addEventListener(JC,M),()=>document.removeEventListener(JC,M)},[]),S.createElement(jt.div,Ie({},c,{ref:g,style:{pointerEvents:C?P?"auto":"none":void 0,...t.style},onFocusCapture:ot(t.onFocusCapture,T.onFocusCapture),onBlurCapture:ot(t.onBlurCapture,T.onBlurCapture),onPointerDownCapture:ot(t.onPointerDownCapture,O.onPointerDownCapture)}))});function Hce(t,e=globalThis==null?void 0:globalThis.document){const n=Xr(t),r=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){J$(zce,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Vce(t,e=globalThis==null?void 0:globalThis.document){const n=Xr(t),r=S.useRef(!1);return S.useEffect(()=>{const i=s=>{s.target&&!r.current&&J$(Bce,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function GN(){const t=new CustomEvent(JC);document.dispatchEvent(t)}function J$(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?i$(i,s):i.dispatchEvent(s)}let sk=0;function m4(){S.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:KN()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:KN()),sk++,()=>{sk===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),sk--}},[])}function KN(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const ok="focusScope.autoFocusOnMount",ak="focusScope.autoFocusOnUnmount",JN={bubbles:!1,cancelable:!0},y4=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=S.useState(null),c=Xr(i),d=Xr(s),u=S.useRef(null),f=on(e,g=>l(g)),h=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let g=function(w){if(h.paused||!a)return;const C=w.target;a.contains(C)?u.current=C:mu(u.current,{select:!0})},b=function(w){if(h.paused||!a)return;const C=w.relatedTarget;C!==null&&(a.contains(C)||mu(u.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const P of w)P.removedNodes.length>0&&mu(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const x=new MutationObserver(v);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),x.disconnect()}}},[r,a,h.paused]),S.useEffect(()=>{if(a){ZN.add(h);const g=document.activeElement;if(!a.contains(g)){const v=new CustomEvent(ok,JN);a.addEventListener(ok,c),a.dispatchEvent(v),v.defaultPrevented||(Wce(Yce(Y$(a)),{select:!0}),document.activeElement===g&&mu(a))}return()=>{a.removeEventListener(ok,c),setTimeout(()=>{const v=new CustomEvent(ak,JN);a.addEventListener(ak,d),a.dispatchEvent(v),v.defaultPrevented||mu(g??document.body,{select:!0}),a.removeEventListener(ak,d),ZN.remove(h)},0)}}},[a,c,d,h]);const p=S.useCallback(g=>{if(!n&&!r||h.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(b&&v){const x=g.currentTarget,[w,C]=qce(x);w&&C?!g.shiftKey&&v===C?(g.preventDefault(),n&&mu(w,{select:!0})):g.shiftKey&&v===w&&(g.preventDefault(),n&&mu(C,{select:!0})):v===x&&g.preventDefault()}},[n,r,h.paused]);return S.createElement(jt.div,Ie({tabIndex:-1},o,{ref:f,onKeyDown:p}))});function Wce(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(mu(r,{select:e}),document.activeElement!==n)return}function qce(t){const e=Y$(t),n=YN(e,t),r=YN(e.reverse(),t);return[n,r]}function Y$(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function YN(t,e){for(const n of t)if(!Gce(n,{upTo:e}))return n}function Gce(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Kce(t){return t instanceof HTMLInputElement&&"select"in t}function mu(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Kce(t)&&e&&t.select()}}const ZN=Jce();function Jce(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=XN(t,e),t.unshift(e)},remove(e){var n;t=XN(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function XN(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Yce(t){return t.filter(e=>e.tagName!=="A")}const Zce=["top","right","bottom","left"],dd=Math.min,fo=Math.max,bw=Math.round,Qv=Math.floor,fd=t=>({x:t,y:t}),Xce={left:"right",right:"left",bottom:"top",top:"bottom"},Qce={start:"end",end:"start"};function YC(t,e,n){return fo(t,dd(e,n))}function Mc(t,e){return typeof t=="function"?t(e):t}function Oc(t){return t.split("-")[0]}function Xg(t){return t.split("-")[1]}function v4(t){return t==="x"?"y":"x"}function b4(t){return t==="y"?"height":"width"}function Qg(t){return["top","bottom"].includes(Oc(t))?"y":"x"}function w4(t){return v4(Qg(t))}function eue(t,e,n){n===void 0&&(n=!1);const r=Xg(t),i=w4(t),s=b4(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=ww(o)),[o,ww(o)]}function tue(t){const e=ww(t);return[ZC(t),e,ZC(e)]}function ZC(t){return t.replace(/start|end/g,e=>Qce[e])}function nue(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function rue(t,e,n,r){const i=Xg(t);let s=nue(Oc(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(ZC)))),s}function ww(t){return t.replace(/left|right|bottom|top/g,e=>Xce[e])}function iue(t){return{top:0,right:0,bottom:0,left:0,...t}}function Z$(t){return typeof t!="number"?iue(t):{top:t,right:t,bottom:t,left:t}}function xw(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function QN(t,e,n){let{reference:r,floating:i}=t;const s=Qg(e),o=w4(e),a=b4(o),l=Oc(e),c=s==="y",d=r.x+r.width/2-i.width/2,u=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:d,y:r.y-i.height};break;case"bottom":h={x:d,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:u};break;case"left":h={x:r.x-i.width,y:u};break;default:h={x:r.x,y:r.y}}switch(Xg(e)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const sue=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:u}=QN(c,r,l),f=r,h={},p=0;for(let g=0;g<a.length;g++){const{name:b,fn:v}=a[g],{x,y:w,data:C,reset:P}=await v({x:d,y:u,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:c,platform:o,elements:{reference:t,floating:e}});d=x??d,u=w??u,h={...h,[b]:{...h[b],...C}},P&&p<=50&&(p++,typeof P=="object"&&(P.placement&&(f=P.placement),P.rects&&(c=P.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):P.rects),{x:d,y:u}=QN(c,f,l)),g=-1)}return{x:d,y:u,placement:f,strategy:i,middlewareData:h}};async function V1(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:f=!1,padding:h=0}=Mc(e,t),p=Z$(h),b=a[f?u==="floating"?"reference":"floating":u],v=xw(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),x=u==="floating"?{...o.floating,x:r,y:i}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),C=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},P=xw(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:w,strategy:l}):x);return{top:(v.top-P.top+p.top)/C.y,bottom:(P.bottom-v.bottom+p.bottom)/C.y,left:(v.left-P.left+p.left)/C.x,right:(P.right-v.right+p.right)/C.x}}const oue=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Mc(t,e)||{};if(c==null)return{};const u=Z$(d),f={x:n,y:r},h=w4(i),p=b4(h),g=await o.getDimensions(c),b=h==="y",v=b?"top":"left",x=b?"bottom":"right",w=b?"clientHeight":"clientWidth",C=s.reference[p]+s.reference[h]-f[h]-s.floating[p],P=f[h]-s.reference[h],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let T=O?O[w]:0;(!T||!await(o.isElement==null?void 0:o.isElement(O)))&&(T=a.floating[w]||s.floating[p]);const M=C/2-P/2,D=T/2-g[p]/2-1,I=dd(u[v],D),R=dd(u[x],D),$=I,H=T-g[p]-R,z=T/2-g[p]/2+M,ee=YC($,z,H),ce=!l.arrow&&Xg(i)!=null&&z!==ee&&s.reference[p]/2-(z<$?I:R)-g[p]/2<0,le=ce?z<$?z-$:z-H:0;return{[h]:f[h]+le,data:{[h]:ee,centerOffset:z-ee-le,...ce&&{alignmentOffset:le}},reset:ce}}}),aue=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...b}=Mc(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Oc(i),x=Oc(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),C=f||(x||!g?[ww(a)]:tue(a));!f&&p!=="none"&&C.push(...rue(a,g,p,w));const P=[a,...C],O=await V1(e,b),T=[];let M=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&T.push(O[v]),u){const $=eue(i,o,w);T.push(O[$[0]],O[$[1]])}if(M=[...M,{placement:i,overflows:T}],!T.every($=>$<=0)){var D,I;const $=(((D=s.flip)==null?void 0:D.index)||0)+1,H=P[$];if(H)return{data:{index:$,overflows:M},reset:{placement:H}};let z=(I=M.filter(ee=>ee.overflows[0]<=0).sort((ee,ce)=>ee.overflows[1]-ce.overflows[1])[0])==null?void 0:I.placement;if(!z)switch(h){case"bestFit":{var R;const ee=(R=M.map(ce=>[ce.placement,ce.overflows.filter(le=>le>0).reduce((le,te)=>le+te,0)]).sort((ce,le)=>ce[1]-le[1])[0])==null?void 0:R[0];ee&&(z=ee);break}case"initialPlacement":z=a;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function eM(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function tM(t){return Zce.some(e=>t[e]>=0)}const lue=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Mc(t,e);switch(r){case"referenceHidden":{const s=await V1(e,{...i,elementContext:"reference"}),o=eM(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:tM(o)}}}case"escaped":{const s=await V1(e,{...i,altBoundary:!0}),o=eM(s,n.floating);return{data:{escapedOffsets:o,escaped:tM(o)}}}default:return{}}}}};async function cue(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Oc(n),a=Xg(n),l=Qg(n)==="y",c=["left","top"].includes(o)?-1:1,d=s&&l?-1:1,u=Mc(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*d,y:f*c}:{x:f*c,y:h*d}}const X$=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await cue(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},uue=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:v,y:x}=b;return{x:v,y:x}}},...l}=Mc(t,e),c={x:n,y:r},d=await V1(e,l),u=Qg(Oc(i)),f=v4(u);let h=c[f],p=c[u];if(s){const b=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=h+d[b],w=h-d[v];h=YC(x,h,w)}if(o){const b=u==="y"?"top":"left",v=u==="y"?"bottom":"right",x=p+d[b],w=p-d[v];p=YC(x,p,w)}const g=a.fn({...e,[f]:h,[u]:p});return{...g,data:{x:g.x-n,y:g.y-r}}}}},due=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Mc(t,e),d={x:n,y:r},u=Qg(i),f=v4(u);let h=d[f],p=d[u];const g=Mc(a,e),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const w=f==="y"?"height":"width",C=s.reference[f]-s.floating[w]+b.mainAxis,P=s.reference[f]+s.reference[w]-b.mainAxis;h<C?h=C:h>P&&(h=P)}if(c){var v,x;const w=f==="y"?"width":"height",C=["top","left"].includes(Oc(i)),P=s.reference[u]-s.floating[w]+(C&&((v=o.offset)==null?void 0:v[u])||0)+(C?0:b.crossAxis),O=s.reference[u]+s.reference[w]+(C?0:((x=o.offset)==null?void 0:x[u])||0)-(C?b.crossAxis:0);p<P?p=P:p>O&&(p=O)}return{[f]:h,[u]:p}}}},fue=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=Mc(t,e),l=await V1(e,a),c=Oc(n),d=Xg(n),u=Qg(n)==="y",{width:f,height:h}=r.floating;let p,g;c==="top"||c==="bottom"?(p=c,g=d===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(g=c,p=d==="end"?"top":"bottom");const b=h-l[p],v=f-l[g],x=!e.middlewareData.shift;let w=b,C=v;if(u){const O=f-l.left-l.right;C=d||x?dd(v,O):O}else{const O=h-l.top-l.bottom;w=d||x?dd(b,O):O}if(x&&!d){const O=fo(l.left,0),T=fo(l.right,0),M=fo(l.top,0),D=fo(l.bottom,0);u?C=f-2*(O!==0||T!==0?O+T:fo(l.left,l.right)):w=h-2*(M!==0||D!==0?M+D:fo(l.top,l.bottom))}await o({...e,availableWidth:C,availableHeight:w});const P=await i.getDimensions(s.floating);return f!==P.width||h!==P.height?{reset:{rects:!0}}:{}}}};function hd(t){return Q$(t)?(t.nodeName||"").toLowerCase():"#document"}function xo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Uc(t){var e;return(e=(Q$(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Q$(t){return t instanceof Node||t instanceof xo(t).Node}function Rc(t){return t instanceof Element||t instanceof xo(t).Element}function Pl(t){return t instanceof HTMLElement||t instanceof xo(t).HTMLElement}function nM(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof xo(t).ShadowRoot}function _y(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=ta(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function hue(t){return["table","td","th"].includes(hd(t))}function x4(t){const e=S4(),n=ta(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function ej(t){let e=Cg(t);for(;Pl(e)&&!Hx(e);){if(x4(e))return e;e=Cg(e)}return null}function S4(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Hx(t){return["html","body","#document"].includes(hd(t))}function ta(t){return xo(t).getComputedStyle(t)}function Vx(t){return Rc(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Cg(t){if(hd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||nM(t)&&t.host||Uc(t);return nM(e)?e.host:e}function tj(t){const e=Cg(t);return Hx(e)?t.ownerDocument?t.ownerDocument.body:t.body:Pl(e)&&_y(e)?e:tj(e)}function W1(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=tj(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=xo(i);return s?e.concat(o,o.visualViewport||[],_y(i)?i:[],o.frameElement&&n?W1(o.frameElement):[]):e.concat(i,W1(i,[],n))}function nj(t){const e=ta(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Pl(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=bw(n)!==s||bw(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function k4(t){return Rc(t)?t:t.contextElement}function Kp(t){const e=k4(t);if(!Pl(e))return fd(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=nj(e);let o=(s?bw(n.width):n.width)/r,a=(s?bw(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const pue=fd(0);function rj(t){const e=xo(t);return!S4()||!e.visualViewport?pue:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function gue(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==xo(t)?!1:e}function Gf(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=k4(t);let o=fd(1);e&&(r?Rc(r)&&(o=Kp(r)):o=Kp(t));const a=gue(s,n,r)?rj(s):fd(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,d=i.width/o.x,u=i.height/o.y;if(s){const f=xo(s),h=r&&Rc(r)?xo(r):r;let p=f.frameElement;for(;p&&r&&h!==f;){const g=Kp(p),b=p.getBoundingClientRect(),v=ta(p),x=b.left+(p.clientLeft+parseFloat(v.paddingLeft))*g.x,w=b.top+(p.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,c*=g.y,d*=g.x,u*=g.y,l+=x,c+=w,p=xo(p).frameElement}}return xw({width:d,height:u,x:l,y:c})}const mue=[":popover-open",":modal"];function ij(t){let e=!1,n=0,r=0;function i(s){try{e=e||t.matches(s)}catch{}}if(mue.forEach(s=>{i(s)}),e){const s=ej(t);if(s){const o=s.getBoundingClientRect();n=o.x,r=o.y}}return[e,n,r]}function yue(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=Uc(r),[o]=e?ij(e.floating):[!1];if(r===s||o)return n;let a={scrollLeft:0,scrollTop:0},l=fd(1);const c=fd(0),d=Pl(r);if((d||!d&&i!=="fixed")&&((hd(r)!=="body"||_y(s))&&(a=Vx(r)),Pl(r))){const u=Gf(r);l=Kp(r),c.x=u.x+r.clientLeft,c.y=u.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-a.scrollLeft*l.x+c.x,y:n.y*l.y-a.scrollTop*l.y+c.y}}function vue(t){return Array.from(t.getClientRects())}function sj(t){return Gf(Uc(t)).left+Vx(t).scrollLeft}function bue(t){const e=Uc(t),n=Vx(t),r=t.ownerDocument.body,i=fo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=fo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+sj(t);const a=-n.scrollTop;return ta(r).direction==="rtl"&&(o+=fo(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function wue(t,e){const n=xo(t),r=Uc(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=S4();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function xue(t,e){const n=Gf(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Pl(t)?Kp(t):fd(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function rM(t,e,n){let r;if(e==="viewport")r=wue(t,n);else if(e==="document")r=bue(Uc(t));else if(Rc(e))r=xue(e,n);else{const i=rj(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return xw(r)}function oj(t,e){const n=Cg(t);return n===e||!Rc(n)||Hx(n)?!1:ta(n).position==="fixed"||oj(n,e)}function Sue(t,e){const n=e.get(t);if(n)return n;let r=W1(t,[],!1).filter(a=>Rc(a)&&hd(a)!=="body"),i=null;const s=ta(t).position==="fixed";let o=s?Cg(t):t;for(;Rc(o)&&!Hx(o);){const a=ta(o),l=x4(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||_y(o)&&!l&&oj(t,o))?r=r.filter(d=>d!==o):i=a,o=Cg(o)}return e.set(t,r),r}function kue(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Sue(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const u=rM(e,d,i);return c.top=fo(u.top,c.top),c.right=dd(u.right,c.right),c.bottom=dd(u.bottom,c.bottom),c.left=fo(u.left,c.left),c},rM(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Cue(t){const{width:e,height:n}=nj(t);return{width:e,height:n}}function _ue(t,e,n,r){const i=Pl(e),s=Uc(e),o=n==="fixed",a=Gf(t,!0,o,e);let l={scrollLeft:0,scrollTop:0};const c=fd(0);if(i||!i&&!o)if((hd(e)!=="body"||_y(s))&&(l=Vx(e)),i){const g=Gf(e,!0,o,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else s&&(c.x=sj(s));let d=a.left+l.scrollLeft-c.x,u=a.top+l.scrollTop-c.y;const[f,h,p]=ij(r);return f&&(d+=h,u+=p,i&&(d+=e.clientLeft,u+=e.clientTop)),{x:d,y:u,width:a.width,height:a.height}}function iM(t,e){return!Pl(t)||ta(t).position==="fixed"?null:e?e(t):t.offsetParent}function aj(t,e){const n=xo(t);if(!Pl(t))return n;let r=iM(t,e);for(;r&&hue(r)&&ta(r).position==="static";)r=iM(r,e);return r&&(hd(r)==="html"||hd(r)==="body"&&ta(r).position==="static"&&!x4(r))?n:r||ej(t)||n}const Aue=async function(t){const e=this.getOffsetParent||aj,n=this.getDimensions;return{reference:_ue(t.reference,await e(t.floating),t.strategy,t.floating),floating:{x:0,y:0,...await n(t.floating)}}};function Eue(t){return ta(t).direction==="rtl"}const Pue={convertOffsetParentRelativeRectToViewportRelativeRect:yue,getDocumentElement:Uc,getClippingRect:kue,getOffsetParent:aj,getElementRects:Aue,getClientRects:vue,getDimensions:Cue,getScale:Kp,isElement:Rc,isRTL:Eue};function Tue(t,e){let n=null,r;const i=Uc(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:d,width:u,height:f}=t.getBoundingClientRect();if(a||e(),!u||!f)return;const h=Qv(d),p=Qv(i.clientWidth-(c+u)),g=Qv(i.clientHeight-(d+f)),b=Qv(c),x={rootMargin:-h+"px "+-p+"px "+-g+"px "+-b+"px",threshold:fo(0,dd(1,l))||1};let w=!0;function C(P){const O=P[0].intersectionRatio;if(O!==l){if(!w)return o();O?o(!1,O):r=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(C,{...x,root:i.ownerDocument})}catch{n=new IntersectionObserver(C,x)}n.observe(t)}return o(!0),s}function lj(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=k4(t),d=i||s?[...c?W1(c):[],...W1(e)]:[];d.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const u=c&&a?Tue(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(v=>{let[x]=v;x&&x.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let p,g=l?Gf(t):null;l&&b();function b(){const v=Gf(t);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&n(),g=v,p=requestAnimationFrame(b)}return n(),()=>{var v;d.forEach(x=>{i&&x.removeEventListener("scroll",n),s&&x.removeEventListener("resize",n)}),u==null||u(),(v=h)==null||v.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const cj=uue,uj=aue,dj=fue,fj=lue,sM=oue,hj=due,Nue=(t,e,n)=>{const r=new Map,i={platform:Pue,...n},s={...i.platform,_c:r};return sue(t,e,{...i,platform:s})},pj=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?sM({element:r.current,padding:i}).fn(n):{}:r?sM({element:r,padding:i}).fn(n):{}}}};var tb=typeof document<"u"?S.useLayoutEffect:S.useEffect;function Sw(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Sw(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Sw(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function gj(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function oM(t,e){const n=gj(t);return Math.round(e*n)/n}function aM(t){const e=S.useRef(t);return tb(()=>{e.current=t}),e}function mj(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,u]=S.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=S.useState(r);Sw(f,r)||h(r);const[p,g]=S.useState(null),[b,v]=S.useState(null),x=S.useCallback(le=>{le!==O.current&&(O.current=le,g(le))},[]),w=S.useCallback(le=>{le!==T.current&&(T.current=le,v(le))},[]),C=s||p,P=o||b,O=S.useRef(null),T=S.useRef(null),M=S.useRef(d),D=l!=null,I=aM(l),R=aM(i),$=S.useCallback(()=>{if(!O.current||!T.current)return;const le={placement:e,strategy:n,middleware:f};R.current&&(le.platform=R.current),Nue(O.current,T.current,le).then(te=>{const Z={...te,isPositioned:!0};H.current&&!Sw(M.current,Z)&&(M.current=Z,Ua.flushSync(()=>{u(Z)}))})},[f,e,n,R]);tb(()=>{c===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,u(le=>({...le,isPositioned:!1})))},[c]);const H=S.useRef(!1);tb(()=>(H.current=!0,()=>{H.current=!1}),[]),tb(()=>{if(C&&(O.current=C),P&&(T.current=P),C&&P){if(I.current)return I.current(C,P,$);$()}},[C,P,$,I,D]);const z=S.useMemo(()=>({reference:O,floating:T,setReference:x,setFloating:w}),[x,w]),ee=S.useMemo(()=>({reference:C,floating:P}),[C,P]),ce=S.useMemo(()=>{const le={position:n,left:0,top:0};if(!ee.floating)return le;const te=oM(ee.floating,d.x),Z=oM(ee.floating,d.y);return a?{...le,transform:"translate("+te+"px, "+Z+"px)",...gj(ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:te,top:Z}},[n,a,ee.floating,d.x,d.y]);return S.useMemo(()=>({...d,update:$,refs:z,elements:ee,floatingStyles:ce}),[d,$,z,ee,ce])}function Wx(t){const[e,n]=S.useState(void 0);return xs(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const yj="Popper",[vj,em]=Zs(yj),[Mue,bj]=vj(yj),Oue=t=>{const{__scopePopper:e,children:n}=t,[r,i]=S.useState(null);return S.createElement(Mue,{scope:e,anchor:r,onAnchorChange:i},n)},Rue="PopperAnchor",Lue=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=bj(Rue,n),o=S.useRef(null),a=on(e,o);return S.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:S.createElement(jt.div,Ie({},i,{ref:a}))}),wj="PopperContent",[Due,V_e]=vj(wj),Iue=S.forwardRef((t,e)=>{var n,r,i,s,o,a,l,c;const{__scopePopper:d,side:u="bottom",sideOffset:f=0,align:h="center",alignOffset:p=0,arrowPadding:g=0,avoidCollisions:b=!0,collisionBoundary:v=[],collisionPadding:x=0,sticky:w="partial",hideWhenDetached:C=!1,updatePositionStrategy:P="optimized",onPlaced:O,...T}=t,M=bj(wj,d),[D,I]=S.useState(null),R=on(e,ne=>I(ne)),[$,H]=S.useState(null),z=Wx($),ee=(n=z==null?void 0:z.width)!==null&&n!==void 0?n:0,ce=(r=z==null?void 0:z.height)!==null&&r!==void 0?r:0,le=u+(h!=="center"?"-"+h:""),te=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},Z=Array.isArray(v)?v:[v],de=Z.length>0,Ce={padding:te,boundary:Z.filter($ue),altBoundary:de},{refs:F,floatingStyles:X,placement:re,isPositioned:ue,middlewareData:he}=mj({strategy:"fixed",placement:le,whileElementsMounted:(...ne)=>lj(...ne,{animationFrame:P==="always"}),elements:{reference:M.anchor},middleware:[X$({mainAxis:f+ce,alignmentAxis:p}),b&&cj({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?hj():void 0,...Ce}),b&&uj({...Ce}),dj({...Ce,apply:({elements:ne,rects:V,availableWidth:Re,availableHeight:Fe})=>{const{width:K,height:_}=V.reference,A=ne.floating.style;A.setProperty("--radix-popper-available-width",`${Re}px`),A.setProperty("--radix-popper-available-height",`${Fe}px`),A.setProperty("--radix-popper-anchor-width",`${K}px`),A.setProperty("--radix-popper-anchor-height",`${_}px`)}}),$&&pj({element:$,padding:g}),jue({arrowWidth:ee,arrowHeight:ce}),C&&fj({strategy:"referenceHidden",...Ce})]}),[fe,be]=xj(re),pe=Xr(O);xs(()=>{ue&&(pe==null||pe())},[ue,pe]);const me=(i=he.arrow)===null||i===void 0?void 0:i.x,_e=(s=he.arrow)===null||s===void 0?void 0:s.y,Te=((o=he.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[je,Qe]=S.useState();return xs(()=>{D&&Qe(window.getComputedStyle(D).zIndex)},[D]),S.createElement("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:ue?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:je,"--radix-popper-transform-origin":[(a=he.transformOrigin)===null||a===void 0?void 0:a.x,(l=he.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},S.createElement(Due,{scope:d,placedSide:fe,onArrowChange:H,arrowX:me,arrowY:_e,shouldHideArrow:Te},S.createElement(jt.div,Ie({"data-side":fe,"data-align":be},T,{ref:R,style:{...T.style,animation:ue?void 0:"none",opacity:(c=he.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function $ue(t){return t!==null}const jue=t=>({name:"transformOrigin",options:t,fn(e){var n,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,u=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,f=u?0:t.arrowWidth,h=u?0:t.arrowHeight,[p,g]=xj(a),b={start:"0%",center:"50%",end:"100%"}[g],v=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+f/2,x=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+h/2;let w="",C="";return p==="bottom"?(w=u?b:`${v}px`,C=`${-h}px`):p==="top"?(w=u?b:`${v}px`,C=`${l.floating.height+h}px`):p==="right"?(w=`${-h}px`,C=u?b:`${x}px`):p==="left"&&(w=`${l.floating.width+h}px`,C=u?b:`${x}px`),{data:{x:w,y:C}}}});function xj(t){const[e,n="center"]=t.split("-");return[e,n]}const C4=Oue,_4=Lue,A4=Iue,E4=S.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?yx.createPortal(S.createElement(jt.div,Ie({},i,{ref:e})),r):null});function qx(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const Fue=S.forwardRef((t,e)=>S.createElement(jt.span,Ie({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}})));var zue=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Qh=new WeakMap,e2=new WeakMap,t2={},lk=0,Sj=function(t){return t&&(t.host||Sj(t.parentNode))},Bue=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Sj(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Uue=function(t,e,n,r){var i=Bue(e,Array.isArray(t)?t:[t]);t2[n]||(t2[n]=new WeakMap);var s=t2[n],o=[],a=new Set,l=new Set(i),c=function(u){!u||a.has(u)||(a.add(u),c(u.parentNode))};i.forEach(c);var d=function(u){!u||l.has(u)||Array.prototype.forEach.call(u.children,function(f){if(a.has(f))d(f);else{var h=f.getAttribute(r),p=h!==null&&h!=="false",g=(Qh.get(f)||0)+1,b=(s.get(f)||0)+1;Qh.set(f,g),s.set(f,b),o.push(f),g===1&&p&&e2.set(f,!0),b===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}})};return d(e),a.clear(),lk++,function(){o.forEach(function(u){var f=Qh.get(u)-1,h=s.get(u)-1;Qh.set(u,f),s.set(u,h),f||(e2.has(u)||u.removeAttribute(r),e2.delete(u)),h||u.removeAttribute(n)}),lk--,lk||(Qh=new WeakMap,Qh=new WeakMap,e2=new WeakMap,t2={})}},Gx=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=zue(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),Uue(r,i,n,"aria-hidden")):function(){return null}},Vi=function(){return Vi=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Vi.apply(this,arguments)};function P4(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function kj(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var q0="right-scroll-bar-position",G0="width-before-scroll-bar",Hue="with-scroll-bars-hidden",Vue="--removed-body-scroll-bar-size";function ck(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Wue(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var lM=new WeakMap;function Cj(t,e){var n=Wue(null,function(r){return t.forEach(function(i){return ck(i,r)})});return S.useLayoutEffect(function(){var r=lM.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||ck(a,null)}),s.forEach(function(a){i.has(a)||ck(a,o)})}lM.set(n,t)},[t]),n}function que(t){return t}function Gue(t,e){e===void 0&&(e=que);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var d=o;o=[],d.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return i}function _j(t){t===void 0&&(t={});var e=Gue(null);return e.options=Vi({async:!0,ssr:!1},t),e}var Aj=function(t){var e=t.sideCar,n=P4(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,Vi({},n))};Aj.isSideCarExport=!0;function Ej(t,e){return t.useMedium(e),Aj}var Pj=_j(),uk=function(){},Kx=S.forwardRef(function(t,e){var n=S.useRef(null),r=S.useState({onScrollCapture:uk,onWheelCapture:uk,onTouchMoveCapture:uk}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,u=t.shards,f=t.sideCar,h=t.noIsolation,p=t.inert,g=t.allowPinchZoom,b=t.as,v=b===void 0?"div":b,x=P4(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=f,C=Cj([n,e]),P=Vi(Vi({},x),i);return S.createElement(S.Fragment,null,d&&S.createElement(w,{sideCar:Pj,removeScrollBar:c,shards:u,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!g,lockRef:n}),o?S.cloneElement(S.Children.only(a),Vi(Vi({},P),{ref:C})):S.createElement(v,Vi({},P,{className:l,ref:C}),a))});Kx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Kx.classNames={fullWidth:G0,zeroRight:q0};var Kue=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Jue(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Kue();return e&&t.setAttribute("nonce",e),t}function Yue(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Zue(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Xue=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Jue())&&(Yue(e,n),Zue(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Que=function(){var t=Xue();return function(e,n){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},T4=function(){var t=Que(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},ede={left:0,top:0,right:0,gap:0},dk=function(t){return parseInt(t||"",10)||0},tde=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[dk(n),dk(r),dk(i)]},nde=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return ede;var e=tde(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},rde=T4(),ide=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Hue,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(q0,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(G0,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(q0," .").concat(q0,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(G0," .").concat(G0,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(Vue,": ").concat(a,`px;
  }
`)},Tj=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r,s=S.useMemo(function(){return nde(i)},[i]);return S.createElement(rde,{styles:ide(s,!e,i,n?"":"!important")})},XC=!1;if(typeof window<"u")try{var n2=Object.defineProperty({},"passive",{get:function(){return XC=!0,!0}});window.addEventListener("test",n2,n2),window.removeEventListener("test",n2,n2)}catch{XC=!1}var ep=XC?{passive:!1}:!1,sde=function(t){return t.tagName==="TEXTAREA"},Nj=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!sde(t)&&n[e]==="visible")},ode=function(t){return Nj(t,"overflowY")},ade=function(t){return Nj(t,"overflowX")},cM=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=Mj(t,n);if(r){var i=Oj(t,n),s=i[1],o=i[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},lde=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},cde=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Mj=function(t,e){return t==="v"?ode(e):ade(e)},Oj=function(t,e){return t==="v"?lde(e):cde(e)},ude=function(t,e){return t==="h"&&e==="rtl"?-1:1},dde=function(t,e,n,r,i){var s=ude(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,d=o>0,u=0,f=0;do{var h=Oj(t,a),p=h[0],g=h[1],b=h[2],v=g-b-s*p;(p||v)&&Mj(t,a)&&(u+=v,f+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&u===0||!d&&f===0)&&(c=!0),c},r2=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},uM=function(t){return[t.deltaX,t.deltaY]},dM=function(t){return t&&"current"in t?t.current:t},fde=function(t,e){return t[0]===e[0]&&t[1]===e[1]},hde=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},pde=0,tp=[];function gde(t){var e=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),i=S.useState(pde++)[0],s=S.useState(function(){return T4()})[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=kj([t.lockRef.current],(t.shards||[]).map(dM),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(g,b){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var v=r2(g),x=n.current,w="deltaX"in g?g.deltaX:x[0]-v[0],C="deltaY"in g?g.deltaY:x[1]-v[1],P,O=g.target,T=Math.abs(w)>Math.abs(C)?"h":"v";if("touches"in g&&T==="h"&&O.type==="range")return!1;var M=cM(T,O);if(!M)return!0;if(M?P=T:(P=T==="v"?"h":"v",M=cM(T,O)),!M)return!1;if(!r.current&&"changedTouches"in g&&(w||C)&&(r.current=P),!P)return!0;var D=r.current||P;return dde(D,b,g,D==="h"?w:C)},[]),l=S.useCallback(function(g){var b=g;if(!(!tp.length||tp[tp.length-1]!==s)){var v="deltaY"in b?uM(b):r2(b),x=e.current.filter(function(P){return P.name===b.type&&P.target===b.target&&fde(P.delta,v)})[0];if(x&&x.should){b.cancelable&&b.preventDefault();return}if(!x){var w=(o.current.shards||[]).map(dM).filter(Boolean).filter(function(P){return P.contains(b.target)}),C=w.length>0?a(b,w[0]):!o.current.noIsolation;C&&b.cancelable&&b.preventDefault()}}},[]),c=S.useCallback(function(g,b,v,x){var w={name:g,delta:b,target:v,should:x};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(C){return C!==w})},1)},[]),d=S.useCallback(function(g){n.current=r2(g),r.current=void 0},[]),u=S.useCallback(function(g){c(g.type,uM(g),g.target,a(g,t.lockRef.current))},[]),f=S.useCallback(function(g){c(g.type,r2(g),g.target,a(g,t.lockRef.current))},[]);S.useEffect(function(){return tp.push(s),t.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:f}),document.addEventListener("wheel",l,ep),document.addEventListener("touchmove",l,ep),document.addEventListener("touchstart",d,ep),function(){tp=tp.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,ep),document.removeEventListener("touchmove",l,ep),document.removeEventListener("touchstart",d,ep)}},[]);var h=t.removeScrollBar,p=t.inert;return S.createElement(S.Fragment,null,p?S.createElement(s,{styles:hde(i)}):null,h?S.createElement(Tj,{gapMode:"margin"}):null)}const mde=Ej(Pj,gde);var Jx=S.forwardRef(function(t,e){return S.createElement(Kx,Vi({},t,{ref:e,sideCar:mde}))});Jx.classNames=Kx.classNames;const yde=[" ","Enter","ArrowUp","ArrowDown"],vde=[" ","Enter"],Yx="Select",[Zx,Xx,bde]=zx(Yx),[tm,W_e]=Zs(Yx,[bde,em]),N4=em(),[wde,hh]=tm(Yx),[xde,Sde]=tm(Yx),kde=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:d,autoComplete:u,disabled:f,required:h}=t,p=N4(e),[g,b]=S.useState(null),[v,x]=S.useState(null),[w,C]=S.useState(!1),P=dh(c),[O=!1,T]=ea({prop:r,defaultProp:i,onChange:s}),[M,D]=ea({prop:o,defaultProp:a,onChange:l}),I=S.useRef(null),R=g?!!g.closest("form"):!0,[$,H]=S.useState(new Set),z=Array.from($).map(ee=>ee.props.value).join(";");return S.createElement(C4,p,S.createElement(wde,{required:h,scope:e,trigger:g,onTriggerChange:b,valueNode:v,onValueNodeChange:x,valueNodeHasChildren:w,onValueNodeHasChildrenChange:C,contentId:Wf(),value:M,onValueChange:D,open:O,onOpenChange:T,dir:P,triggerPointerDownPosRef:I,disabled:f},S.createElement(Zx.Provider,{scope:e},S.createElement(xde,{scope:t.__scopeSelect,onNativeOptionAdd:S.useCallback(ee=>{H(ce=>new Set(ce).add(ee))},[]),onNativeOptionRemove:S.useCallback(ee=>{H(ce=>{const le=new Set(ce);return le.delete(ee),le})},[])},n)),R?S.createElement($j,{key:z,"aria-hidden":!0,required:h,tabIndex:-1,name:d,autoComplete:u,value:M,onChange:ee=>D(ee.target.value),disabled:f},M===void 0?S.createElement("option",{value:""}):null,Array.from($)):null))},Cde="SelectTrigger",_de=S.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=N4(n),o=hh(Cde,n),a=o.disabled||r,l=on(e,o.onTriggerChange),c=Xx(n),[d,u,f]=jj(p=>{const g=c().filter(x=>!x.disabled),b=g.find(x=>x.value===o.value),v=Fj(g,p,b);v!==void 0&&o.onValueChange(v.value)}),h=()=>{a||(o.onOpenChange(!0),f())};return S.createElement(_4,Ie({asChild:!0},s),S.createElement(jt.button,Ie({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":Ij(o.value)?"":void 0},i,{ref:l,onClick:ot(i.onClick,p=>{p.currentTarget.focus()}),onPointerDown:ot(i.onPointerDown,p=>{const g=p.target;g.hasPointerCapture(p.pointerId)&&g.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&(h(),o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)},p.preventDefault())}),onKeyDown:ot(i.onKeyDown,p=>{const g=d.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&u(p.key),!(g&&p.key===" ")&&yde.includes(p.key)&&(h(),p.preventDefault())})})))}),Ade="SelectValue",Ede=S.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=hh(Ade,n),{onValueNodeHasChildrenChange:c}=l,d=s!==void 0,u=on(e,l.onValueNodeChange);return xs(()=>{c(d)},[c,d]),S.createElement(jt.span,Ie({},a,{ref:u,style:{pointerEvents:"none"}}),Ij(l.value)?S.createElement(S.Fragment,null,o):s)}),Pde=S.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return S.createElement(jt.span,Ie({"aria-hidden":!0},i,{ref:e}),r||"")}),Tde=t=>S.createElement(E4,Ie({asChild:!0},t)),_g="SelectContent",Nde=S.forwardRef((t,e)=>{const n=hh(_g,t.__scopeSelect),[r,i]=S.useState();if(xs(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?Ua.createPortal(S.createElement(Rj,{scope:t.__scopeSelect},S.createElement(Zx.Slot,{scope:t.__scopeSelect},S.createElement("div",null,t.children))),s):null}return S.createElement(Mde,Ie({},t,{ref:e}))}),ic=10,[Rj,ph]=tm(_g),Mde=S.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:g,avoidCollisions:b,...v}=t,x=hh(_g,n),[w,C]=S.useState(null),[P,O]=S.useState(null),T=on(e,fe=>C(fe)),[M,D]=S.useState(null),[I,R]=S.useState(null),$=Xx(n),[H,z]=S.useState(!1),ee=S.useRef(!1);S.useEffect(()=>{if(w)return Gx(w)},[w]),m4();const ce=S.useCallback(fe=>{const[be,...pe]=$().map(Te=>Te.ref.current),[me]=pe.slice(-1),_e=document.activeElement;for(const Te of fe)if(Te===_e||(Te==null||Te.scrollIntoView({block:"nearest"}),Te===be&&P&&(P.scrollTop=0),Te===me&&P&&(P.scrollTop=P.scrollHeight),Te==null||Te.focus(),document.activeElement!==_e))return},[$,P]),le=S.useCallback(()=>ce([M,w]),[ce,M,w]);S.useEffect(()=>{H&&le()},[H,le]);const{onOpenChange:te,triggerPointerDownPosRef:Z}=x;S.useEffect(()=>{if(w){let fe={x:0,y:0};const be=me=>{var _e,Te,je,Qe;fe={x:Math.abs(Math.round(me.pageX)-((_e=(Te=Z.current)===null||Te===void 0?void 0:Te.x)!==null&&_e!==void 0?_e:0)),y:Math.abs(Math.round(me.pageY)-((je=(Qe=Z.current)===null||Qe===void 0?void 0:Qe.y)!==null&&je!==void 0?je:0))}},pe=me=>{fe.x<=10&&fe.y<=10?me.preventDefault():w.contains(me.target)||te(!1),document.removeEventListener("pointermove",be),Z.current=null};return Z.current!==null&&(document.addEventListener("pointermove",be),document.addEventListener("pointerup",pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",be),document.removeEventListener("pointerup",pe,{capture:!0})}}},[w,te,Z]),S.useEffect(()=>{const fe=()=>te(!1);return window.addEventListener("blur",fe),window.addEventListener("resize",fe),()=>{window.removeEventListener("blur",fe),window.removeEventListener("resize",fe)}},[te]);const[de,Ce]=jj(fe=>{const be=$().filter(_e=>!_e.disabled),pe=be.find(_e=>_e.ref.current===document.activeElement),me=Fj(be,fe,pe);me&&setTimeout(()=>me.ref.current.focus())}),F=S.useCallback((fe,be,pe)=>{const me=!ee.current&&!pe;(x.value!==void 0&&x.value===be||me)&&(D(fe),me&&(ee.current=!0))},[x.value]),X=S.useCallback(()=>w==null?void 0:w.focus(),[w]),re=S.useCallback((fe,be,pe)=>{const me=!ee.current&&!pe;(x.value!==void 0&&x.value===be||me)&&R(fe)},[x.value]),ue=r==="popper"?fM:Ode,he=ue===fM?{side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:g,avoidCollisions:b}:{};return S.createElement(Rj,{scope:n,content:w,viewport:P,onViewportChange:O,itemRefCallback:F,selectedItem:M,onItemLeave:X,itemTextRefCallback:re,focusSelectedItem:le,selectedItemText:I,position:r,isPositioned:H,searchRef:de},S.createElement(Jx,{as:_o,allowPinchZoom:!0},S.createElement(y4,{asChild:!0,trapped:x.open,onMountAutoFocus:fe=>{fe.preventDefault()},onUnmountAutoFocus:ot(i,fe=>{var be;(be=x.trigger)===null||be===void 0||be.focus({preventScroll:!0}),fe.preventDefault()})},S.createElement(g4,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:fe=>fe.preventDefault(),onDismiss:()=>x.onOpenChange(!1)},S.createElement(ue,Ie({role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:fe=>fe.preventDefault()},v,he,{onPlaced:()=>z(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ot(v.onKeyDown,fe=>{const be=fe.ctrlKey||fe.altKey||fe.metaKey;if(fe.key==="Tab"&&fe.preventDefault(),!be&&fe.key.length===1&&Ce(fe.key),["ArrowUp","ArrowDown","Home","End"].includes(fe.key)){let me=$().filter(_e=>!_e.disabled).map(_e=>_e.ref.current);if(["ArrowUp","End"].includes(fe.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes(fe.key)){const _e=fe.target,Te=me.indexOf(_e);me=me.slice(Te+1)}setTimeout(()=>ce(me)),fe.preventDefault()}})}))))))}),Ode=S.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=hh(_g,n),o=ph(_g,n),[a,l]=S.useState(null),[c,d]=S.useState(null),u=on(e,T=>d(T)),f=Xx(n),h=S.useRef(!1),p=S.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:v,focusSelectedItem:x}=o,w=S.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&g&&b&&v){const T=s.trigger.getBoundingClientRect(),M=c.getBoundingClientRect(),D=s.valueNode.getBoundingClientRect(),I=v.getBoundingClientRect();if(s.dir!=="rtl"){const _e=I.left-M.left,Te=D.left-_e,je=T.left-Te,Qe=T.width+je,ne=Math.max(Qe,M.width),V=window.innerWidth-ic,Re=H1(Te,[ic,V-ne]);a.style.minWidth=Qe+"px",a.style.left=Re+"px"}else{const _e=M.right-I.right,Te=window.innerWidth-D.right-_e,je=window.innerWidth-T.right-Te,Qe=T.width+je,ne=Math.max(Qe,M.width),V=window.innerWidth-ic,Re=H1(Te,[ic,V-ne]);a.style.minWidth=Qe+"px",a.style.right=Re+"px"}const R=f(),$=window.innerHeight-ic*2,H=g.scrollHeight,z=window.getComputedStyle(c),ee=parseInt(z.borderTopWidth,10),ce=parseInt(z.paddingTop,10),le=parseInt(z.borderBottomWidth,10),te=parseInt(z.paddingBottom,10),Z=ee+ce+H+te+le,de=Math.min(b.offsetHeight*5,Z),Ce=window.getComputedStyle(g),F=parseInt(Ce.paddingTop,10),X=parseInt(Ce.paddingBottom,10),re=T.top+T.height/2-ic,ue=$-re,he=b.offsetHeight/2,fe=b.offsetTop+he,be=ee+ce+fe,pe=Z-be;if(be<=re){const _e=b===R[R.length-1].ref.current;a.style.bottom="0px";const Te=c.clientHeight-g.offsetTop-g.offsetHeight,je=Math.max(ue,he+(_e?X:0)+Te+le),Qe=be+je;a.style.height=Qe+"px"}else{const _e=b===R[0].ref.current;a.style.top="0px";const je=Math.max(re,ee+g.offsetTop+(_e?F:0)+he)+pe;a.style.height=je+"px",g.scrollTop=be-re+g.offsetTop}a.style.margin=`${ic}px 0`,a.style.minHeight=de+"px",a.style.maxHeight=$+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[f,s.trigger,s.valueNode,a,c,g,b,v,s.dir,r]);xs(()=>w(),[w]);const[C,P]=S.useState();xs(()=>{c&&P(window.getComputedStyle(c).zIndex)},[c]);const O=S.useCallback(T=>{T&&p.current===!0&&(w(),x==null||x(),p.current=!1)},[w,x]);return S.createElement(Rde,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:h,onScrollButtonChange:O},S.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C}},S.createElement(jt.div,Ie({},i,{ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}}))))}),fM=S.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=ic,...s}=t,o=N4(n);return S.createElement(A4,Ie({},o,s,{ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[Rde,M4]=tm(_g,{}),hM="SelectViewport",Lde=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=ph(hM,n),s=M4(hM,n),o=on(e,i.onViewportChange),a=S.useRef(0);return S.createElement(S.Fragment,null,S.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),S.createElement(Zx.Slot,{scope:n},S.createElement(jt.div,Ie({"data-radix-select-viewport":"",role:"presentation"},r,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:ot(r.onScroll,l=>{const c=l.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:u}=s;if(u!=null&&u.current&&d){const f=Math.abs(a.current-c.scrollTop);if(f>0){const h=window.innerHeight-ic*2,p=parseFloat(d.style.minHeight),g=parseFloat(d.style.height),b=Math.max(p,g);if(b<h){const v=b+f,x=Math.min(h,v),w=v-x;d.style.height=x+"px",d.style.bottom==="0px"&&(c.scrollTop=w>0?w:0,d.style.justifyContent="flex-end")}}}a.current=c.scrollTop})}))))}),Dde="SelectGroup",[q_e,Ide]=tm(Dde),$de="SelectLabel",jde=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Ide($de,n);return S.createElement(jt.div,Ie({id:i.id},r,{ref:e}))}),QC="SelectItem",[Fde,Lj]=tm(QC),zde=S.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=hh(QC,n),l=ph(QC,n),c=a.value===r,[d,u]=S.useState(s??""),[f,h]=S.useState(!1),p=on(e,v=>{var x;return(x=l.itemRefCallback)===null||x===void 0?void 0:x.call(l,v,r,i)}),g=Wf(),b=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return S.createElement(Fde,{scope:n,value:r,disabled:i,textId:g,isSelected:c,onItemTextChange:S.useCallback(v=>{u(x=>{var w;return x||((w=v==null?void 0:v.textContent)!==null&&w!==void 0?w:"").trim()})},[])},S.createElement(Zx.ItemSlot,{scope:n,value:r,disabled:i,textValue:d},S.createElement(jt.div,Ie({role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1},o,{ref:p,onFocus:ot(o.onFocus,()=>h(!0)),onBlur:ot(o.onBlur,()=>h(!1)),onPointerUp:ot(o.onPointerUp,b),onPointerMove:ot(o.onPointerMove,v=>{if(i){var x;(x=l.onItemLeave)===null||x===void 0||x.call(l)}else v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ot(o.onPointerLeave,v=>{if(v.currentTarget===document.activeElement){var x;(x=l.onItemLeave)===null||x===void 0||x.call(l)}}),onKeyDown:ot(o.onKeyDown,v=>{var x;((x=l.searchRef)===null||x===void 0?void 0:x.current)!==""&&v.key===" "||(vde.includes(v.key)&&b(),v.key===" "&&v.preventDefault())})}))))}),i2="SelectItemText",Bde=S.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=hh(i2,n),a=ph(i2,n),l=Lj(i2,n),c=Sde(i2,n),[d,u]=S.useState(null),f=on(e,v=>u(v),l.onItemTextChange,v=>{var x;return(x=a.itemTextRefCallback)===null||x===void 0?void 0:x.call(a,v,l.value,l.disabled)}),h=d==null?void 0:d.textContent,p=S.useMemo(()=>S.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},h),[l.disabled,l.value,h]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=c;return xs(()=>(g(p),()=>b(p)),[g,b,p]),S.createElement(S.Fragment,null,S.createElement(jt.span,Ie({id:l.textId},s,{ref:f})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ua.createPortal(s.children,o.valueNode):null)}),Ude="SelectItemIndicator",Hde=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Lj(Ude,n).isSelected?S.createElement(jt.span,Ie({"aria-hidden":!0},r,{ref:e})):null}),pM="SelectScrollUpButton",Vde=S.forwardRef((t,e)=>{const n=ph(pM,t.__scopeSelect),r=M4(pM,t.__scopeSelect),[i,s]=S.useState(!1),o=on(e,r.onScrollButtonChange);return xs(()=>{if(n.viewport&&n.isPositioned){let l=function(){const c=a.scrollTop>0;s(c)};const a=n.viewport;return l(),a.addEventListener("scroll",l),()=>a.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?S.createElement(Dj,Ie({},t,{ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}})):null}),gM="SelectScrollDownButton",Wde=S.forwardRef((t,e)=>{const n=ph(gM,t.__scopeSelect),r=M4(gM,t.__scopeSelect),[i,s]=S.useState(!1),o=on(e,r.onScrollButtonChange);return xs(()=>{if(n.viewport&&n.isPositioned){let l=function(){const c=a.scrollHeight-a.clientHeight,d=Math.ceil(a.scrollTop)<c;s(d)};const a=n.viewport;return l(),a.addEventListener("scroll",l),()=>a.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?S.createElement(Dj,Ie({},t,{ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}})):null}),Dj=S.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=ph("SelectScrollButton",n),o=S.useRef(null),a=Xx(n),l=S.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return S.useEffect(()=>()=>l(),[l]),xs(()=>{var c;const d=a().find(u=>u.ref.current===document.activeElement);d==null||(c=d.ref.current)===null||c===void 0||c.scrollIntoView({block:"nearest"})},[a]),S.createElement(jt.div,Ie({"aria-hidden":!0},i,{ref:e,style:{flexShrink:0,...i.style},onPointerDown:ot(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ot(i.onPointerMove,()=>{var c;(c=s.onItemLeave)===null||c===void 0||c.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ot(i.onPointerLeave,()=>{l()})}))}),qde=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return S.createElement(jt.div,Ie({"aria-hidden":!0},r,{ref:e}))});function Ij(t){return t===""||t===void 0}const $j=S.forwardRef((t,e)=>{const{value:n,...r}=t,i=S.useRef(null),s=on(e,i),o=qx(n);return S.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&d){const u=new Event("change",{bubbles:!0});d.call(a,n),a.dispatchEvent(u)}},[o,n]),S.createElement(Fue,{asChild:!0},S.createElement("select",Ie({},r,{ref:s,defaultValue:n})))});$j.displayName="BubbleSelect";function jj(t){const e=Xr(t),n=S.useRef(""),r=S.useRef(0),i=S.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=S.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function Fj(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Gde(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function Gde(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const Kde=kde,zj=_de,Jde=Ede,Yde=Pde,Zde=Tde,Bj=Nde,Xde=Lde,Uj=jde,Hj=zde,Qde=Bde,efe=Hde,Vj=Vde,Wj=Wde,qj=qde,Lc=Kde,Dc=Jde,Tl=S.forwardRef(({className:t,children:e,...n},r)=>y.jsxs(zj,{ref:r,className:qe("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,y.jsx(Yde,{asChild:!0,children:y.jsx(Tce,{className:"h-4 w-4 opacity-50"})})]}));Tl.displayName=zj.displayName;const Gj=S.forwardRef(({className:t,...e},n)=>y.jsx(Vj,{ref:n,className:qe("flex cursor-default items-center justify-center py-1",t),...e,children:y.jsx(Dce,{})}));Gj.displayName=Vj.displayName;const Kj=S.forwardRef(({className:t,...e},n)=>y.jsx(Wj,{ref:n,className:qe("flex cursor-default items-center justify-center py-1",t),...e,children:y.jsx(Oce,{})}));Kj.displayName=Wj.displayName;const Nl=S.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>y.jsx(Zde,{children:y.jsxs(Bj,{ref:i,className:qe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[y.jsx(Gj,{}),y.jsx(Xde,{className:qe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),y.jsx(Kj,{})]})}));Nl.displayName=Bj.displayName;const tfe=S.forwardRef(({className:t,...e},n)=>y.jsx(Uj,{ref:n,className:qe("px-2 py-1.5 text-sm font-semibold",t),...e}));tfe.displayName=Uj.displayName;const cr=S.forwardRef(({className:t,children:e,...n},r)=>y.jsxs(Hj,{ref:r,className:qe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[y.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(efe,{children:y.jsx(Ux,{className:"h-4 w-4"})})}),y.jsx(Qde,{children:e})]}));cr.displayName=Hj.displayName;const nfe=S.forwardRef(({className:t,...e},n)=>y.jsx(qj,{ref:n,className:qe("-mx-1 my-1 h-px bg-muted",t),...e}));nfe.displayName=qj.displayName;function e_(t){return Array.from(new Set(t).values())}function Ot(t,e=!1,n=void 0){const r=e_(e?t.map(i=>JSON.stringify(i)):t);return r.length!==1?n:e?JSON.parse(r[0]):r[0]}function rfe(t){return t.split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join(" ")}const Jj="Checkbox",[ife,G_e]=Zs(Jj),[sfe,ofe]=ife(Jj),afe=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,...d}=t,[u,f]=S.useState(null),h=on(e,w=>f(w)),p=S.useRef(!1),g=u?!!u.closest("form"):!0,[b=!1,v]=ea({prop:i,defaultProp:s,onChange:c}),x=S.useRef(b);return S.useEffect(()=>{const w=u==null?void 0:u.form;if(w){const C=()=>v(x.current);return w.addEventListener("reset",C),()=>w.removeEventListener("reset",C)}},[u,v]),S.createElement(sfe,{scope:n,state:b,disabled:a},S.createElement(jt.button,Ie({type:"button",role:"checkbox","aria-checked":bf(b)?"mixed":b,"aria-required":o,"data-state":Yj(b),"data-disabled":a?"":void 0,disabled:a,value:l},d,{ref:h,onKeyDown:ot(t.onKeyDown,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:ot(t.onClick,w=>{v(C=>bf(C)?!0:!C),g&&(p.current=w.isPropagationStopped(),p.current||w.stopPropagation())})})),g&&S.createElement(ufe,{control:u,bubbles:!p.current,name:r,value:l,checked:b,required:o,disabled:a,style:{transform:"translateX(-100%)"}}))}),lfe="CheckboxIndicator",cfe=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,s=ofe(lfe,n);return S.createElement(Po,{present:r||bf(s.state)||s.state===!0},S.createElement(jt.span,Ie({"data-state":Yj(s.state),"data-disabled":s.disabled?"":void 0},i,{ref:e,style:{pointerEvents:"none",...t.style}})))}),ufe=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,s=S.useRef(null),o=qx(n),a=Wx(e);return S.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&u){const f=new Event("click",{bubbles:r});l.indeterminate=bf(n),u.call(l,bf(n)?!1:n),l.dispatchEvent(f)}},[o,n,r]),S.createElement("input",Ie({type:"checkbox","aria-hidden":!0,defaultChecked:bf(n)?!1:n},i,{tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function bf(t){return t==="indeterminate"}function Yj(t){return bf(t)?"indeterminate":t?"checked":"unchecked"}const Zj=afe,dfe=cfe,co=S.forwardRef(({className:t,...e},n)=>y.jsx(Zj,{ref:n,className:qe("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:y.jsx(dfe,{className:qe("flex items-center justify-center text-current"),children:y.jsx(Ux,{className:"h-4 w-4"})})}));co.displayName=Zj.displayName;const ffe=({shapes:t,onChange:e})=>{const n=Ot(t.map(l=>l.width)),r=Ot(t.map(l=>l.height)),i=Ot(t.map(l=>l.corners)),s=Ot(t.map(l=>l.padding)),o=Ot(t.map(l=>l.borders)),a=Ot(t.map(l=>l.borderPosition));return y.jsxs(Gr,{title:"Box",borderTop:!0,children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mn,{content:"Width",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mt,{htmlFor:"shape-width-field",className:"flex-none px-1",children:"W"}),y.jsx(ir,{id:"shape-width-field",className:"flex-grow h-8",value:n,onChange:l=>e({width:l})})]})}),y.jsx(Mn,{content:"Height",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mt,{htmlFor:"shape-height-field",className:"flex-none px-1",children:"H"}),y.jsx(ir,{id:"shape-height-field",className:"flex-grow h-8",value:r,onChange:l=>e({height:l})})]})})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mt,{className:"font-normal flex-none",children:"Padding"}),y.jsx(Mn,{content:"Top Padding",children:y.jsx(ir,{className:"flex-grow h-8",value:s?s[0]:void 0,onChange:l=>{const c=s??[0,0,0,0];e({padding:[l,c[1],c[2],c[3]]})}})}),y.jsx(Mn,{content:"Right Padding",children:y.jsx(ir,{className:"flex-grow h-8",value:s?s[1]:void 0,onChange:l=>{const c=s??[0,0,0,0];e({padding:[c[0],l,c[2],c[3]]})}})}),y.jsx(Mn,{content:"Bottom Padding",children:y.jsx(ir,{className:"flex-grow h-8",value:s?s[2]:void 0,onChange:l=>{const c=s??[0,0,0,0];e({padding:[c[0],c[1],l,c[3]]})}})}),y.jsx(Mn,{content:"Left Padding",children:y.jsx(ir,{className:"flex-grow h-8",value:s?s[3]:void 0,onChange:l=>{const c=s??[0,0,0,0];e({padding:[c[0],c[1],c[2],l]})}})})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mt,{className:"font-normal",children:"Corners"}),y.jsx(Mn,{content:"Left Top Corner",children:y.jsx(ir,{className:"flex-grow h-8",value:i?i[0]:void 0,onChange:l=>{const c=i??[0,0,0,0];e({corners:[l,c[1],c[2],c[3]]})}})}),y.jsx(Mn,{content:"Right Top Corner",children:y.jsx(ir,{className:"flex-grow h-8",value:i?i[1]:void 0,onChange:l=>{const c=i??[0,0,0,0];e({corners:[c[0],l,c[2],c[3]]})}})}),y.jsx(Mn,{content:"Right Bottom Corner",children:y.jsx(ir,{className:"flex-grow h-8",value:i?i[2]:void 0,onChange:l=>{const c=i??[0,0,0,0];e({corners:[c[0],c[1],l,c[3]]})}})}),y.jsx(Mn,{content:"Left Bottom Corner",children:y.jsx(ir,{className:"flex-grow h-8",value:i?i[3]:void 0,onChange:l=>{const c=i??[0,0,0,0];e({corners:[c[0],c[1],c[2],l]})}})})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mt,{className:"font-normal",children:"Borders"}),y.jsx(Mn,{content:"Top Border",children:y.jsx("div",{className:"flex justify-center items-center w-8",children:y.jsx(co,{checked:o?o[0]:void 0,onCheckedChange:l=>{e({borders:[l===!0,o[1]??!1,o[2]??!1,o[3]??!1]})}})})}),y.jsx(Mn,{content:"Right Border",children:y.jsx("div",{className:"flex justify-center items-center w-8",children:y.jsx(co,{checked:o?o[1]:void 0,onCheckedChange:l=>{e({borders:[o[0]??!1,l===!0,o[2]??!1,o[3]??!1]})}})})}),y.jsx(Mn,{content:"Bottom Border",children:y.jsx("div",{className:"flex justify-center items-center w-8",children:y.jsx(co,{checked:o?o[2]:void 0,onCheckedChange:l=>{e({borders:[o[0]??!1,o[1]??!1,l===!0,o[3]??!1]})}})})}),y.jsx(Mn,{content:"Left Border",children:y.jsx("div",{className:"flex justify-center items-center w-8",children:y.jsx(co,{checked:o?o[3]:void 0,onCheckedChange:l=>{e({borders:[o[0]??!1,o[1]??!1,o[2]??!1,l===!0]})}})})})]}),y.jsxs("div",{className:"grid grid-cols-2 items-center gap-2 pr-3 w-full",children:[y.jsx(Mt,{className:"font-normal",children:"Position"}),y.jsx("div",{className:"flex items-center w-full",children:y.jsxs(Lc,{value:a,onValueChange:l=>{e({borderPosition:l})},children:[y.jsx(Tl,{className:"h-8 w-full",title:"Font Weight",children:y.jsx(Dc,{})}),y.jsx(Nl,{children:Object.values(yf).map(l=>y.jsx(cr,{value:l,children:l},l))})]})})]})]})},Qx="ToggleGroup",[Xj,K_e]=Zs(Qx,[Zg]),Qj=Zg(),hfe=Le.forwardRef((t,e)=>{const{type:n,...r}=t;if(n==="single"){const i=r;return Le.createElement(pfe,Ie({},i,{ref:e}))}if(n==="multiple"){const i=r;return Le.createElement(gfe,Ie({},i,{ref:e}))}throw new Error(`Missing prop \`type\` expected on \`${Qx}\``)}),[eF,tF]=Xj(Qx),pfe=Le.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=t,[o,a]=ea({prop:n,defaultProp:r,onChange:i});return Le.createElement(eF,{scope:t.__scopeToggleGroup,type:"single",value:o?[o]:[],onItemActivate:a,onItemDeactivate:Le.useCallback(()=>a(""),[a])},Le.createElement(nF,Ie({},s,{ref:e})))}),gfe=Le.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=t,[o=[],a]=ea({prop:n,defaultProp:r,onChange:i}),l=Le.useCallback(d=>a((u=[])=>[...u,d]),[a]),c=Le.useCallback(d=>a((u=[])=>u.filter(f=>f!==d)),[a]);return Le.createElement(eF,{scope:t.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:l,onItemDeactivate:c},Le.createElement(nF,Ie({},s,{ref:e})))}),[mfe,yfe]=Xj(Qx),nF=Le.forwardRef((t,e)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:i=!0,orientation:s,dir:o,loop:a=!0,...l}=t,c=Qj(n),d=dh(o),u={role:"group",dir:d,...l};return Le.createElement(mfe,{scope:n,rovingFocus:i,disabled:r},i?Le.createElement(d4,Ie({asChild:!0},c,{orientation:s,dir:d,loop:a}),Le.createElement(jt.div,Ie({},u,{ref:e}))):Le.createElement(jt.div,Ie({},u,{ref:e})))}),t_="ToggleGroupItem",vfe=Le.forwardRef((t,e)=>{const n=tF(t_,t.__scopeToggleGroup),r=yfe(t_,t.__scopeToggleGroup),i=Qj(t.__scopeToggleGroup),s=n.value.includes(t.value),o=r.disabled||t.disabled,a={...t,pressed:s,disabled:o},l=Le.useRef(null);return r.rovingFocus?Le.createElement(f4,Ie({asChild:!0},i,{focusable:!o,active:s,ref:l}),Le.createElement(mM,Ie({},a,{ref:e}))):Le.createElement(mM,Ie({},a,{ref:e}))}),mM=Le.forwardRef((t,e)=>{const{__scopeToggleGroup:n,value:r,...i}=t,s=tF(t_,n),o={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},a=s.type==="single"?o:void 0;return Le.createElement(s$,Ie({},a,i,{ref:e,onPressedChange:l=>{l?s.onItemActivate(r):s.onItemDeactivate(r)}}))}),rF=hfe,iF=vfe,sF=S.createContext({size:"default",variant:"default"}),Ag=S.forwardRef(({className:t,variant:e,size:n,children:r,...i},s)=>y.jsx(rF,{ref:s,className:qe("flex items-center justify-center gap-1",t),...i,children:y.jsx(sF.Provider,{value:{variant:e,size:n},children:r})}));Ag.displayName=rF.displayName;const Hi=S.forwardRef(({className:t,children:e,variant:n,size:r,...i},s)=>{const o=S.useContext(sF);return y.jsx(iF,{ref:s,className:qe(p$({variant:o.variant||n,size:o.size||r}),t),...i,children:e})});Hi.displayName=iF.displayName;const oF="Popover",[aF,J_e]=Zs(oF,[em]),O4=em(),[bfe,nm]=aF(oF),wfe=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=O4(e),l=S.useRef(null),[c,d]=S.useState(!1),[u=!1,f]=ea({prop:r,defaultProp:i,onChange:s});return S.createElement(C4,a,S.createElement(bfe,{scope:e,contentId:Wf(),triggerRef:l,open:u,onOpenChange:f,onOpenToggle:S.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:S.useCallback(()=>d(!0),[]),onCustomAnchorRemove:S.useCallback(()=>d(!1),[]),modal:o},n))},xfe="PopoverTrigger",Sfe=S.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=nm(xfe,n),s=O4(n),o=on(e,i.triggerRef),a=S.createElement(jt.button,Ie({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":uF(i.open)},r,{ref:o,onClick:ot(t.onClick,i.onOpenToggle)}));return i.hasCustomAnchor?a:S.createElement(_4,Ie({asChild:!0},s),a)}),lF="PopoverPortal",[kfe,Cfe]=aF(lF,{forceMount:void 0}),_fe=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=nm(lF,e);return S.createElement(kfe,{scope:e,forceMount:n},S.createElement(Po,{present:n||s.open},S.createElement(E4,{asChild:!0,container:i},r)))},q1="PopoverContent",Afe=S.forwardRef((t,e)=>{const n=Cfe(q1,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=nm(q1,t.__scopePopover);return S.createElement(Po,{present:r||s.open},s.modal?S.createElement(Efe,Ie({},i,{ref:e})):S.createElement(Pfe,Ie({},i,{ref:e})))}),Efe=S.forwardRef((t,e)=>{const n=nm(q1,t.__scopePopover),r=S.useRef(null),i=on(e,r),s=S.useRef(!1);return S.useEffect(()=>{const o=r.current;if(o)return Gx(o)},[]),S.createElement(Jx,{as:_o,allowPinchZoom:!0},S.createElement(cF,Ie({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ot(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)===null||a===void 0||a.focus()}),onPointerDownOutside:ot(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ot(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})))}),Pfe=S.forwardRef((t,e)=>{const n=nm(q1,t.__scopePopover),r=S.useRef(!1),i=S.useRef(!1);return S.createElement(cF,Ie({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o;if((o=t.onCloseAutoFocus)===null||o===void 0||o.call(t,s),!s.defaultPrevented){var a;r.current||(a=n.triggerRef.current)===null||a===void 0||a.focus(),s.preventDefault()}r.current=!1,i.current=!1},onInteractOutside:s=>{var o,a;(o=t.onInteractOutside)===null||o===void 0||o.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=s.target;((a=n.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}}))}),cF=S.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...u}=t,f=nm(q1,n),h=O4(n);return m4(),S.createElement(y4,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},S.createElement(g4,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1)},S.createElement(A4,Ie({"data-state":uF(f.open),role:"dialog",id:f.contentId},h,u,{ref:e,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function uF(t){return t?"open":"closed"}const Tfe=wfe,Nfe=Sfe,Mfe=_fe,dF=Afe,gh=Tfe,mh=Nfe,_d=S.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>y.jsx(Mfe,{children:y.jsx(dF,{ref:i,align:e,sideOffset:n,className:qe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));_d.displayName=dF.displayName;function e5(){return(e5=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function fF(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)e.indexOf(n=s[r])>=0||(i[n]=t[n]);return i}function n_(t){var e=S.useRef(t),n=S.useRef(function(r){e.current&&e.current(r)});return e.current=t,n.current}var Eg=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t<e?e:t},K0=function(t){return"touches"in t},r_=function(t){return t&&t.ownerDocument.defaultView||self},yM=function(t,e,n){var r=t.getBoundingClientRect(),i=K0(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,n):e;return{left:Eg((i.pageX-(r.left+r_(t).pageXOffset))/r.width),top:Eg((i.pageY-(r.top+r_(t).pageYOffset))/r.height)}},vM=function(t){!K0(t)&&t.preventDefault()},R4=Le.memo(function(t){var e=t.onMove,n=t.onKey,r=fF(t,["onMove","onKey"]),i=S.useRef(null),s=n_(e),o=n_(n),a=S.useRef(null),l=S.useRef(!1),c=S.useMemo(function(){var h=function(b){vM(b),(K0(b)?b.touches.length>0:b.buttons>0)&&i.current?s(yM(i.current,b,a.current)):g(!1)},p=function(){return g(!1)};function g(b){var v=l.current,x=r_(i.current),w=b?x.addEventListener:x.removeEventListener;w(v?"touchmove":"mousemove",h),w(v?"touchend":"mouseup",p)}return[function(b){var v=b.nativeEvent,x=i.current;if(x&&(vM(v),!function(C,P){return P&&!K0(C)}(v,l.current)&&x)){if(K0(v)){l.current=!0;var w=v.changedTouches||[];w.length&&(a.current=w[0].identifier)}x.focus(),s(yM(x,v,a.current)),g(!0)}},function(b){var v=b.which||b.keyCode;v<37||v>40||(b.preventDefault(),o({left:v===39?.05:v===37?-.05:0,top:v===40?.05:v===38?-.05:0}))},g]},[o,s]),d=c[0],u=c[1],f=c[2];return S.useEffect(function(){return f},[f]),Le.createElement("div",e5({},r,{onTouchStart:d,onMouseDown:d,className:"react-colorful__interactive",ref:i,onKeyDown:u,tabIndex:0,role:"slider"}))}),t5=function(t){return t.filter(Boolean).join(" ")},L4=function(t){var e=t.color,n=t.left,r=t.top,i=r===void 0?.5:r,s=t5(["react-colorful__pointer",t.className]);return Le.createElement("div",{className:s,style:{top:100*i+"%",left:100*n+"%"}},Le.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},yi=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n},Ofe=function(t){return Ife(i_(t))},i_=function(t){return t[0]==="#"&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?yi(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:t.length===8?yi(parseInt(t.substring(6,8),16)/255,2):1}},Rfe=function(t){return Dfe(Lfe(t))},hF=function(t){var e=t.s,n=t.v,r=t.a,i=(200-e)*n/100;return{h:yi(t.h),s:yi(i>0&&i<200?e*n/100/(i<=100?i:200-i)*100:0),l:yi(i/2),a:yi(r,2)}},s_=function(t){var e=hF(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},fk=function(t){var e=hF(t);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},Lfe=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),o=r*(1-n),a=r*(1-(e-s)*n),l=r*(1-(1-e+s)*n),c=s%6;return{r:yi(255*[r,a,o,o,l,r][c]),g:yi(255*[l,r,r,a,o,o][c]),b:yi(255*[o,o,l,r,r,a][c]),a:yi(i,2)}},s2=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},Dfe=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=i<1?s2(yi(255*i)):"";return"#"+s2(e)+s2(n)+s2(r)+s},Ife=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=Math.max(e,n,r),o=s-Math.min(e,n,r),a=o?s===e?(n-r)/o:s===n?2+(r-e)/o:4+(e-n)/o:0;return{h:yi(60*(a<0?a+6:a)),s:yi(s?o/s*100:0),v:yi(s/255*100),a:i}},$fe=Le.memo(function(t){var e=t.hue,n=t.onChange,r=t5(["react-colorful__hue",t.className]);return Le.createElement("div",{className:r},Le.createElement(R4,{onMove:function(i){n({h:360*i.left})},onKey:function(i){n({h:Eg(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":yi(e),"aria-valuemax":"360","aria-valuemin":"0"},Le.createElement(L4,{className:"react-colorful__hue-pointer",left:e/360,color:s_({h:e,s:100,v:100,a:1})})))}),jfe=Le.memo(function(t){var e=t.hsva,n=t.onChange,r={backgroundColor:s_({h:e.h,s:100,v:100,a:1})};return Le.createElement("div",{className:"react-colorful__saturation",style:r},Le.createElement(R4,{onMove:function(i){n({s:100*i.left,v:100-100*i.top})},onKey:function(i){n({s:Eg(e.s+100*i.left,0,100),v:Eg(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+yi(e.s)+"%, Brightness "+yi(e.v)+"%"},Le.createElement(L4,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:s_(e)})))}),pF=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0},Ffe=function(t,e){return t.toLowerCase()===e.toLowerCase()||pF(i_(t),i_(e))};function zfe(t,e,n){var r=n_(n),i=S.useState(function(){return t.toHsva(e)}),s=i[0],o=i[1],a=S.useRef({color:e,hsva:s});S.useEffect(function(){if(!t.equal(e,a.current.color)){var c=t.toHsva(e);a.current={hsva:c,color:e},o(c)}},[e,t]),S.useEffect(function(){var c;pF(s,a.current.hsva)||t.equal(c=t.fromHsva(s),a.current.color)||(a.current={hsva:s,color:c},r(c))},[s,t,r]);var l=S.useCallback(function(c){o(function(d){return Object.assign({},d,c)})},[]);return[s,l]}var Bfe=typeof window<"u"?S.useLayoutEffect:S.useEffect,Ufe=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},bM=new Map,Hfe=function(t){Bfe(function(){var e=t.current?t.current.ownerDocument:document;if(e!==void 0&&!bM.has(e)){var n=e.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,bM.set(e,n);var r=Ufe();r&&n.setAttribute("nonce",r),e.head.appendChild(n)}},[])},Vfe=function(t){var e=t.className,n=t.hsva,r=t.onChange,i={backgroundImage:"linear-gradient(90deg, "+fk(Object.assign({},n,{a:0}))+", "+fk(Object.assign({},n,{a:1}))+")"},s=t5(["react-colorful__alpha",e]),o=yi(100*n.a);return Le.createElement("div",{className:s},Le.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),Le.createElement(R4,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:Eg(n.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},Le.createElement(L4,{className:"react-colorful__alpha-pointer",left:n.a,color:fk(n)})))},Wfe=function(t){var e=t.className,n=t.colorModel,r=t.color,i=r===void 0?n.defaultColor:r,s=t.onChange,o=fF(t,["className","colorModel","color","onChange"]),a=S.useRef(null);Hfe(a);var l=zfe(n,i,s),c=l[0],d=l[1],u=t5(["react-colorful",e]);return Le.createElement("div",e5({},o,{ref:a,className:u}),Le.createElement(jfe,{hsva:c,onChange:d}),Le.createElement($fe,{hue:c.h,onChange:d}),Le.createElement(Vfe,{hsva:c,onChange:d,className:"react-colorful__last-control"}))},qfe={defaultColor:"0001",toHsva:Ofe,fromHsva:Rfe,equal:Ffe},Gfe=function(t){return Le.createElement(Wfe,e5({},t,{colorModel:qfe}))};const gF=[["$red5","$orange5","$purple5","$blue5","$cyan5","$green5","$brown5","$yellow5","$lime5","$mint5","$gray4","$background"],["$red9","$orange9","$purple9","$blue9","$cyan9","$green9","$brown9","$yellow9","$lime9","$mint9","$gray8","$transparent"],["$red11","$orange11","$purple11","$blue11","$cyan11","$green11","$brown11","$yellow11","$lime11","$mint11","$gray10","$foreground"]],Kfe=["slate","gray","red","pink","purple","blue","cyan","green","brown","orange","yellow","lime","mint"],Jfe=Array.from(Array(12).keys()).map(t=>t+1),Yfe=Kfe.map(t=>Jfe.map(e=>`$${t}${e}`)),Zfe=({theme:t,value:e,className:n,onClick:r})=>{const i=e.startsWith("$")?t==="dark"?xl.dark[e.substring(1)]:xl.light[e.substring(1)]:e;return y.jsx("div",{className:qe("h-[18px] w-[18px] cursor-pointer rounded-full",n,e==="$background"||e==="$transparent"?"border":""),style:e==="$transparent"?{backgroundImage:`url('data:image/svg+xml;utf8,<svg width="20" height="20" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity=".25" d="M0 0H3V3H0V0ZM6 3H3V6H0V9H3V12H0V15H3V12H6V15H9V12H12V15H15V12H12V9H15V6H12V3H15V0H12V3H9V0H6V3ZM6 6V3H9V6H6ZM6 9H3V6H6V9ZM9 9V6H12V9H9ZM9 9H6V12H9V9Z" fill="rgb(127,127,127)" fill-rule="evenodd" clip-rule="evenodd"></path></svg>')`,backgroundRepeat:"repeat"}:{backgroundColor:i},onClick:()=>{r&&r(e)}})},o_=({theme:t,palette:e,itemClassName:n,className:r,onClick:i})=>y.jsx("div",{children:y.jsx("div",{className:qe("flex flex-col gap-1",r),children:e.map((s,o)=>y.jsx("div",{className:qe("flex flex-row gap-1",r),children:s.map((a,l)=>y.jsx(Zfe,{className:n,theme:t,value:a,onClick:c=>{i&&i(c)}},l))},o))})}),Xfe=({value:t,onChange:e})=>{const{darkMode:n}=Dl(),r=i=>{e&&e(i)};return y.jsxs(p4,{defaultValue:"basic",children:[y.jsxs(Bx,{children:[y.jsx(yc,{value:"basic",children:"Basic"}),y.jsx(yc,{value:"all",children:"All"}),y.jsx(yc,{value:"rgb",children:"RGB"})]}),y.jsx(vc,{value:"basic",children:y.jsx("div",{className:"flex items-center justify-center py-2",children:y.jsx(o_,{theme:n?"dark":"light",palette:gF,onClick:r})})}),y.jsx(vc,{value:"all",children:y.jsx("div",{className:"flex items-center justify-center py-2",children:y.jsx(o_,{theme:n?"dark":"light",palette:Yfe,className:"gap-0",itemClassName:"h-4 w-4 rounded-none hover:border",onClick:r})})}),y.jsx(vc,{value:"rgb",children:y.jsx("div",{className:"flex items-center justify-center py-2",children:y.jsx(Gfe,{color:t,onChange:r})})})]})};function wM(t,e){return e.startsWith("$")?t==="dark"?xl.dark[e.substring(1)]:xl.light[e.substring(1)]:e}const n5=({className:t,value:e,onValueChange:n,...r})=>{const{darkMode:i}=Dl(),[s,o]=S.useState(void 0),a=wM(i?"dark":"light",s??"$background");S.useEffect(()=>{o(e)},[e]);const l=c=>{!c&&s&&n&&n(s)};return y.jsxs("div",{className:qe("flex items-center gap-2",t),...r,children:[y.jsx("div",{children:y.jsxs(gh,{onOpenChange:l,modal:!0,children:[y.jsx(mh,{asChild:!0,children:y.jsx("div",{className:"h-8 w-8 rounded border cursor-pointer",style:s==="$transparent"?{backgroundImage:`url('data:image/svg+xml;utf8,<svg width="30" height="30" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity=".25" d="M0 0H3V3H0V0ZM6 3H3V6H0V9H3V12H0V15H3V12H6V15H9V12H12V15H15V12H12V9H15V6H12V3H15V0H12V3H9V0H6V3ZM6 6V3H9V6H6ZM6 9H3V6H6V9ZM9 9V6H12V9H9ZM9 9H6V12H9V9Z" fill="rgb(127,127,127)" fill-rule="evenodd" clip-rule="evenodd"></path></svg>')`,backgroundRepeat:"repeat"}:{backgroundColor:a}})}),y.jsx(_d,{side:"left",align:"start",sideOffset:8,className:"w-fit text-center",children:y.jsx(Xfe,{value:e??wM(i?"dark":"light","$background"),onChange:c=>o(c)})})]})}),y.jsx("div",{className:"w-full",children:y.jsx(qf,{value:s??"",className:"h-8 text-muted-foreground",readOnly:!0})})]})},a_=["Enter"," "],Qfe=["ArrowDown","PageUp","Home"],mF=["ArrowUp","PageDown","End"],ehe=[...Qfe,...mF],the={ltr:[...a_,"ArrowRight"],rtl:[...a_,"ArrowLeft"]},nhe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},r5="Menu",[G1,rhe,ihe]=zx(r5),[yh,i5]=Zs(r5,[ihe,em,Zg]),D4=em(),yF=Zg(),[she,vh]=yh(r5),[ohe,Ay]=yh(r5),ahe=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=D4(e),[l,c]=S.useState(null),d=S.useRef(!1),u=Xr(s),f=dh(i);return S.useEffect(()=>{const h=()=>{d.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>d.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),S.createElement(C4,a,S.createElement(she,{scope:e,open:n,onOpenChange:u,content:l,onContentChange:c},S.createElement(ohe,{scope:e,onClose:S.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:d,dir:f,modal:o},r)))},vF=S.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=D4(n);return S.createElement(_4,Ie({},i,r,{ref:e}))}),bF="MenuPortal",[lhe,wF]=yh(bF,{forceMount:void 0}),che=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=vh(bF,e);return S.createElement(lhe,{scope:e,forceMount:n},S.createElement(Po,{present:n||s.open},S.createElement(E4,{asChild:!0,container:i},r)))},Ia="MenuContent",[uhe,I4]=yh(Ia),dhe=S.forwardRef((t,e)=>{const n=wF(Ia,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=vh(Ia,t.__scopeMenu),o=Ay(Ia,t.__scopeMenu);return S.createElement(G1.Provider,{scope:t.__scopeMenu},S.createElement(Po,{present:r||s.open},S.createElement(G1.Slot,{scope:t.__scopeMenu},o.modal?S.createElement(fhe,Ie({},i,{ref:e})):S.createElement(hhe,Ie({},i,{ref:e})))))}),fhe=S.forwardRef((t,e)=>{const n=vh(Ia,t.__scopeMenu),r=S.useRef(null),i=on(e,r);return S.useEffect(()=>{const s=r.current;if(s)return Gx(s)},[]),S.createElement($4,Ie({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ot(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),hhe=S.forwardRef((t,e)=>{const n=vh(Ia,t.__scopeMenu);return S.createElement($4,Ie({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),$4=S.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:f,onDismiss:h,disableOutsideScroll:p,...g}=t,b=vh(Ia,n),v=Ay(Ia,n),x=D4(n),w=yF(n),C=rhe(n),[P,O]=S.useState(null),T=S.useRef(null),M=on(e,T,b.onContentChange),D=S.useRef(0),I=S.useRef(""),R=S.useRef(0),$=S.useRef(null),H=S.useRef("right"),z=S.useRef(0),ee=p?Jx:S.Fragment,ce=p?{as:_o,allowPinchZoom:!0}:void 0,le=Z=>{var de,Ce;const F=I.current+Z,X=C().filter(pe=>!pe.disabled),re=document.activeElement,ue=(de=X.find(pe=>pe.ref.current===re))===null||de===void 0?void 0:de.textValue,he=X.map(pe=>pe.textValue),fe=The(he,F,ue),be=(Ce=X.find(pe=>pe.textValue===fe))===null||Ce===void 0?void 0:Ce.ref.current;(function pe(me){I.current=me,window.clearTimeout(D.current),me!==""&&(D.current=window.setTimeout(()=>pe(""),1e3))})(F),be&&setTimeout(()=>be.focus())};S.useEffect(()=>()=>window.clearTimeout(D.current),[]),m4();const te=S.useCallback(Z=>{var de,Ce;return H.current===((de=$.current)===null||de===void 0?void 0:de.side)&&Mhe(Z,(Ce=$.current)===null||Ce===void 0?void 0:Ce.area)},[]);return S.createElement(uhe,{scope:n,searchRef:I,onItemEnter:S.useCallback(Z=>{te(Z)&&Z.preventDefault()},[te]),onItemLeave:S.useCallback(Z=>{var de;te(Z)||((de=T.current)===null||de===void 0||de.focus(),O(null))},[te]),onTriggerLeave:S.useCallback(Z=>{te(Z)&&Z.preventDefault()},[te]),pointerGraceTimerRef:R,onPointerGraceIntentChange:S.useCallback(Z=>{$.current=Z},[])},S.createElement(ee,ce,S.createElement(y4,{asChild:!0,trapped:i,onMountAutoFocus:ot(s,Z=>{var de;Z.preventDefault(),(de=T.current)===null||de===void 0||de.focus()}),onUnmountAutoFocus:o},S.createElement(g4,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:f,onDismiss:h},S.createElement(d4,Ie({asChild:!0},w,{dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:P,onCurrentTabStopIdChange:O,onEntryFocus:ot(l,Z=>{v.isUsingKeyboardRef.current||Z.preventDefault()})}),S.createElement(A4,Ie({role:"menu","aria-orientation":"vertical","data-state":_F(b.open),"data-radix-menu-content":"",dir:v.dir},x,g,{ref:M,style:{outline:"none",...g.style},onKeyDown:ot(g.onKeyDown,Z=>{const Ce=Z.target.closest("[data-radix-menu-content]")===Z.currentTarget,F=Z.ctrlKey||Z.altKey||Z.metaKey,X=Z.key.length===1;Ce&&(Z.key==="Tab"&&Z.preventDefault(),!F&&X&&le(Z.key));const re=T.current;if(Z.target!==re||!ehe.includes(Z.key))return;Z.preventDefault();const he=C().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);mF.includes(Z.key)&&he.reverse(),Ehe(he)}),onBlur:ot(t.onBlur,Z=>{Z.currentTarget.contains(Z.target)||(window.clearTimeout(D.current),I.current="")}),onPointerMove:ot(t.onPointerMove,K1(Z=>{const de=Z.target,Ce=z.current!==Z.clientX;if(Z.currentTarget.contains(de)&&Ce){const F=Z.clientX>z.current?"right":"left";H.current=F,z.current=Z.clientX}}))})))))))}),phe=S.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return S.createElement(jt.div,Ie({},r,{ref:e}))}),l_="MenuItem",xM="menu.itemSelect",j4=S.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=S.useRef(null),o=Ay(l_,t.__scopeMenu),a=I4(l_,t.__scopeMenu),l=on(e,s),c=S.useRef(!1),d=()=>{const u=s.current;if(!n&&u){const f=new CustomEvent(xM,{bubbles:!0,cancelable:!0});u.addEventListener(xM,h=>r==null?void 0:r(h),{once:!0}),i$(u,f),f.defaultPrevented?c.current=!1:o.onClose()}};return S.createElement(xF,Ie({},i,{ref:l,disabled:n,onClick:ot(t.onClick,d),onPointerDown:u=>{var f;(f=t.onPointerDown)===null||f===void 0||f.call(t,u),c.current=!0},onPointerUp:ot(t.onPointerUp,u=>{var f;c.current||(f=u.currentTarget)===null||f===void 0||f.click()}),onKeyDown:ot(t.onKeyDown,u=>{const f=a.searchRef.current!=="";n||f&&u.key===" "||a_.includes(u.key)&&(u.currentTarget.click(),u.preventDefault())})}))}),xF=S.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=I4(l_,n),a=yF(n),l=S.useRef(null),c=on(e,l),[d,u]=S.useState(!1),[f,h]=S.useState("");return S.useEffect(()=>{const p=l.current;if(p){var g;h(((g=p.textContent)!==null&&g!==void 0?g:"").trim())}},[s.children]),S.createElement(G1.ItemSlot,{scope:n,disabled:r,textValue:i??f},S.createElement(f4,Ie({asChild:!0},a,{focusable:!r}),S.createElement(jt.div,Ie({role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0},s,{ref:c,onPointerMove:ot(t.onPointerMove,K1(p=>{r?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus())})),onPointerLeave:ot(t.onPointerLeave,K1(p=>o.onItemLeave(p))),onFocus:ot(t.onFocus,()=>u(!0)),onBlur:ot(t.onBlur,()=>u(!1))}))))}),ghe=S.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return S.createElement(kF,{scope:t.__scopeMenu,checked:n},S.createElement(j4,Ie({role:"menuitemcheckbox","aria-checked":kw(n)?"mixed":n},i,{ref:e,"data-state":F4(n),onSelect:ot(i.onSelect,()=>r==null?void 0:r(kw(n)?!0:!n),{checkForDefaultPrevented:!1})})))}),mhe="MenuRadioGroup",[Y_e,yhe]=yh(mhe,{value:void 0,onValueChange:()=>{}}),vhe="MenuRadioItem",bhe=S.forwardRef((t,e)=>{const{value:n,...r}=t,i=yhe(vhe,t.__scopeMenu),s=n===i.value;return S.createElement(kF,{scope:t.__scopeMenu,checked:s},S.createElement(j4,Ie({role:"menuitemradio","aria-checked":s},r,{ref:e,"data-state":F4(s),onSelect:ot(r.onSelect,()=>{var o;return(o=i.onValueChange)===null||o===void 0?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})))}),SF="MenuItemIndicator",[kF,whe]=yh(SF,{checked:!1}),xhe=S.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=whe(SF,n);return S.createElement(Po,{present:r||kw(s.checked)||s.checked===!0},S.createElement(jt.span,Ie({},i,{ref:e,"data-state":F4(s.checked)})))}),She=S.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return S.createElement(jt.div,Ie({role:"separator","aria-orientation":"horizontal"},r,{ref:e}))}),khe="MenuSub",[Z_e,CF]=yh(khe),o2="MenuSubTrigger",Che=S.forwardRef((t,e)=>{const n=vh(o2,t.__scopeMenu),r=Ay(o2,t.__scopeMenu),i=CF(o2,t.__scopeMenu),s=I4(o2,t.__scopeMenu),o=S.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},d=S.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return S.useEffect(()=>d,[d]),S.useEffect(()=>{const u=a.current;return()=>{window.clearTimeout(u),l(null)}},[a,l]),S.createElement(vF,Ie({asChild:!0},c),S.createElement(xF,Ie({id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":_F(n.open)},t,{ref:Ix(e,i.onTriggerChange),onClick:u=>{var f;(f=t.onClick)===null||f===void 0||f.call(t,u),!(t.disabled||u.defaultPrevented)&&(u.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ot(t.onPointerMove,K1(u=>{s.onItemEnter(u),!u.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:ot(t.onPointerLeave,K1(u=>{var f;d();const h=(f=n.content)===null||f===void 0?void 0:f.getBoundingClientRect();if(h){var p;const g=(p=n.content)===null||p===void 0?void 0:p.dataset.side,b=g==="right",v=b?-5:5,x=h[b?"left":"right"],w=h[b?"right":"left"];s.onPointerGraceIntentChange({area:[{x:u.clientX+v,y:u.clientY},{x,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x,y:h.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(u),u.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ot(t.onKeyDown,u=>{const f=s.searchRef.current!=="";if(!(t.disabled||f&&u.key===" ")&&the[r.dir].includes(u.key)){var h;n.onOpenChange(!0),(h=n.content)===null||h===void 0||h.focus(),u.preventDefault()}})})))}),_he="MenuSubContent",Ahe=S.forwardRef((t,e)=>{const n=wF(Ia,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=vh(Ia,t.__scopeMenu),o=Ay(Ia,t.__scopeMenu),a=CF(_he,t.__scopeMenu),l=S.useRef(null),c=on(e,l);return S.createElement(G1.Provider,{scope:t.__scopeMenu},S.createElement(Po,{present:r||s.open},S.createElement(G1.Slot,{scope:t.__scopeMenu},S.createElement($4,Ie({id:a.contentId,"aria-labelledby":a.triggerId},i,{ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var u;o.isUsingKeyboardRef.current&&((u=l.current)===null||u===void 0||u.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ot(t.onFocusOutside,d=>{d.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ot(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:ot(t.onKeyDown,d=>{const u=d.currentTarget.contains(d.target),f=nhe[o.dir].includes(d.key);if(u&&f){var h;s.onOpenChange(!1),(h=a.trigger)===null||h===void 0||h.focus(),d.preventDefault()}})})))))});function _F(t){return t?"open":"closed"}function kw(t){return t==="indeterminate"}function F4(t){return kw(t)?"indeterminate":t?"checked":"unchecked"}function Ehe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Phe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function The(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Phe(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function Nhe(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,d=e[o].y;l>r!=d>r&&n<(c-a)*(r-l)/(d-l)+a&&(i=!i)}return i}function Mhe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Nhe(n,e)}function K1(t){return e=>e.pointerType==="mouse"?t(e):void 0}const AF=ahe,EF=vF,PF=che,TF=dhe,NF=phe,MF=j4,OF=ghe,RF=bhe,LF=xhe,DF=She,IF=Che,$F=Ahe,jF="DropdownMenu",[Ohe,X_e]=Zs(jF,[i5]),ia=i5(),[Rhe,FF]=Ohe(jF),Lhe=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=ia(e),c=S.useRef(null),[d=!1,u]=ea({prop:i,defaultProp:s,onChange:o});return S.createElement(Rhe,{scope:e,triggerId:Wf(),triggerRef:c,contentId:Wf(),open:d,onOpenChange:u,onOpenToggle:S.useCallback(()=>u(f=>!f),[u]),modal:a},S.createElement(AF,Ie({},l,{open:d,onOpenChange:u,dir:r,modal:a}),n))},Dhe="DropdownMenuTrigger",Ihe=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=FF(Dhe,n),o=ia(n);return S.createElement(EF,Ie({asChild:!0},o),S.createElement(jt.button,Ie({type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r},i,{ref:Ix(e,s.triggerRef),onPointerDown:ot(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ot(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})))}),$he=t=>{const{__scopeDropdownMenu:e,...n}=t,r=ia(e);return S.createElement(PF,Ie({},r,n))},jhe="DropdownMenuContent",Fhe=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=FF(jhe,n),s=ia(n),o=S.useRef(!1);return S.createElement(TF,Ie({id:i.contentId,"aria-labelledby":i.triggerId},s,r,{ref:e,onCloseAutoFocus:ot(t.onCloseAutoFocus,a=>{var l;o.current||(l=i.triggerRef.current)===null||l===void 0||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ot(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;(!i.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),zhe=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ia(n);return S.createElement(NF,Ie({},i,r,{ref:e}))}),Bhe=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ia(n);return S.createElement(MF,Ie({},i,r,{ref:e}))}),Uhe=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ia(n);return S.createElement(OF,Ie({},i,r,{ref:e}))}),Hhe=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ia(n);return S.createElement(RF,Ie({},i,r,{ref:e}))}),Vhe=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ia(n);return S.createElement(LF,Ie({},i,r,{ref:e}))}),Whe=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ia(n);return S.createElement(DF,Ie({},i,r,{ref:e}))}),qhe=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ia(n);return S.createElement(IF,Ie({},i,r,{ref:e}))}),Ghe=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ia(n);return S.createElement($F,Ie({},i,r,{ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),Khe=Lhe,Jhe=Ihe,Yhe=$he,zF=Fhe,BF=zhe,UF=Bhe,HF=Uhe,VF=Hhe,WF=Vhe,qF=Whe,GF=qhe,KF=Ghe,pd=Khe,gd=Jhe,Zhe=S.forwardRef(({className:t,inset:e,children:n,...r},i)=>y.jsxs(GF,{ref:i,className:qe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,y.jsx(G$,{className:"ml-auto h-4 w-4"})]}));Zhe.displayName=GF.displayName;const Xhe=S.forwardRef(({className:t,...e},n)=>y.jsx(KF,{ref:n,className:qe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Xhe.displayName=KF.displayName;const Ic=S.forwardRef(({className:t,sideOffset:e=4,...n},r)=>y.jsx(Yhe,{children:y.jsx(zF,{ref:r,sideOffset:e,className:qe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Ic.displayName=zF.displayName;const pr=S.forwardRef(({className:t,inset:e,...n},r)=>y.jsx(UF,{ref:r,className:qe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));pr.displayName=UF.displayName;const nb=S.forwardRef(({className:t,children:e,checked:n,...r},i)=>y.jsxs(HF,{ref:i,className:qe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(WF,{children:y.jsx(Ux,{className:"h-4 w-4"})})}),e]}));nb.displayName=HF.displayName;const Qhe=S.forwardRef(({className:t,children:e,...n},r)=>y.jsxs(VF,{ref:r,className:qe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(WF,{children:y.jsx(K$,{className:"h-4 w-4 fill-current"})})}),e]}));Qhe.displayName=VF.displayName;const epe=S.forwardRef(({className:t,inset:e,...n},r)=>y.jsx(BF,{ref:r,className:qe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));epe.displayName=BF.displayName;const Pg=S.forwardRef(({className:t,...e},n)=>y.jsx(qF,{ref:n,className:qe("-mx-1 my-1 h-px bg-muted",t),...e}));Pg.displayName=qF.displayName;const tpe=Cy("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Nt=S.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?_o:"button";return y.jsx(o,{className:qe(tpe({variant:e,size:n,className:t})),ref:s,...i})});Nt.displayName="Button";const J1=[{category:"sans",family:"Inter",style:"normal",weight:400,src:"/fonts/Inter-Regular.ttf"},{category:"sans",family:"Inter",style:"italic",weight:400,src:"/fonts/Inter-Italic.ttf"},{category:"sans",family:"Inter",style:"normal",weight:500,src:"/fonts/Inter-Medium.ttf"},{category:"sans",family:"Inter",style:"italic",weight:500,src:"/fonts/Inter-MediumItalic.ttf"},{category:"sans",family:"Inter",style:"normal",weight:600,src:"/fonts/Inter-SemiBold.ttf"},{category:"sans",family:"Inter",style:"italic",weight:600,src:"/fonts/Inter-SemiBoldItalic.ttf"},{category:"sans",family:"Inter",style:"normal",weight:700,src:"/fonts/Inter-Bold.ttf"},{category:"sans",family:"Inter",style:"italic",weight:700,src:"/fonts/Inter-BoldItalic.ttf"},{category:"sans",family:"Inter",style:"normal",weight:800,src:"/fonts/Inter-ExtraBold.ttf"},{category:"sans",family:"Inter",style:"italic",weight:800,src:"/fonts/Inter-ExtraBoldItalic.ttf"},{category:"serif",family:"Source Serif Pro",style:"normal",weight:400,src:"/fonts/SourceSerifPro-Regular.ttf"},{category:"serif",family:"Source Serif Pro",style:"italic",weight:400,src:"/fonts/SourceSerifPro-Italic.ttf"},{category:"serif",family:"Source Serif Pro",style:"normal",weight:700,src:"/fonts/SourceSerifPro-Bold.ttf"},{category:"serif",family:"Source Serif Pro",style:"italic",weight:700,src:"/fonts/SourceSerifPro-BoldItalic.ttf"},{category:"mono",family:"IBM Plex Mono",style:"normal",weight:400,src:"/fonts/IBMPlexMono-Regular.ttf"},{category:"mono",family:"IBM Plex Mono",style:"italic",weight:400,src:"/fonts/IBMPlexMono-Italic.ttf"},{category:"mono",family:"IBM Plex Mono",style:"normal",weight:700,src:"/fonts/IBMPlexMono-Bold.ttf"},{category:"mono",family:"IBM Plex Mono",style:"italic",weight:700,src:"/fonts/IBMPlexMono-BoldItalic.ttf"},{category:"hand",family:"Gloria Hallelujah",style:"normal",weight:400,src:"/fonts/GloriaHallelujah-Regular.ttf"},{category:"hand",family:"Gloria Hallelujah",style:"normal",weight:400,src:"/fonts/NanumHimnaeraneunmalbodan-Regular.ttf",sizeAdjust:"130%",unicodeRange:"U+AC00-D7A3"},{category:"hand",family:"Loranthus",style:"normal",weight:400,src:"/fonts/Loranthus-Regular.ttf"},{category:"hand",family:"Loranthus",style:"normal",weight:700,src:"/fonts/Loranthus-Bold.ttf"},{category:"hand",family:"Loranthus",style:"italic",weight:400,src:"/fonts/Loranthus-Italic.ttf"},{category:"hand",family:"Loranthus",style:"italic",weight:700,src:"/fonts/Loranthus-BoldItalic.ttf"}],SM=16,npe=[12,14,16,18,20,24,30,36,48,60,72,96,128],rpe=({shapes:t,onChange:e})=>{const n=e_(J1.map(h=>h.family)),r=t.every(h=>h instanceof St),i=Ot(t.map(h=>h.fontColor)),s=Ot(t.map(h=>h.fontFamily)),o=Ot(t.map(h=>h.fontWeight)),a=Ot(t.map(h=>h.fontSize)),l=Ot(t.map(h=>h.vertAlign)),c=Ot(t.map(h=>h.horzAlign)),d=Ot(t.map(h=>h.wordWrap)),u=Ot(t.map(h=>h.lineHeight)),f=Ot(t.map(h=>h.paragraphSpacing));return y.jsxs(Gr,{title:"Text",borderTop:!0,children:[y.jsx(n5,{value:i,onValueChange:h=>e({fontColor:h}),title:"Font Color"}),y.jsx("div",{className:"flex items-center",children:y.jsxs(Lc,{value:s,onValueChange:h=>e({fontFamily:h}),children:[y.jsx(Tl,{className:"h-8",title:"Font Family",children:y.jsx(Dc,{})}),y.jsx(Nl,{children:n.map(h=>y.jsx(cr,{value:h,children:h},h))})]})}),y.jsxs("div",{className:"flex items-center gap-2 pr-3 w-full",children:[y.jsx("div",{className:"flex items-center w-full",children:y.jsxs(Lc,{value:o==null?void 0:o.toString(),onValueChange:h=>{const p=parseInt(h);e({fontWeight:p})},children:[y.jsx(Tl,{className:"h-8 w-full",title:"Font Weight",children:y.jsx(Dc,{})}),y.jsxs(Nl,{children:[y.jsx(cr,{value:"100",children:"Thin"}),y.jsx(cr,{value:"200",children:"ExtraLight"}),y.jsx(cr,{value:"300",children:"Light"}),y.jsx(cr,{value:"400",children:"Regular"}),y.jsx(cr,{value:"500",children:"Medium"}),y.jsx(cr,{value:"600",children:"SemiBold"}),y.jsx(cr,{value:"700",children:"Bold"}),y.jsx(cr,{value:"800",children:"ExtraBold"}),y.jsx(cr,{value:"900",children:"Black"})]})]})}),y.jsxs("div",{className:"flex items-center w-full",children:[y.jsx(ir,{value:a,onChange:h=>e({fontSize:h}),className:"w-20 h-8 items-center",title:"Font Size"}),y.jsxs(pd,{children:[y.jsx(gd,{asChild:!0,children:y.jsx("div",{className:"flex h-8 min-w-6 relative -left-7 items-center",children:y.jsx(Nt,{variant:"ghost",className:"text-muted-foreground h-6 min-w-6 px-0",children:y.jsx(loe,{size:12})})})}),y.jsx(Ic,{children:npe.map(h=>y.jsx(pr,{onSelect:()=>e({fontSize:h}),children:h},h))})]})]})]}),r&&y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs(Ag,{type:"single",size:"sm",value:c,onValueChange:h=>{e&&h&&e({horzAlign:h})},children:[y.jsx(Hi,{value:uo.LEFT,className:"h-8 w-8 p-0",title:"Align Left",children:y.jsx(W9,{size:16})}),y.jsx(Hi,{value:uo.CENTER,className:"h-8 w-8 p-0",title:"Align Center",children:y.jsx(V9,{size:16})}),y.jsx(Hi,{value:uo.RIGHT,className:"h-8 w-8 p-0",title:"Align Right",children:y.jsx(q9,{size:16})})]}),y.jsxs(Ag,{type:"single",size:"sm",value:l,onValueChange:h=>{e&&h&&e({vertAlign:h})},children:[y.jsx(Hi,{value:jo.TOP,className:"h-8 w-8 p-0",title:"Align Top",children:y.jsx(Uoe,{size:16})}),y.jsx(Hi,{value:jo.MIDDLE,className:"h-8 w-8 p-0",title:"Align Middle",children:y.jsx(Hoe,{size:16})}),y.jsx(Hi,{value:jo.BOTTOM,className:"h-8 w-8 p-0",title:"Align Bottom",children:y.jsx(Voe,{size:16})})]})]}),r&&y.jsxs("div",{className:"flex w-full items-center gap-2",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mt,{htmlFor:"text-line-height-field",className:"text-sm px-1",children:y.jsx(Ioe,{size:16})}),y.jsx(ir,{id:"text-line-height-field",className:"flex-grow h-8",value:u,onChange:h=>e({lineHeight:h}),title:"Line Height"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mt,{htmlFor:"text-paragraph-spacing-field",className:"text-sm",children:y.jsx($oe,{size:16})}),y.jsx(ir,{id:"text-paragraph-spacing-field",className:"flex-grow h-8",value:f,onChange:h=>e({paragraphSpacing:h}),title:"Paragraph Spacing"})]}),y.jsx(Ca,{variant:"outline",size:"sm",pressed:d,onPressedChange:h=>e({wordWrap:h}),title:"Word Wrap",children:y.jsx(Moe,{size:16})})]})]})},md=({className:t,message:e,...n})=>y.jsx("div",{className:qe("flex h-full w-full items-center justify-center",t),...n,children:y.jsx(Mt,{className:"text-muted-foreground font-normal",children:e})}),$a=Le.forwardRef(({value:t,onChange:e,className:n,type:r,...i},s)=>{const[o,a]=S.useState("");S.useEffect(()=>{a(t??"")},[t]);const l=u=>{a(u.target.value)},c=u=>{u.key==="Enter"&&typeof o=="string"&&e&&e(o)},d=u=>{typeof o=="string"&&t!==o&&e&&e(o)};return y.jsx(qf,{type:r,value:o,className:qe("",n),onChange:l,onKeyDown:c,onBlur:d,ref:s,...i})});$a.displayName="TextField";const ipe=Symbol("Let zodToJsonSchema decide on which parser to use"),spe={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},ope=t=>({...spe,name:t}),ape=t=>{const e=ope(t),n=[...e.basePath,e.definitionPath,e.name];return{...e,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function JF(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function Rn(t,e,n,r,i){t[e]=n,JF(t,e,r,i)}function lpe(){return{}}function cpe(t,e){var r,i,s;const n={type:"array"};return(r=t.type)!=null&&r._def&&((s=(i=t.type)==null?void 0:i._def)==null?void 0:s.typeName)!==et.ZodAny&&(n.items=En(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Rn(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Rn(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Rn(n,"minItems",t.exactLength.value,t.exactLength.message,e),Rn(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function upe(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Rn(n,"minimum",r.value,r.message,e):Rn(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Rn(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Rn(n,"maximum",r.value,r.message,e):Rn(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Rn(n,"maximum",r.value,r.message,e));break;case"multipleOf":Rn(n,"multipleOf",r.value,r.message,e);break}return n}function dpe(){return{type:"boolean"}}function YF(t,e){return En(t.type._def,e)}const fpe=(t,e)=>En(t.innerType._def,e);function ZF(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,s)=>ZF(t,e,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return hpe(t,e)}}const hpe=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":Rn(n,"minimum",r.value,r.message,e);break;case"max":Rn(n,"maximum",r.value,r.message,e);break}return n};function ppe(t,e){return{...En(t.innerType._def,e),default:t.defaultValue()}}function gpe(t,e){return e.effectStrategy==="input"?En(t.schema._def,e):{}}function mpe(t){return{type:"string",enum:Array.from(t.values)}}const ype=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function vpe(t,e){const n=[En(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),En(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return n.forEach(s=>{if(ype(s))i.push(...s.allOf),s.unevaluatedProperties===void 0&&(r=void 0);else{let o=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:a,...l}=s;o=l}else r=void 0;i.push(o)}}),i.length?{allOf:i,...r}:void 0}function bpe(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let hk;const fa={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(hk===void 0&&(hk=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),hk),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function XF(t,e){const n={type:"string"};if(t.checks)for(const r of t.checks)switch(r.kind){case"min":Rn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":Rn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":ha(n,"email",r.message,e);break;case"format:idn-email":ha(n,"idn-email",r.message,e);break;case"pattern:zod":cs(n,fa.email,r.message,e);break}break;case"url":ha(n,"uri",r.message,e);break;case"uuid":ha(n,"uuid",r.message,e);break;case"regex":cs(n,r.regex,r.message,e);break;case"cuid":cs(n,fa.cuid,r.message,e);break;case"cuid2":cs(n,fa.cuid2,r.message,e);break;case"startsWith":cs(n,RegExp(`^${pk(r.value,e)}`),r.message,e);break;case"endsWith":cs(n,RegExp(`${pk(r.value,e)}$`),r.message,e);break;case"datetime":ha(n,"date-time",r.message,e);break;case"date":ha(n,"date",r.message,e);break;case"time":ha(n,"time",r.message,e);break;case"duration":ha(n,"duration",r.message,e);break;case"length":Rn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),Rn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":{cs(n,RegExp(pk(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&ha(n,"ipv4",r.message,e),r.version!=="v4"&&ha(n,"ipv6",r.message,e);break}case"base64url":cs(n,fa.base64url,r.message,e);break;case"jwt":cs(n,fa.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&cs(n,fa.ipv4Cidr,r.message,e),r.version!=="v4"&&cs(n,fa.ipv6Cidr,r.message,e);break}case"emoji":cs(n,fa.emoji(),r.message,e);break;case"ulid":{cs(n,fa.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{ha(n,"binary",r.message,e);break}case"contentEncoding:base64":{Rn(n,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{cs(n,fa.base64,r.message,e);break}}break}case"nanoid":cs(n,fa.nanoid,r.message,e)}return n}function pk(t,e){return e.patternStrategy==="escape"?xpe(t):t}const wpe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function xpe(t){let e="";for(let n=0;n<t.length;n++)wpe.has(t[n])||(e+="\\"),e+=t[n];return e}function ha(t,e,n,r){var i;t.format||(i=t.anyOf)!=null&&i.some(s=>s.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Rn(t,"format",e,n,r)}function cs(t,e,n,r){var i;t.pattern||(i=t.allOf)!=null&&i.some(s=>s.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:kM(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Rn(t,"pattern",kM(e,r),n,r)}function kM(t,e){var l;if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=n.i?t.source.toLowerCase():t.source;let i="",s=!1,o=!1,a=!1;for(let c=0;c<r.length;c++){if(s){i+=r[c],s=!1;continue}if(n.i){if(o){if(r[c].match(/[a-z]/)){a?(i+=r[c],i+=`${r[c-2]}-${r[c]}`.toUpperCase(),a=!1):r[c+1]==="-"&&((l=r[c+2])!=null&&l.match(/[a-z]/))?(i+=r[c],a=!0):i+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){i+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){i+=o?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}i+=r[c],r[c]==="\\"?s=!0:o&&r[c]==="]"?o=!1:!o&&r[c]==="["&&(o=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}function QF(t,e){var r,i,s,o,a,l;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===et.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((c,d)=>({...c,[d]:En(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",d]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:En(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return n;if(((i=t.keyType)==null?void 0:i._def.typeName)===et.ZodString&&((s=t.keyType._def.checks)!=null&&s.length)){const{type:c,...d}=XF(t.keyType._def,e);return{...n,propertyNames:d}}else{if(((o=t.keyType)==null?void 0:o._def.typeName)===et.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};if(((a=t.keyType)==null?void 0:a._def.typeName)===et.ZodBranded&&t.keyType._def.type._def.typeName===et.ZodString&&((l=t.keyType._def.type._def.checks)!=null&&l.length)){const{type:c,...d}=YF(t.keyType._def,e);return{...n,propertyNames:d}}}return n}function Spe(t,e){if(e.mapStrategy==="record")return QF(t,e);const n=En(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=En(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function kpe(t){const e=t.values,r=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),i=Array.from(new Set(r.map(s=>typeof s)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function Cpe(){return{not:{}}}function _pe(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Cw={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Ape(t,e){if(e.target==="openApi3")return CM(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in Cw&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((i,s)=>{const o=Cw[s._def.typeName];return o&&!i.includes(o)?[...i,o]:i},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((i,s)=>{const o=typeof s._def.value;switch(o){case"string":case"number":case"boolean":return[...i,o];case"bigint":return[...i,"integer"];case"object":if(s._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===n.length){const i=r.filter((s,o,a)=>a.indexOf(s)===o);return{type:i.length>1?i:i[0],enum:n.reduce((s,o)=>s.includes(o._def.value)?s:[...s,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,i)=>[...r,...i._def.values.filter(s=>!r.includes(s))],[])};return CM(t,e)}const CM=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,i)=>En(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Epe(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Cw[t.innerType._def.typeName],nullable:!0}:{type:[Cw[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=En(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=En(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function Ppe(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",JF(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Rn(n,"minimum",r.value,r.message,e):Rn(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Rn(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Rn(n,"maximum",r.value,r.message,e):Rn(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Rn(n,"maximum",r.value,r.message,e));break;case"multipleOf":Rn(n,"multipleOf",r.value,r.message,e);break}return n}function Tpe(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":En(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":En(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function Npe(t,e){const n=e.target==="openAi",r={type:"object",...Object.entries(t.shape()).reduce((i,[s,o])=>{if(o===void 0||o._def===void 0)return i;let a=o.isOptional();a&&n&&(o instanceof La&&(o=o._def.innerType),o.isNullable()||(o=o.nullable()),a=!1);const l=En(o._def,{...e,currentPath:[...e.currentPath,"properties",s],propertyPath:[...e.currentPath,"properties",s]});return l===void 0?i:{properties:{...i.properties,[s]:l},required:a?i.required:[...i.required,s]}},{properties:{},required:[]}),additionalProperties:Tpe(t,e)};return r.required.length||delete r.required,r}const Mpe=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return En(t.innerType._def,e);const n=En(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},Ope=(t,e)=>{if(e.pipeStrategy==="input")return En(t.in._def,e);if(e.pipeStrategy==="output")return En(t.out._def,e);const n=En(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=En(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(i=>i!==void 0)}};function Rpe(t,e){return En(t.type._def,e)}function Lpe(t,e){const r={type:"array",uniqueItems:!0,items:En(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Rn(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Rn(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function Dpe(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>En(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:En(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>En(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function Ipe(){return{not:{}}}function $pe(){return{}}const jpe=(t,e)=>En(t.innerType._def,e);function En(t,e,n=!1){var o;const r=e.seen.get(t);if(e.override){const a=(o=e.override)==null?void 0:o.call(e,t,e,r,n);if(a!==ipe)return a}if(r&&!n){const a=Fpe(r,e);if(a!==void 0)return a}const i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);const s=Bpe(t,t.typeName,e);return s&&Upe(t,e,s),i.jsonSchema=s,s}const Fpe=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:zpe(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},zpe=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")},Bpe=(t,e,n)=>{switch(e){case et.ZodString:return XF(t,n);case et.ZodNumber:return Ppe(t,n);case et.ZodObject:return Npe(t,n);case et.ZodBigInt:return upe(t,n);case et.ZodBoolean:return dpe();case et.ZodDate:return ZF(t,n);case et.ZodUndefined:return Ipe();case et.ZodNull:return _pe(n);case et.ZodArray:return cpe(t,n);case et.ZodUnion:case et.ZodDiscriminatedUnion:return Ape(t,n);case et.ZodIntersection:return vpe(t,n);case et.ZodTuple:return Dpe(t,n);case et.ZodRecord:return QF(t,n);case et.ZodLiteral:return bpe(t,n);case et.ZodEnum:return mpe(t);case et.ZodNativeEnum:return kpe(t);case et.ZodNullable:return Epe(t,n);case et.ZodOptional:return Mpe(t,n);case et.ZodMap:return Spe(t,n);case et.ZodSet:return Lpe(t,n);case et.ZodLazy:return En(t.getter()._def,n);case et.ZodPromise:return Rpe(t,n);case et.ZodNaN:case et.ZodNever:return Cpe();case et.ZodEffects:return gpe(t,n);case et.ZodAny:return lpe();case et.ZodUnknown:return $pe();case et.ZodDefault:return ppe(t,n);case et.ZodBranded:return YF(t,n);case et.ZodReadonly:return jpe(t,n);case et.ZodCatch:return fpe(t,n);case et.ZodPipeline:return Ope(t,n);case et.ZodFunction:case et.ZodVoid:case et.ZodSymbol:return;default:return(r=>{})()}},Upe=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),Hpe=(t,e)=>{const n=ape(e),r=void 0,i=e,s=En(t._def,{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1)??{},o=i===void 0?r?{...s,[n.definitionPath]:r}:s:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...r,[i]:s}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o},ez=S.forwardRef(({className:t,...e},n)=>y.jsx("textarea",{className:qe("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));ez.displayName="Textarea";const Kf=Le.forwardRef(({value:t,onChange:e,className:n,...r},i)=>{const[s,o]=S.useState("");S.useEffect(()=>{o(t??"")},[t]);const a=c=>{o(c.target.value)},l=c=>{typeof s=="string"&&t!==s&&e&&e(s)};return y.jsx(ez,{value:s,className:qe("",n),onChange:a,onBlur:l,ref:i,...r})});Kf.displayName="TextareaField";const tz="Switch",[Vpe,Q_e]=Zs(tz),[Wpe,qpe]=Vpe(tz),Gpe=S.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,...d}=t,[u,f]=S.useState(null),h=on(e,x=>f(x)),p=S.useRef(!1),g=u?!!u.closest("form"):!0,[b=!1,v]=ea({prop:i,defaultProp:s,onChange:c});return S.createElement(Wpe,{scope:n,checked:b,disabled:a},S.createElement(jt.button,Ie({type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":nz(b),"data-disabled":a?"":void 0,disabled:a,value:l},d,{ref:h,onClick:ot(t.onClick,x=>{v(w=>!w),g&&(p.current=x.isPropagationStopped(),p.current||x.stopPropagation())})})),g&&S.createElement(Ype,{control:u,bubbles:!p.current,name:r,value:l,checked:b,required:o,disabled:a,style:{transform:"translateX(-100%)"}}))}),Kpe="SwitchThumb",Jpe=S.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=qpe(Kpe,n);return S.createElement(jt.span,Ie({"data-state":nz(i.checked),"data-disabled":i.disabled?"":void 0},r,{ref:e}))}),Ype=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,s=S.useRef(null),o=qx(n),a=Wx(e);return S.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&u){const f=new Event("click",{bubbles:r});u.call(l,n),l.dispatchEvent(f)}},[o,n,r]),S.createElement("input",Ie({type:"checkbox","aria-hidden":!0,defaultChecked:n},i,{tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function nz(t){return t?"checked":"unchecked"}const rz=Gpe,Zpe=Jpe,Tg=S.forwardRef(({className:t,...e},n)=>y.jsx(rz,{className:qe("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:y.jsx(Zpe,{className:qe("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Tg.displayName=rz.displayName;function Xpe(t){var i;const n=((i=Hpe(t,"schema").definitions)==null?void 0:i.schema).properties;return Object.entries(n).map(s=>({name:s[0],type:Array.isArray(s[1].enum)?"enum":s[1].type,options:s[1].enum,value:s[1].default,default:s[1].default}))}const Qpe=({nameValues:t,onChange:e})=>{const n=(r,i)=>{e&&e(t.map(s=>s.name===r?{...s,value:i}:s))};return y.jsxs("div",{className:"flex flex-col gap-1.5",children:[t.map((r,i)=>{var s;return y.jsx("div",{className:"flex items-center",children:y.jsxs("div",{className:"grid grid-cols-2 w-full items-center",children:[y.jsx(Mt,{htmlFor:`${r.name}-value-field`,className:"font-normal",children:r.name}),r.type==="enum"&&y.jsxs(Lc,{value:r.value,onValueChange:o=>n(r.name,o),children:[y.jsx(Tl,{id:`${r.name}-value-field`,className:"h-8",children:y.jsx(Dc,{})}),y.jsx(Nl,{children:(s=r.options)==null?void 0:s.map((o,a)=>y.jsx(cr,{value:o,children:o},a))})]}),r.type==="string"&&y.jsx($a,{id:`${r.name}-value-field`,className:"h-8",value:r.value,onChange:o=>n(r.name,o)}),r.type==="number"&&y.jsx(ir,{id:`${r.name}-value-field`,className:"h-8",value:r.value,onChange:o=>n(r.name,o)}),r.type==="boolean"&&y.jsx("div",{className:"flex h-8 items-center justify-end",children:y.jsx(Tg,{id:`${r.name}-value-field`,checked:r.value,onCheckedChange:o=>n(r.name,o)})}),r.type==="text"&&y.jsx(Kf,{id:`${r.name}-value-field`,value:r.value,onChange:o=>n(r.name,o)})]})},i)}),t.length===0&&y.jsx(md,{message:"No entries to edit"})]})};function ege(t){const e=Qo.getSchema(t.id);return e?Xpe(e).map(r=>({...r,value:typeof t[r.name]<"u"?t[r.name]:r.value})):[]}const tge=({shapes:t,onChange:e})=>{const n=t[0].constraints,r=i=>{if(e){const s=Qo.create(i);s&&e&&e({constraints:[...n,s]})}};return y.jsxs(Gr,{title:"Constraints",more:y.jsxs(pd,{children:[y.jsx(gd,{asChild:!0,children:y.jsx("div",{children:y.jsx(Nt,{variant:"ghost",className:"h-6 w-6 px-0 text-muted-foreground",children:y.jsx(uh,{size:16})})})}),y.jsx(Ic,{children:Qo.getIds().map(i=>y.jsx(pr,{onSelect:()=>r(i),children:i},i))})]}),borderTop:!0,children:[n.map((i,s)=>y.jsxs("div",{className:"flex h-8 items-center justify-between",children:[y.jsx("div",{className:"flex items-center h-full w-full text-sm pl-2 truncate border border-r-0 rounded-l",children:i.id}),y.jsxs("div",{className:"flex items-center",children:[y.jsxs(gh,{children:[y.jsx(mh,{asChild:!0,children:y.jsx(Nt,{variant:"ghost",className:"h-8 w-8 p-0 border rounded-none",children:y.jsx(Lx,{size:16})})}),y.jsx(_d,{side:"top",sideOffset:8,className:"w-80",children:y.jsx(Qpe,{nameValues:ege(i),onChange:o=>{const a=Object.fromEntries(o.map(c=>[c.name,c.value])),l=n.map((c,d)=>d===s?{...c,...a}:c);e&&e({constraints:l})}})})]}),y.jsxs(pd,{children:[y.jsx(gd,{asChild:!0,children:y.jsx("div",{children:y.jsx(Nt,{variant:"ghost",className:"h-8 w-8 p-0 border border-l-0 rounded-l-none",children:y.jsx(Jg,{size:16})})})}),y.jsxs(Ic,{children:[y.jsx(pr,{onSelect:()=>{if(s>0){const o=[...n],a=o[s];o.splice(s,1),o.splice(s-1,0,a),e&&e({constraints:o})}},children:"Move Up"}),y.jsx(pr,{onSelect:()=>{if(s<n.length-1){const o=[...n],a=o[s];o.splice(s,1),o.splice(s+1,0,a),e&&e({constraints:o})}},children:"Move Down"}),y.jsx(Pg,{}),y.jsx(pr,{onSelect:()=>{const o=n.filter((a,l)=>l!==s);e&&e({constraints:o})},children:"Delete"})]})]})]})]},s)),n.length===0&&y.jsx(md,{className:"h-8",message:"No constraints"})]})},iz=["PageUp","PageDown"],sz=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],oz={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ey="Slider",[c_,nge,rge]=zx(Ey),[az,eAe]=Zs(Ey,[rge]),[ige,s5]=az(Ey),sge=S.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:d,onValueChange:u=()=>{},onValueCommit:f=()=>{},inverted:h=!1,...p}=t,[g,b]=S.useState(null),v=on(e,z=>b(z)),x=S.useRef(new Set),w=S.useRef(0),C=o==="horizontal",P=g?!!g.closest("form"):!0,O=C?oge:age,[T=[],M]=ea({prop:d,defaultProp:c,onChange:z=>{var ee;(ee=[...x.current][w.current])===null||ee===void 0||ee.focus(),u(z)}}),D=S.useRef(T);function I(z){const ee=mge(T,z);H(z,ee)}function R(z){H(z,w.current)}function $(){const z=D.current[w.current];T[w.current]!==z&&f(T)}function H(z,ee,{commit:ce}={commit:!1}){const le=wge(s),te=xge(Math.round((z-r)/s)*s+r,le),Z=H1(te,[r,i]);M((de=[])=>{const Ce=pge(de,Z,ee);if(bge(Ce,l*s)){w.current=Ce.indexOf(Z);const F=String(Ce)!==String(de);return F&&ce&&f(Ce),F?Ce:de}else return de})}return S.createElement(ige,{scope:t.__scopeSlider,disabled:a,min:r,max:i,valueIndexToChangeRef:w,thumbs:x.current,values:T,orientation:o},S.createElement(c_.Provider,{scope:t.__scopeSlider},S.createElement(c_.Slot,{scope:t.__scopeSlider},S.createElement(O,Ie({"aria-disabled":a,"data-disabled":a?"":void 0},p,{ref:v,onPointerDown:ot(p.onPointerDown,()=>{a||(D.current=T)}),min:r,max:i,inverted:h,onSlideStart:a?void 0:I,onSlideMove:a?void 0:R,onSlideEnd:a?void 0:$,onHomeKeyDown:()=>!a&&H(r,0,{commit:!0}),onEndKeyDown:()=>!a&&H(i,T.length-1,{commit:!0}),onStepKeyDown:({event:z,direction:ee})=>{if(!a){const te=iz.includes(z.key)||z.shiftKey&&sz.includes(z.key)?10:1,Z=w.current,de=T[Z],Ce=s*te*ee;H(de+Ce,Z,{commit:!0})}}})))),P&&T.map((z,ee)=>S.createElement(hge,{key:ee,name:n?n+(T.length>1?"[]":""):void 0,value:z})))}),[lz,cz]=az(Ey,{startEdge:"left",endEdge:"right",size:"width",direction:1}),oge=S.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...d}=t,[u,f]=S.useState(null),h=on(e,w=>f(w)),p=S.useRef(),g=dh(i),b=g==="ltr",v=b&&!s||!b&&s;function x(w){const C=p.current||u.getBoundingClientRect(),P=[0,C.width],T=z4(P,v?[n,r]:[r,n]);return p.current=C,T(w-C.left)}return S.createElement(lz,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width"},S.createElement(uz,Ie({dir:g,"data-orientation":"horizontal"},d,{ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const C=x(w.clientX);o==null||o(C)},onSlideMove:w=>{const C=x(w.clientX);a==null||a(C)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:w=>{const P=oz[v?"from-left":"from-right"].includes(w.key);c==null||c({event:w,direction:P?-1:1})}})))}),age=S.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,d=S.useRef(null),u=on(e,d),f=S.useRef(),h=!i;function p(g){const b=f.current||d.current.getBoundingClientRect(),v=[0,b.height],w=z4(v,h?[r,n]:[n,r]);return f.current=b,w(g-b.top)}return S.createElement(lz,{scope:t.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1},S.createElement(uz,Ie({"data-orientation":"vertical"},c,{ref:u,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const b=p(g.clientY);s==null||s(b)},onSlideMove:g=>{const b=p(g.clientY);o==null||o(b)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:g=>{const v=oz[h?"from-bottom":"from-top"].includes(g.key);l==null||l({event:g,direction:v?-1:1})}})))}),uz=S.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,d=s5(Ey,n);return S.createElement(jt.span,Ie({},c,{ref:e,onKeyDown:ot(t.onKeyDown,u=>{u.key==="Home"?(o(u),u.preventDefault()):u.key==="End"?(a(u),u.preventDefault()):iz.concat(sz).includes(u.key)&&(l(u),u.preventDefault())}),onPointerDown:ot(t.onPointerDown,u=>{const f=u.target;f.setPointerCapture(u.pointerId),u.preventDefault(),d.thumbs.has(f)?f.focus():r(u)}),onPointerMove:ot(t.onPointerMove,u=>{u.target.hasPointerCapture(u.pointerId)&&i(u)}),onPointerUp:ot(t.onPointerUp,u=>{const f=u.target;f.hasPointerCapture(u.pointerId)&&(f.releasePointerCapture(u.pointerId),s(u))})}))}),lge="SliderTrack",cge=S.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=s5(lge,n);return S.createElement(jt.span,Ie({"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation},r,{ref:e}))}),_M="SliderRange",uge=S.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=s5(_M,n),s=cz(_M,n),o=S.useRef(null),a=on(e,o),l=i.values.length,c=i.values.map(f=>dz(f,i.min,i.max)),d=l>1?Math.min(...c):0,u=100-Math.max(...c);return S.createElement(jt.span,Ie({"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0},r,{ref:a,style:{...t.style,[s.startEdge]:d+"%",[s.endEdge]:u+"%"}}))}),AM="SliderThumb",dge=S.forwardRef((t,e)=>{const n=nge(t.__scopeSlider),[r,i]=S.useState(null),s=on(e,a=>i(a)),o=S.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return S.createElement(fge,Ie({},t,{ref:s,index:o}))}),fge=S.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,...i}=t,s=s5(AM,n),o=cz(AM,n),[a,l]=S.useState(null),c=on(e,b=>l(b)),d=Wx(a),u=s.values[r],f=u===void 0?0:dz(u,s.min,s.max),h=gge(r,s.values.length),p=d==null?void 0:d[o.size],g=p?yge(p,f,o.direction):0;return S.useEffect(()=>{if(a)return s.thumbs.add(a),()=>{s.thumbs.delete(a)}},[a,s.thumbs]),S.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${f}% + ${g}px)`}},S.createElement(c_.ItemSlot,{scope:t.__scopeSlider},S.createElement(jt.span,Ie({role:"slider","aria-label":t["aria-label"]||h,"aria-valuemin":s.min,"aria-valuenow":u,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},i,{ref:c,style:u===void 0?{display:"none"}:t.style,onFocus:ot(t.onFocus,()=>{s.valueIndexToChangeRef.current=r})}))))}),hge=t=>{const{value:e,...n}=t,r=S.useRef(null),i=qx(e);return S.useEffect(()=>{const s=r.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==e&&l){const c=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(c)}},[i,e]),S.createElement("input",Ie({style:{display:"none"}},n,{ref:r,defaultValue:e}))};function pge(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,s)=>i-s)}function dz(t,e,n){const s=100/(n-e)*(t-e);return H1(s,[0,100])}function gge(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function mge(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function yge(t,e,n){const r=t/2,s=z4([0,50],[0,r]);return(r-s(e)*n)*n}function vge(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function bge(t,e){if(e>0){const n=vge(t);return Math.min(...n)>=e}return!0}function z4(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function wge(t){return(String(t).split(".")[1]||"").length}function xge(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}const fz=sge,Sge=cge,kge=uge,Cge=dge,Wu=S.forwardRef(({className:t,...e},n)=>y.jsxs(fz,{ref:n,className:qe("relative flex w-full touch-none select-none items-center",t),...e,children:[y.jsx(Sge,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:y.jsx(kge,{className:"absolute h-full bg-primary"})}),y.jsx(Cge,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Wu.displayName=fz.displayName;const _ge=({shapes:t,onChange:e})=>{const n=t[0].properties,r=(o,a)=>{e&&e({properties:n.map((l,c)=>o===c?a:l)})},i=()=>{if(e){const o={name:"NewProperty",hidden:!1,type:"string",value:""};e&&e({properties:[...n,o]})}},s=o=>{e&&e&&e({properties:n.filter((a,l)=>l!==o)})};return y.jsxs(Gr,{title:"Extended Properties",borderTop:!0,more:y.jsx(Nt,{variant:"ghost",className:"h-6 w-6 px-0 text-muted-foreground",onClick:()=>i(),children:y.jsx(uh,{size:16})}),children:[n.map((o,a)=>{var l;return y.jsxs("div",{className:"flex items-center justify-between h-8 rounded",children:[y.jsxs("div",{className:"grid w-full grid-cols-2",children:[y.jsx("div",{className:qe("h-8 w-full border border-r-0 rounded-l pl-2 flex items-center truncate text-sm",o.hidden&&"text-muted-foreground/40"),children:o.name}),y.jsxs("div",{className:"h-8 flex items-center border border-r-0",children:[o.type==="enum"&&y.jsxs(Lc,{value:o.value,onValueChange:c=>r(a,{...o,value:c}),children:[y.jsx(Tl,{className:"h-8 rounded-none border-none",children:y.jsx(Dc,{})}),y.jsx(Nl,{children:o.options&&((l=o.options)==null?void 0:l.map((c,d)=>y.jsx(cr,{value:c,children:c},d)))})]}),o.type==="string"&&y.jsx($a,{className:"h-8 rounded-none border-none",value:o.value,onChange:c=>r(a,{...o,value:c})}),o.type==="number"&&y.jsx(y.Fragment,{children:o.extra==="slider"?y.jsx(Wu,{value:[o.value],min:o.min??0,max:o.max??100,step:o.step??1,onValueChange:c=>r(a,{...o,value:c.length>0?c[0]:0})}):y.jsx(ir,{className:"h-8 rounded-none border-none",value:o.value,onChange:c=>{typeof o.max=="number"&&c>o.max&&(c=o.max),typeof o.min=="number"&&c<o.min&&(c=o.min),r(a,{...o,value:c})}})}),o.type==="boolean"&&y.jsx("div",{className:"w-full flex items-center justify-center",children:y.jsx(Tg,{checked:o.value,onCheckedChange:c=>r(a,{...o,value:c})})}),o.type==="text"&&y.jsx(Kf,{rows:1,className:"h-8 min-h-full max-h-8 rounded-none py-1 px-2 border-none resize-none",value:o.value,onChange:c=>r(a,{...o,value:c})})]})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsxs(gh,{children:[y.jsx(mh,{asChild:!0,children:y.jsx(Nt,{variant:"ghost",className:"h-8 w-8 p-0 border rounded-none",children:y.jsx(Lx,{size:16})})}),y.jsxs(_d,{className:"w-80",children:[y.jsx("div",{className:"flex flex-row items-center justify-between",children:y.jsx(Mt,{className:"font-medium",children:"Extended Property"})}),y.jsx(lf,{className:"mb-3 mt-2"}),y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsxs("div",{className:"grid grid-cols-2 w-full items-center",children:[y.jsx(Mt,{htmlFor:"extended-property-name-field",className:"font-normal",children:"Name"}),y.jsx($a,{id:"extended-property-name-field",className:"h-8",value:o.name,onChange:c=>r(a,{...o,name:c})})]}),y.jsxs("div",{className:"grid grid-cols-2 w-full items-center",children:[y.jsx(Mt,{htmlFor:"extended-property-type-select",className:"font-normal",children:"Type"}),y.jsxs(Lc,{value:o.type,onValueChange:c=>{let d="";c==="boolean"&&(d=!1),c==="number"&&(d=0),r(a,{...o,type:c,value:d,options:c==="enum"?[]:o.options})},children:[y.jsx(Tl,{id:"extended-property-type-select",className:"h-8",children:y.jsx(Dc,{})}),y.jsxs(Nl,{children:[y.jsx(cr,{value:"string",children:"string"}),y.jsx(cr,{value:"number",children:"number"}),y.jsx(cr,{value:"boolean",children:"boolean"}),y.jsx(cr,{value:"enum",children:"enum"}),y.jsx(cr,{value:"text",children:"text"})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 w-full items-center",children:[y.jsx(Mt,{htmlFor:"extended-property-extra",className:"font-normal",children:"Extra"}),y.jsx($a,{id:"extended-property-extra",className:"h-8",value:o.extra,onChange:c=>r(a,{...o,extra:c})})]}),y.jsxs("div",{className:"grid grid-cols-2 w-full items-center",children:[y.jsx(Mt,{htmlFor:"extended-property-hidden",className:"font-normal",children:"Hidden"}),y.jsx("div",{className:"flex items-center justify-end",children:y.jsx(Tg,{id:"extended-property-hidden",checked:o.hidden,onCheckedChange:c=>r(a,{...o,hidden:c})})})]}),o.type==="enum"&&y.jsxs("div",{className:"grid grid-cols-2 w-full items-center",children:[y.jsx(Mt,{htmlFor:"extended-property-options-field",className:"font-normal",children:"Options"}),y.jsx(Kf,{id:"extended-property-options-field",rows:3,value:Array.isArray(o.options)?o.options.join(`
`):"",onChange:c=>r(a,{...o,options:c.trim().split(`
`)})})]}),o.type==="number"&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"grid grid-cols-2 w-full items-center",children:[y.jsx(Mt,{htmlFor:"extended-property-min",className:"font-normal",children:"Min"}),y.jsx(ir,{id:"extended-property-min",className:"h-8",value:o.min,onChange:c=>r(a,{...o,min:c,value:Math.max(c,o.value)})})]}),y.jsxs("div",{className:"grid grid-cols-2 w-full items-center",children:[y.jsx(Mt,{htmlFor:"extended-property-max",className:"font-normal",children:"Max"}),y.jsx(ir,{id:"extended-property-max",className:"h-8",value:o.max,onChange:c=>r(a,{...o,max:c,value:Math.min(c,o.value)})})]}),y.jsxs("div",{className:"grid grid-cols-2 w-full items-center",children:[y.jsx(Mt,{htmlFor:"extended-property-setp",className:"font-normal",children:"Step"}),y.jsx(ir,{id:"extended-property-step",className:"h-8",value:o.step,onChange:c=>r(a,{...o,step:c})})]})]})]})]})]}),y.jsxs(pd,{children:[y.jsx(gd,{asChild:!0,children:y.jsx("div",{children:y.jsx(Nt,{variant:"ghost",className:"h-8 w-8 p-0 border border-l-0 rounded-l-none",children:y.jsx(Jg,{size:16})})})}),y.jsxs(Ic,{children:[y.jsx(pr,{onSelect:()=>{if(a>0){const c=[...n],d=c[a];c.splice(a,1),c.splice(a-1,0,d),e&&e({properties:c})}},children:"Move Up"}),y.jsx(pr,{onSelect:()=>{if(a<n.length-1){const c=[...n],d=c[a];c.splice(a,1),c.splice(a+1,0,d),e&&e({properties:c})}},children:"Move Down"}),y.jsx(Pg,{}),y.jsx(pr,{onSelect:()=>s(a),children:"Delete"})]})]})]})]},a)}),n.length===0&&y.jsx(md,{className:"h-8",message:"No properties"})]})},Age=({shapes:t,onChange:e})=>{const n=Ot(t.map(i=>i.fillColor)),r=Ot(t.map(i=>i.fillStyle));return y.jsxs(Gr,{title:"Fill",children:[y.jsx(Mn,{content:"Fill Color",children:y.jsx(n5,{value:n,onValueChange:i=>{e&&e({fillColor:i})}})}),y.jsx("div",{className:"flex items-center justify-center",children:y.jsxs(Ag,{type:"single",value:r,onValueChange:i=>{e&&i&&e({fillStyle:i})},children:[y.jsx(Mn,{content:"Solid",children:y.jsx(Hi,{size:"sm",value:en.NONE,children:y.jsx(joe,{size:16})})}),y.jsx(Mn,{content:"Solid",children:y.jsx(Hi,{size:"sm",value:en.SOLID,children:y.jsx(Foe,{size:16})})}),y.jsx(Mn,{content:"Hachure",children:y.jsx(Hi,{size:"sm",value:en.HACHURE,children:y.jsx(zoe,{size:16})})}),y.jsx(Mn,{content:"Cross Hatch",children:y.jsx(Hi,{size:"sm",value:en.CROSS_HATCH,children:y.jsx(Boe,{size:16})})})]})})]})},Ege=({shapes:t,onChange:e})=>{const n=t.every(g=>g instanceof St),r=t.every(g=>g instanceof gn),i=Ot(t.map(g=>g.enable)),s=Ot(t.map(g=>g.visible)),o=Ot(t.map(g=>g.containable)),a=Ot(t.map(g=>g.containableFilter)),l=Ot(t.map(g=>g.connectable)),c=Ot(t.map(g=>g.rotatable)),d=Ot(t.map(g=>g.sizable)),u=Ot(t.map(g=>g.movable)),f=Ot(t.map(g=>g instanceof St?g.textEditable:!1)),h=Ot(t.map(g=>g instanceof gn?g.pathEditable:!1)),p=Ot(t.map(g=>g instanceof St?g.anchored:!1));return y.jsxs(Gr,{title:"Control",borderTop:!0,children:[y.jsxs("div",{className:"grid h-8 grid-cols-2 items-center",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(co,{id:"shape-enabled-checkbox",checked:i,onCheckedChange:g=>{typeof g=="boolean"&&e({enable:g})}}),y.jsx(Mt,{className:"font-normal",htmlFor:"shape-enabled-checkbox",children:"Enable"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(co,{id:"shape-visible-checkbox",checked:s,onCheckedChange:g=>{typeof g=="boolean"&&e({visible:g})}}),y.jsx(Mt,{className:"font-normal",htmlFor:"shape-visible-checkbox",children:"Visible"})]})]}),y.jsxs("div",{className:"grid h-8 grid-cols-2 items-center",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(co,{id:"shape-connectable-checkbox",checked:l,onCheckedChange:g=>{typeof g=="boolean"&&e({connectable:g})}}),y.jsx(Mt,{className:"font-normal",htmlFor:"shape-connectable-checkbox",children:"Connectable"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(co,{id:"shape-containable-checkbox",checked:o,onCheckedChange:g=>{typeof g=="boolean"&&e({containable:g})}}),y.jsx(Mt,{className:"font-normal",htmlFor:"shape-containable-checkbox",children:"Containable"})]})]}),y.jsxs("div",{className:"grid h-8 grid-cols-2 items-center",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(co,{id:"shape-rotatable-checkbox",checked:c,onCheckedChange:g=>{typeof g=="boolean"&&e({rotatable:g})}}),y.jsx(Mt,{className:"font-normal peer-disabled:cursor-not-allowed peer-disabled:opacity-70",htmlFor:"shape-rotatable-checkbox",children:"Rotatable"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(co,{id:"shape-anchored-checkbox",checked:p,disabled:!n,onCheckedChange:g=>{typeof g=="boolean"&&e({anchored:g})}}),y.jsx(Mt,{className:"font-normal peer-disabled:cursor-not-allowed peer-disabled:opacity-70",htmlFor:"shape-anchored-checkbox",children:"Anchored"})]})]}),y.jsxs("div",{className:"grid h-8 grid-cols-2 items-center",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(co,{id:"shape-text-editable-checkbox",checked:f,disabled:!n,onCheckedChange:g=>{typeof g=="boolean"&&e({textEditable:g})}}),y.jsx(Mt,{className:"font-normal peer-disabled:cursor-not-allowed peer-disabled:opacity-70",htmlFor:"shape-text-editable-checkbox",children:"Text Editable"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(co,{id:"shape-path-editable-checkbox",checked:h,disabled:!r,onCheckedChange:g=>{typeof g=="boolean"&&e({pathEditable:g})}}),y.jsx(Mt,{className:"font-normal peer-disabled:cursor-not-allowed peer-disabled:opacity-70",htmlFor:"shape-path-editable-checkbox",children:"Path Editable"})]})]}),n&&y.jsxs("div",{className:"grid h-8 grid-cols-2 items-center",children:[y.jsx(Mt,{htmlFor:"shape-sizable-select",className:"font-normal",children:"Sizable"}),y.jsxs(Lc,{value:d,onValueChange:g=>e({sizable:g}),children:[y.jsx(Tl,{id:"shape-sizable-select",className:"h-8",children:y.jsx(Dc,{})}),y.jsx(Nl,{children:Object.entries(_r).map(g=>y.jsx(cr,{value:g[1],children:g[0]},g[0]))})]})]}),y.jsxs("div",{className:"grid h-8 grid-cols-2 items-center",children:[y.jsx(Mt,{htmlFor:"shape-movable-select",className:"font-normal",children:"Movable"}),y.jsxs(Lc,{value:u,onValueChange:g=>e({movable:g}),children:[y.jsx(Tl,{id:"shape-movable-select",className:"h-8",children:y.jsx(Dc,{})}),y.jsx(Nl,{children:Object.entries(Lr).map(g=>y.jsx(cr,{value:g[1],children:g[0]},g[0]))})]})]}),y.jsxs("div",{className:"grid h-8 grid-cols-2 items-center",children:[y.jsx(Mt,{htmlFor:"shape-containable-filter-field",className:"font-normal",children:"Containable Filter"}),y.jsx($a,{id:"shape-containable-filter-field",className:"h-8",value:a,onChange:g=>{e({containableFilter:g})}})]})]})};function Pge(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}Pge(`html[dir=ltr],[data-sonner-toaster][dir=ltr]{--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}html[dir=rtl],[data-sonner-toaster][dir=rtl]{--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}[data-sonner-toaster][data-x-position=right]{right:max(var(--offset),env(safe-area-inset-right))}[data-sonner-toaster][data-x-position=left]{left:max(var(--offset),env(safe-area-inset-left))}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translate(-50%)}[data-sonner-toaster][data-y-position=top]{top:max(var(--offset),env(safe-area-inset-top))}[data-sonner-toaster][data-y-position=bottom]{bottom:max(var(--offset),env(safe-area-inset-bottom))}[data-sonner-toast]{--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;will-change:transform,opacity,height;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast][data-y-position=top]{top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}[data-sonner-toast] [data-description]{font-weight:400;line-height:1.4;color:inherit}[data-sonner-toast] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast] [data-icon]>*{flex-shrink:0}[data-sonner-toast] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast] [data-button]:focus-visible{box-shadow:0 0 0 2px #0006}[data-sonner-toast] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toast][data-theme=dark] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]:before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]:before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]:before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]:before{content:"";position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]:after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y: translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y: translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]:before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - 32px)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true] [data-sonner-toast][data-type=success],[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true] [data-sonner-toast][data-type=info],[data-rich-colors=true] [data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true] [data-sonner-toast][data-type=warning],[data-rich-colors=true] [data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true] [data-sonner-toast][data-type=error],[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);Array(12).fill(0);Le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Le.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"}));Le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Le.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}));Le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Le.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"}));Le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Le.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"}));var u_=1,Tge=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:u_++,o=this.toasts.find(l=>l.id===s),a=e.dismissible===void 0?!0:e.dismissible;return o?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:a,title:r}):l):this.addToast({title:r,...i,dismissible:a,id:s}),s},this.dismiss=e=>(e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let i=e instanceof Promise?e:e(),s=r!==void 0;return i.then(o=>{if(o&&typeof o.ok=="boolean"&&!o.ok){s=!1;let a=typeof n.error=="function"?n.error(`HTTP error! status: ${o.status}`):n.error,l=typeof n.description=="function"?n.description(`HTTP error! status: ${o.status}`):n.description;this.create({id:r,type:"error",message:a,description:l})}else if(n.success!==void 0){s=!1;let a=typeof n.success=="function"?n.success(o):n.success,l=typeof n.description=="function"?n.description(o):n.description;this.create({id:r,type:"success",message:a,description:l})}}).catch(o=>{if(n.error!==void 0){s=!1;let a=typeof n.error=="function"?n.error(o):n.error,l=typeof n.description=="function"?n.description(o):n.description;this.create({id:r,type:"error",message:a,description:l})}}).finally(()=>{var o;s&&(this.dismiss(r),r=void 0),(o=n.finally)==null||o.call(n)}),r},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||u_++;return this.create({jsx:e(r),id:r,...n}),r},this.subscribers=[],this.toasts=[]}},nl=new Tge,Nge=(t,e)=>{let n=(e==null?void 0:e.id)||u_++;return nl.addToast({title:t,...e,id:n}),n},Mge=Nge,Oge=Object.assign(Mge,{success:nl.success,info:nl.info,warning:nl.warning,error:nl.error,custom:nl.custom,message:nl.message,promise:nl.promise,dismiss:nl.dismiss,loading:nl.loading});const Rge=({shapes:t,onChange:e})=>{const n=Ot(t.map(o=>o.strokeColor)),r=Ot(t.map(o=>o.strokeWidth)),i=Ot(t.map(o=>o.strokePattern)),s=Ot(t.map(o=>o.roughness));return y.jsxs(Gr,{title:"Stroke",borderTop:!0,children:[y.jsx(Mn,{content:"Stroke Color",children:y.jsx(n5,{value:n,onValueChange:o=>e({strokeColor:o})})}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mn,{content:"Stroke Width",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mt,{htmlFor:"stroke-width-field",className:"flex-none px-1",children:y.jsx(Ooe,{size:16})}),y.jsx(ir,{id:"stroke-width-field",className:"flex-grow h-8",value:r,onChange:o=>e({strokeWidth:o})})]})}),y.jsx(Mn,{content:"Stroke Pattern",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mt,{htmlFor:"stroke-pattern-field",className:"flex-none px-1",children:y.jsx(Roe,{size:16})}),y.jsx($a,{id:"stroke-pattern-field",className:"flex-grow h-8",value:Array.isArray(i)?i.length>0?i.join(","):"0":void 0,onChange:o=>{try{const a=JSON.parse(`[${o}]`);e({strokePattern:a})}catch{Oge.warning("Pattern should be number comma-list")}}})]})})]}),y.jsxs("div",{className:"flex h-8 items-center gap-3",children:[y.jsx(Mt,{className:"font-normal",children:"Roughness"}),y.jsx("div",{className:"w-full",children:y.jsx(Wu,{max:5,step:.5,min:0,value:[s||0],onValueChange:o=>e({roughness:o.length>0?o[0]:0})})})]})]})},Lge=({shapes:t,onChange:e})=>{const n=t[0].tags,r=()=>{e&&e&&e({tags:[...n,"new-tag"]})};return y.jsxs(Gr,{title:"Tags",more:y.jsx(Nt,{variant:"ghost",className:"h-6 w-6 px-0 text-muted-foreground",onClick:()=>r(),children:y.jsx(uh,{size:16})}),borderTop:!0,children:[n.map((i,s)=>y.jsxs("div",{className:"flex h-8 items-center justify-between",children:[y.jsxs("div",{className:"flex items-center h-full w-full text-sm pl-2 truncate border border-r-0 rounded-l",children:[y.jsx(poe,{size:16,className:"mr-1"}),i]}),y.jsxs("div",{className:"flex items-center",children:[y.jsxs(gh,{children:[y.jsx(mh,{asChild:!0,children:y.jsx(Nt,{variant:"ghost",className:"h-8 w-8 p-0 border rounded-none",children:y.jsx(Lx,{size:16})})}),y.jsx(_d,{side:"top",sideOffset:8,className:"w-80",children:y.jsx($a,{value:i,onChange:o=>{e&&e({tags:n.map((a,l)=>l===s?o:a)})}})})]}),y.jsxs(pd,{children:[y.jsx(gd,{asChild:!0,children:y.jsx("div",{children:y.jsx(Nt,{variant:"ghost",className:"h-8 w-8 p-0 border border-l-0 rounded-l-none",children:y.jsx(Jg,{size:16})})})}),y.jsxs(Ic,{children:[y.jsx(pr,{onSelect:()=>{if(s>0){const o=[...n],a=o[s];o.splice(s,1),o.splice(s-1,0,a),e&&e({tags:o})}},children:"Move Up"}),y.jsx(pr,{onSelect:()=>{if(s<n.length-1){const o=[...n],a=o[s];o.splice(s,1),o.splice(s+1,0,a),e&&e({tags:o})}},children:"Move Down"}),y.jsx(Pg,{}),y.jsx(pr,{onSelect:()=>{e&&e({tags:n.filter((o,a)=>a!==s)})},children:"Delete"})]})]})]})]},s)),n.length===0&&y.jsx(md,{className:"h-8",message:"No tags"})]})};function EM({value:t,className:e}){switch(t){case Bt.FLAT:return y.jsx(jN,{size:16,className:e});case Bt.ARROW:return y.jsx(Woe,{size:16,className:e});case Bt.SOLID_ARROW:return y.jsx(qoe,{size:16,className:e});case Bt.TRIANGLE:return y.jsx(Goe,{size:16,className:e});case Bt.TRIANGLE_FILLED:return y.jsx(Koe,{size:16,className:e});case Bt.DIAMOND:return y.jsx(Joe,{size:16,className:e});case Bt.DIAMOND_FILLED:return y.jsx(Yoe,{size:16,className:e});case Bt.PLUS:return y.jsx(Zoe,{size:16,className:e});case Bt.CIRCLE:return y.jsx(Xoe,{size:16,className:e});case Bt.CIRCLE_PLUS:return y.jsx(Qoe,{size:16,className:e});case Bt.CIRCLE_FILLED:return y.jsx(eae,{size:16,className:e});case Bt.CROWFOOT_ONE:return y.jsx(tae,{size:16,className:e});case Bt.CROWFOOT_ONLY_ONE:return y.jsx(nae,{size:16,className:e});case Bt.CROWFOOT_ZERO_ONE:return y.jsx(sae,{size:16,className:e});case Bt.CROWFOOT_MANY:return y.jsx(rae,{size:16,className:e});case Bt.CROWFOOT_ONE_MANY:return y.jsx(iae,{size:16,className:e});case Bt.CROWFOOT_ZERO_MANY:return y.jsx(oae,{size:16,className:e});case Bt.CROSS:return y.jsx(aae,{size:16,className:e});case Bt.DOT:return y.jsx(lae,{size:16,className:e});case Bt.BAR:return y.jsx(cae,{size:16,className:e});case Bt.SQUARE:return y.jsx(uae,{size:16,className:e});default:return y.jsx(jN,{size:16,className:e})}}const PM=({id:t,className:e,value:n,title:r,rotate:i=!1,onValueChange:s})=>{const[o,a]=S.useState(!1);return y.jsxs(gh,{open:o,onOpenChange:l=>a(l),children:[y.jsx(mh,{asChild:!0,children:y.jsx(Nt,{variant:"outline",size:"sm",className:qe("rounded-sm h-[34px] px-2",e),children:y.jsx(EM,{value:n??Bt.FLAT,className:qe(i&&"transform rotate-180")})})}),y.jsx(_d,{className:"w-fit p-2",children:y.jsx("div",{className:"grid grid-cols-5 gap-0.5 w-fit",children:Object.values(Bt).map(l=>y.jsx(Nt,{variant:"ghost",size:"icon",title:rfe(l),className:qe("h-7 w-7"),onClick:()=>{a(!1),s&&s(l)},children:y.jsx(EM,{value:l,className:qe(i&&"transform rotate-180")})},l))})})]})},Dge=({shapes:t,onChange:e})=>{const n=Ot(t.map(c=>c.lineType)),r=Ot(t.map(c=>c.headEndType)),i=Ot(t.map(c=>c.tailEndType)),s=t.every(c=>c.type==="Connector"),o=Ot(t.map(c=>c.headMargin)),a=Ot(t.map(c=>c.tailMargin)),l=Math.min(o||0,a||0);return y.jsxs(Gr,{title:"Line",borderTop:!0,children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx(PM,{id:"line-head-end",className:"rounded-r-none",rotate:!0,value:i,onValueChange:c=>{e&&e({tailEndType:c})}}),y.jsx(PM,{id:"line-tail-end",className:"rounded-l-none ml-[-1px]",value:r,onValueChange:c=>{e&&e({headEndType:c})}})]}),y.jsx("div",{className:"flex items-center gap-2",children:y.jsxs(Ag,{type:"single",value:n,onValueChange:c=>{e&&c&&e({lineType:c})},children:[y.jsx(Hi,{size:"sm",value:di.STRAIGHT,children:y.jsx(Loe,{size:16})}),y.jsx(Hi,{size:"sm",value:di.CURVE,children:y.jsx(Doe,{size:16})})]})})]}),s&&y.jsxs("div",{className:"flex items-center h-8 gap-3",children:[y.jsx(Mt,{className:"font-normal",children:"Margin"}),y.jsx("div",{className:"w-full",children:y.jsx(Wu,{max:50,step:5,min:0,value:[l],onValueChange:c=>e({headMargin:c.length>0?c[0]:0,tailMargin:c.length>0?c[0]:0})})})]})]})},Ige=({shapes:t,onChange:e})=>{const n=t[0].proto,r=t[0].name,i=t[0].description;return y.jsxs(Gr,{title:"Prototype",children:[y.jsxs("div",{className:"grid h-8 grid-cols-2 items-center",children:[y.jsx(Mt,{htmlFor:"shape-prototype-switch",className:"font-normal",children:"Prototype"}),y.jsx("span",{className:"text-right",children:y.jsx(Tg,{id:"shape-prototype-switch",checked:n,onCheckedChange:s=>e({proto:s})})})]}),y.jsxs("div",{className:"flex flex-col gap-2",children:[y.jsx(Mt,{htmlFor:"shape-name-field",className:"font-normal",children:"Name"}),y.jsx($a,{id:"shape-name-field",className:"h-8",value:r,onChange:s=>{e({name:s})}})]}),y.jsxs("div",{className:"flex flex-col gap-2",children:[y.jsx(Mt,{htmlFor:"shape-description-field",className:"font-normal",children:"Description"}),y.jsx(Kf,{id:"shape-description-field",value:i,rows:2,onChange:s=>{e({description:s})}})]})]})},$ge=`(do
  (call shape :draw canvas))`;function jge({script:t,onChange:e}){const[n,r]=S.useState(t);return S.useEffect(()=>{r(t)},[t]),y.jsxs("div",{children:[y.jsx("div",{className:"mb-3",children:y.jsx(Kf,{cols:40,rows:10,value:n,className:"text-sm",onChange:i=>{r(i)}})}),y.jsx("div",{className:"flex gap-2",children:y.jsx(Nt,{onClick:()=>{e&&e(n)},children:"Save"})})]})}const Fge=({shapes:t,onChange:e})=>{const n=t[0].scripts,r=i=>{if(e&&!n.some(s=>s.id===i)){let s="";i==="draw"&&(s=$ge);const o={id:i,script:s};e&&e({scripts:[...n,o]})}};return y.jsxs(Gr,{title:"Scripts",more:y.jsxs(pd,{children:[y.jsx(gd,{asChild:!0,children:y.jsx("div",{children:y.jsx(Nt,{variant:"ghost",className:"h-6 w-6 px-0 text-muted-foreground",children:y.jsx(uh,{size:16})})})}),y.jsx(Ic,{children:Object.values(U0).map(i=>y.jsx(pr,{onSelect:()=>r(i),children:i},i))})]}),borderTop:!0,children:[n.map((i,s)=>y.jsxs("div",{className:"flex h-8 items-center justify-between",children:[y.jsx("div",{className:"flex items-center h-full w-full text-sm pl-2 truncate border border-r-0 rounded-l",children:i.id}),y.jsxs("div",{className:"flex items-center",children:[y.jsxs(gh,{children:[y.jsx(mh,{asChild:!0,children:y.jsx(Nt,{variant:"ghost",className:"h-8 w-8 p-0 border rounded-none",children:y.jsx(Lx,{size:16})})}),y.jsx(_d,{side:"top",className:"w-[640px]",children:y.jsx(jge,{script:i.script,onChange:o=>{const a=n.map((l,c)=>c===s?{...l,script:o}:l);e&&e({scripts:a})}})})]}),y.jsxs(pd,{children:[y.jsx(gd,{asChild:!0,children:y.jsx("div",{children:y.jsx(Nt,{variant:"ghost",className:"h-8 w-8 p-0 border border-l-0 rounded-l-none",children:y.jsx(Jg,{size:16})})})}),y.jsx(Ic,{children:y.jsx(pr,{onSelect:()=>{const o=n.filter((a,l)=>l!==s);e&&e({scripts:o})},children:"Delete"})})]})]})]},s)),n.length===0&&y.jsx(md,{className:"h-8",message:"No scripts"})]})},zge=({shapes:t,onChange:e})=>y.jsx(Gr,{title:"Alignment",borderTop:!0,children:y.jsxs("div",{className:"flex flex-col gap-2",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(Nt,{title:"Bring to front",variant:"outline",size:"icon",className:"w-7 h-7",onClick:()=>window.editor.actions.bringToFront(),children:y.jsx(hae,{size:16})}),y.jsx(Nt,{title:"Bring forward",variant:"outline",size:"icon",className:"w-7 h-7",onClick:()=>window.editor.actions.bringForward(),children:y.jsx(pae,{size:16})})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(Nt,{title:"Align left",variant:"outline",size:"icon",className:"w-7 h-7",onClick:()=>window.editor.actions.alignLeft(),children:y.jsx(toe,{size:16})}),y.jsx(Nt,{title:"Align center",variant:"outline",size:"icon",className:"w-7 h-7",onClick:()=>window.editor.actions.alignCenter(),children:y.jsx(Yse,{size:16})}),y.jsx(Nt,{title:"Align right",variant:"outline",size:"icon",className:"w-7 h-7",onClick:()=>window.editor.actions.alignRight(),children:y.jsx(Xse,{size:16})}),y.jsx(Nt,{title:"Align horizontal space around",variant:"outline",size:"icon",className:"w-7 h-7",onClick:()=>window.editor.actions.alignHorizontalSpaceAround(),children:y.jsx(Qse,{size:16})})]})]}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(Nt,{title:"Send to back",variant:"outline",size:"icon",className:"w-7 h-7",onClick:()=>window.editor.actions.sendToBack(),children:y.jsx(dae,{size:16})}),y.jsx(Nt,{title:"Send backward",variant:"outline",size:"icon",className:"w-7 h-7",onClick:()=>window.editor.actions.sendBackward(),children:y.jsx(fae,{size:16})})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(Nt,{title:"Align top",variant:"outline",size:"icon",className:"w-7 h-7",onClick:()=>window.editor.actions.alignTop(),children:y.jsx(eoe,{size:16})}),y.jsx(Nt,{title:"Align center",variant:"outline",size:"icon",className:"w-7 h-7",onClick:()=>window.editor.actions.alignMiddle(),children:y.jsx(Jse,{size:16})}),y.jsx(Nt,{title:"Align bottom",variant:"outline",size:"icon",className:"w-7 h-7",onClick:()=>window.editor.actions.alignBottom(),children:y.jsx(Zse,{size:16})}),y.jsx(Nt,{title:"Align vertical space around",variant:"outline",size:"icon",className:"w-7 h-7",onClick:()=>window.editor.actions.alignVerticalSpaceAround(),children:y.jsx(noe,{size:16})})]})]})]})}),Bge=({shapes:t,onChange:e})=>{const n=Ot(t.map(s=>s.rotate)),r=Ot(t.map(s=>s.rotatable)),i=Ot(t.map(s=>s.opacity));return y.jsxs(Gr,{title:"Shape",borderTop:!0,children:[y.jsxs("div",{className:"flex items-center w-full gap-2",children:[y.jsx(Mn,{content:"Rotate",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mt,{htmlFor:"shape-rotate-field",className:"text-sm flex-none px-1",children:y.jsx(_oe,{size:16})}),y.jsx(ir,{id:"shape-rotate-field",className:"flex-grow h-8",value:n,onChange:s=>e({rotate:s})})]})}),y.jsx(Mn,{content:"Lock Rotation",children:y.jsx(Ca,{variant:"outline",size:"sm",className:"w-9 px-2 justify-center flex-none",pressed:!r,onPressedChange:s=>e({rotatable:!s}),children:y.jsx(Y9,{size:16})})})]}),y.jsxs("div",{className:"flex h-9 items-center gap-3",children:[y.jsx(Mt,{className:"font-normal",children:"Opacity"}),y.jsx("div",{className:"w-full",children:y.jsx(Wu,{max:1,step:.1,min:0,value:[i||0],onValueChange:s=>e({opacity:s.length>0?s[0]:0})})})]})]})},Uge=({shapes:t,onChange:e})=>{const n=Ot(t.map(s=>s.thinning)),r=Ot(t.map(s=>s.tailTaper)),i=Ot(t.map(s=>s.headTaper));return y.jsxs(Gr,{title:"Freehand",borderTop:!0,children:[y.jsxs("div",{className:"flex h-9 items-center gap-3",children:[y.jsx(Mt,{className:"font-normal",children:"Thining"}),y.jsx("div",{className:"w-full",children:y.jsx(Wu,{max:1,step:.1,min:0,value:[n||0],onValueChange:s=>e({thinning:s.length>0?s[0]:0})})})]}),y.jsxs("div",{className:"flex h-9 items-center gap-3",children:[y.jsx(Mt,{className:"font-normal",children:"Tail Taper"}),y.jsx("div",{className:"w-full",children:y.jsx(Wu,{max:1,step:.01,min:0,value:[r||0],onValueChange:s=>e({tailTaper:s.length>0?s[0]:0})})})]}),y.jsxs("div",{className:"flex h-9 items-center gap-3",children:[y.jsx(Mt,{className:"font-normal",children:"Head Taper"}),y.jsx("div",{className:"w-full",children:y.jsx(Wu,{max:1,step:.01,min:0,value:[i||0],onValueChange:s=>e({headTaper:s.length>0?s[0]:0})})})]})]})},Hge=({doc:t,shapes:e,onChange:n})=>{const r=e[0].link;return y.jsx(Gr,{title:"Link",borderTop:!0,children:y.jsx("div",{className:"flex flex-col",children:y.jsx($a,{id:"shape-link-field",className:"h-8",placeholder:"url",value:r,onChange:i=>{n({link:i})}})})})};function Vge(t){const[e,n]=S.useState(!1);return S.useEffect(()=>{function r(s){n(s.matches)}const i=matchMedia(t);return i.addEventListener("change",r),n(i.matches),()=>i.removeEventListener("change",r)},[t]),e}function qu(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Wge(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function hz(...t){return e=>t.forEach(n=>Wge(n,e))}function bh(...t){return S.useCallback(hz(...t),t)}function qge(t,e){const n=S.createContext(e);function r(s){const{children:o,...a}=s,l=S.useMemo(()=>a,Object.values(a));return y.jsx(n.Provider,{value:l,children:o})}function i(s){const o=S.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return r.displayName=t+"Provider",[r,i]}function Gge(t,e=[]){let n=[];function r(s,o){const a=S.createContext(o),l=n.length;n=[...n,o];function c(u){const{scope:f,children:h,...p}=u,g=(f==null?void 0:f[t][l])||a,b=S.useMemo(()=>p,Object.values(p));return y.jsx(g.Provider,{value:b,children:h})}function d(u,f){const h=(f==null?void 0:f[t][l])||a,p=S.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,d]}const i=()=>{const s=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,Kge(i,...e)]}function Kge(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const u=l(s)[`__scope${c}`];return{...a,...u}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var _w=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},Jge=vA.useId||(()=>{}),Yge=0;function gk(t){const[e,n]=S.useState(Jge());return _w(()=>{n(r=>r??String(Yge++))},[t]),t||(e?`radix-${e}`:"")}function Jf(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Zge({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=Xge({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=Jf(n),l=S.useCallback(c=>{if(s){const u=typeof c=="function"?c(t):c;u!==t&&a(u)}else i(c)},[s,t,i,a]);return[o,l]}function Xge({defaultProp:t,onChange:e}){const n=S.useState(t),[r]=n,i=S.useRef(r),s=Jf(e);return S.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}var B4=S.forwardRef((t,e)=>{const{children:n,...r}=t,i=S.Children.toArray(n),s=i.find(eme);if(s){const o=s.props.children,a=i.map(l=>l===s?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:l);return y.jsx(d_,{...r,ref:e,children:S.isValidElement(o)?S.cloneElement(o,void 0,a):null})}return y.jsx(d_,{...r,ref:e,children:n})});B4.displayName="Slot";var d_=S.forwardRef((t,e)=>{const{children:n,...r}=t;if(S.isValidElement(n)){const i=nme(n);return S.cloneElement(n,{...tme(r,n.props),ref:e?hz(e,i):i})}return S.Children.count(n)>1?S.Children.only(null):null});d_.displayName="SlotClone";var Qge=({children:t})=>y.jsx(y.Fragment,{children:t});function eme(t){return S.isValidElement(t)&&t.type===Qge}function tme(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function nme(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var rme=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Hc=rme.reduce((t,e)=>{const n=S.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?B4:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(a,{...o,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function ime(t,e){t&&Ua.flushSync(()=>t.dispatchEvent(e))}function sme(t,e=globalThis==null?void 0:globalThis.document){const n=Jf(t);S.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var ome="DismissableLayer",f_="dismissableLayer.update",ame="dismissableLayer.pointerDownOutside",lme="dismissableLayer.focusOutside",TM,pz=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gz=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=S.useContext(pz),[d,u]=S.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=S.useState({}),p=bh(e,T=>u(T)),g=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(b),x=d?g.indexOf(d):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,C=x>=v,P=dme(T=>{const M=T.target,D=[...c.branches].some(I=>I.contains(M));!C||D||(i==null||i(T),o==null||o(T),T.defaultPrevented||a==null||a())},f),O=fme(T=>{const M=T.target;[...c.branches].some(I=>I.contains(M))||(s==null||s(T),o==null||o(T),T.defaultPrevented||a==null||a())},f);return sme(T=>{x===c.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},f),S.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(TM=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),NM(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=TM)}},[d,f,n,c]),S.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),NM())},[d,c]),S.useEffect(()=>{const T=()=>h({});return document.addEventListener(f_,T),()=>document.removeEventListener(f_,T)},[]),y.jsx(Hc.div,{...l,ref:p,style:{pointerEvents:w?C?"auto":"none":void 0,...t.style},onFocusCapture:qu(t.onFocusCapture,O.onFocusCapture),onBlurCapture:qu(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:qu(t.onPointerDownCapture,P.onPointerDownCapture)})});gz.displayName=ome;var cme="DismissableLayerBranch",ume=S.forwardRef((t,e)=>{const n=S.useContext(pz),r=S.useRef(null),i=bh(e,r);return S.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),y.jsx(Hc.div,{...t,ref:i})});ume.displayName=cme;function dme(t,e=globalThis==null?void 0:globalThis.document){const n=Jf(t),r=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){mz(ame,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function fme(t,e=globalThis==null?void 0:globalThis.document){const n=Jf(t),r=S.useRef(!1);return S.useEffect(()=>{const i=s=>{s.target&&!r.current&&mz(lme,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function NM(){const t=new CustomEvent(f_);document.dispatchEvent(t)}function mz(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?ime(i,s):i.dispatchEvent(s)}var mk="focusScope.autoFocusOnMount",yk="focusScope.autoFocusOnUnmount",MM={bubbles:!1,cancelable:!0},hme="FocusScope",yz=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=S.useState(null),c=Jf(i),d=Jf(s),u=S.useRef(null),f=bh(e,g=>l(g)),h=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let g=function(w){if(h.paused||!a)return;const C=w.target;a.contains(C)?u.current=C:yu(u.current,{select:!0})},b=function(w){if(h.paused||!a)return;const C=w.relatedTarget;C!==null&&(a.contains(C)||yu(u.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const P of w)P.removedNodes.length>0&&yu(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const x=new MutationObserver(v);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),x.disconnect()}}},[r,a,h.paused]),S.useEffect(()=>{if(a){RM.add(h);const g=document.activeElement;if(!a.contains(g)){const v=new CustomEvent(mk,MM);a.addEventListener(mk,c),a.dispatchEvent(v),v.defaultPrevented||(pme(bme(vz(a)),{select:!0}),document.activeElement===g&&yu(a))}return()=>{a.removeEventListener(mk,c),setTimeout(()=>{const v=new CustomEvent(yk,MM);a.addEventListener(yk,d),a.dispatchEvent(v),v.defaultPrevented||yu(g??document.body,{select:!0}),a.removeEventListener(yk,d),RM.remove(h)},0)}}},[a,c,d,h]);const p=S.useCallback(g=>{if(!n&&!r||h.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(b&&v){const x=g.currentTarget,[w,C]=gme(x);w&&C?!g.shiftKey&&v===C?(g.preventDefault(),n&&yu(w,{select:!0})):g.shiftKey&&v===w&&(g.preventDefault(),n&&yu(C,{select:!0})):v===x&&g.preventDefault()}},[n,r,h.paused]);return y.jsx(Hc.div,{tabIndex:-1,...o,ref:f,onKeyDown:p})});yz.displayName=hme;function pme(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(yu(r,{select:e}),document.activeElement!==n)return}function gme(t){const e=vz(t),n=OM(e,t),r=OM(e.reverse(),t);return[n,r]}function vz(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function OM(t,e){for(const n of t)if(!mme(n,{upTo:e}))return n}function mme(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function yme(t){return t instanceof HTMLInputElement&&"select"in t}function yu(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&yme(t)&&e&&t.select()}}var RM=vme();function vme(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=LM(t,e),t.unshift(e)},remove(e){var n;t=LM(t,e),(n=t[0])==null||n.resume()}}}function LM(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function bme(t){return t.filter(e=>e.tagName!=="A")}var wme="Portal",bz=S.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=S.useState(!1);_w(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?yx.createPortal(y.jsx(Hc.div,{...r,ref:e}),o):null});bz.displayName=wme;function xme(t,e){return S.useReducer((n,r)=>e[n][r]??n,t)}var o5=t=>{const{present:e,children:n}=t,r=Sme(e),i=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),s=bh(r.ref,kme(i));return typeof n=="function"||r.isPresent?S.cloneElement(i,{ref:s}):null};o5.displayName="Presence";function Sme(t){const[e,n]=S.useState(),r=S.useRef({}),i=S.useRef(t),s=S.useRef("none"),o=t?"mounted":"unmounted",[a,l]=xme(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=a2(r.current);s.current=a==="mounted"?c:"none"},[a]),_w(()=>{const c=r.current,d=i.current;if(d!==t){const f=s.current,h=a2(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),_w(()=>{if(e){const c=u=>{const h=a2(r.current).includes(u.animationName);u.target===e&&h&&Ua.flushSync(()=>l("ANIMATION_END"))},d=u=>{u.target===e&&(s.current=a2(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function a2(t){return(t==null?void 0:t.animationName)||"none"}function kme(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var vk=0;function Cme(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??DM()),document.body.insertAdjacentElement("beforeend",t[1]??DM()),vk++,()=>{vk===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),vk--}},[])}function DM(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var wz=_j(),bk=function(){},a5=S.forwardRef(function(t,e){var n=S.useRef(null),r=S.useState({onScrollCapture:bk,onWheelCapture:bk,onTouchMoveCapture:bk}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,u=t.shards,f=t.sideCar,h=t.noIsolation,p=t.inert,g=t.allowPinchZoom,b=t.as,v=b===void 0?"div":b,x=t.gapMode,w=P4(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=f,P=Cj([n,e]),O=Vi(Vi({},w),i);return S.createElement(S.Fragment,null,d&&S.createElement(C,{sideCar:wz,removeScrollBar:c,shards:u,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!g,lockRef:n,gapMode:x}),o?S.cloneElement(S.Children.only(a),Vi(Vi({},O),{ref:P})):S.createElement(v,Vi({},O,{className:l,ref:P}),a))});a5.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};a5.classNames={fullWidth:G0,zeroRight:q0};var h_=!1;if(typeof window<"u")try{var l2=Object.defineProperty({},"passive",{get:function(){return h_=!0,!0}});window.addEventListener("test",l2,l2),window.removeEventListener("test",l2,l2)}catch{h_=!1}var np=h_?{passive:!1}:!1,_me=function(t){return t.tagName==="TEXTAREA"},xz=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!_me(t)&&n[e]==="visible")},Ame=function(t){return xz(t,"overflowY")},Eme=function(t){return xz(t,"overflowX")},IM=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Sz(t,r);if(i){var s=kz(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Pme=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Tme=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Sz=function(t,e){return t==="v"?Ame(e):Eme(e)},kz=function(t,e){return t==="v"?Pme(e):Tme(e)},Nme=function(t,e){return t==="h"&&e==="rtl"?-1:1},Mme=function(t,e,n,r,i){var s=Nme(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,d=o>0,u=0,f=0;do{var h=kz(t,a),p=h[0],g=h[1],b=h[2],v=g-b-s*p;(p||v)&&Sz(t,a)&&(u+=v,f+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(u)<1||!d&&Math.abs(f)<1)&&(c=!0),c},c2=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},$M=function(t){return[t.deltaX,t.deltaY]},jM=function(t){return t&&"current"in t?t.current:t},Ome=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Rme=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Lme=0,rp=[];function Dme(t){var e=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),i=S.useState(Lme++)[0],s=S.useState(T4)[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=kj([t.lockRef.current],(t.shards||[]).map(jM),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(g,b){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var v=c2(g),x=n.current,w="deltaX"in g?g.deltaX:x[0]-v[0],C="deltaY"in g?g.deltaY:x[1]-v[1],P,O=g.target,T=Math.abs(w)>Math.abs(C)?"h":"v";if("touches"in g&&T==="h"&&O.type==="range")return!1;var M=IM(T,O);if(!M)return!0;if(M?P=T:(P=T==="v"?"h":"v",M=IM(T,O)),!M)return!1;if(!r.current&&"changedTouches"in g&&(w||C)&&(r.current=P),!P)return!0;var D=r.current||P;return Mme(D,b,g,D==="h"?w:C)},[]),l=S.useCallback(function(g){var b=g;if(!(!rp.length||rp[rp.length-1]!==s)){var v="deltaY"in b?$M(b):c2(b),x=e.current.filter(function(P){return P.name===b.type&&(P.target===b.target||b.target===P.shadowParent)&&Ome(P.delta,v)})[0];if(x&&x.should){b.cancelable&&b.preventDefault();return}if(!x){var w=(o.current.shards||[]).map(jM).filter(Boolean).filter(function(P){return P.contains(b.target)}),C=w.length>0?a(b,w[0]):!o.current.noIsolation;C&&b.cancelable&&b.preventDefault()}}},[]),c=S.useCallback(function(g,b,v,x){var w={name:g,delta:b,target:v,should:x,shadowParent:Ime(v)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(C){return C!==w})},1)},[]),d=S.useCallback(function(g){n.current=c2(g),r.current=void 0},[]),u=S.useCallback(function(g){c(g.type,$M(g),g.target,a(g,t.lockRef.current))},[]),f=S.useCallback(function(g){c(g.type,c2(g),g.target,a(g,t.lockRef.current))},[]);S.useEffect(function(){return rp.push(s),t.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:f}),document.addEventListener("wheel",l,np),document.addEventListener("touchmove",l,np),document.addEventListener("touchstart",d,np),function(){rp=rp.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,np),document.removeEventListener("touchmove",l,np),document.removeEventListener("touchstart",d,np)}},[]);var h=t.removeScrollBar,p=t.inert;return S.createElement(S.Fragment,null,p?S.createElement(s,{styles:Rme(i)}):null,h?S.createElement(Tj,{gapMode:t.gapMode}):null)}function Ime(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const $me=Ej(wz,Dme);var Cz=S.forwardRef(function(t,e){return S.createElement(a5,Vi({},t,{ref:e,sideCar:$me}))});Cz.classNames=a5.classNames;var U4="Dialog",[_z,nAe]=Gge(U4),[jme,Va]=_z(U4),Az=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=S.useRef(null),l=S.useRef(null),[c=!1,d]=Zge({prop:r,defaultProp:i,onChange:s});return y.jsx(jme,{scope:e,triggerRef:a,contentRef:l,contentId:gk(),titleId:gk(),descriptionId:gk(),open:c,onOpenChange:d,onOpenToggle:S.useCallback(()=>d(u=>!u),[d]),modal:o,children:n})};Az.displayName=U4;var Ez="DialogTrigger",Pz=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Va(Ez,n),s=bh(e,i.triggerRef);return y.jsx(Hc.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":W4(i.open),...r,ref:s,onClick:qu(t.onClick,i.onOpenToggle)})});Pz.displayName=Ez;var H4="DialogPortal",[Fme,Tz]=_z(H4,{forceMount:void 0}),Nz=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Va(H4,e);return y.jsx(Fme,{scope:e,forceMount:n,children:S.Children.map(r,o=>y.jsx(o5,{present:n||s.open,children:y.jsx(bz,{asChild:!0,container:i,children:o})}))})};Nz.displayName=H4;var Aw="DialogOverlay",Mz=S.forwardRef((t,e)=>{const n=Tz(Aw,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Va(Aw,t.__scopeDialog);return s.modal?y.jsx(o5,{present:r||s.open,children:y.jsx(zme,{...i,ref:e})}):null});Mz.displayName=Aw;var zme=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Va(Aw,n);return y.jsx(Cz,{as:B4,allowPinchZoom:!0,shards:[i.contentRef],children:y.jsx(Hc.div,{"data-state":W4(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Yf="DialogContent",Oz=S.forwardRef((t,e)=>{const n=Tz(Yf,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Va(Yf,t.__scopeDialog);return y.jsx(o5,{present:r||s.open,children:s.modal?y.jsx(Bme,{...i,ref:e}):y.jsx(Ume,{...i,ref:e})})});Oz.displayName=Yf;var Bme=S.forwardRef((t,e)=>{const n=Va(Yf,t.__scopeDialog),r=S.useRef(null),i=bh(e,n.contentRef,r);return S.useEffect(()=>{const s=r.current;if(s)return Gx(s)},[]),y.jsx(Rz,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qu(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:qu(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:qu(t.onFocusOutside,s=>s.preventDefault())})}),Ume=S.forwardRef((t,e)=>{const n=Va(Yf,t.__scopeDialog),r=S.useRef(!1),i=S.useRef(!1);return y.jsx(Rz,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Rz=S.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Va(Yf,n),l=S.useRef(null),c=bh(e,l);return Cme(),y.jsxs(y.Fragment,{children:[y.jsx(yz,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:y.jsx(gz,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":W4(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(Hme,{titleId:a.titleId}),y.jsx(Wme,{contentRef:l,descriptionId:a.descriptionId})]})]})}),V4="DialogTitle",Lz=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Va(V4,n);return y.jsx(Hc.h2,{id:i.titleId,...r,ref:e})});Lz.displayName=V4;var Dz="DialogDescription",Iz=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Va(Dz,n);return y.jsx(Hc.p,{id:i.descriptionId,...r,ref:e})});Iz.displayName=Dz;var $z="DialogClose",jz=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Va($z,n);return y.jsx(Hc.button,{type:"button",...r,ref:e,onClick:qu(t.onClick,()=>i.onOpenChange(!1))})});jz.displayName=$z;function W4(t){return t?"open":"closed"}var Fz="DialogTitleWarning",[rAe,zz]=qge(Fz,{contentName:Yf,titleName:V4,docsSlug:"dialog"}),Hme=({titleId:t})=>{const e=zz(Fz),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Vme="DialogDescriptionWarning",Wme=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${zz(Vme).contentName}}.`;return S.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},q4=Az,qme=Pz,G4=Nz,Py=Mz,Ty=Oz,Ny=Lz,My=Iz,Bz=jz;const Gme=q4,Kme=G4,Uz=S.forwardRef(({className:t,...e},n)=>y.jsx(Py,{ref:n,className:qe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));Uz.displayName=Py.displayName;const Hz=S.forwardRef(({className:t,children:e,...n},r)=>y.jsxs(Kme,{children:[y.jsx(Uz,{}),y.jsxs(Ty,{ref:r,className:qe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,y.jsxs(Bz,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[y.jsx($ce,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Hz.displayName=Ty.displayName;const Vz=({className:t,...e})=>y.jsx("div",{className:qe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Vz.displayName="DialogHeader";const Wz=({className:t,...e})=>y.jsx("div",{className:qe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Wz.displayName="DialogFooter";const qz=S.forwardRef(({className:t,...e},n)=>y.jsx(Ny,{ref:n,className:qe("text-lg font-semibold leading-none tracking-tight",t),...e}));qz.displayName=Ny.displayName;const Gz=S.forwardRef(({className:t,...e},n)=>y.jsx(My,{ref:n,className:qe("text-sm text-muted-foreground",t),...e}));Gz.displayName=My.displayName;function Jme(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const Kz=Le.createContext({drawerRef:{current:null},overlayRef:{current:null},scaleBackground:()=>{},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,handleOnly:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},visible:!1,closeDrawer:()=>{},setVisible:()=>{},direction:"bottom"}),K4=()=>{const t=Le.useContext(Kz);if(!t)throw new Error("useDrawerContext must be used within a Drawer.Root");return t};Jme("[vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1)}[vaul-drawer][vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[vaul-drawer][vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[vaul-drawer][vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[vaul-drawer][vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}.vaul-dragging .vaul-scrollable [vault-drawer-direction=top]{overflow-y:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=bottom]{overflow-y:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=left]{overflow-x:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=right]{overflow-x:hidden!important}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[vaul-overlay]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[vaul-overlay][vaul-drawer-visible=true]{opacity:1}[vaul-drawer]::after{content:'';position:absolute;background:inherit;background-color:inherit}[vaul-drawer][vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[vaul-drawer][vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[vaul-handle]{display:block;position:relative;opacity:.8;margin-left:auto;margin-right:auto;height:5px;width:56px;border-radius:1rem;touch-action:pan-y;cursor:grab}[vaul-handle]:active,[vaul-handle]:hover{opacity:1}[vaul-handle]:active{cursor:grabbing}[vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}[vaul-overlay][vaul-snap-points=true]:not([vaul-snap-points-overlay=true]):not([data-state=closed]){opacity:0}[vaul-overlay][vaul-snap-points-overlay=true]:not([vaul-drawer-visible=false]){opacity:1}@media (hover:hover) and (pointer:fine){[vaul-drawer]{user-select:none}}@media (pointer:fine){[vaul-handle-hitarea]:{width:100%;height:100%}}");const Yme=typeof window<"u"?S.useLayoutEffect:S.useEffect;function p_(...t){return(...e)=>{for(let n of t)typeof n=="function"&&n(...e)}}function Zme(){return J4(/^Mac/)}function Xme(){return J4(/^iPhone/)}function Qme(){return J4(/^iPad/)||Zme()&&navigator.maxTouchPoints>1}function Jz(){return Xme()||Qme()}function J4(t){return typeof window<"u"&&window.navigator!=null?t.test(window.navigator.platform):void 0}const wk=typeof document<"u"&&window.visualViewport;function FM(t){let e=window.getComputedStyle(t);return/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY)}function Yz(t){for(FM(t)&&(t=t.parentElement);t&&!FM(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}const e0e=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let u2=0,xk;function t0e(t={}){let{isDisabled:e}=t;Yme(()=>{if(!e)return u2++,u2===1&&(Jz()?xk=r0e():xk=n0e()),()=>{u2--,u2===0&&xk()}},[e])}function n0e(){return p_(Zz(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`))}function r0e(){let t,e=0,n=u=>{t=Yz(u.target),!(t===document.documentElement&&t===document.body)&&(e=u.changedTouches[0].pageY)},r=u=>{if(!t||t===document.documentElement||t===document.body){u.preventDefault();return}let f=u.changedTouches[0].pageY,h=t.scrollTop,p=t.scrollHeight-t.clientHeight;p!==0&&((h<=0&&f>e||h>=p&&f<e)&&u.preventDefault(),e=f)},i=u=>{let f=u.target;g_(f)&&f!==document.activeElement&&(u.preventDefault(),f.style.transform="translateY(-2000px)",f.focus(),requestAnimationFrame(()=>{f.style.transform=""}))},s=u=>{let f=u.target;g_(f)&&(f.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{f.style.transform="",wk&&(wk.height<window.innerHeight?requestAnimationFrame(()=>{zM(f)}):wk.addEventListener("resize",()=>zM(f),{once:!0}))}))},o=()=>{window.scrollTo(0,0)},a=window.pageXOffset,l=window.pageYOffset,c=p_(Zz(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let d=p_(Zm(document,"touchstart",n,{passive:!1,capture:!0}),Zm(document,"touchmove",r,{passive:!1,capture:!0}),Zm(document,"touchend",i,{passive:!1,capture:!0}),Zm(document,"focus",s,!0),Zm(window,"scroll",o));return()=>{c(),d(),window.scrollTo(a,l)}}function Zz(t,e,n){let r=t.style[e];return t.style[e]=n,()=>{t.style[e]=r}}function Zm(t,e,n,r){return t.addEventListener(e,n,r),()=>{t.removeEventListener(e,n,r)}}function zM(t){let e=document.scrollingElement||document.documentElement;for(;t&&t!==e;){let n=Yz(t);if(n!==document.documentElement&&n!==document.body&&n!==t){let r=n.getBoundingClientRect().top,i=t.getBoundingClientRect().top,s=t.getBoundingClientRect().bottom;const o=n.getBoundingClientRect().bottom;s>o&&(n.scrollTop+=i-r)}t=n.parentElement}}function g_(t){return t instanceof HTMLInputElement&&!e0e.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}function i0e(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function s0e(...t){return e=>t.forEach(n=>i0e(n,e))}function Xz(...t){return S.useCallback(s0e(...t),t)}let Xm=null;function o0e({isOpen:t,modal:e,nested:n,hasBeenOpened:r,preventScrollRestoration:i,noBodyStyles:s}){const[o,a]=Le.useState(()=>typeof window<"u"?window.location.href:""),l=Le.useRef(0),c=Le.useCallback(()=>{if(Xm===null&&t&&!s){Xm={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:u,innerHeight:f}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-l.current}px`,left:`${-u}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const h=f-window.innerHeight;h&&l.current>=f&&(document.body.style.top=`${-(l.current+h)}px`)}),300)}},[t]),d=Le.useCallback(()=>{if(Xm!==null&&!s){const u=-parseInt(document.body.style.top,10),f=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Xm),window.requestAnimationFrame(()=>{if(i&&o!==window.location.href){a(window.location.href);return}window.scrollTo(f,u)}),Xm=null}},[o]);return Le.useEffect(()=>{function u(){l.current=window.scrollY}return u(),window.addEventListener("scroll",u),()=>{window.removeEventListener("scroll",u)}},[]),Le.useEffect(()=>{n||!r||(t?(!window.matchMedia("(display-mode: standalone)").matches&&c(),e||window.setTimeout(()=>{d()},500)):d())},[t,r,o,e,n,c,d]),{restorePositionSetting:d}}const Qz=new WeakMap;function rr(t,e,n=!1){if(!t||!(t instanceof HTMLElement))return;let r={};Object.entries(e).forEach(([i,s])=>{if(i.startsWith("--")){t.style.setProperty(i,s);return}r[i]=t.style[i],t.style[i]=s}),!n&&Qz.set(t,r)}function d2(t,e){if(!t||!(t instanceof HTMLElement))return;let n=Qz.get(t);n&&(e?t.style[e]=n[e]:Object.entries(n).forEach(([r,i])=>{t.style[r]=i}))}const Wr=t=>{switch(t){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return t}};function f2(t,e){if(!t)return null;const n=window.getComputedStyle(t),r=n.transform||n.webkitTransform||n.mozTransform;let i=r.match(/^matrix3d\((.+)\)$/);return i?parseFloat(i[1].split(", ")[Wr(e)?13:12]):(i=r.match(/^matrix\((.+)\)$/),i?parseFloat(i[1].split(", ")[Wr(e)?5:4]):null)}function a0e(t){return 8*(Math.log(t+1)-2)}const Vn={DURATION:.5,EASE:[.32,.72,0,1]},eB=.4;function tB(t){const e=Le.useRef(t);return Le.useEffect(()=>{e.current=t}),Le.useMemo(()=>(...n)=>e.current==null?void 0:e.current.call(e,...n),[])}function l0e({defaultProp:t,onChange:e}){const n=Le.useState(t),[r]=n,i=Le.useRef(r),s=tB(e);return Le.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}function c0e({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=l0e({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=tB(n),l=Le.useCallback(c=>{if(s){const u=typeof c=="function"?c(t):c;u!==t&&a(u)}else i(c)},[s,t,i,a]);return[o,l]}function u0e({activeSnapPointProp:t,setActiveSnapPointProp:e,snapPoints:n,drawerRef:r,overlayRef:i,fadeFromIndex:s,onSnapPointChange:o,direction:a="bottom"}){const[l,c]=c0e({prop:t,defaultProp:n==null?void 0:n[0],onChange:e}),d=Le.useMemo(()=>l===(n==null?void 0:n[n.length-1])||null,[n,l]),u=n&&n.length>0&&(s||s===0)&&!Number.isNaN(s)&&n[s]===l||!n,f=Le.useMemo(()=>n==null?void 0:n.findIndex(w=>w===l),[n,l]),h=Le.useMemo(()=>{var w;return(w=n==null?void 0:n.map(C=>{const P=typeof window<"u",O=typeof C=="string";let T=0;if(O&&(T=parseInt(C,10)),Wr(a)){const D=O?T:P?C*window.innerHeight:0;return P?a==="bottom"?window.innerHeight-D:-window.innerHeight+D:D}const M=O?T:P?C*window.innerWidth:0;return P?a==="right"?window.innerWidth-M:-window.innerWidth+M:M}))!=null?w:[]},[n]),p=Le.useMemo(()=>f!==null?h==null?void 0:h[f]:null,[h,f]),g=Le.useCallback(w=>{var C;const P=(C=h==null?void 0:h.findIndex(O=>O===w))!=null?C:null;o(P),rr(r.current,{transition:`transform ${Vn.DURATION}s cubic-bezier(${Vn.EASE.join(",")})`,transform:Wr(a)?`translate3d(0, ${w}px, 0)`:`translate3d(${w}px, 0, 0)`}),h&&P!==h.length-1&&P!==s?rr(i.current,{transition:`opacity ${Vn.DURATION}s cubic-bezier(${Vn.EASE.join(",")})`,opacity:"0"}):rr(i.current,{transition:`opacity ${Vn.DURATION}s cubic-bezier(${Vn.EASE.join(",")})`,opacity:"1"}),c(P!==null?n==null?void 0:n[P]:null)},[r.current,n,h,s,i,c]);Le.useEffect(()=>{if(l||t){var w;const C=(w=n==null?void 0:n.findIndex(P=>P===t||P===l))!=null?w:-1;h&&C!==-1&&typeof h[C]=="number"&&g(h[C])}},[l,t,n,h,g]);function b({draggedDistance:w,closeDrawer:C,velocity:P,dismissible:O}){if(s===void 0)return;const T=a==="bottom"||a==="right"?(p??0)-w:(p??0)+w,M=f===s-1,D=f===0,I=w>0;if(M&&rr(i.current,{transition:`opacity ${Vn.DURATION}s cubic-bezier(${Vn.EASE.join(",")})`}),P>2&&!I){O?C():g(h[0]);return}if(P>2&&I&&h&&n){g(h[n.length-1]);return}const R=h==null?void 0:h.reduce((H,z)=>typeof H!="number"||typeof z!="number"?H:Math.abs(z-T)<Math.abs(H-T)?z:H),$=Wr(a)?window.innerHeight:window.innerWidth;if(P>eB&&Math.abs(w)<$*.4){const H=I?1:-1;if(H>0&&d){g(h[n.length-1]);return}if(D&&H<0&&O&&C(),f===null)return;g(h[f+H]);return}g(R)}function v({draggedDistance:w}){if(p===null)return;const C=a==="bottom"||a==="right"?p-w:p+w;(a==="bottom"||a==="right")&&C<h[h.length-1]||(a==="top"||a==="left")&&C>h[h.length-1]||rr(r.current,{transform:Wr(a)?`translate3d(0, ${C}px, 0)`:`translate3d(${C}px, 0, 0)`})}function x(w,C){if(!n||typeof f!="number"||!h||s===void 0)return null;const P=f===s-1;if(f>=s&&C)return 0;if(P&&!C)return 1;if(!u&&!P)return null;const T=P?f+1:f-1,M=P?h[T]-h[T-1]:h[T+1]-h[T],D=w/Math.abs(M);return P?1-D:D}return{isLastSnapPoint:d,activeSnapPoint:l,shouldFade:u,getPercentageDragged:x,setActiveSnapPoint:c,activeSnapPointIndex:f,onRelease:b,onDrag:v,snapPointsOffset:h}}const d0e=.25,f0e=100,BM=8,h2=16,UM=26,Sk="vaul-dragging";function h0e({open:t,onOpenChange:e,children:n,shouldScaleBackground:r,onDrag:i,onRelease:s,snapPoints:o,nested:a=!1,setBackgroundColorOnScale:l=!0,closeThreshold:c=d0e,scrollLockTimeout:d=f0e,dismissible:u=!0,handleOnly:f=!1,fadeFromIndex:h=o&&o.length-1,activeSnapPoint:p,setActiveSnapPoint:g,fixed:b,modal:v=!0,onClose:x,noBodyStyles:w,direction:C="bottom",preventScrollRestoration:P=!0,disablePreventScroll:O=!1}){var T;const[M=!1,D]=Le.useState(!1),[I,R]=Le.useState(!1),[$,H]=Le.useState(!1),[z,ee]=Le.useState(!1),[ce,le]=Le.useState(!1),[te,Z]=Le.useState(!1),de=Le.useRef(null),Ce=Le.useRef(null),F=Le.useRef(null),X=Le.useRef(null),re=Le.useRef(null),ue=Le.useRef(!1),he=Le.useRef(null),fe=Le.useRef(0),be=Le.useRef(!1),pe=Le.useRef(0),me=Le.useRef(null),_e=Le.useRef(((T=me.current)==null?void 0:T.getBoundingClientRect().height)||0),Te=Le.useRef(0),je=Le.useCallback(nt=>{o&&nt===Fe.length-1&&(Ce.current=new Date)},[]),{activeSnapPoint:Qe,activeSnapPointIndex:ne,setActiveSnapPoint:V,onRelease:Re,snapPointsOffset:Fe,onDrag:K,shouldFade:_,getPercentageDragged:A}=u0e({snapPoints:o,activeSnapPointProp:p,setActiveSnapPointProp:g,drawerRef:me,fadeFromIndex:h,overlayRef:de,onSnapPointChange:je,direction:C});t0e({isDisabled:!M||ce||!v||te||!I||O});const{restorePositionSetting:j}=o0e({isOpen:M,modal:v,nested:a,hasBeenOpened:I,preventScrollRestoration:P,noBodyStyles:w});function oe(){return(window.innerWidth-UM)/window.innerWidth}function ye(nt){var ct;!u&&!o||me.current&&!me.current.contains(nt.target)||(_e.current=((ct=me.current)==null?void 0:ct.getBoundingClientRect().height)||0,le(!0),F.current=new Date,Jz()&&window.addEventListener("touchend",()=>ue.current=!1,{once:!0}),nt.target.setPointerCapture(nt.pointerId),fe.current=Wr(C)?nt.clientY:nt.clientX)}function Ee(nt,ct){var ln;let dt=nt;const Cn=(ln=window.getSelection())==null?void 0:ln.toString(),Ft=me.current?f2(me.current,C):null,Kn=new Date;if(dt.hasAttribute("data-vaul-no-drag")||dt.closest("[data-vaul-no-drag]"))return!1;if(C==="right"||C==="left")return!0;if(Ce.current&&Kn.getTime()-Ce.current.getTime()<500)return!1;if(Ft!==null&&(C==="bottom"?Ft>0:Ft<0))return!0;if(Cn&&Cn.length>0)return!1;if(re.current&&Kn.getTime()-re.current.getTime()<d&&Ft===0||ct)return re.current=Kn,!1;for(;dt;){if(dt.scrollHeight>dt.clientHeight){if(dt.scrollTop!==0)return re.current=new Date,!1;if(dt.getAttribute("role")==="dialog")return!0}dt=dt.parentNode}return!0}function Ge(nt){if(me.current&&ce){const ct=C==="bottom"||C==="right"?1:-1,ln=(fe.current-(Wr(C)?nt.clientY:nt.clientX))*ct,dt=ln>0,Cn=o&&!u&&!dt;if(Cn&&ne===0)return;const Ft=Math.abs(ln),Kn=document.querySelector("[vaul-drawer-wrapper]");let dr=Ft/_e.current;const wn=A(Ft,dt);if(wn!==null&&(dr=wn),Cn&&dr>=1||!ue.current&&!Ee(nt.target,dt))return;if(me.current.classList.add(Sk),ue.current=!0,rr(me.current,{transition:"none"}),rr(de.current,{transition:"none"}),o&&K({draggedDistance:ln}),dt&&!o){const Qt=a0e(ln),Ni=Math.min(Qt*-1,0)*ct;rr(me.current,{transform:Wr(C)?`translate3d(0, ${Ni}px, 0)`:`translate3d(${Ni}px, 0, 0)`});return}const Pt=1-dr;if((_||h&&ne===h-1)&&(i==null||i(nt,dr),rr(de.current,{opacity:`${Pt}`,transition:"none"},!0)),Kn&&de.current&&r){const Qt=Math.min(oe()+dr*(1-oe()),1),Ni=8-dr*8,xr=Math.max(0,14-dr*14);rr(Kn,{borderRadius:`${Ni}px`,transform:Wr(C)?`scale(${Qt}) translate3d(0, ${xr}px, 0)`:`scale(${Qt}) translate3d(${xr}px, 0, 0)`,transition:"none"},!0)}if(!o){const Qt=Ft*ct;rr(me.current,{transform:Wr(C)?`translate3d(0, ${Qt}px, 0)`:`translate3d(${Qt}px, 0, 0)`})}}}Le.useEffect(()=>()=>{Be(!1),j()},[]),Le.useEffect(()=>{var nt;function ct(){if(!me.current)return;const ln=document.activeElement;if(g_(ln)||be.current){var dt;const Cn=((dt=window.visualViewport)==null?void 0:dt.height)||0;let Ft=window.innerHeight-Cn;const Kn=me.current.getBoundingClientRect().height||0;Te.current||(Te.current=Kn);const dr=me.current.getBoundingClientRect().top;if(Math.abs(pe.current-Ft)>60&&(be.current=!be.current),o&&o.length>0&&Fe&&ne){const wn=Fe[ne]||0;Ft+=wn}if(pe.current=Ft,Kn>Cn||be.current){const wn=me.current.getBoundingClientRect().height;let Pt=wn;wn>Cn&&(Pt=Cn-UM),b?me.current.style.height=`${wn-Math.max(Ft,0)}px`:me.current.style.height=`${Math.max(Pt,Cn-dr)}px`}else me.current.style.height=`${Te.current}px`;o&&o.length>0&&!be.current?me.current.style.bottom="0px":me.current.style.bottom=`${Math.max(Ft,0)}px`}}return(nt=window.visualViewport)==null||nt.addEventListener("resize",ct),()=>{var ln;return(ln=window.visualViewport)==null?void 0:ln.removeEventListener("resize",ct)}},[ne,o,Fe]);function Ze(){me.current&&(tt(),x==null||x(),rr(me.current,{transform:Wr(C)?`translate3d(0, ${C==="bottom"?"100%":"-100%"}, 0)`:`translate3d(${C==="right"?"100%":"-100%"}, 0, 0)`,transition:`transform ${Vn.DURATION}s cubic-bezier(${Vn.EASE.join(",")})`}),rr(de.current,{opacity:"0",transition:`opacity ${Vn.DURATION}s cubic-bezier(${Vn.EASE.join(",")})`}),Be(!1),setTimeout(()=>{H(!1),D(!1)},300),setTimeout(()=>{o&&V(o[0])},Vn.DURATION*1e3))}Le.useEffect(()=>{if(!M&&r){const nt=setTimeout(()=>{d2(document.body)},200);return()=>clearTimeout(nt)}},[M,r]),Le.useLayoutEffect(()=>{t?(D(!0),R(!0)):Ze()},[t]),Le.useEffect(()=>{z&&(e==null||e(M))},[M]),Le.useEffect(()=>{ee(!0)},[]);function bt(){if(!me.current)return;const nt=document.querySelector("[vaul-drawer-wrapper]"),ct=f2(me.current,C);rr(me.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${Vn.DURATION}s cubic-bezier(${Vn.EASE.join(",")})`}),rr(de.current,{transition:`opacity ${Vn.DURATION}s cubic-bezier(${Vn.EASE.join(",")})`,opacity:"1"}),r&&ct&&ct>0&&M&&rr(nt,{borderRadius:`${BM}px`,overflow:"hidden",...Wr(C)?{transform:`scale(${oe()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${oe()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${Vn.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Vn.EASE.join(",")})`},!0)}function tt(){!ce||!me.current||(me.current.classList.remove(Sk),ue.current=!1,le(!1),X.current=new Date)}function rt(nt){if(!ce||!me.current)return;me.current.classList.remove(Sk),ue.current=!1,le(!1),X.current=new Date;const ct=f2(me.current,C);if(!Ee(nt.target,!1)||!ct||Number.isNaN(ct)||F.current===null)return;const ln=X.current.getTime()-F.current.getTime(),dt=fe.current-(Wr(C)?nt.clientY:nt.clientX),Cn=Math.abs(dt)/ln;if(Cn>.05&&(Z(!0),setTimeout(()=>{Z(!1)},200)),o){Re({draggedDistance:dt*(C==="bottom"||C==="right"?1:-1),closeDrawer:Ze,velocity:Cn,dismissible:u}),s==null||s(nt,!0);return}if(C==="bottom"||C==="right"?dt>0:dt<0){bt(),s==null||s(nt,!0);return}if(Cn>eB){Ze(),s==null||s(nt,!1);return}var Ft;const Kn=Math.min((Ft=me.current.getBoundingClientRect().height)!=null?Ft:0,window.innerHeight);if(ct>=Kn*c){Ze(),s==null||s(nt,!1);return}s==null||s(nt,!0),bt()}Le.useEffect(()=>{M&&(rr(document.documentElement,{scrollBehavior:"auto"}),Ce.current=new Date,Be(!0))},[M]),Le.useEffect(()=>{if(me.current&&$){var nt;const ct=me==null||(nt=me.current)==null?void 0:nt.querySelectorAll("*");ct==null||ct.forEach(ln=>{const dt=ln;(dt.scrollHeight>dt.clientHeight||dt.scrollWidth>dt.clientWidth)&&dt.classList.add("vaul-scrollable")})}},[$]);function Be(nt){const ct=document.querySelector("[vaul-drawer-wrapper]");!ct||!r||(nt?(l&&(w||(rr(document.body,{background:document.body.style.backgroundColor||document.body.style.background}),rr(document.body,{background:"black"},!0))),rr(ct,{borderRadius:`${BM}px`,overflow:"hidden",...Wr(C)?{transform:`scale(${oe()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${oe()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${Vn.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Vn.EASE.join(",")})`})):(d2(ct,"overflow"),d2(ct,"transform"),d2(ct,"borderRadius"),rr(ct,{transitionProperty:"transform, border-radius",transitionDuration:`${Vn.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Vn.EASE.join(",")})`})))}function In(nt){const ct=nt?(window.innerWidth-h2)/window.innerWidth:1,ln=nt?-16:0;he.current&&window.clearTimeout(he.current),rr(me.current,{transition:`transform ${Vn.DURATION}s cubic-bezier(${Vn.EASE.join(",")})`,transform:`scale(${ct}) translate3d(0, ${ln}px, 0)`}),!nt&&me.current&&(he.current=setTimeout(()=>{const dt=f2(me.current,C);rr(me.current,{transition:"none",transform:Wr(C)?`translate3d(0, ${dt}px, 0)`:`translate3d(${dt}px, 0, 0)`})},500))}function Ht(nt,ct){if(ct<0)return;const ln=Wr(C)?window.innerHeight:window.innerWidth,dt=(ln-h2)/ln,Cn=dt+ct*(1-dt),Ft=-16+ct*h2;rr(me.current,{transform:Wr(C)?`scale(${Cn}) translate3d(0, ${Ft}px, 0)`:`scale(${Cn}) translate3d(${Ft}px, 0, 0)`,transition:"none"})}function Tr(nt,ct){const ln=Wr(C)?window.innerHeight:window.innerWidth,dt=ct?(ln-h2)/ln:1,Cn=ct?-16:0;ct&&rr(me.current,{transition:`transform ${Vn.DURATION}s cubic-bezier(${Vn.EASE.join(",")})`,transform:Wr(C)?`scale(${dt}) translate3d(0, ${Cn}px, 0)`:`scale(${dt}) translate3d(${Cn}px, 0, 0)`})}return Le.createElement(q4,{modal:v,onOpenChange:nt=>{if(t!==void 0){e==null||e(nt);return}nt?(R(!0),D(nt)):Ze()},open:M},Le.createElement(Kz.Provider,{value:{visible:$,activeSnapPoint:Qe,snapPoints:o,setActiveSnapPoint:V,drawerRef:me,overlayRef:de,scaleBackground:Be,onOpenChange:e,onPress:ye,setVisible:H,onRelease:rt,onDrag:Ge,dismissible:u,handleOnly:f,isOpen:M,isDragging:ce,shouldFade:_,closeDrawer:Ze,onNestedDrag:Ht,onNestedOpenChange:In,onNestedRelease:Tr,keyboardIsOpen:be,openProp:t,modal:v,snapPointsOffset:Fe,direction:C}},n))}const p0e=250,g0e=120,m0e=Le.forwardRef(function({preventCycle:t=!1,children:e,...n},r){const{visible:i,closeDrawer:s,isDragging:o,snapPoints:a,activeSnapPoint:l,setActiveSnapPoint:c,dismissible:d,handleOnly:u,onPress:f,onDrag:h}=K4(),p=Le.useRef(null),g=Le.useRef(!1);function b(){if(g.current){w();return}window.setTimeout(()=>{v()},g0e)}function v(){if(o||t||g.current){w();return}if(w(),(!a||a.length===0)&&d){s();return}if(l===a[a.length-1]&&d){s();return}const P=a.findIndex(T=>T===l);if(P===-1)return;const O=a[P+1];c(O)}function x(){p.current=window.setTimeout(()=>{g.current=!0},p0e)}function w(){window.clearTimeout(p.current),g.current=!1}return Le.createElement("div",{onClick:b,onDoubleClick:()=>{g.current=!0,s()},onPointerCancel:w,onPointerDown:C=>{u&&f(C),x()},onPointerMove:C=>{u&&h(C)},ref:r,"vaul-drawer-visible":i?"true":"false","vaul-handle":"","aria-hidden":"true",...n},Le.createElement("span",{"vaul-handle-hitarea":"","aria-hidden":"true"},e))});m0e.displayName="Drawer.Handle";const nB=Le.forwardRef(function({children:t,...e},n){const{overlayRef:r,snapPoints:i,onRelease:s,shouldFade:o,isOpen:a,visible:l}=K4(),c=Xz(n,r),d=i&&i.length>0;return Le.createElement(Py,{onMouseUp:s,ref:c,"vaul-drawer-visible":l?"true":"false","vaul-overlay":"","vaul-snap-points":a&&d?"true":"false","vaul-snap-points-overlay":a&&o?"true":"false",...e})});nB.displayName="Drawer.Overlay";const rB=Le.forwardRef(function({onOpenAutoFocus:t,onPointerDownOutside:e,onAnimationEnd:n,style:r,...i},s){const{drawerRef:o,onPress:a,onRelease:l,onDrag:c,dismissible:d,keyboardIsOpen:u,snapPointsOffset:f,visible:h,closeDrawer:p,modal:g,openProp:b,onOpenChange:v,setVisible:x,handleOnly:w,direction:C}=K4(),P=Xz(s,o),O=Le.useRef(null),T=Le.useRef(!1),M=(D,I,R=0)=>{if(T.current)return!0;const $=Math.abs(D.y),H=Math.abs(D.x),z=H>$,ee=["bottom","right"].includes(I)?1:-1;if(I==="left"||I==="right"){if(!(D.x*ee<0)&&H>=0&&H<=R)return z}else if(!(D.y*ee<0)&&$>=0&&$<=R)return!z;return T.current=!0,!0};return Le.useEffect(()=>{x(!0)},[]),Le.createElement(Ty,{"vaul-drawer":"","vaul-drawer-direction":C,"vaul-drawer-visible":h?"true":"false",...i,ref:P,style:f&&f.length>0?{"--snap-point-height":`${f[0]}px`,...r}:r,onOpenAutoFocus:D=>{if(t)t(D);else{var I;D.preventDefault(),(I=o.current)==null||I.focus()}},onPointerDown:D=>{w||(i.onPointerDown==null||i.onPointerDown.call(i,D),O.current={x:D.clientX,y:D.clientY},a(D))},onPointerDownOutside:D=>{if(e==null||e(D),!g||D.defaultPrevented){D.preventDefault();return}u.current&&(u.current=!1),D.preventDefault(),v==null||v(!1),!(!d||b!==void 0)&&p()},onFocusOutside:D=>{if(!g){D.preventDefault();return}},onEscapeKeyDown:D=>{if(!g){D.preventDefault();return}},onPointerMove:D=>{if(w||(i.onPointerMove==null||i.onPointerMove.call(i,D),!O.current))return;const I=D.clientY-O.current.y,R=D.clientX-O.current.x,$=D.pointerType==="touch"?10:2;M({x:R,y:I},C,$)?c(D):(Math.abs(R)>$||Math.abs(I)>$)&&(O.current=null)},onPointerUp:D=>{i.onPointerUp==null||i.onPointerUp.call(i,D),O.current=null,T.current=!1,l(D)}})});rB.displayName="Drawer.Content";const Il={Root:h0e,Content:rB,Overlay:nB,Trigger:qme,Portal:G4,Title:Ny,Description:My},iB=({shouldScaleBackground:t=!0,...e})=>y.jsx(Il.Root,{shouldScaleBackground:t,...e});iB.displayName="Drawer";const y0e=Il.Trigger,v0e=Il.Portal,sB=S.forwardRef(({className:t,...e},n)=>y.jsx(Il.Overlay,{ref:n,className:qe("fixed inset-0 z-50 bg-black/80",t),...e}));sB.displayName=Il.Overlay.displayName;const oB=S.forwardRef(({className:t,children:e,...n},r)=>y.jsxs(v0e,{children:[y.jsx(sB,{}),y.jsxs(Il.Content,{ref:r,className:qe("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",t),...n,children:[y.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),e]})]}));oB.displayName="DrawerContent";const aB=({className:t,...e})=>y.jsx("div",{className:qe("grid gap-1.5 p-4 text-center sm:text-left",t),...e});aB.displayName="DrawerHeader";const lB=({className:t,...e})=>y.jsx("div",{className:qe("mt-auto flex flex-col gap-2 p-4",t),...e});lB.displayName="DrawerFooter";const cB=S.forwardRef(({className:t,...e},n)=>y.jsx(Il.Title,{ref:n,className:qe("text-lg font-semibold leading-none tracking-tight",t),...e}));cB.displayName=Il.Title.displayName;const uB=S.forwardRef(({className:t,...e},n)=>y.jsx(Il.Description,{ref:n,className:qe("text-sm text-muted-foreground",t),...e}));uB.displayName=Il.Description.displayName;function b0e({open:t,onOpenChange:e,title:n,description:r,className:i,children:s,footer:o}){return Vge("(min-width: 768px)")?y.jsx(Gme,{open:t,onOpenChange:e,children:y.jsxs(Hz,{className:i,onEscapeKeyDown:()=>{e&&e(!1)},children:[y.jsxs(Vz,{children:[y.jsx(qz,{children:n}),y.jsx(Gz,{children:r})]}),s,y.jsx(Wz,{children:o})]})}):y.jsxs(iB,{open:t,onOpenChange:e,children:[y.jsx(y0e,{}),y.jsxs(oB,{className:i,onEscapeKeyDown:()=>{e&&e(!1)},children:[y.jsxs(aB,{className:"text-left",children:[y.jsx(cB,{children:n}),y.jsx(uB,{children:r})]}),y.jsx("div",{className:"px-4",children:s}),y.jsx(lB,{className:"flex-col-reverse",children:o})]})]})}const w0e=({item:t,id:e,level:n=0,levelIndent:r=24,defaultIndent:i=14,selections:s=[],onClick:o,className:a,children:l,...c})=>{const[d,u]=S.useState(!0),f=p=>{u(!d),p.stopPropagation()},h=s.includes(e);return y.jsxs("li",{"data-id":e,"data-state":d,"data-level":n,"data-selected":h?"on":"off",className:qe("text-sm",h&&"bg-accent",a),...c,children:[y.jsxs("div",{className:qe("flex flex-row items-center bg-background hover:bg-muted",h&&"bg-muted"),style:{paddingLeft:i+n*r},onClick:o,children:[y.jsx("div",{className:"h-4 w-4 mr-2 cursor-pointer flex justify-center items-center",onClick:f,children:Array.isArray(l)&&l.length>0&&(d?y.jsx(aoe,{className:"text-muted-foreground",size:16}):y.jsx(ooe,{className:"text-muted-foreground",size:16}))}),y.jsx("div",{className:"cursor-default select-none",onDoubleClick:f,children:t})]}),y.jsx("ul",{className:qe("m-0 list-none p-0",d&&"hidden"),children:l})]})},x0e=({className:t,children:e})=>y.jsx("ul",{className:qe("m-0 list-none p-0 text-sm",t),children:e}),dB=({level:t,shape:e,selections:n,onSelect:r})=>{var i;return y.jsx(w0e,{id:e.id,level:t,levelIndent:24,defaultIndent:14,selections:n.map(s=>s.id),item:y.jsxs("div",{className:"flex flex-row items-center h-8",children:[y.jsxs("div",{className:"h-4 w-4 mr-2",children:[e.type==="Doc"&&y.jsx(Aoe,{size:16}),e.type==="Page"&&y.jsx(Eoe,{size:16}),e.type==="Rectangle"&&y.jsx(e$,{size:16}),e.type==="Ellipse"&&y.jsx(G9,{size:16}),e.type==="Text"&&y.jsx(t$,{size:16}),e.type==="Group"&&y.jsx(foe,{size:16}),e.type==="Icon"&&y.jsx(Q9,{size:16}),e.type==="Connector"&&y.jsx(n$,{size:16}),e.type==="Line"&&y.jsx(r$,{size:16}),e.type==="Freehand"&&y.jsx(Z9,{size:16}),e.type==="Highlighter"&&y.jsx(J9,{size:16}),e.type==="Embed"&&y.jsx(X9,{size:16}),e.type==="Frame"&&y.jsx(K9,{size:16}),e.type==="Mirror"&&y.jsx(H9,{size:16})]}),e.proto&&y.jsx(coe,{size:16,className:"mr-2"}),y.jsx("div",{className:"truncate",children:e.name||y.jsxs("span",{className:"text-muted-foreground",children:["(",e.type,")"]})})]}),onClick:s=>{r&&r(e)},children:(i=e==null?void 0:e.children)==null?void 0:i.toReversed().map(s=>y.jsx(dB,{level:t+1,shape:s,selections:n,onSelect:r},s.id))})},fB=({shapes:t,selections:e,onSelect:n})=>y.jsx(x0e,{children:t==null?void 0:t.toReversed().map(r=>y.jsx(dB,{level:0,shape:r,selections:e,onSelect:n},r.id))}),Y4=k$()(C$(t=>({open:!1,doc:null,selected:null,onConfirm:void 0,show:e=>{t(n=>({open:!0,onConfirm:void 0,...e}))},select:e=>{t(n=>({selected:e}))},close:()=>{t(e=>({open:!1}))}})));function S0e(){const{open:t,doc:e,selected:n,onConfirm:r,select:i,close:s}=Y4(),o=async()=>{r&&await r(n),s()};return y.jsx(b0e,{title:"Select shape",description:"Select a shape.",open:t,onOpenChange:a=>{},className:"max-w-[432px]",footer:y.jsxs(y.Fragment,{children:[y.jsx(Nt,{size:"sm",variant:"outline",onClick:()=>s(),children:"Cancel"}),y.jsx(Nt,{size:"sm",onClick:o,children:"OK"})]}),children:y.jsx("div",{className:"w-full",children:y.jsx(kg,{className:"h-64",children:y.jsx(fB,{shapes:(e==null?void 0:e.children.toReversed())??[],selections:n?[n]:[],onSelect:a=>i(a)})})})})}const k0e=({doc:t,shapes:e,onChange:n})=>{const r=Y4(s=>s.show),i=e[0].reference;return y.jsx(Gr,{title:"Reference",borderTop:!0,more:y.jsx(Nt,{variant:"ghost",className:"h-6 w-6 px-0 text-muted-foreground",children:y.jsx(uh,{size:16})}),children:y.jsxs("div",{className:"w-full h-8 flex items-center justify-between text-sm ",children:[y.jsx("div",{className:"bg-accent py-1 px-2 rounded-md text-muted-foreground",children:i?i.name:"null"}),y.jsxs("div",{className:"flex items-center",children:[y.jsx(Nt,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:async()=>{await r({doc:t,onConfirm:async s=>{n({reference:s})}})},children:y.jsx(Jg,{size:16})}),y.jsx(Nt,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>{n&&n({reference:null})},children:y.jsx(Dx,{size:16})})]})]})})},C0e=({shapes:t,onChange:e})=>{const n=Ot(t.map(o=>o.viewWidth)),r=Ot(t.map(o=>o.viewHeight)),i=Ot(t.map(o=>o.data)),s=i?JSON.stringify(i,null,2):"";return y.jsxs(Gr,{title:"Vector Graphic",borderTop:!0,children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mn,{content:"Width",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mt,{htmlFor:"shape-width-field",className:"flex-none px-1",children:"VW"}),y.jsx(ir,{id:"shape-width-field",className:"flex-grow h-8",value:n,onChange:o=>e({viewWidth:o})})]})}),y.jsx(Mn,{content:"Height",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mt,{htmlFor:"shape-height-field",className:"flex-none px-1",children:"VH"}),y.jsx(ir,{id:"shape-height-field",className:"flex-grow h-8",value:r,onChange:o=>e({viewHeight:o})})]})})]}),y.jsxs("div",{className:"flex flex-col gap-2",children:[y.jsx(Mt,{htmlFor:"vg-data-field",className:"font-normal",children:"Data"}),y.jsx(Kf,{id:"vg-data-field",value:s,rows:2,onChange:o=>{try{const a=JSON.parse(o);e({data:a})}catch(a){console.error(a)}}})]})]})},_0e=({shapes:t,onChange:e})=>{const n=Ot(t.map(o=>o.shadow)),r=Ot(t.map(o=>o.shadowColor)),i=Ot(t.map(o=>o.shadowOffset[0])),s=Ot(t.map(o=>o.shadowOffset[1]));return y.jsxs(Gr,{title:"Shadow",borderTop:!0,more:y.jsx("div",{children:y.jsx(Tg,{checked:n,onCheckedChange:o=>e({shadow:o})})}),children:[y.jsx(Mn,{content:"Shadow Color",children:y.jsx(n5,{value:r,onValueChange:o=>e({shadowColor:o})})}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mn,{content:"OffsetX",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mt,{htmlFor:"shadow-offset-x",className:"flex-none px-1",children:"X"}),y.jsx(ir,{id:"shadow-offset-x",className:"flex-grow h-8",value:i,onChange:o=>e({shadowOffset:[o,s??0]})})]})}),y.jsx(Mn,{content:"OffsetX",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Mt,{htmlFor:"shadow-offset-y",className:"flex-none px-1",children:"Y"}),y.jsx(ir,{id:"shadow-offset-y",className:"flex-grow h-8",value:s,onChange:o=>e({shadowOffset:[i??0,o]})})]})})]})]})},A0e=({open:t,onOpenChange:e,page:n,onPageChange:r})=>{const i=n.name,s=JSON.stringify(n.size);return y.jsxs(Gr,{title:"Page",open:t,onOpenChange:e,borderTop:!0,children:[y.jsx("div",{className:"flex flex-col gap-2",children:y.jsx($a,{placeholder:"Name",value:i,onChange:o=>{r({name:o})}})}),y.jsxs("div",{className:"flex items-center justify-between w-full gap-3",children:[y.jsx(Mt,{className:"w-16 whitespace-nowrap",children:"Size"}),y.jsxs(Lc,{value:s,onValueChange:o=>{r&&r({size:JSON.parse(o)})},children:[y.jsx(Tl,{className:"w-full",title:"Font Family",children:y.jsx(Dc,{})}),y.jsxs(Nl,{children:[y.jsx(cr,{value:"null",children:"Infinite"}),y.jsx(cr,{value:"[960,720]",children:"4:3"}),y.jsx(cr,{value:"[960,540]",children:"16:9"})]})]})]})]})},E0e=({doc:t,shapes:e,onChange:n})=>{const r=Y4(s=>s.show),i=e[0]instanceof ah?e[0].subject:null;return y.jsx(Gr,{title:"Mirror",borderTop:!0,more:y.jsx(Nt,{variant:"ghost",className:"h-6 w-6 px-0 text-muted-foreground",children:y.jsx(uh,{size:16})}),children:y.jsxs("div",{className:"w-full h-8 flex items-center justify-between text-sm ",children:[y.jsx("div",{className:"bg-accent py-1 px-2 rounded-md text-muted-foreground",children:i?i.name:"null"}),y.jsxs("div",{className:"flex items-center",children:[y.jsx(Nt,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:async()=>{await r({doc:t,onConfirm:async s=>{n({subject:s})}})},children:y.jsx(Jg,{size:16})}),y.jsx(Nt,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>{n&&n({subject:null})},children:y.jsx(Dx,{size:16})})]})]})})},P0e=({doc:t,currentPage:e,shapes:n,onChange:r,onPageChange:i})=>y.jsx("div",{className:"fixed top-0 right-0 h-full w-[256px] bg-background border-l p-2",children:y.jsxs(p4,{defaultValue:"basic",className:"w-full h-full",children:[y.jsxs(Bx,{className:"grid w-full grid-cols-2",children:[y.jsx(yc,{value:"basic",children:"Basic"}),y.jsx(yc,{value:"advanced",children:"Advanced"})]}),y.jsxs(vc,{value:"basic",className:"h-full",children:[e&&n.length===0&&y.jsx("div",{className:"absolute w-full pr-5",children:y.jsx(A0e,{page:e,onPageChange:i})}),n.length>0?y.jsxs(kg,{className:"h-full w-full",children:[y.jsx(Age,{shapes:n,onChange:r}),y.jsx(Rge,{shapes:n,onChange:r}),y.jsx(Bge,{shapes:n,onChange:r}),n.some(s=>s instanceof ah)&&y.jsx(E0e,{doc:t,shapes:n,onChange:r}),n.some(s=>s instanceof St)&&y.jsxs(y.Fragment,{children:[y.jsx(ffe,{shapes:n,onChange:r}),y.jsx(rpe,{shapes:n,onChange:r})]}),n.some(s=>s instanceof RE)&&y.jsx(Uge,{shapes:n,onChange:r}),n.some(s=>s instanceof Cx)&&y.jsx(Dge,{shapes:n,onChange:r}),n.some(s=>s instanceof OE)&&y.jsx(C0e,{shapes:n,onChange:r}),y.jsx(_0e,{shapes:n,onChange:r}),y.jsx(zge,{shapes:n,onChange:r})]}):y.jsx(md,{message:"No shapes selected"})]}),y.jsx(vc,{value:"advanced",className:"h-full",children:n.length>0?y.jsxs(kg,{className:"h-full w-full",children:[n.length===1&&y.jsxs(y.Fragment,{children:[y.jsx(Ige,{shapes:n,onChange:r}),y.jsx(_ge,{shapes:n,onChange:r}),y.jsx(tge,{shapes:n,onChange:r}),y.jsx(Fge,{shapes:n,onChange:r}),y.jsx(Lge,{shapes:n,onChange:r}),y.jsx(Hge,{doc:t,shapes:n,onChange:r}),y.jsx(k0e,{doc:t,shapes:n,onChange:r})]}),y.jsx(Ege,{shapes:n,onChange:r})]}):y.jsx(md,{message:"No shapes selected"})})]})});function T0e(t,e){const n={"font-family":`'${t.family}'`,"font-style":t.style,"font-weight":t.weight,src:`url('${t.src}') format('truetype')`,...t.unicodeRange&&{"unicode-range":t.unicodeRange},...t.sizeAdjust&&{"size-adjust":t.sizeAdjust}};return`@font-face {
${Object.entries(n).map(([i,s])=>`  ${i}: ${s};`).join(`
`)}
}`}function N0e(t,e){return t.map(n=>T0e(n)).join(`
`)}async function M0e(t){const e=t.map(n=>{const r=`${n.style==="italic"?"italic":""} ${n.weight} 1em '${n.family}'`;return document.fonts.load(r,"Eng123")});await Promise.all(e)}function O0e(t,e){const n=document.createElement("style");n.innerHTML=N0e(t),document.head.appendChild(n)}const R0e=({page:t,onSelect:e})=>{const n=Dl(r=>r.selection);return y.jsx(kg,{className:"h-full w-full",children:y.jsx(fB,{shapes:t?[t]:[],selections:n,onSelect:r=>{e&&e([r])}})})};function Ci(t){this.content=t}Ci.prototype={constructor:Ci,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new Ci(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Ci(n)},addToStart:function(t,e){return new Ci([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Ci(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new Ci(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Ci.from(t),t.size?new Ci(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Ci.from(t),t.size?new Ci(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Ci.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Ci.from=function(t){if(t instanceof Ci)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Ci(e)};function hB(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=hB(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function pB(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,d=Math.min(o.text.length,a.text.length);for(;c<d&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=pB(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}let st=class us{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,n-d),r,i+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new us(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new us(r,i)}cutByIndex(e,n){return e==n?us.empty:e==0&&n==this.content.length?this:new us(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new us(i,s)}addToStart(e){return new us([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new us(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return hB(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return pB(this,e,n,r)}findIndex(e,n=-1){if(e==0)return p2(0,e);if(e==this.size)return p2(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?p2(r+1,o):p2(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return us.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new us(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return us.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new us(n||e,r)}static from(e){if(!e)return us.empty;if(e instanceof us)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new us([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};st.empty=new st([],0);const kk={index:0,offset:0};function p2(t,e){return kk.index=t,kk.offset=e,kk}function Ew(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Ew(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Ew(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Fn=class m_{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ew(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return m_.none;if(e instanceof m_)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Fn.none=[];let Pw=class extends Error{},mt=class up{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=mB(this.content,e+this.openStart,n);return r&&new up(r,this.openStart,this.openEnd)}removeBetween(e,n){return new up(gB(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return up.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new up(st.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new up(e,r,i)}};mt.empty=new mt(st.empty,0,0);function gB(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(gB(s.content,e-i-1,n-i-1)))}function mB(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=mB(o.content,e-s-1,n);return a&&t.replaceChild(i,o.copy(a))}function L0e(t,e,n){if(n.openStart>t.depth)throw new Pw("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Pw("Inconsistent open depths");return yB(t,e,n,0)}function yB(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=yB(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return xf(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=D0e(n,t);return xf(s,bB(t,o,a,e,r))}else return xf(s,Tw(t,e,r))}function vB(t,e){if(!e.type.compatibleContent(t.type))throw new Pw("Cannot join "+e.type.name+" onto "+t.type.name)}function y_(t,e,n){let r=t.node(n);return vB(r,e.node(n)),r}function wf(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function J0(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(wf(t.nodeAfter,r),s++));for(let a=s;a<o;a++)wf(i.child(a),r);e&&e.depth==n&&e.textOffset&&wf(e.nodeBefore,r)}function xf(t,e){return t.type.checkContent(e),t.copy(e)}function bB(t,e,n,r,i){let s=t.depth>i&&y_(t,e,i+1),o=r.depth>i&&y_(n,r,i+1),a=[];return J0(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(vB(s,o),wf(xf(s,bB(t,e,n,r,i+1)),a)):(s&&wf(xf(s,Tw(t,e,i+1)),a),J0(e,n,i,a),o&&wf(xf(o,Tw(n,r,i+1)),a)),J0(r,null,i,a),new st(a)}function Tw(t,e,n){let r=[];if(J0(null,t,n,r),t.depth>n){let i=y_(t,e,n+1);wf(xf(i,Tw(t,e,n+1)),r)}return J0(e,null,n,r),new st(r)}function D0e(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(st.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Y1{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Fn.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Nw(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new Y1(n,r,s)}static resolveCached(e,n){for(let i=0;i<Ck.length;i++){let s=Ck[i];if(s.pos==n&&s.doc==e)return s}let r=Ck[_k]=Y1.resolve(e,n);return _k=(_k+1)%I0e,r}}let Ck=[],_k=0,I0e=12,Nw=class{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}};const $0e=Object.create(null);let Sf=class v_{constructor(e,n,r,i=Fn.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||st.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Ew(this.attrs,n||e.defaultAttrs||$0e)&&Fn.sameSet(this.marks,r||Fn.none)}copy(e=null){return e==this.content?this:new v_(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new v_(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return mt.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new mt(c,i.depth-o,s.depth-o)}replace(e,n,r){return L0e(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Y1.resolveCached(this,e)}resolveNoCache(e){return Y1.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),wB(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=st.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=Fn.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!Fn.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=st.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,i,r)}};Sf.prototype.text=void 0;class Mw extends Sf{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wB(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Mw(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Mw(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function wB(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Zf{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new j0e(e,n);if(r.next==null)return Zf.empty;let i=xB(r);r.next&&r.err("Unexpected trailing text");let s=W0e(V0e(i));return q0e(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return st.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:d,next:u}=o.next[c];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(u)==-1){i.push(u);let f=s(u,a.concat(d));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Zf.empty=new Zf(!0);class j0e{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function xB(t){let e=[];do e.push(F0e(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function F0e(t){let e=[];do e.push(z0e(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function z0e(t){let e=H0e(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=B0e(t,e);else break;return e}function HM(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function B0e(t,e){let n=HM(t),r=n;return t.eat(",")&&(t.next!="}"?r=HM(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function U0e(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.groups.indexOf(e)>-1&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function H0e(t){if(t.eat("(")){let e=xB(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=U0e(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function V0e(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let d=n();i(s(o.expr,l),d),l=d}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let d=n();r(l,d),i(s(o.expr,l),d),l=d}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function SB(t,e){return e-t}function VM(t,e){let n=[];return r(e),n.sort(SB);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function W0e(t){let e=Object.create(null);return n(VM(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<i.length;d++)i[d][0]==a&&(c=i[d][1]);VM(t,l).forEach(d=>{c||i.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let s=e[r.join(",")]=new Zf(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(SB);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function q0e(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function kB(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function CB(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function _B(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new G0e(t[n]);return e}let WM=class AB{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=_B(r.attrs),this.defaultAttrs=kB(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Zf.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:CB(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Sf(this,this.computeAttrs(e),st.from(n),Fn.setFrom(r))}createChecked(e=null,n,r){return n=st.from(n),this.checkContent(n),new Sf(this,this.computeAttrs(e),n,Fn.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=st.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(st.empty,!0);return s?new Sf(this,e,n.append(s),Fn.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Fn.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new AB(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class G0e{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class l5{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=_B(i.attrs),this.excluded=null;let s=kB(this.attrs);this.instance=s?new Fn(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Fn(this,CB(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new l5(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}class K0e{constructor(e){this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Ci.from(e.nodes),n.marks=Ci.from(e.marks||{}),this.nodes=WM.compile(this.spec.nodes,this),this.marks=l5.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;s.contentMatch=r[o]||(r[o]=Zf.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?qM(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:qM(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof WM){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Mw(r,r.defaultAttrs,e,Fn.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Sf.fromJSON(this,e)}markFromJSON(e){return Fn.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function qM(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}let Z4=class b_{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new KM(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new KM(this,n,!0);return r.addAll(e,n.from,n.to),mt.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Z0e(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=JM(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=JM(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new b_(e,b_.schemaRules(e)))}};const EB={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},J0e={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},PB={ol:!0,ul:!0},Ow=1,Rw=2,rb=4;function GM(t,e,n){return e!=null?(e?Ow:0)|(e==="full"?Rw:0):t&&t.whitespace=="pre"?Ow|Rw:n&-5}let g2=class{constructor(e,n,r,i,s,o,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=Fn.none,this.stashMarks=[],this.match=o||(a&rb?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(st.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ow)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=st.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(st.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):Q0e(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!EB.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},KM=class{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,s,o=GM(null,n.preserveWhitespace,0)|(r?rb:0);i?s=new g2(i.type,i.attrs,Fn.none,Fn.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new g2(null,null,Fn.none,Fn.none,!0,null,o):s=new g2(e.schema.topNodeType,null,Fn.none,Fn.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.getAttribute("style");if(!r)return n();let i=this.readStyles(X0e(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);n();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&Rw||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&Ow)r.options&Rw?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;PB.hasOwnProperty(r)&&this.parser.normalizeLists&&Y0e(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(s?s.ignore:J0e.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(EB.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=Fn.none,r=Fn.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),o.consuming===!1)s=o;else break}return[n,r]}addElementByRule(e,n,r){let i,s,o;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(e):i=this.enter(s,n.attrs||null,n.preserveWhitespace)):(o=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,n,r){let i=n||0;for(let s=n?e.childNodes[n]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!n||n.length>o.length)&&(n=o,r=s,!o.length)||s.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=GM(e,i,s.options);s.options&rb&&s.content.length==0&&(o|=rb),this.nodes.push(new g2(e,n,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let d=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!d||d.name!=c&&d.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=e1e(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==n)break}}};function Y0e(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&PB.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function Z0e(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function X0e(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function JM(t){let e={};for(let n in t)e[n]=t[n];return e}function Q0e(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||s.indexOf(d)<0&&o(d))return!0}};if(o(i.contentMatch))return!0}}function e1e(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class cl{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Ak(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],d=this.serializeMark(c,o.isInline,n);d&&(s.push([c,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=cl.renderSpec(Ak(n),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&cl.renderSpec(Ak(r),i(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,a=r?e.createElementNS(r,i):e.createElement(i),l=n[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let d in l)if(l[d]!=null){let u=d.indexOf(" ");u>0?a.setAttributeNS(d.slice(0,u),d.slice(u+1),l[d]):a.setAttribute(d,l[d])}}for(let d=c;d<n.length;d++){let u=n[d];if(u===0){if(d<n.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:h}=cl.renderSpec(e,u,r);if(a.appendChild(f),h){if(o)throw new RangeError("Multiple content holes");o=h}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new cl(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=YM(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return YM(e.marks)}}function YM(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Ak(t){return t.document||window.document}const TB=65535,NB=Math.pow(2,16);function t1e(t,e){return t+e*NB}function ZM(t){return t&TB}function n1e(t){return(t-(t&TB))/NB}const MB=1,OB=2,ib=4,RB=8;let w_=class{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&RB)>0}get deletedBefore(){return(this.delInfo&(MB|ib))>0}get deletedAfter(){return(this.delInfo&(OB|ib))>0}get deletedAcross(){return(this.delInfo&ib)>0}},Xf=class dp{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&dp.empty)return dp.empty}recover(e){let n=0,r=ZM(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+n1e(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],d=this.ranges[a+o],u=l+c;if(e<=u){let f=c?e==l?-1:e==u?1:n:n,h=l+i+(f<0?0:d);if(r)return h;let p=e==(n<0?l:u)?null:t1e(a/3,e-l),g=e==l?OB:e==u?MB:ib;return(n<0?e!=l:e!=u)&&(g|=RB),new w_(h,g,p)}i+=d-c}return r?e+i:new w_(e+i,0,null)}touches(e,n){let r=0,i=ZM(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],d=l+c;if(e<=d&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],d=this.ranges[i+r];e(a,a+c,l,l+d),s+=d-c}}invert(){return new dp(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?dp.empty:new dp(e<0?[0,-e,0]:[0,0,e])}};Xf.empty=new Xf([]);class Jp{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new Jp(this.maps,this.mirror,e,n)}copy(){return new Jp(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Jp;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new w_(e,i,null)}}const Ek=Object.create(null);let es=class{getMap(){return Xf.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Ek[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Ek)throw new RangeError("Duplicate use of step JSON ID "+e);return Ek[e]=n,n.prototype.jsonID=e,n}},gs=class g0{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new g0(e,null)}static fail(e){return new g0(null,e)}static fromReplace(e,n,r,i){try{return g0.ok(e.replace(n,r,i))}catch(s){if(s instanceof Pw)return g0.fail(s.message);throw s}}};function X4(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(X4(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return st.fromArray(r)}let Q4=class m0 extends es{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new mt(X4(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return gs.fromReplace(e,this.from,this.to,s)}invert(){return new Oy(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new m0(n.pos,r.pos,this.mark)}merge(e){return e instanceof m0&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new m0(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new m0(n.from,n.to,e.markFromJSON(n.mark))}};es.jsonID("addMark",Q4);let Oy=class y0 extends es{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new mt(X4(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return gs.fromReplace(e,this.from,this.to,r)}invert(){return new Q4(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new y0(n.pos,r.pos,this.mark)}merge(e){return e instanceof y0&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new y0(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new y0(n.from,n.to,e.markFromJSON(n.mark))}};es.jsonID("removeMark",Oy);let e6=class v0 extends es{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return gs.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return gs.fromReplace(e,this.pos,this.pos+1,new mt(st.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new v0(this.pos,n.marks[i]);return new v0(this.pos,this.mark)}}return new t6(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new v0(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new v0(n.pos,e.markFromJSON(n.mark))}};es.jsonID("addNodeMark",e6);let t6=class x_ extends es{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return gs.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return gs.fromReplace(e,this.pos,this.pos+1,new mt(st.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new e6(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new x_(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new x_(n.pos,e.markFromJSON(n.mark))}};es.jsonID("removeNodeMark",t6);let za=class Jd extends es{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&S_(e,this.from,this.to)?gs.fail("Structure replace would overwrite content"):gs.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Xf([this.from,this.to-this.from,this.slice.size])}invert(e){return new Jd(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Jd(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Jd)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?mt.empty:new mt(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Jd(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?mt.empty:new mt(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Jd(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Jd(n.from,n.to,mt.fromJSON(e,n.slice),!!n.structure)}};es.jsonID("replace",za);let Ys=class sb extends es{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(S_(e,this.from,this.gapFrom)||S_(e,this.gapTo,this.to)))return gs.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return gs.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?gs.fromReplace(e,this.from,this.to,r):gs.fail("Content does not fit in gap")}getMap(){return new Xf([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new sb(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new sb(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new sb(n.from,n.to,n.gapFrom,n.gapTo,mt.fromJSON(e,n.slice),n.insert,!!n.structure)}};es.jsonID("replaceAround",Ys);function S_(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function r1e(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,d)=>{if(!l.isInline)return;let u=l.marks;if(!r.isInSet(u)&&d.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+l.nodeSize,n),p=r.addToSet(u);for(let g=0;g<u.length;g++)u[g].isInSet(p)||(o&&o.to==f&&o.mark.eq(u[g])?o.to=h:i.push(o=new Oy(f,h,u[g])));a&&a.to==f?a.to=h:s.push(a=new Q4(f,h,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function i1e(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof l5){let c=o.marks,d;for(;d=r.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let d=0;d<l.length;d++){let u=l[d],f;for(let h=0;h<i.length;h++){let p=i[h];p.step==s-1&&u.eq(i[h].style)&&(f=p)}f?(f.to=c,f.step=s):i.push({style:u,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new Oy(o.from,o.to,o.style)))}function s1e(t,e,n,r=n.contentMatch){let i=t.doc.nodeAt(e),s=[],o=e+1;for(let a=0;a<i.childCount;a++){let l=i.child(a),c=o+l.nodeSize,d=r.matchType(l.type);if(!d)s.push(new za(o,c,mt.empty));else{r=d;for(let u=0;u<l.marks.length;u++)n.allowsMarkType(l.marks[u].type)||t.step(new Oy(o,c,l.marks[u]));if(l.isText&&!n.spec.code){let u,f=/\r?\n|\r/g,h;for(;u=f.exec(l.text);)h||(h=new mt(st.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),s.push(new za(o+u.index,o+u.index+u[0].length,h))}}o=c}if(!r.validEnd){let a=r.fillBefore(st.empty,!0);t.replace(o,o,new mt(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function o1e(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function rm(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!o1e(i,s,o))break}return null}function a1e(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,d=st.empty,u=0;for(let p=s,g=!1;p>n;p--)g||r.index(p)>0?(g=!0,d=st.from(r.node(p).copy(d)),u++):l--;let f=st.empty,h=0;for(let p=s,g=!1;p>n;p--)g||i.after(p+1)<i.end(p)?(g=!0,f=st.from(i.node(p).copy(f)),h++):c++;t.step(new Ys(l,c,o,a,new mt(d.append(f),u,h),d.size-u,!0))}function n6(t,e,n=null,r=t){let i=l1e(t,e),s=i&&c1e(r,e);return s?i.map(XM).concat({type:e,attrs:n}).concat(s.map(XM)):null}function XM(t){return{type:t,attrs:null}}function l1e(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function c1e(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function u1e(t,e,n){let r=st.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=st.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new Ys(i,s,i,s,new mt(r,0,0),n.length,!0))}function d1e(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(r,i)&&f1e(t.doc,t.mapping.slice(s).map(a),r)){t.clearIncompatible(t.mapping.slice(s).map(a,1),r);let l=t.mapping.slice(s),c=l.map(a,1),d=l.map(a+o.nodeSize,1);return t.step(new Ys(c,d,c+1,d-1,new mt(st.from(r.create(i,null,o.marks)),0,0),1,!0)),!1}})}function f1e(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function h1e(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Ys(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new mt(st.from(o),0,0),1,!0))}function bc(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,d=n-2;c>s;c--,d--){let u=i.node(c),f=i.index(c);if(u.type.spec.isolating)return!1;let h=u.content.cutByIndex(f,u.childCount),p=r&&r[d+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[d]||u;if(!u.canReplace(f+1,u.childCount)||!g.type.validContent(h))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function p1e(t,e,n=1,r){let i=t.doc.resolve(e),s=st.empty,o=st.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=st.from(i.node(a).copy(s));let d=r&&r[c];o=st.from(d?d.type.create(d.attrs,o):i.node(a).copy(o))}t.step(new za(e,e,new mt(s.append(o),n,n),!0))}function Ad(t,e){let n=t.resolve(e),r=n.index();return LB(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function LB(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function c5(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&LB(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function g1e(t,e,n){let r=new za(e-n,e+n,mt.empty,!0);t.step(r)}function m1e(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function DB(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),d=!1;if(s==1)d=c.canReplace(l,l,i);else{let u=c.contentMatchAt(l).findWrapping(i.firstChild.type);d=u&&c.canReplaceWith(l,l,u[0])}if(d)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function u5(t,e,n=e,r=mt.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return IB(i,s,r)?new za(e,n,r):new y1e(i,s,r).fit()}function IB(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}let y1e=class{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=st.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=st.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new mt(s,o,a);return e>-1?new Ys(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new za(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Pk(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,u=null;if(n==1&&(o?c.matchType(o.type)||(u=c.fillBefore(st.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:u};if(n==2&&o&&(d=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:d};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Pk(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new mt(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Pk(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new mt(b0(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new mt(b0(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,d=[],{match:u,type:f}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));u=u.matchFragment(i)}let h=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),b=u.matchType(g.type);if(!b)break;c++,(c>1||l==0||g.content.size)&&(u=b,d.push($B(g.mark(f.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=w0(this.placed,n,st.from(d)),this.frontier[n].match=u,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,b=a;g<h;g++){let v=b.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),b=v.content}this.unplaced=p?e==0?mt.empty:new mt(b0(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new mt(b0(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Tk(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Tk(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=Tk(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=w0(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=w0(this.placed,this.depth,st.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(st.empty,!0);n.childCount&&(this.placed=w0(this.placed,this.frontier.length,n))}};function b0(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(b0(t.firstChild.content,e-1,n)))}function w0(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(w0(t.lastChild.content,e-1,n)))}function Pk(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function $B(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,$B(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(st.empty,!0)))),t.copy(r)}function Tk(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!v1e(n,s.content,o)?a:null}function v1e(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function b1e(t){return t.spec.defining||t.spec.definingForContent}function w1e(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(IB(i,s,r))return t.step(new za(e,n,r));let o=FB(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,h=i.pos-1;f>0;f--,h--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==h&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],d=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(c.push(p),h==r.openStart)break;f=p.content}for(let f=d-1;f>=0;f--){let h=c[f],p=b1e(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(a)-1)))d=f;else if(p||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+d+1)%(r.openStart+1),p=c[h];if(p)for(let g=0;g<o.length;g++){let b=o[(g+l)%o.length],v=!0;b<0&&(v=!1,b=-b);let x=i.node(b-1),w=i.index(b-1);if(x.canReplaceWith(w,w,p.type,p.marks))return t.replace(i.before(b),v?s.after(b):n,new mt(jB(r.content,0,r.openStart,h),h,r.openEnd))}}let u=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>u));f--){let h=o[f];h<0||(e=i.before(h),n=s.after(h))}}function jB(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(jB(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(st.empty,!0))}return t}function x1e(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=m1e(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new mt(st.from(r),0,0))}function S1e(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=FB(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o)return t.delete(r.before(o),n);t.delete(e,n)}function FB(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}let zB=class ob extends es{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return gs.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return gs.fromReplace(e,this.pos,this.pos+1,new mt(st.from(i),0,n.isLeaf?0:1))}getMap(){return Xf.empty}invert(e){return new ob(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ob(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ob(n.pos,n.attr,n.value)}};es.jsonID("attr",zB);let BB=class k_ extends es{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return gs.ok(r)}getMap(){return Xf.empty}invert(e){return new k_(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new k_(n.attr,n.value)}};es.jsonID("docAttr",BB);let Ng=class extends Error{};Ng=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Ng.prototype=Object.create(Error.prototype);Ng.prototype.constructor=Ng;Ng.prototype.name="TransformError";class k1e{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Jp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Ng(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=mt.empty){let i=u5(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new mt(st.from(r),0,0))}delete(e,n){return this.replace(e,n,mt.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return w1e(this,e,n,r),this}replaceRangeWith(e,n,r){return x1e(this,e,n,r),this}deleteRange(e,n){return S1e(this,e,n),this}lift(e,n){return a1e(this,e,n),this}join(e,n=1){return g1e(this,e,n),this}wrap(e,n){return u1e(this,e,n),this}setBlockType(e,n=e,r,i=null){return d1e(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return h1e(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new zB(e,n,r)),this}setDocAttribute(e,n){return this.step(new BB(e,n)),this}addNodeMark(e,n){return this.step(new e6(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Fn)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new t6(e,n)),this}split(e,n=1,r){return p1e(this,e,n,r),this}addMark(e,n,r){return r1e(this,e,n,r),this}removeMark(e,n,r){return i1e(this,e,n,r),this}clearIncompatible(e,n,r){return s1e(this,e,n,r),this}}const Nk=Object.create(null);let pn=class{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new C1e(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=mt.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(c.pos),a?mt.empty:n),a==0&&t8(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),d=l.map(a.pos);s?e.deleteRange(c,d):(e.replaceRangeWith(c,d,n),t8(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new kn(e):fp(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?fp(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):fp(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Gu(e.node(0))}static atStart(e){return fp(e,e,0,0,1)||new Gu(e)}static atEnd(e){return fp(e,e,e.content.size,e.childCount,-1)||new Gu(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Nk[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Nk)throw new RangeError("Duplicate use of selection JSON ID "+e);return Nk[e]=n,n.prototype.jsonID=e,n}getBookmark(){return kn.between(this.$anchor,this.$head).getBookmark()}};pn.prototype.visible=!0;let C1e=class{constructor(e,n){this.$from=e,this.$to=n}},QM=!1;function e8(t){!QM&&!t.parent.inlineContent&&(QM=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}let kn=class x0 extends pn{constructor(e,n=e){e8(e),e8(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return pn.near(r);let i=e.resolve(n.map(this.anchor));return new x0(i.parent.inlineContent?i:r,r)}replace(e,n=mt.empty){if(super.replace(e,n),n==mt.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof x0&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new UB(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new x0(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=pn.findFrom(n,r,!0)||pn.findFrom(n,-r,!0);if(s)n=s.$head;else return pn.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(pn.findFrom(e,-r,!0)||pn.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new x0(e,n)}};pn.jsonID("text",kn);let UB=class HB{constructor(e,n){this.anchor=e,this.head=n}map(e){return new HB(e.map(this.anchor),e.map(this.head))}resolve(e){return kn.between(e.resolve(this.anchor),e.resolve(this.head))}},qt=class S0 extends pn{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?pn.near(s):new S0(s)}content(){return new mt(st.from(this.node),0,0)}eq(e){return e instanceof S0&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new _1e(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new S0(e.resolve(n.anchor))}static create(e,n){return new S0(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}};qt.prototype.visible=!1;pn.jsonID("node",qt);let _1e=class VB{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new UB(r,r):new VB(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&qt.isSelectable(r)?new qt(n):pn.near(n)}},Gu=class ab extends pn{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=mt.empty){if(n==mt.empty){e.delete(0,e.doc.content.size);let r=pn.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new ab(e)}map(e){return new ab(e)}eq(e){return e instanceof ab}getBookmark(){return A1e}};pn.jsonID("all",Gu);const A1e={map(){return this},resolve(t){return new Gu(t)}};function fp(t,e,n,r,i,s=!1){if(e.inlineContent)return kn.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&qt.isSelectable(a))return qt.create(t,n-(i<0?a.nodeSize:0))}else{let l=fp(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function t8(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof za||i instanceof Ys))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,d)=>{o==null&&(o=d)}),t.setSelection(pn.near(t.doc.resolve(o),n))}const n8=1,r8=2,i8=4;class E1e extends k1e{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|n8)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&n8)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=r8,this}ensureMarks(e){return Fn.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&r8)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Fn.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(pn.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=i8,this}get scrolledIntoView(){return(this.updated&i8)>0}}function s8(t,e){return!e||!t?t:t.bind(e)}let k0=class{constructor(e,n,r){this.name=e,this.init=s8(n.init,r),this.apply=s8(n.apply,r)}};const P1e=[new k0("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new k0("selection",{init(t,e){return t.selection||pn.atStart(e.doc)},apply(t){return t.selection}}),new k0("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new k0("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Mk{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=P1e.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new k0(r.key,r.spec.state,r))})}}class Dp{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,d=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(d&&r.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let u=0;u<this.config.plugins.length;u++)i.push(u<o?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Dp(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new E1e(this)}static create(e){let n=new Mk(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Dp(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Mk(this.schema,e.plugins),r=n.fields,i=new Dp(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Mk(e.schema,e.plugins),s=new Dp(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Sf.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=pn.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function WB(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=WB(i,e,{})),n[r]=i}return n}class $l{constructor(e){this.spec=e,this.props={},e.props&&WB(e.props,this,this.props),this.key=e.key?e.key.key:qB("plugin")}getState(e){return e[this.key]}}const Ok=Object.create(null);function qB(t){return t in Ok?t+"$"+ ++Ok[t]:(Ok[t]=0,t+"$")}let wh=class{constructor(e="key"){this.key=qB(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}};const hs=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Z1=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let o8=null;const sc=function(t,e,n){let r=o8||(o8=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Qf=function(t,e,n,r){return n&&(a8(t,e,n,r,-1)||a8(t,e,n,r,1))},T1e=/^(img|br|input|textarea|hr)$/i;function a8(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:ll(t))){let s=t.parentNode;if(!s||s.nodeType!=1||r6(t)||T1e.test(t.nodeName)||t.contentEditable=="false")return!1;e=hs(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?ll(t):0}else return!1}}function ll(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function N1e(t,e,n){for(let r=e==0,i=e==ll(t);r||i;){if(t==n)return!0;let s=hs(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==ll(t)}}function r6(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const d5=function(t){return t.focusNode&&Qf(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Qd(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function M1e(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function O1e(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const Ml=typeof navigator<"u"?navigator:null,l8=typeof document<"u"?document:null,Ed=Ml&&Ml.userAgent||"",C_=/Edge\/(\d+)/.exec(Ed),GB=/MSIE \d/.exec(Ed),__=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ed),Js=!!(GB||__||C_),Ku=GB?document.documentMode:__?+__[1]:C_?+C_[1]:0,Ba=!Js&&/gecko\/(\d+)/i.test(Ed);Ba&&+(/Firefox\/(\d+)/.exec(Ed)||[0,0])[1];const A_=!Js&&/Chrome\/(\d+)/.exec(Ed),Wi=!!A_,R1e=A_?+A_[1]:0,Ss=!Js&&!!Ml&&/Apple Computer/.test(Ml.vendor),Mg=Ss&&(/Mobile\/\w+/.test(Ed)||!!Ml&&Ml.maxTouchPoints>2),Fo=Mg||(Ml?/Mac/.test(Ml.platform):!1),L1e=Ml?/Win/.test(Ml.platform):!1,_a=/Android \d/.test(Ed),Ry=!!l8&&"webkitFontSmoothing"in l8.documentElement.style,D1e=Ry?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function I1e(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function ec(t,e){return typeof t=="number"?t:t[e]}function $1e(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function c8(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=Z1(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,c=l?I1e(s):$1e(a),d=0,u=0;if(e.top<c.top+ec(r,"top")?u=-(c.top-e.top+ec(i,"top")):e.bottom>c.bottom-ec(r,"bottom")&&(u=e.bottom-e.top>c.bottom-c.top?e.top+ec(i,"top")-c.top:e.bottom-c.bottom+ec(i,"bottom")),e.left<c.left+ec(r,"left")?d=-(c.left-e.left+ec(i,"left")):e.right>c.right-ec(r,"right")&&(d=e.right-c.right+ec(i,"right")),d||u)if(l)s.defaultView.scrollBy(d,u);else{let f=a.scrollLeft,h=a.scrollTop;u&&(a.scrollTop+=u),d&&(a.scrollLeft+=d);let p=a.scrollLeft-f,g=a.scrollTop-h;e={left:e.left-p,top:e.top-g,right:e.right-p,bottom:e.bottom-g}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function j1e(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:KB(t.dom)}}function KB(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Z1(r));return e}function F1e({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;JB(n,r==0?0:r-e)}function JB(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let ip=null;function z1e(t){if(t.setActive)return t.setActive();if(ip)return t.focus(ip);let e=KB(t);t.focus(ip==null?{get preventScroll(){return ip={preventScroll:!0},!0}}:void 0),ip||(ip=!1,JB(e,0))}function YB(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let d=t.firstChild,u=0;d;d=d.nextSibling,u++){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=sc(d).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<r){n=d,r=g,i=g&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,d.nodeType==1&&g&&(s=u+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=d,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=u+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?B1e(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:YB(n,i)}function B1e(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=vu(r,1);if(s.top!=s.bottom&&i6(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function i6(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function U1e(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function H1e(t,e,n){let{node:r,offset:i}=YB(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function V1e(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!o||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!o&&(o=!0,l.left>r.left||l.top>r.top?i=a.posBefore:(l.right<r.left||l.bottom<r.top)&&(i=a.posAfter)),!a.contentDOM&&i<0&&!a.node.isText)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function ZB(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(i6(e,c))return ZB(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function W1e(t,e){let n=t.dom.ownerDocument,r,i=0,s=O1e(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!i6(e,c)||(o=ZB(t.dom,e,c),!o))return null}if(Ss)for(let c=o;r&&c;c=Z1(c))c.draggable&&(r=void 0);if(o=U1e(o,e),r){if(Ba&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let d=r.childNodes[i],u;d.nodeName=="IMG"&&(u=d.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&i++}let c;Ry&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=V1e(t,r,i,e))}a==null&&(a=H1e(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function u8(t){return t.top<t.bottom||t.left<t.right}function vu(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(u8(r))return r}return Array.prototype.find.call(n,u8)||t.getBoundingClientRect()}const q1e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function XB(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Ry||Ba;if(r.nodeType==3)if(o&&(q1e.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=vu(sc(r,i,i),n);if(Ba&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=vu(sc(r,i-1,i-1),-1);if(c.top==l.top){let d=vu(sc(r,i,i+1),-1);if(d.top!=l.top)return Qm(d,d.left<c.left)}}return l}else{let l=i,c=i,d=n<0?1:-1;return n<0&&!i?(c++,d=-1):n>=0&&i==r.nodeValue.length?(l--,d=1):n<0?l--:c++,Qm(vu(sc(r,l,c),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==ll(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return Rk(l.getBoundingClientRect(),!1)}if(s==null&&i<ll(r)){let l=r.childNodes[i];if(l.nodeType==1)return Rk(l.getBoundingClientRect(),!0)}return Rk(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==ll(r))){let l=r.childNodes[i-1],c=l.nodeType==3?sc(l,ll(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Qm(vu(c,1),!1)}if(s==null&&i<ll(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?sc(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return Qm(vu(c,-1),!0)}return Qm(vu(r.nodeType==3?sc(r):r,-n),n>=0)}function Qm(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Rk(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function QB(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function G1e(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return QB(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=XB(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=sc(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(n=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const K1e=/[\u0590-\u08ac]/;function J1e(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return!K1e.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:QB(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:u}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:g}=t.domSelectionRange(),b=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==g;try{a.collapse(d,u),l&&(l!=d||c!=u)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),b})}let d8=null,f8=null,h8=!1;function Y1e(t,e,n){return d8==e&&f8==n?h8:(d8=e,f8=n,h8=n=="up"||n=="down"?G1e(t,e,n):J1e(t,e,n))}const Jo=0,p8=1,cf=2,Ol=3;class Ly{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Jo,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>hs(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof tU){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof eU&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?hs(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?hs(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let d=o+l.border;if(e>=d&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,d);e=o;for(let u=a;u>0;u--){let f=this.children[u-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=hs(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let d=a+1;d<this.children.length;d++){let u=this.children[d];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){s=hs(u.dom);break}n+=u.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let f=0,h=0;f<this.children.length;f++){let p=this.children[f],g=h+p.size;if(s>h&&o<g)return p.setSelection(e-h-p.border,n-h-p.border,r,i);h=g}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.getSelection(),d=!1;if((Ba||Ss)&&e==n){let{node:f,offset:h}=a;if(f.nodeType==3){if(d=!!(h&&f.nodeValue[h-1]==`
`),d&&h==f.nodeValue.length)for(let p=f,g;p;p=p.parentNode){if(g=p.nextSibling){g.nodeName=="BR"&&(a=l={node:g.parentNode,offset:hs(g)+1});break}let b=p.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let p=f.childNodes[h-1];d=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(Ba&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||d&&Ss)&&Qf(a.node,a.offset,c.anchorNode,c.anchorOffset)&&Qf(l.node,l.offset,c.focusNode,c.focusOffset))return;let u=!1;if((c.extend||e==n)&&!d){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),u=!0}catch{}}if(!u){if(e>n){let h=a;a=l,l=h}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?cf:p8,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Ol:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?cf:Ol}r=o}this.dirty=cf}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?cf:p8;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class eU extends Ly{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Jo&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Z1e extends Ly{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class eh extends Ly{constructor(e,n,r,i){super(e,[],r,i),this.mark=n}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=cl.renderSpec(document,n.type.spec.toDOM(n,r))),new eh(e,n,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&Ol||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ol&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Jo){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Jo}}slice(e,n,r){let i=eh.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=T_(s,n,o,r)),e>0&&(s=T_(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}}class Ju extends Ly{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),d=c&&c.dom,u=c&&c.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:u}=cl.renderSpec(document,n.type.spec.toDOM(n)));!u&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let f=d;return d=iU(d,r,n),c?l=new X1e(e,n,r,i,d,u||null,f,c,s,o+1):n.isText?new f5(e,n,r,i,d,f,s):new Ju(e,n,r,i,d,u||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>st.empty)}return e}matchesNode(e,n,r){return this.dirty==Jo&&e.eq(this.node)&&P_(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new eye(this,o&&o.node,e);rye(this.node,this.innerDeco,(c,d,u)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!u&&l.syncToMarks(d==this.node.childCount?Fn.none:this.node.child(d).marks,r,e),l.placeWidget(c,e,i)},(c,d,u,f)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,d,u,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,d,u,h,e)||l.updateNextNode(c,d,u,e,f,i)||l.addNode(c,d,u,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==cf)&&(o&&this.protectLocalComposition(e,o),nU(this.contentDOM,this.children,e),Mg&&iye(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof kn)||r<n||i>n+this.node.content.size)return null;let s=e.domSelectionRange(),o=sye(s.focusNode,s.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let a=o.nodeValue,l=oye(this.node.content,a,r-n,i-n);return l<0?null:{node:o,pos:l,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new Z1e(this,s,n,i);e.input.compositionNodes.push(o),this.children=T_(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==Ol||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Jo}updateOuterDeco(e){if(P_(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=rU(this.dom,this.nodeDOM,E_(this.outerDeco,this.node,n),E_(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function g8(t,e,n,r,i){iU(r,e,t);let s=new Ju(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class f5 extends Ju{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Ol||this.dirty!=Jo&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Jo||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Jo,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new f5(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ol)}get domAtom(){return!1}}class tU extends Ly{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Jo&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class X1e extends Ju{constructor(e,n,r,i,s,o,a,l,c,d){super(e,n,r,i,s,o,a,c,d),this.spec=l}update(e,n,r,i){if(this.dirty==Ol)return!1;if(this.spec.update){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function nU(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=m8(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof eh){let l=r?r.previousSibling:t.lastChild;nU(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=m8(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Y0=function(t){t&&(this.nodeName=t)};Y0.prototype=Object.create(null);const uf=[new Y0];function E_(t,e,n){if(t.length==0)return uf;let r=n?uf[0]:new Y0,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new Y0(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new Y0(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function rU(t,e,n,r){if(n==uf&&r==uf)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=uf[0]),i=l}Q1e(i,a||uf[0],o)}return i}function Q1e(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function iU(t,e,n){return rU(t,t,uf,E_(e,n,t.nodeType!=1))}function P_(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function m8(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class eye{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=tye(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Jo,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=eh.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==Ol&&o.dom==o.contentDOM&&(o.dirty=cf),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ju){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let d=l.dom,u,f=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Ol&&P_(n,l.outerDeco));if(!f&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!f&&(u=this.recreateWrapper(l,e,n,r,i,o)))return this.top.children[this.index]=u,u.contentDOM&&(u.dirty=cf,u.updateChildren(i,o+1),u.dirty=Jo),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let a=Ju.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=Ju.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new eU(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof eh;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof f5)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ss||Wi)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new tU(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function tye(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof eh)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function nye(t,e){return t.type.side-e.type.side}function rye(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);r(d,i,e.forChild(s,d),c),s+=d.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let d,u;for(;o<i.length&&i[o].to==s;){let b=i[o++];b.widget&&(d?(u||(u=[d])).push(b):d=b)}if(d)if(u){u.sort(nye);for(let b=0;b<u.length;b++)n(u[b],c,!!l)}else n(d,c,!!l);let f,h;if(l)h=-1,f=l,l=null;else if(c<t.childCount)h=c,f=t.child(c++);else break;for(let b=0;b<a.length;b++)a[b].to<=s&&a.splice(b--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+f.nodeSize;if(f.isText){let b=p;o<i.length&&i[o].from<b&&(b=i[o].from);for(let v=0;v<a.length;v++)a[v].to<b&&(b=a[v].to);b<p&&(l=f.cut(b-s),f=f.cut(0,b-s),p=b,h=-1)}else for(;o<i.length&&i[o].to<p;)o++;let g=f.isInline&&!f.isLeaf?a.filter(b=>!b.inline):a.slice();r(f,g,e.forChild(s,f),h),s=p}}function iye(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function sye(t,e){for(;;){if(t.nodeType==3)return t;if(t.nodeType==1&&e>0){if(t.childNodes.length>e&&t.childNodes[e].nodeType==3)return t.childNodes[e];t=t.childNodes[e-1],e=ll(t)}else if(t.nodeType==1&&e<t.childNodes.length)t=t.childNodes[e],e=0;else return null}}function oye(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function T_(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,d=a+=l.size;c>=n||d<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),d>n&&s.push(l.slice(n-c,l.size,r)))}return s}function s6(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(d5(n)){for(l=a;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&qt.isSelectable(d)&&i.parent&&!(d.isInline&&N1e(n.focusNode,n.focusOffset,i.dom))){let u=i.posBefore;c=new qt(o==u?a:r.resolve(u))}}else{let d=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(d<0)return null;l=r.resolve(d)}if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=o6(t,l,a,d)}return c}function sU(t){return t.editable?t.hasFocus():aU(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function wc(t,e=!1){let n=t.state.selection;if(oU(t,n),!!sU(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Wi){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Qf(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)lye(t);else{let{anchor:r,head:i}=n,s,o;y8&&!(n instanceof kn)&&(n.$from.parent.inlineContent||(s=v8(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=v8(t,n.to))),t.docView.setSelection(r,i,t.root,e),y8&&(s&&b8(s),o&&b8(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&aye(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const y8=Ss||Wi&&R1e<63;function v8(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Ss&&i&&i.contentEditable=="false")return Lk(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Lk(i);if(s)return Lk(s)}}function Lk(t){return t.contentEditable="true",Ss&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function b8(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function aye(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!sU(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function lye(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,hs(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Js&&Ku<=11&&(r.disabled=!0,r.disabled=!1)}function oU(t,e){if(e instanceof qt){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(w8(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else w8(t)}function w8(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function o6(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||kn.between(e,n,r)}function x8(t){return t.editable&&!t.hasFocus()?!1:aU(t)}function aU(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function cye(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Qf(e.node,e.offset,n.anchorNode,n.anchorOffset)}function N_(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&pn.findFrom(s,e)}function xu(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function S8(t,e,n){let r=t.state.selection;if(r instanceof kn)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return xu(t,new kn(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=N_(t.state,e);return i&&i instanceof qt?xu(t,i):!1}else if(!(Fo&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?qt.isSelectable(s)?xu(t,new qt(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Ry?xu(t,new kn(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof qt&&r.node.isInline)return xu(t,new kn(e>0?r.$to:r.$from));{let i=N_(t.state,e);return i?xu(t,i):!1}}}function Lw(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Z0(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function sp(t,e){return e<0?uye(t):dye(t)}function uye(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Ba&&n.nodeType==1&&r<Lw(n)&&Z0(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Z0(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(lU(n))break;{let a=n.previousSibling;for(;a&&Z0(a,-1);)i=n.parentNode,s=hs(a),a=a.previousSibling;if(a)n=a,r=Lw(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?M_(t,n,r):i&&M_(t,i,s)}function dye(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Lw(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Z0(a,1))s=n,o=++r;else break}else{if(lU(n))break;{let a=n.nextSibling;for(;a&&Z0(a,1);)s=a.parentNode,o=hs(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=Lw(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&M_(t,s,o)}function lU(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function fye(t,e){for(;t&&e==t.childNodes.length&&!r6(t);)e=hs(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function hye(t,e){for(;t&&!e&&!r6(t);)e=hs(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function M_(t,e,n){if(e.nodeType!=3){let s,o;(o=fye(e,n))?(e=o,n=0):(s=hye(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(d5(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&wc(t)},50)}function k8(t,e){let n=t.state.doc.resolve(e);if(!(Wi||L1e)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function C8(t,e,n){let r=t.state.selection;if(r instanceof kn&&!r.empty||n.indexOf("s")>-1||Fo&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=N_(t.state,e);if(o&&o instanceof qt)return xu(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof Gu?pn.near(o,e):pn.findFrom(o,e);return a?xu(t,a):!1}return!1}function _8(t,e){if(!(t.state.selection instanceof kn))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function A8(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function pye(t){if(!Ss||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;A8(t,r,"true"),setTimeout(()=>A8(t,r,"false"),20)}return!1}function gye(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function mye(t,e){let n=e.keyCode,r=gye(e);if(n==8||Fo&&n==72&&r=="c")return _8(t,-1)||sp(t,-1);if(n==46&&!e.shiftKey||Fo&&n==68&&r=="c")return _8(t,1)||sp(t,1);if(n==13||n==27)return!0;if(n==37||Fo&&n==66&&r=="c"){let i=n==37?k8(t,t.state.selection.from)=="ltr"?-1:1:-1;return S8(t,i,r)||sp(t,i)}else if(n==39||Fo&&n==70&&r=="c"){let i=n==39?k8(t,t.state.selection.from)=="ltr"?1:-1:1;return S8(t,i,r)||sp(t,i)}else{if(n==38||Fo&&n==80&&r=="c")return C8(t,-1,r)||sp(t,-1);if(n==40||Fo&&n==78&&r=="c")return pye(t)||C8(t,1,r)||sp(t,1);if(r==(Fo?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function cU(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=t.someProp("clipboardSerializer")||cl.fromSchema(t.state.schema),a=gU(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,d,u=0;for(;c&&c.nodeType==1&&(d=pU[c.nodeName.toLowerCase()]);){for(let h=d.length-1;h>=0;h--){let p=a.createElement(d[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),u++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${u?` -${u}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f}}function uU(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,s||r,t)}),s)return e?new mt(st.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):mt.empty;let u=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(u)a=u;else{let f=i.marks(),{schema:h}=t.state,p=cl.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let b=o.appendChild(document.createElement("p"));g&&b.appendChild(p.serializeNode(h.text(g,f)))})}}else t.someProp("transformPastedHTML",u=>{n=u(n,t)}),o=bye(n),Ry&&wye(o);let c=o&&o.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let u=+d[3];u>0;u--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Z4.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||d),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!yye.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)a=xye(E8(a,+d[1],+d[2]),d[4]);else if(a=mt.maxOpen(vye(a.content,i),!0),a.openStart||a.openEnd){let u=0,f=0;for(let h=a.content.firstChild;u<a.openStart&&!h.type.spec.isolating;u++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=E8(a,u,f)}return t.someProp("transformPasted",u=>{a=u(a,t)}),a}const yye=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function vye(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&fU(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=hU(o[o.length-1],s.length));let d=dU(a,l);o.push(d),i=i.matchType(d.type),s=l}}),o)return st.from(o)}return t}function dU(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,st.from(t));return t}function fU(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=fU(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(st.from(dU(n,t,i+1))))}}function hU(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,hU(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(st.empty,!0);return t.copy(n.append(r))}function O_(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=O_(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(st.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function E8(t,e,n){return e<t.openStart&&(t=new mt(O_(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new mt(O_(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const pU={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let P8=null;function gU(){return P8||(P8=document.implementation.createHTMLDocument("title"))}function bye(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=gU().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&pU[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=t,i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function wye(t){let e=t.querySelectorAll(Wi?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function xye(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=st.from(l.create(r[a+1],i)),s++,o++}return new mt(i,s,o)}const ks={},Cs={},Sye={touchstart:!0,touchmove:!0};class kye{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Cye(t){for(let e in ks){let n=ks[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Aye(t,r)&&!a6(t,r)&&(t.editable||!(r.type in Cs))&&n(t,r)},Sye[e]?{passive:!0}:void 0)}Ss&&t.dom.addEventListener("input",()=>null),R_(t)}function Lu(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function _ye(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function R_(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>a6(t,r))})}function a6(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Aye(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Eye(t,e){!a6(t,e)&&ks[e.type]&&(t.editable||!(e.type in Cs))&&ks[e.type](t,e)}Cs.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!yU(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(_a&&Wi&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Mg&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Qd(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||mye(t,n)?n.preventDefault():Lu(t,"key")};Cs.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Cs.keypress=(t,e)=>{let n=e;if(yU(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Fo&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof kn)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function h5(t){return{left:t.clientX,top:t.clientY}}function Pye(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function l6(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Yp(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Tye(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&qt.isSelectable(r)?(Yp(t,new qt(n)),!0):!1}function Nye(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof qt&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(qt.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Yp(t,qt.create(t.state.doc,i)),!0):!1}function Mye(t,e,n,r,i){return l6(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?Nye(t,n):Tye(t,n))}function Oye(t,e,n,r){return l6(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function Rye(t,e,n,r){return l6(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||Lye(t,n,r)}function Lye(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Yp(t,kn.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Yp(t,kn.create(r,a+1,a+1+o.content.size));else if(qt.isSelectable(o))Yp(t,qt.create(r,a));else continue;return!0}}function c6(t){return Dw(t)}const mU=Fo?"metaKey":"ctrlKey";ks.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=c6(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&Pye(n,t.input.lastClick)&&!n[mU]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(h5(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Dye(t,o,n,!!r)):(s=="doubleClick"?Oye:Rye)(t,o.pos,o.inside,n)?n.preventDefault():Lu(t,"pointer"))};class Dye{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[mU],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let d=e.state.doc.resolve(n.pos);s=d.parent,o=d.depth?d.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof qt&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ba&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Lu(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>wc(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(h5(e))),this.updateAllowDefault(e),this.allowDefault||!n?Lu(this.view,"pointer"):Mye(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ss&&this.mightDrag&&!this.mightDrag.node.isAtom||Wi&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Yp(this.view,pn.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Lu(this.view,"pointer")}move(e){this.updateAllowDefault(e),Lu(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}ks.touchstart=t=>{t.input.lastTouch=Date.now(),c6(t),Lu(t,"pointer")};ks.touchmove=t=>{t.input.lastTouch=Date.now(),Lu(t,"pointer")};ks.contextmenu=t=>c6(t);function yU(t,e){return t.composing?!0:Ss&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Iye=_a?5e3:-1;Cs.compositionstart=Cs.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Dw(t,!0),t.markCursor=null;else if(Dw(t),Ba&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){t.domSelection().collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}vU(t,Iye)};Cs.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,vU(t,20))};function vU(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Dw(t),e))}function bU(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=$ye());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function $ye(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Dw(t,e=!1){if(!(_a&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),bU(t),e||t.docView&&t.docView.dirty){let n=s6(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function jye(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const X1=Js&&Ku<15||Mg&&D1e<604;ks.copy=Cs.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=X1?null:n.clipboardData,o=r.content(),{dom:a,text:l}=cU(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):jye(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Fye(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function zye(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Q1(t,r.value,null,i,e):Q1(t,r.textContent,r.innerHTML,i,e)},50)}function Q1(t,e,n,r,i){let s=uU(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||mt.empty)))return!0;if(!s)return!1;let o=Fye(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function wU(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Cs.paste=(t,e)=>{let n=e;if(t.composing&&!_a)return;let r=X1?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Q1(t,wU(r),r.getData("text/html"),i,n)?n.preventDefault():zye(t,n)};class xU{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const SU=Fo?"altKey":"ctrlKey";ks.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(h5(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof qt?i.to-1:i.to))){if(r&&r.mightDrag)o=qt.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=qt.create(t.state.doc,d.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c}=cU(t,a);n.dataTransfer.clearData(),n.dataTransfer.setData(X1?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",X1||n.dataTransfer.setData("text/plain",c),t.dragging=new xU(a,!n[SU],o)};ks.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Cs.dragover=Cs.dragenter=(t,e)=>e.preventDefault();Cs.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(h5(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",p=>{o=p(o,t)}):o=uU(t,wU(n.dataTransfer),X1?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[SU]);if(t.someProp("handleDrop",p=>p(t,n,o||mt.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?DB(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let d=c.mapping.map(l),u=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(u?c.replaceRangeWith(d,d,o.content.firstChild):c.replaceRange(d,d,o),c.doc.eq(f))return;let h=c.doc.resolve(d);if(u&&qt.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new qt(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,b,v,x)=>p=x),c.setSelection(o6(t,h,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};ks.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&wc(t)},20))};ks.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};ks.beforeinput=(t,e)=>{if(Wi&&_a&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Qd(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Cs)ks[t]=Cs[t];function ey(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Iw{constructor(e,n){this.toDOM=e,this.spec=n||kf,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Na(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Iw&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ey(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Yu{constructor(e,n){this.attrs=e,this.spec=n||kf}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Na(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Yu&&ey(this.attrs,e.attrs)&&ey(this.spec,e.spec)}static is(e){return e.type instanceof Yu}destroy(){}}class u6{constructor(e,n){this.attrs=e,this.spec=n||kf}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Na(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof u6&&ey(this.attrs,e.attrs)&&ey(this.spec,e.spec)}destroy(){}}class Na{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Na(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Na(e,e,new Iw(n,r))}static inline(e,n,r,i){return new Na(e,n,new Yu(r,i))}static node(e,n,r,i){return new Na(e,n,new u6(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Yu}get widget(){return this.type instanceof Iw}}const hp=[],kf={};class gi{constructor(e,n){this.local=e.length?e:hp,this.children=n.length?n:hp}static create(e,n){return n.length?$w(n,e,0,kf):Bi}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==Bi||e.maps.length==0?this:this.mapInner(e,n,0,0,r||kf)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?Bye(this.children,o||[],e,n,r,i,s):o?new gi(o.sort(Cf),hp):Bi}add(e,n){return n.length?this==Bi?gi.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,d;if(d=CU(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,d,c+1):i.splice(s,0,l,l+a.nodeSize,$w(d,a,c+1,kf)),s+=3}});let o=kU(s?_U(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new gi(o.length?this.local.concat(o).sort(Cf):this.local,i||this.children)}remove(e){return e.length==0||this==Bi?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let d=0,u;d<e.length;d++)(u=e[d])&&u.from>a&&u.to<l&&(e[d]=null,(o||(o=[])).push(u));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=Bi?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new gi(i,r):Bi}forChild(e,n){if(this==Bi)return this;if(n.isLeaf)return gi.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Yu){let c=Math.max(s,l.from)-s,d=Math.min(o,l.to)-s;c<d&&(i||(i=[])).push(l.copy(c,d))}}if(i){let a=new gi(i.sort(Cf),hp);return r?new Eu([a,r]):a}return r||Bi}eq(e){if(this==e)return!0;if(!(e instanceof gi)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return d6(this.localsInner(e))}localsInner(e){if(this==Bi)return hp;if(e.inlineContent||!this.local.some(Yu.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Yu||n.push(this.local[r]);return n}}gi.empty=new gi([],[]);gi.removeOverlap=d6;const Bi=gi.empty;class Eu{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,kf));return Eu.from(r)}forChild(e,n){if(n.isLeaf)return gi.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=Bi&&(s instanceof Eu?r=r.concat(s.members):r.push(s))}return Eu.from(r)}eq(e){if(!(e instanceof Eu)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?d6(r?n:n.sort(Cf)):hp}static from(e){switch(e.length){case 0:return Bi;case 1:return e[0];default:return new Eu(e.every(n=>n instanceof gi)?e:e.reduce((n,r)=>n.concat(r instanceof gi?r:r.members),[]))}}}function Bye(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,d=s;c<n.maps.length;c++){let u=0;n.maps[c].forEach((f,h,p,g)=>{let b=g-p-(h-f);for(let v=0;v<a.length;v+=3){let x=a[v+1];if(x<0||f>x+d-u)continue;let w=a[v]+d-u;h>=w?a[v+1]=f<=w?-2:-1:f>=d&&b&&(a[v]+=b,a[v+1]+=b)}u+=b}),d=n.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=n.map(t[c]+s),u=d-i;if(u<0||u>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+s,-1),h=f-i,{index:p,offset:g}=r.content.findIndex(u),b=r.maybeChild(p);if(b&&g==u&&g+b.nodeSize==h){let v=a[c+2].mapInner(n,b,d+1,t[c]+s+1,o);v!=Bi?(a[c]=u,a[c+1]=h,a[c+2]=v):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=Uye(a,t,e,n,i,s,o),d=$w(c,r,0,o);e=d.local;for(let u=0;u<a.length;u+=3)a[u+1]<0&&(a.splice(u,3),u-=3);for(let u=0,f=0;u<d.children.length;u+=3){let h=d.children[u];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,d.children[u],d.children[u+1],d.children[u+2])}}return new gi(e.sort(Cf),a)}function kU(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Na(i.from+e,i.to+e,i.type))}return n}function Uye(t,e,n,r,i,s,o){function a(l,c){for(let d=0;d<l.local.length;d++){let u=l.local[d].map(r,i,c);u?n.push(u):o.onRemove&&o.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function CU(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function _U(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function $w(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=CU(t,a,l+n);if(c){s=!0;let d=$w(c,a,n+l+1,r);d!=Bi&&i.push(l,l+a.nodeSize,d)}});let o=kU(s?_U(t):t,-n).sort(Cf);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new gi(o,i):Bi}function Cf(t,e){return t.from-e.from||t.to-e.to}function d6(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),T8(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),T8(e,i,r.copy(s.from,r.to)));break}}}return e}function T8(t,e,n){for(;e<t.length&&Cf(n,t[e])>0;)e++;t.splice(e,0,n)}function Dk(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Bi&&e.push(r)}),t.cursorWrapper&&e.push(gi.create(t.state.doc,[t.cursorWrapper.deco])),Eu.from(e)}const Hye={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Vye=Js&&Ku<=11;class Wye{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class qye{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Wye,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Js&&Ku<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Vye&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Hye)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(x8(this.view)){if(this.suppressingSelectionUpdates)return wc(this.view);if(Js&&Ku<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Qf(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Z1(s))n.add(s);for(let s=e.anchorNode;s;s=Z1(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&x8(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let d=0;d<n.length;d++){let u=this.registerMutation(n[d],l);u&&(s=s<0?u.from:Math.min(u.from,s),o=o<0?u.to:Math.max(u.to,o),u.typeOver&&(a=!0))}if(Ba&&l.length>1){let d=l.filter(u=>u.nodeName=="BR");if(d.length==2){let u=d[0],f=d[1];u.parentNode&&u.parentNode.parentNode==f.parentNode?f.remove():u.remove()}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&d5(r)&&(c=s6(e))&&c.eq(pn.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,wc(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),Gye(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||wc(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++)n.push(e.addedNodes[d]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Js&&Ku<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:u,nextSibling:f}=e.addedNodes[d];(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(i=u),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?hs(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?hs(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let N8=new WeakMap,M8=!1;function Gye(t){if(!N8.has(t)&&(N8.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Ba,M8)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),M8=!0}}function Kye(t){let e;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0);let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return Qf(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}function Jye(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],d5(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Wi&&t.input.lastKeyCode===8)for(let b=s;b>i;b--){let v=r.childNodes[b-1],x=v.pmViewDesc;if(v.nodeName=="BR"&&!x){s=b;break}if(!x||x.size)break}let u=t.state.doc,f=t.someProp("domParser")||Z4.fromSchema(t.state.schema),h=u.resolve(o),p=null,g=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Yye,context:h});if(c&&c[0].pos!=null){let b=c[0].pos,v=c[1]&&c[1].pos;v==null&&(v=b),p={anchor:b+o,head:v+o}}return{doc:g,sel:p,from:o,to:a}}function Yye(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Ss&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Ss&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Zye=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Xye(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let D=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,I=s6(t,D);if(I&&!t.state.selection.eq(I)){if(Wi&&_a&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",$=>$(t,Qd(13,"Enter"))))return;let R=t.state.tr.setSelection(I);D=="pointer"?R.setMeta("pointer",!0):D=="key"&&R.scrollIntoView(),s&&R.setMeta("composition",s),t.dispatch(R)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=Jye(t,e,n),d=t.state.doc,u=d.slice(c.from,c.to),f,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let p=tve(u.content,c.doc.content,c.from,f,h);if((Mg&&t.input.lastIOSEnter>Date.now()-225||_a)&&i.some(D=>D.nodeType==1&&!Zye.test(D.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",D=>D(t,Qd(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof kn&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let D=O8(t,t.state.doc,c.sel);if(D&&!D.eq(t.state.selection)){let I=t.state.tr.setSelection(D);s&&I.setMeta("composition",s),t.dispatch(I)}}return}if(Wi&&t.cursorWrapper&&c.sel&&c.sel.anchor==t.cursorWrapper.deco.from&&c.sel.head==c.sel.anchor){let D=p.endB-p.start;c.sel={anchor:c.sel.anchor+D,head:c.sel.anchor+D}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof kn&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Js&&Ku<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let g=c.doc.resolveNoCache(p.start-c.from),b=c.doc.resolveNoCache(p.endB-c.from),v=d.resolve(p.start),x=g.sameParent(b)&&g.parent.inlineContent&&v.end()>=p.endA,w;if((Mg&&t.input.lastIOSEnter>Date.now()-225&&(!x||i.some(D=>D.nodeName=="DIV"||D.nodeName=="P"))||!x&&g.pos<c.doc.content.size&&!g.sameParent(b)&&(w=pn.findFrom(c.doc.resolve(g.pos+1),1,!0))&&w.head==b.pos)&&t.someProp("handleKeyDown",D=>D(t,Qd(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&eve(d,p.start,p.endA,g,b)&&t.someProp("handleKeyDown",D=>D(t,Qd(8,"Backspace")))){_a&&Wi&&t.domObserver.suppressSelectionUpdates();return}Wi&&_a&&p.endB==p.start&&(t.input.lastAndroidDelete=Date.now()),_a&&!x&&g.start()!=b.start()&&b.parentOffset==0&&g.depth==b.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,b=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(D){return D(t,Qd(13,"Enter"))})},20));let C=p.start,P=p.endA,O,T,M;if(x){if(g.pos==b.pos)Js&&Ku<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>wc(t),20)),O=t.state.tr.delete(C,P),T=d.resolve(p.start).marksAcross(d.resolve(p.endA));else if(p.endA==p.endB&&(M=Qye(g.parent.content.cut(g.parentOffset,b.parentOffset),v.parent.content.cut(v.parentOffset,p.endA-v.start()))))O=t.state.tr,M.type=="add"?O.addMark(C,P,M.mark):O.removeMark(C,P,M.mark);else if(g.parent.child(g.index()).isText&&g.index()==b.index()-(b.textOffset?0:1)){let D=g.parent.textBetween(g.parentOffset,b.parentOffset);if(t.someProp("handleTextInput",I=>I(t,C,P,D)))return;O=t.state.tr.insertText(D,C,P)}}if(O||(O=t.state.tr.replace(C,P,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let D=O8(t,O.doc,c.sel);D&&!(Wi&&_a&&t.composing&&D.empty&&(p.start!=p.endB||t.input.lastAndroidDelete<Date.now()-100)&&(D.head==C||D.head==O.mapping.map(P)-1)||Js&&D.empty&&D.head==C)&&O.setSelection(D)}T&&O.ensureMarks(T),s&&O.setMeta("composition",s),t.dispatch(O.scrollIntoView())}function O8(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:o6(t,e.resolve(n.anchor),e.resolve(n.head))}function Qye(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);for(let d=0;d<n.length;d++)s=n[d].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=d=>d.mark(a.addToSet(d.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(st.from(c).eq(t))return{mark:a,type:o}}function eve(t,e,n,r,i){if(!r.parent.isTextblock||n-e<=i.pos-r.pos||Ik(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Ik(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Ik(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Ik(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function tve(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&R8(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&R8(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function R8(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class nve{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new kye,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(j8),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=I8(this),D8(this),this.nodeViews=$8(this),this.docView=g8(this.state.doc,L8(this),Dk(this),this.dom,this),this.domObserver=new qye(this,(r,i,s,o)=>Xye(this,r,i,s,o)),this.domObserver.start(),Cye(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&R_(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(j8),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(bU(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=$8(this);ive(h,this.nodeViews)&&(this.nodeViews=h,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&R_(this),this.editable=I8(this),D8(this);let l=Dk(this),c=L8(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",u=s||!this.docView.matchesNode(e.doc,c,l);(u||!e.selection.eq(i.selection))&&(o=!0);let f=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&j1e(this);if(o){this.domObserver.stop();let h=u&&(Js||Wi)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&rve(i.selection,e.selection);if(u){let p=Wi?this.trackWrites=this.domSelectionRange().focusNode:null;(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=g8(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&cye(this))?wc(this,h):(oU(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():f&&F1e(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof qt){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&c8(this,n.getBoundingClientRect(),e)}else c8(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new xU(e.slice,e.move,i<0?void 0:qt.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Js){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&z1e(this.dom),wc(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return W1e(this,e)}coordsAtPos(e,n=1){return XB(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return Y1e(this,n||this.state,e)}pasteHTML(e,n){return Q1(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Q1(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(_ye(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Dk(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Eye(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return Ss&&this.root.nodeType===11&&M1e(this.dom.ownerDocument)==this.dom?Kye(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function L8(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Na.node(0,t.state.doc.content.size,e)]}function D8(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Na.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function I8(t){return!t.someProp("editable",e=>e(t.state)===!1)}function rve(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function $8(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function ive(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function j8(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var yd={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},jw={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},sve=typeof navigator<"u"&&/Mac/.test(navigator.platform),ove=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ai=0;Ai<10;Ai++)yd[48+Ai]=yd[96+Ai]=String(Ai);for(var Ai=1;Ai<=24;Ai++)yd[Ai+111]="F"+Ai;for(var Ai=65;Ai<=90;Ai++)yd[Ai]=String.fromCharCode(Ai+32),jw[Ai]=String.fromCharCode(Ai);for(var $k in yd)jw.hasOwnProperty($k)||(jw[$k]=yd[$k]);function ave(t){var e=sve&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||ove&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?jw:yd)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const lve=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function cve(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))lve?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function uve(t){let e=Object.create(null);for(let n in t)e[cve(n)]=t[n];return e}function jk(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function dve(t){return new $l({props:{handleKeyDown:fve(t)}})}function fve(t){let e=uve(t);return function(n,r){let i=ave(r),s,o=e[jk(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[jk(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=yd[r.keyCode])&&s!=i){let a=e[jk(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const f6=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function AU(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const EU=(t,e,n)=>{let r=AU(t,n);if(!r)return!1;let i=h6(r);if(!i){let o=r.blockRange(),a=o&&rm(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&IU(t,i,e))return!0;if(r.parent.content.size==0&&(Og(s,"end")||qt.isSelectable(s))){let o=u5(t.doc,r.before(),r.after(),mt.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Og(s,"end")?pn.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):qt.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},hve=(t,e,n)=>{let r=AU(t,n);if(!r)return!1;let i=h6(r);return i?PU(t,i,e):!1},pve=(t,e,n)=>{let r=NU(t,n);if(!r)return!1;let i=p6(r);return i?PU(t,i,e):!1};function PU(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=u5(t.doc,s,l,mt.empty);if(!c||c.from!=s||c instanceof za&&c.slice.size>=l-s)return!1;if(n){let d=t.tr.step(c);d.setSelection(kn.create(d.doc,s)),n(d.scrollIntoView())}return!0}function Og(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const TU=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=h6(r)}let o=s&&s.nodeBefore;return!o||!qt.isSelectable(o)?!1:(e&&e(t.tr.setSelection(qt.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function h6(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function NU(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const MU=(t,e,n)=>{let r=NU(t,n);if(!r)return!1;let i=p6(r);if(!i)return!1;let s=i.nodeAfter;if(IU(t,i,e))return!0;if(r.parent.content.size==0&&(Og(s,"start")||qt.isSelectable(s))){let o=u5(t.doc,r.before(),r.after(),mt.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Og(s,"start")?pn.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):qt.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},OU=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=p6(r)}let o=s&&s.nodeAfter;return!o||!qt.isSelectable(o)?!1:(e&&e(t.tr.setSelection(qt.create(t.doc,s.pos)).scrollIntoView()),!0)};function p6(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const gve=(t,e)=>{let n=t.selection,r=n instanceof qt,i;if(r){if(n.node.isTextblock||!Ad(t.doc,n.from))return!1;i=n.from}else if(i=c5(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(qt.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},mve=(t,e)=>{let n=t.selection,r;if(n instanceof qt){if(n.node.isTextblock||!Ad(t.doc,n.to))return!1;r=n.to}else if(r=c5(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},yve=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&rm(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},RU=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function g6(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const vve=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=g6(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(pn.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},LU=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Gu||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=g6(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(kn.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},DU=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(bc(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&rm(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function bve(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof qt&&e.selection.node.isBlock)return!r.parentOffset||!bc(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(n){let s=i.parentOffset==i.parent.content.size,o=e.tr;(e.selection instanceof kn||e.selection instanceof Gu)&&o.deleteSelection();let a=r.depth==0?null:g6(r.node(-1).contentMatchAt(r.indexAfter(-1))),l=s&&a?[{type:a}]:void 0,c=bc(o.doc,o.mapping.map(r.pos),1,l);if(!l&&!c&&bc(o.doc,o.mapping.map(r.pos),1,a?[{type:a}]:void 0)&&(a&&(l=[{type:a}]),c=!0),c&&(o.split(o.mapping.map(r.pos),1,l),!s&&!r.parentOffset&&r.parent.type!=a)){let d=o.mapping.map(r.before()),u=o.doc.resolve(d);a&&r.node(-1).canReplaceWith(u.index(),u.index()+1,a)&&o.setNodeMarkup(o.mapping.map(r.before()),a)}n(o.scrollIntoView())}return!0}}const wve=bve(),xve=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(qt.create(t.doc,i))),!0)};function Sve(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Ad(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function IU(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s,o;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(Sve(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(o=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(n){let u=e.pos+i.nodeSize,f=st.empty;for(let g=s.length-1;g>=0;g--)f=st.from(s[g].create(null,f));f=st.from(r.copy(f));let h=t.tr.step(new Ys(e.pos-1,u,e.pos,u,new mt(f,1,0),s.length,!0)),p=u+2*s.length;Ad(h.doc,p)&&h.join(p),n(h.scrollIntoView())}return!0}let l=pn.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),d=c&&rm(c);if(d!=null&&d>=e.depth)return n&&n(t.tr.lift(c,d).scrollIntoView()),!0;if(a&&Og(i,"start",!0)&&Og(r,"end")){let u=r,f=[];for(;f.push(u),!u.isTextblock;)u=u.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(u.canReplace(u.childCount,u.childCount,h.content)){if(n){let g=st.empty;for(let v=f.length-1;v>=0;v--)g=st.from(f[v].copy(g));let b=t.tr.step(new Ys(e.pos-f.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new mt(g,f.length,0),0,!0));n(b.scrollIntoView())}return!0}}return!1}function $U(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(kn.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const kve=$U(-1),Cve=$U(1);function _ve(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&n6(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function F8(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let d=n.doc.resolve(c),u=d.index();i=d.parent.canReplaceWith(u,u+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}function m6(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}m6(f6,EU,TU);m6(f6,MU,OU);m6(RU,LU,DU,wve);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Ave(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(t)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let d=n.doc.resolve(o.start-2);l=new Nw(d,d,o.depth),o.endIndex<o.parent.childCount&&(o=new Nw(i,n.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=n6(l,t,e,o);return c?(r&&r(Eve(n.tr,o,c,a,t).scrollIntoView()),!0):!1}}function Eve(t,e,n,r,i){let s=st.empty;for(let d=n.length-1;d>=0;d--)s=st.from(n[d].type.create(n[d].attrs,s));t.step(new Ys(e.start-(r?2:0),e.end,e.start,e.end,new mt(s,0,0),n.length,!0));let o=0;for(let d=0;d<n.length;d++)n[d].type==i&&(o=d+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let d=e.startIndex,u=e.endIndex,f=!0;d<u;d++,f=!1)!f&&bc(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return t}function Pve(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?Tve(e,n,t,s):Nve(e,n,s):!0:!1}}function Tve(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Ys(s-1,o,s,o,new mt(st.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Nw(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=rm(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(s,-1)-1;return Ad(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function Nve(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,g=n.startIndex;p>g;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),d=s.index(-1);if(!c.canReplace(d+(a?0:1),d+1,o.content.append(l?st.empty:st.from(i))))return!1;let u=s.pos,f=u+o.nodeSize;return r.step(new Ys(u-(a?1:0),f+(l?1:0),u+1,f-1,new mt((a?st.empty:st.from(i.copy(st.empty))).append(l?st.empty:st.from(i.copy(st.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function Mve(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,d=st.from(c?t.create():null),u=new mt(st.from(t.create(null,st.from(a.type.create(null,d)))),c?3:1,0),f=s.start,h=s.end;n(e.tr.step(new Ys(f-(c?3:1),h,f,h,u,1,!0)).scrollIntoView())}return!0}}function p5(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}let g5=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...d)=>{const u=l(...d)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,d=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),u={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...g)=>{const b=this.buildProps(c,n),v=h(...g)(b);return a.push(v),u}])),run:d};return u}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...d)=>c(...d)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:p5({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...d)=>c(...d)(a)]))}};return a}};class Ove{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function yt(t,e,n){return t.config[e]===void 0&&t.parent?yt(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?yt(t.parent,e,n):null}):t.config[e]}function m5(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function jU(t){const e=[],{nodeExtensions:n,markExtensions:r}=m5(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=yt(o,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(u=>{Object.entries(d.attributes).forEach(([f,h])=>{e.push({type:u,name:f,attribute:{...s,...h}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=yt(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,u])=>{const f={...s,...u};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:d,attribute:f})})}),e}function wi(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Xi(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(d=>!l.includes(d));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function L_(t,e){return e.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Xi(n,r),{})}function FU(t){return typeof t=="function"}function cn(t,e=void 0,...n){return FU(t)?e?t.bind(e)(...n):t(...n):t}function Rve(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Lve(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function z8(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):Lve(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function B8(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Rve(n)?!1:n!=null))}function Dve(t,e){var n;const r=jU(t),{nodeExtensions:i,markExtensions:s}=m5(t),o=(n=i.find(c=>yt(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const d=r.filter(v=>v.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((v,x)=>{const w=yt(x,"extendNodeSchema",u);return{...v,...w?w(c):{}}},{}),h=B8({...f,content:cn(yt(c,"content",u)),marks:cn(yt(c,"marks",u)),group:cn(yt(c,"group",u)),inline:cn(yt(c,"inline",u)),atom:cn(yt(c,"atom",u)),selectable:cn(yt(c,"selectable",u)),draggable:cn(yt(c,"draggable",u)),code:cn(yt(c,"code",u)),defining:cn(yt(c,"defining",u)),isolating:cn(yt(c,"isolating",u)),attrs:Object.fromEntries(d.map(v=>{var x;return[v.name,{default:(x=v==null?void 0:v.attribute)===null||x===void 0?void 0:x.default}]}))}),p=cn(yt(c,"parseHTML",u));p&&(h.parseDOM=p.map(v=>z8(v,d)));const g=yt(c,"renderHTML",u);g&&(h.toDOM=v=>g({node:v,HTMLAttributes:L_(v,d)}));const b=yt(c,"renderText",u);return b&&(h.toText=b),[c.name,h]})),l=Object.fromEntries(s.map(c=>{const d=r.filter(b=>b.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((b,v)=>{const x=yt(v,"extendMarkSchema",u);return{...b,...x?x(c):{}}},{}),h=B8({...f,inclusive:cn(yt(c,"inclusive",u)),excludes:cn(yt(c,"excludes",u)),group:cn(yt(c,"group",u)),spanning:cn(yt(c,"spanning",u)),code:cn(yt(c,"code",u)),attrs:Object.fromEntries(d.map(b=>{var v;return[b.name,{default:(v=b==null?void 0:b.attribute)===null||v===void 0?void 0:v.default}]}))}),p=cn(yt(c,"parseHTML",u));p&&(h.parseDOM=p.map(b=>z8(b,d)));const g=yt(c,"renderHTML",u);return g&&(h.toDOM=b=>g({mark:b,HTMLAttributes:L_(b,d)})),[c.name,h]}));return new K0e({topNode:o,nodes:a,marks:l})}function Fk(t,e){return e.nodes[t]||e.marks[t]||null}function U8(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const Ive=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const d=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=d.slice(0,Math.max(0,r-s))}),n};function y6(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class zU{constructor(e){this.find=e.find,this.handler=e.handler}}const $ve=(t,e)=>{if(y6(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function zk(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let d=!1;const u=Ive(c)+s;return o.forEach(f=>{if(d)return;const h=$ve(u,f.find);if(!h)return;const p=l.state.tr,g=p5({state:l.state,transaction:p}),b={from:r-(h[0].length-s.length),to:i},{commands:v,chain:x,can:w}=new g5({editor:n,state:g});f.handler({state:g,range:b,match:h,commands:v,chain:x,can:w})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),d=!0)}),d}function jve(t){const{editor:e,rules:n}=t,r=new $l({state:{init(){return null},apply(i,s){const o=i.getMeta(r);return o||(i.selectionSet||i.docChanged?null:s)}},props:{handleTextInput(i,s,o,a){return zk({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&zk({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?zk({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function Fve(t){return typeof t=="number"}class zve{constructor(e){this.find=e.find,this.handler=e.handler}}const Bve=(t,e,n)=>{if(y6(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function Uve(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:d}=new g5({editor:e,state:n}),u=[];return n.doc.nodesBetween(r,i,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const g=Math.max(r,p),b=Math.min(i,p+h.content.size),v=h.textBetween(g-p,b-p,void 0,"");Bve(v,s.find,o).forEach(w=>{if(w.index===void 0)return;const C=g+w.index+1,P=C+w[0].length,O={from:n.tr.mapping.map(C),to:n.tr.mapping.map(P)},T=s.handler({state:n,range:O,match:w,commands:l,chain:c,can:d,pasteEvent:o,dropEvent:a});u.push(T)})}),u.every(h=>h!==null)}function Hve(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=new ClipboardEvent("paste"),a=new DragEvent("drop");return n.map(c=>new $l({view(d){const u=f=>{var h;r=!((h=d.dom.parentElement)===null||h===void 0)&&h.contains(f.target)?d.dom.parentElement:null};return window.addEventListener("dragstart",u),{destroy(){window.removeEventListener("dragstart",u)}}},props:{handleDOMEvents:{drop:(d,u)=>(s=r===d.dom.parentElement,a=u,!1),paste:(d,u)=>{var f;const h=(f=u.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return o=u,i=!!(h!=null&&h.includes("data-pm-slice")),!1}}},appendTransaction:(d,u,f)=>{const h=d[0],p=h.getMeta("uiEvent")==="paste"&&!i,g=h.getMeta("uiEvent")==="drop"&&!s;if(!p&&!g)return;const b=u.doc.content.findDiffStart(f.doc.content),v=u.doc.content.findDiffEnd(f.doc.content);if(!Fve(b)||!v||b===v.b)return;const x=f.tr,w=p5({state:f,transaction:x});if(!(!Uve({editor:e,state:w,from:Math.max(b-1,0),to:v.b-1,rule:c,pasteEvent:o,dropEvent:a})||!x.steps.length))return a=new DragEvent("drop"),o=new ClipboardEvent("paste"),x}}))}function Vve(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return[...new Set(e)]}class Ip{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Ip.resolve(e),this.schema=Dve(this.extensions,n),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const s={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:Fk(r.name,this.schema)};r.type==="mark"&&(!((i=cn(yt(r,"keepOnSplit",s)))!==null&&i!==void 0)||i)&&this.splittableMarks.push(r.name);const o=yt(r,"onBeforeCreate",s);o&&this.editor.on("beforeCreate",o);const a=yt(r,"onCreate",s);a&&this.editor.on("create",a);const l=yt(r,"onUpdate",s);l&&this.editor.on("update",l);const c=yt(r,"onSelectionUpdate",s);c&&this.editor.on("selectionUpdate",c);const d=yt(r,"onTransaction",s);d&&this.editor.on("transaction",d);const u=yt(r,"onFocus",s);u&&this.editor.on("focus",u);const f=yt(r,"onBlur",s);f&&this.editor.on("blur",f);const h=yt(r,"onDestroy",s);h&&this.editor.on("destroy",h)})}static resolve(e){const n=Ip.sort(Ip.flatten(e)),r=Vve(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=yt(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=yt(r,"priority")||100,o=yt(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Fk(n.name,this.schema)},i=yt(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Ip.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:Fk(o.name,this.schema)},l=[],c=yt(o,"addKeyboardShortcuts",a);let d={};if(o.type==="mark"&&o.config.exitable&&(d.ArrowRight=()=>Td.handleExit({editor:e,mark:o})),c){const g=Object.fromEntries(Object.entries(c()).map(([b,v])=>[b,()=>v({editor:e})]));d={...d,...g}}const u=dve(d);l.push(u);const f=yt(o,"addInputRules",a);U8(o,e.options.enableInputRules)&&f&&r.push(...f());const h=yt(o,"addPasteRules",a);U8(o,e.options.enablePasteRules)&&h&&i.push(...h());const p=yt(o,"addProseMirrorPlugins",a);if(p){const g=p();l.push(...g)}return l}).flat();return[jve({editor:e,rules:r}),...Hve({editor:e,rules:i}),...s]}get attributes(){return jU(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=m5(this.extensions);return Object.fromEntries(n.filter(r=>!!yt(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:wi(r.name,this.schema)},o=yt(r,"addNodeView",s);if(!o)return[];const a=(l,c,d,u)=>{const f=L_(l,i);return o()({editor:e,node:l,getPos:d,decorations:u,HTMLAttributes:f,extension:r})};return[r.name,a]}))}}function Wve(t){return Object.prototype.toString.call(t).slice(8,-1)}function Bk(t){return Wve(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function y5(t,e){const n={...t};return Bk(t)&&Bk(e)&&Object.keys(e).forEach(r=>{Bk(e[r])?r in t?n[r]=y5(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}let jl=class D_{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=cn(yt(this,"addOptions",{name:this.name}))),this.storage=cn(yt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new D_(e)}configure(e={}){const n=this.extend();return n.options=y5(this.options,e),n.storage=cn(yt(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new D_({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=cn(yt(n,"addOptions",{name:n.name})),n.storage=cn(yt(n,"addStorage",{name:n.name,options:n.options})),n}};function BU(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="",l=!0;return t.nodesBetween(r,i,(c,d,u,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),u&&(a+=p({node:c,pos:d,parent:u,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,d)-d,i-d),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function UU(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const qve=jl.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new $l({key:new wh("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=UU(n);return BU(r,{from:o,to:a},{textSerializers:l})}}})]}}),Gve=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),Kve=(t=!1)=>({commands:e})=>e.setContent("",t),Jve=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,u=c.resolve(d.map(l)),f=c.resolve(d.map(l+a.nodeSize)),h=u.blockRange(f);if(!h)return;const p=rm(h);if(a.type.isTextblock){const{defaultType:g}=u.parent.contentMatchAt(u.index());e.setNodeMarkup(h.start,g)}(p||p===0)&&e.lift(h,p)})}),!0},Yve=t=>e=>t(e),Zve=()=>({state:t,dispatch:e})=>LU(t,e),Xve=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new kn(r.doc.resolve(o-1))),!0},Qve=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},e2e=t=>({tr:e,state:n,dispatch:r})=>{const i=wi(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},t2e=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},n2e=()=>({state:t,dispatch:e})=>f6(t,e),r2e=()=>({commands:t})=>t.keyboardShortcut("Enter"),i2e=()=>({state:t,dispatch:e})=>vve(t,e);function Fw(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:y6(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function I_(t,e,n={}){return t.find(r=>r.type===e&&Fw(r.attrs,n))}function s2e(t,e,n={}){return!!I_(t,e,n)}function v6(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=I_([...r.node.marks],e,n);if(!i)return;let s=r.index,o=t.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(I_([...r.node.marks],e,n);s>0&&i.isInSet(t.parent.child(s-1).marks);)s-=1,o-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&s2e([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Pd(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const o2e=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=Pd(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:d}=a;if(i){const u=v6(l,s,e);if(u&&u.from<=c&&u.to>=d){const f=kn.create(o,u.from,u.to);n.setSelection(f)}}return!0},a2e=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function HU(t){return t instanceof kn}function df(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function VU(t,e=null){if(!e)return null;const n=pn.atStart(t),r=pn.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?kn.create(t,df(0,i,s),df(t.content.size,i,s)):kn.create(t,df(e,i,s),df(e,i,s))}function b6(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const l2e=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{b6()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!HU(n.state.selection))return o(),!0;const a=VU(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},c2e=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),u2e=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),WU=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&WU(r)}return t};function H8(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return WU(n)}function zw(t,e,n){if(n={slice:!0,parseOptions:{},...n},typeof t=="object"&&t!==null)try{return Array.isArray(t)&&t.length>0?st.fromArray(t.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),zw("",e,n)}if(typeof t=="string"){const r=Z4.fromSchema(e);return n.slice?r.parseSlice(H8(t),n.parseOptions).content:r.parse(H8(t),n.parseOptions)}return zw("",e,n)}function d2e(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof za||i instanceof Ys))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,d)=>{o===0&&(o=d)}),t.setSelection(pn.near(t.doc.resolve(o),n))}const f2e=t=>t.toString().startsWith("<"),h2e=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{if(i){n={parseOptions:{},updateSelection:!0,...n};const o=zw(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,d=!0;if((f2e(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,d=d?f.isBlock:!1}),a===l&&d){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),n.updateSelection&&d2e(r,r.steps.length-1,-1)}return!0},p2e=()=>({state:t,dispatch:e})=>gve(t,e),g2e=()=>({state:t,dispatch:e})=>mve(t,e),m2e=()=>({state:t,dispatch:e})=>EU(t,e),y2e=()=>({state:t,dispatch:e})=>MU(t,e),v2e=()=>({tr:t,state:e,dispatch:n})=>{try{const r=c5(e.doc,e.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),n&&n(t),!0)}catch{return!1}},b2e=()=>({state:t,dispatch:e,tr:n})=>{try{const r=c5(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},w2e=()=>({state:t,dispatch:e})=>hve(t,e),x2e=()=>({state:t,dispatch:e})=>pve(t,e);function w6(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function S2e(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))b6()||w6()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const k2e=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=S2e(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const d=c.map(r.mapping);d&&i&&r.maybeStep(d)}),!0};function ty(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?wi(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(u,f)=>{if(u.isText)return;const h=Math.max(r,f),p=Math.min(i,f+u.nodeSize);a.push({node:u,from:h,to:p})});const l=i-r,c=a.filter(u=>o?o.name===u.node.type.name:!0).filter(u=>Fw(u.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((u,f)=>u+f.to-f.from,0)>=l}const C2e=(t,e={})=>({state:n,dispatch:r})=>{const i=wi(t,n.schema);return ty(n,i,e)?yve(n,r):!1},_2e=()=>({state:t,dispatch:e})=>DU(t,e),A2e=t=>({state:e,dispatch:n})=>{const r=wi(t,e.schema);return Pve(r)(e,n)},E2e=()=>({state:t,dispatch:e})=>RU(t,e);function v5(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function V8(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const P2e=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=v5(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=wi(t,r.schema)),a==="mark"&&(o=Pd(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,d)=>{s&&s===c.type&&n.setNodeMarkup(d,void 0,V8(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(u=>{o===u.type&&n.addMark(d,d+c.nodeSize,o.create(V8(u.attrs,e)))})})}),!0):!1},T2e=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),N2e=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),M2e=()=>({state:t,dispatch:e})=>TU(t,e),O2e=()=>({state:t,dispatch:e})=>OU(t,e),R2e=()=>({state:t,dispatch:e})=>xve(t,e),L2e=()=>({state:t,dispatch:e})=>Cve(t,e),D2e=()=>({state:t,dispatch:e})=>kve(t,e);function qU(t,e,n={}){return zw(t,e,{slice:!1,parseOptions:n})}const I2e=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=qU(t,i.schema,n);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function Dy(t,e){const n=Pd(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function $2e(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function j2e(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function x6(t){return e=>j2e(e.$from,t)}function F2e(t,e){const n=cl.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function z2e(t,e){const n={from:0,to:t.content.size};return BU(t,n,e)}function B2e(t,e){const n=wi(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function U2e(t,e){const n=v5(typeof e=="string"?e:e.name,t.schema);return n==="node"?B2e(t,e):n==="mark"?Dy(t,e):{}}function GU(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t-1),o=v6(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function lb(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function $_(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?Pd(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(u=>s?s.name===u.type.name:!0).find(u=>Fw(u.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:u,$to:f})=>{const h=u.pos,p=f.pos;t.doc.nodesBetween(h,p,(g,b)=>{if(!g.isText&&!g.marks.length)return;const v=Math.max(h,b),x=Math.min(p,b+g.nodeSize),w=x-v;o+=w,a.push(...g.marks.map(C=>({mark:C,from:v,to:x})))})}),o===0)return!1;const l=a.filter(u=>s?s.name===u.mark.type.name:!0).filter(u=>Fw(u.mark.attrs,n,{strict:!1})).reduce((u,f)=>u+f.to-f.from,0),c=a.filter(u=>s?u.mark.type!==s&&u.mark.type.excludes(s):!0).reduce((u,f)=>u+f.to-f.from,0);return(l>0?l+c:l)>=o}function H2e(t,e,n={}){if(!e)return ty(t,null,n)||$_(t,null,n);const r=v5(e,t.schema);return r==="node"?ty(t,e,n):r==="mark"?$_(t,e,n):!1}function W8(t,e){const{nodeExtensions:n}=m5(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=cn(yt(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function V2e(t){var e;const n=(e=t.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function W2e(t,e,n){var r;const{selection:i}=e;let s=null;if(HU(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,u,f)=>{if(c)return!1;if(d.isInline){const h=!f||f.type.allowsMarkType(n),p=!!n.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(n));c=h&&p}return!c}),c})}const q2e=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=Pd(t,r.schema);if(i)if(o){const c=Dy(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const d=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(d,u,(f,h)=>{const p=Math.max(h,d),g=Math.min(h+f.nodeSize,u);f.marks.find(v=>v.type===l)?f.marks.forEach(v=>{l===v.type&&n.addMark(p,g,l.create({...v.attrs,...e}))}):n.addMark(p,g,l.create(e))})});return W2e(r,n,l)},G2e=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),K2e=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=wi(t,n.schema);return s.isTextblock?i().command(({commands:o})=>F8(s,e)(n)?!0:o.clearNodes()).command(({state:o})=>F8(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},J2e=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=df(t,0,r.content.size),s=qt.create(r,i);e.setSelection(s)}return!0},Y2e=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=kn.atStart(r).from,a=kn.atEnd(r).to,l=df(i,o,a),c=df(s,o,a),d=kn.create(r,l,c);e.setSelection(d)}return!0},Z2e=t=>({state:e,dispatch:n})=>{const r=wi(t,e.schema);return Mve(r)(e,n)};function q8(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const X2e=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,d=lb(c,a.node().type.name,a.node().attrs);if(s instanceof qt&&s.node.isBlock)return!a.parentOffset||!bc(o,a.pos)?!1:(r&&(t&&q8(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const u=l.parentOffset===l.parent.content.size;s instanceof kn&&e.deleteSelection();const f=a.depth===0?void 0:$2e(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=u&&f?[{type:f,attrs:d}]:void 0,p=bc(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&bc(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:d}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!u&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),b=e.doc.resolve(g);a.node(-1).canReplaceWith(b.index(),b.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&q8(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},Q2e=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var s;const o=wi(t,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const d=a.node(-1);if(d.type!==o)return!1;const u=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let b=st.empty;const v=a.index(-1)?1:a.index(-2)?2:3;for(let T=a.depth-v;T>=a.depth-3;T-=1)b=st.from(a.node(T).copy(b));const x=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,w=lb(u,a.node().type.name,a.node().attrs),C=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(w))||void 0;b=b.append(st.from(o.createAndFill(null,C)||void 0));const P=a.before(a.depth-(v-1));e.replace(P,a.after(-x),new mt(b,4-v,0));let O=-1;e.doc.nodesBetween(P,e.doc.content.size,(T,M)=>{if(O>-1)return!1;T.isTextblock&&T.content.size===0&&(O=M+1)}),O>-1&&e.setSelection(kn.near(e.doc.resolve(O))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?d.contentMatchAt(0).defaultType:null,h=lb(u,d.type.name,d.attrs),p=lb(u,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const g=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!bc(e.doc,a.pos,2))return!1;if(r){const{selection:b,storedMarks:v}=n,{splittableMarks:x}=i.extensionManager,w=v||b.$to.parentOffset&&b.$from.marks();if(e.split(a.pos,2,g).scrollIntoView(),!w||!r)return!0;const C=w.filter(P=>x.includes(P.type.name));e.ensureMarks(C)}return!0},Uk=(t,e)=>{const n=x6(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Ad(t.doc,n.pos)&&t.join(n.pos),!0},Hk=(t,e)=>{const n=x6(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Ad(t.doc,r)&&t.join(r),!0},ebe=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:u,splittableMarks:f}=i.extensionManager,h=wi(t,o.schema),p=wi(e,o.schema),{selection:g,storedMarks:b}=o,{$from:v,$to:x}=g,w=v.blockRange(x),C=b||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const P=x6(O=>W8(O.type.name,u))(g);if(w.depth>=1&&P&&w.depth-P.depth<=1){if(P.node.type===h)return c.liftListItem(p);if(W8(P.node.type.name,u)&&h.validContent(P.node.content)&&a)return l().command(()=>(s.setNodeMarkup(P.pos,h),!0)).command(()=>Uk(s,h)).command(()=>Hk(s,h)).run()}return!n||!C||!a?l().command(()=>d().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>Uk(s,h)).command(()=>Hk(s,h)).run():l().command(()=>{const O=d().wrapInList(h,r),T=C.filter(M=>f.includes(M.type.name));return s.ensureMarks(T),O?!0:c.clearNodes()}).wrapInList(h,r).command(()=>Uk(s,h)).command(()=>Hk(s,h)).run()},tbe=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Pd(t,r.schema);return $_(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},nbe=(t,e,n={})=>({state:r,commands:i})=>{const s=wi(t,r.schema),o=wi(e,r.schema);return ty(r,s,n)?i.setNode(o):i.setNode(s,n)},rbe=(t,e={})=>({state:n,commands:r})=>{const i=wi(t,n.schema);return ty(n,i,e)?r.lift(i):r.wrapIn(i,e)},ibe=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},sbe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},obe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=Pd(t,r.schema),{$from:c,empty:d,ranges:u}=a;if(!i)return!0;if(d&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(b=>b.type===l))===null||s===void 0?void 0:s.attrs,g=v6(c,l,p);g&&(f=g.from,h=g.to),n.removeMark(f,h,l)}else u.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},abe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=v5(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=wi(t,r.schema)),a==="mark"&&(o=Pd(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,d=l.$to.pos;r.doc.nodesBetween(c,d,(u,f)=>{s&&s===u.type&&n.setNodeMarkup(f,void 0,{...u.attrs,...e}),o&&u.marks.length&&u.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),g=Math.min(f+u.nodeSize,d);n.addMark(p,g,o.create({...h.attrs,...e}))}})})}),!0):!1},lbe=(t,e={})=>({state:n,dispatch:r})=>{const i=wi(t,n.schema);return _ve(i,e)(n,r)},cbe=(t,e={})=>({state:n,dispatch:r})=>{const i=wi(t,n.schema);return Ave(i,e)(n,r)};var ube=Object.freeze({__proto__:null,blur:Gve,clearContent:Kve,clearNodes:Jve,command:Yve,createParagraphNear:Zve,cut:Xve,deleteCurrentNode:Qve,deleteNode:e2e,deleteRange:t2e,deleteSelection:n2e,enter:r2e,exitCode:i2e,extendMarkRange:o2e,first:a2e,focus:l2e,forEach:c2e,insertContent:u2e,insertContentAt:h2e,joinUp:p2e,joinDown:g2e,joinBackward:m2e,joinForward:y2e,joinItemBackward:v2e,joinItemForward:b2e,joinTextblockBackward:w2e,joinTextblockForward:x2e,keyboardShortcut:k2e,lift:C2e,liftEmptyBlock:_2e,liftListItem:A2e,newlineInCode:E2e,resetAttributes:P2e,scrollIntoView:T2e,selectAll:N2e,selectNodeBackward:M2e,selectNodeForward:O2e,selectParentNode:R2e,selectTextblockEnd:L2e,selectTextblockStart:D2e,setContent:I2e,setMark:q2e,setMeta:G2e,setNode:K2e,setNodeSelection:J2e,setTextSelection:Y2e,sinkListItem:Z2e,splitBlock:X2e,splitListItem:Q2e,toggleList:ebe,toggleMark:tbe,toggleNode:nbe,toggleWrap:rbe,undoInputRule:ibe,unsetAllMarks:sbe,unsetMark:obe,updateAttributes:abe,wrapIn:lbe,wrapInList:cbe});const dbe=jl.create({name:"commands",addCommands(){return{...ube}}}),fbe=jl.create({name:"editable",addProseMirrorPlugins(){return[new $l({key:new wh("editable"),props:{editable:()=>this.editor.options.editable}})]}}),hbe=jl.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new $l({key:new wh("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),pbe=jl.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:u}=l,{pos:f,parent:h}=u,p=u.parent.isTextblock?a.doc.resolve(f-1):u,g=p.parent.type.spec.isolating,b=u.pos-u.parentOffset,v=g&&p.parent.childCount===1?b===u.pos:pn.atStart(c).from===f;return!d||!v||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return b6()||w6()?s:i},addProseMirrorPlugins(){return[new $l({key:new wh("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(p=>p.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=pn.atStart(e.doc).from,l=pn.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const u=n.tr,f=p5({state:n,transaction:u}),{commands:h}=new g5({editor:this.editor,state:f});if(h.clearNodes(),!!u.steps.length)return u}})]}}),gbe=jl.create({name:"tabindex",addProseMirrorPlugins(){return[new $l({key:new wh("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var mbe=Object.freeze({__proto__:null,ClipboardTextSerializer:qve,Commands:dbe,Editable:fbe,FocusEvents:hbe,Keymap:pbe,Tabindex:gbe});class ef{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new ef(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ef(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ef(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=this.pos+r+(i?0:1),o=this.resolvedPos.doc.resolve(s);if(!i&&o.depth<=this.depth)return;const a=new ef(o,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new ef(o,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];return this.isBlock||!this.children||this.children.length===0||this.children.forEach(s=>{if(s.node.type.name===e){if(Object.keys(n).length>0){const o=s.node.attrs,a=Object.keys(n);for(let l=0;l<a.length;l+=1){const c=a[l];if(o[c]!==n[c])return}}if(i.push(s),r)return}i=i.concat(s.querySelectorAll(e))}),i}setAttribute(e){const n=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(n.from).run()}}const ybe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function vbe(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let bbe=class extends Ove{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=vbe(ybe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=FU(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const n=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(n))});this.view.updateState(r)}createExtensionManager(){const n=[...this.options.enableCoreExtensions?Object.values(mbe):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new Ip(n,this)}createCommandManager(){this.commandManager=new g5({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=qU(this.options.content,this.schema,this.options.parseOptions),n=VU(e,this.options.autofocus);this.view=new nve(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:Dp.create({doc:e,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return U2e(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return H2e(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return F2e(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return z2e(this.state.doc,{blockSeparator:n,textSerializers:{...UU(this.schema),...r}})}get isEmpty(){return V2e(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new ef(n,this)}get $doc(){return this.$pos(0)}};function ny(t){return new zU({find:t.find,handler:({state:e,range:n,match:r})=>{const i=cn(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),d=c+o.length;if(GU(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(g=>g===t.type&&g!==h.mark.type)).filter(h=>h.to>c).length)return null;d<n.to&&s.delete(d,n.to),c>n.from&&s.delete(n.from+l,c);const f=n.from+l+o.length;s.addMark(n.from+l,f,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function Bw(t){return new zU({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=cn(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&n6(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:u,storedMarks:f}=e,{splittableMarks:h}=t.editor.extensionManager,p=f||u.$to.parentOffset&&u.$from.marks();if(p){const g=p.filter(b=>h.includes(b.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const u=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(u,s).run()}const d=o.doc.resolve(n.from-1).nodeBefore;d&&d.type===t.type&&Ad(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,d))&&o.join(n.from-1)}})}let Td=class j_{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=cn(yt(this,"addOptions",{name:this.name}))),this.storage=cn(yt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new j_(e)}configure(e={}){const n=this.extend();return n.options=y5(this.options,e),n.storage=cn(yt(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new j_({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=cn(yt(n,"addOptions",{name:n.name})),n.storage=cn(yt(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}},Vc=class F_{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=cn(yt(this,"addOptions",{name:this.name}))),this.storage=cn(yt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new F_(e)}configure(e={}){const n=this.extend();return n.options=y5(this.options,e),n.storage=cn(yt(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new F_({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=cn(yt(n,"addOptions",{name:n.name})),n.storage=cn(yt(n,"addStorage",{name:n.name,options:n.options})),n}};function ry(t){return new zve({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=cn(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const d=l.search(/\S/),u=n.from+l.indexOf(a),f=u+a.length;if(GU(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(b=>b===t.type&&b!==p.mark.type)).filter(p=>p.to>u).length)return null;f<n.to&&o.delete(f,n.to),u>n.from&&o.delete(n.from+d,u),c=n.from+d+a.length,o.addMark(n.from+d,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const wbe=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},xbe=({renderers:t})=>Le.createElement(Le.Fragment,null,Object.entries(t).map(([e,n])=>yx.createPortal(n.reactElement,n.element,e)));class Sbe extends Le.Component{constructor(e){super(e),this.editorContentRef=Le.createRef(),this.initialized=!1,this.state={renderers:{}}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}maybeFlushSync(e){this.initialized?Ua.flushSync(e):e()}setRenderer(e,n){this.maybeFlushSync(()=>{this.setState(({renderers:r})=>({renderers:{...r,[e]:n}}))})}removeRenderer(e){this.maybeFlushSync(()=>{this.setState(({renderers:n})=>{const r={...n};return delete r[e],{renderers:r}})})}componentWillUnmount(){const{editor:e}=this.props;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return Le.createElement(Le.Fragment,null,Le.createElement("div",{ref:wbe(n,this.editorContentRef),...r}),Le.createElement(xbe,{renderers:this.state.renderers}))}}const kbe=S.forwardRef((t,e)=>{const n=Le.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Le.createElement(Sbe,{key:n,innerRef:e,...t})}),Cbe=Le.memo(kbe);class _be extends bbe{constructor(){super(...arguments),this.contentComponent=null}}const Abe=(t={},e=[])=>{const n=S.useRef(null),[,r]=S.useState({}),{onBeforeCreate:i,onBlur:s,onCreate:o,onDestroy:a,onFocus:l,onSelectionUpdate:c,onTransaction:d,onUpdate:u}=t,f=S.useRef(i),h=S.useRef(s),p=S.useRef(o),g=S.useRef(a),b=S.useRef(l),v=S.useRef(c),x=S.useRef(d),w=S.useRef(u);return S.useEffect(()=>{n.current&&(i&&(n.current.off("beforeCreate",f.current),n.current.on("beforeCreate",i),f.current=i),s&&(n.current.off("blur",h.current),n.current.on("blur",s),h.current=s),o&&(n.current.off("create",p.current),n.current.on("create",o),p.current=o),a&&(n.current.off("destroy",g.current),n.current.on("destroy",a),g.current=a),l&&(n.current.off("focus",b.current),n.current.on("focus",l),b.current=l),c&&(n.current.off("selectionUpdate",v.current),n.current.on("selectionUpdate",c),v.current=c),d&&(n.current.off("transaction",x.current),n.current.on("transaction",d),x.current=d),u&&(n.current.off("update",w.current),n.current.on("update",u),w.current=u))},[i,s,o,a,l,c,d,u,n.current]),S.useEffect(()=>{let C=!0;return n.current=new _be(t),n.current.on("transaction",()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{C&&r({})})})}),()=>{C=!1}},e),S.useEffect(()=>()=>{var C;return(C=n.current)===null||C===void 0?void 0:C.destroy()},[]),n.current},Ebe=S.createContext({editor:null});Ebe.Consumer;const Pbe=S.createContext({onDragStart:void 0}),Tbe=()=>S.useContext(Pbe);Le.forwardRef((t,e)=>{const{onDragStart:n}=Tbe(),r=t.as||"div";return Le.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const Nbe=Vc.create({name:"doc",topNode:!0,content:"block+"}),Mbe=Vc.create({name:"text",group:"inline"}),Obe=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,Rbe=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,Lbe=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,Dbe=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,Ibe=Td.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Xi(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ny({find:Obe,type:this.type}),ny({find:Lbe,type:this.type})]},addPasteRules(){return[ry({find:Rbe,type:this.type}),ry({find:Dbe,type:this.type})]}}),$be=Vc.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Xi(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),G8=Td.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",Xi(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Dy(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),K8=/^\s*([-+*])\s$/,jbe=Vc.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Xi(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes($be.name,this.editor.getAttributes(G8.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Bw({find:K8,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Bw({find:K8,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(G8.name),editor:this.editor})),[t]}});function Fbe(t={}){return new $l({view(e){return new zbe(e,t)}})}class zbe{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let d=c.getBoundingClientRect(),u=a?d.bottom:d.top;a&&l&&(u=(u+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:d.left,right:d.right,top:u-this.width/2,bottom:u+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=i.getBoundingClientRect();s=a.left-i.scrollLeft,o=a.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=DB(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const Bbe=jl.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Fbe(this.options)]}}),Ube=Vc.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Xi(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&l&&o){const u=l.filter(f=>a.includes(f.type.name));c.ensureMarks(u)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});var Uw=200,bi=function(){};bi.prototype.append=function(e){return e.length?(e=bi.from(e),!this.length&&e||e.length<Uw&&this.leafAppend(e)||this.length<Uw&&e.leafPrepend(this)||this.appendInner(e)):this};bi.prototype.prepend=function(e){return e.length?bi.from(e).append(this):this};bi.prototype.appendInner=function(e){return new Hbe(this,e)};bi.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?bi.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};bi.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};bi.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};bi.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};bi.from=function(e){return e instanceof bi?e:e&&e.length?new KU(e):bi.empty};var KU=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Uw)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Uw)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(bi);bi.empty=new KU([]);var Hbe=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(bi);const Vbe=500;class Ea{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],d=[];return this.items.forEach((u,f)=>{if(!u.step){i||(i=this.remapping(r,f+1),s=i.maps.length),s--,d.push(u);return}if(i){d.push(new sl(u.map));let h=u.step.map(i.slice(s)),p;h&&o.maybeStep(h).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new sl(p,void 0,void 0,c.length+d.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(u.step);if(u.selection)return a=i?u.selection.map(i.slice(s)):u.selection,l=new Ea(this.items.slice(0,r).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let u=e.steps[d].invert(e.docs[d]),f=new sl(e.mapping.maps[d],u,n),h;(h=l&&l.merge(f))&&(f=h,d?s.pop():a=a.slice(0,a.length-1)),s.push(f),n&&(o++,n=void 0),i||(l=f)}let c=o-r.depth;return c>qbe&&(a=Wbe(a,c),o-=c),new Ea(a.append(s),o)}remapping(e,n){let r=new Jp;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Ea(this.items.append(e.map(n=>new sl(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=n;this.items.forEach(f=>{let h=s.getMirror(--l);if(h==null)return;o=Math.min(o,h);let p=s.maps[h];if(f.step){let g=e.steps[h].invert(e.docs[h]),b=f.selection&&f.selection.map(s.slice(l+1,h));b&&a++,r.push(new sl(p,g,b))}else r.push(new sl(p))},i);let c=[];for(let f=n;f<o;f++)c.push(new sl(s.maps[f]));let d=this.items.slice(0,i).append(c).append(r),u=new Ea(d,a);return u.emptyItemCount()>Vbe&&(u=u.compress(this.items.length-r.length)),u}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let d=o.selection&&o.selection.map(n.slice(r));d&&s++;let u=new sl(c.invert(),l,d),f,h=i.length-1;(f=i.length&&i[h].merge(u))?i[h]=f:i.push(u)}}else o.map&&r--},this.items.length,0),new Ea(bi.from(i.reverse()),s)}}Ea.empty=new Ea(bi.empty,0);function Wbe(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class sl{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new sl(n.getMap().invert(),n,this.selection)}}}class Su{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const qbe=20;function Gbe(t,e,n,r){let i=n.getMeta(Zu),s;if(i)return i.historyState;n.getMeta(Jbe)&&(t=new Su(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Zu))return o.getMeta(Zu).redo?new Su(t.done.addTransform(n,void 0,r,cb(e)),t.undone,J8(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new Su(t.done,t.undone.addTransform(n,void 0,r,cb(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Kbe(n,t.prevRanges)),c=o?Vk(t.prevRanges,n.mapping):J8(n.mapping.maps[n.steps.length-1]);return new Su(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,cb(e)),Ea.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Su(t.done.rebased(n,s),t.undone.rebased(n,s),Vk(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Su(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Vk(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Kbe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function J8(t){let e=[];return t.forEach((n,r,i,s)=>e.push(i,s)),e}function Vk(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function JU(t,e,n,r){let i=cb(e),s=Zu.get(e).spec.config,o=(r?t.undone:t.done).popEvent(e,i);if(!o)return;let a=o.selection.resolve(o.transform.doc),l=(r?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),s,i),c=new Su(r?l:o.remaining,r?o.remaining:l,null,0,-1);n(o.transform.setSelection(a).setMeta(Zu,{redo:r,historyState:c}).scrollIntoView())}let Wk=!1,Y8=null;function cb(t){let e=t.plugins;if(Y8!=e){Wk=!1,Y8=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Wk=!0;break}}return Wk}const Zu=new wh("history"),Jbe=new wh("closeHistory");function Ybe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new $l({key:Zu,state:{init(){return new Su(Ea.empty,Ea.empty,null,0,-1)},apply(e,n,r){return Gbe(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?YU:r=="historyRedo"?ZU:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}const YU=(t,e)=>{let n=Zu.getState(t);return!n||n.done.eventCount==0?!1:(e&&JU(n,t,e,!1),!0)},ZU=(t,e)=>{let n=Zu.getState(t);return!n||n.undone.eventCount==0?!1:(e&&JU(n,t,e,!0),!0)},Zbe=jl.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>YU(t,e),redo:()=>({state:t,dispatch:e})=>ZU(t,e)}},addProseMirrorPlugins(){return[Ybe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Xbe=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,Qbe=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,ewe=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,twe=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,nwe=Td.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Xi(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ny({find:Xbe,type:this.type}),ny({find:ewe,type:this.type})]},addPasteRules(){return[ry({find:Qbe,type:this.type}),ry({find:twe,type:this.type})]}}),rwe=Vc.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Xi(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),iwe=Vc.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Xi(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Z8=Td.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",Xi(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Dy(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),X8=/^(\d+)\.\s$/,swe=Vc.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Xi(this.options.HTMLAttributes,n),0]:["ol",Xi(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(iwe.name,this.editor.getAttributes(Z8.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Bw({find:X8,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Bw({find:X8,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Z8.name)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),owe=Vc.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Xi(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),awe=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,lwe=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,cwe=Td.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Xi(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){const t={};return w6()?t["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():t["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),t},addInputRules(){return[ny({find:awe,type:this.type})]},addPasteRules(){return[ry({find:lwe,type:this.type})]}}),uwe=Td.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Xi(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),dwe=Td.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",Xi(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Dy(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),fwe=jl.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>{var e;return(e=t.style.fontFamily)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily.split(",").map(e=>CSS.escape(e.trim())).join(", ")}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),hwe=jl.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>t.style.textAlign||this.options.defaultAlignment,renderHTML:t=>t.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${t.textAlign}`}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.every(n=>e.updateAttributes(n,{textAlign:t})):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.every(e=>t.resetAttributes(e,"textAlign"))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});var pwe=Object.defineProperty,gwe=Object.defineProperties,mwe=Object.getOwnPropertyDescriptors,Hw=Object.getOwnPropertySymbols,XU=Object.prototype.hasOwnProperty,QU=Object.prototype.propertyIsEnumerable,Q8=(t,e,n)=>e in t?pwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,un=(t,e)=>{for(var n in e||(e={}))XU.call(e,n)&&Q8(t,n,e[n]);if(Hw)for(var n of Hw(e))QU.call(e,n)&&Q8(t,n,e[n]);return t},Yo=(t,e)=>gwe(t,mwe(e)),xh=(t,e)=>{var n={};for(var r in t)XU.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Hw)for(var r of Hw(t))e.indexOf(r)<0&&QU.call(t,r)&&(n[r]=t[r]);return n},ywe=t=>{var e=t,{options:n,plugins:r,enabled:i=!0,darkMode:s=!1,showGrid:o=!1,snapToGrid:a=!1,snapToObjects:l=!1,onMount:c,onSelectionChange:d,onCurrentPageChange:u,onActiveHandlerChange:f,onActiveHandlerLockChange:h,onShapeCreate:p,onShapeInitialize:g,onTransaction:b,onAction:v,onUndo:x,onRedo:w,onDblClick:C,onZoom:P,onScroll:O,onDragStart:T,onDrag:M,onDragEnd:D,onFileDrop:I}=e,R=xh(e,["options","plugins","enabled","darkMode","showGrid","snapToGrid","snapToObjects","onMount","onSelectionChange","onCurrentPageChange","onActiveHandlerChange","onActiveHandlerLockChange","onShapeCreate","onShapeInitialize","onTransaction","onAction","onUndo","onRedo","onDblClick","onZoom","onScroll","onDragStart","onDrag","onDragEnd","onFileDrop"]);const $=S.useRef(null),H=S.useRef(null);return S.useEffect(()=>{if(!H.current){const z=new gne($.current,Kne(un({},n)),r);z.selection.onChange.addListener(ee=>{d&&d(ee)}),z.onCurrentPageChange.addListener(ee=>{u&&u(ee)}),z.onActiveHandlerChange.addListener(ee=>{f&&f(ee)}),z.onActiveHandlerLockChange.addListener(ee=>{h&&h(ee)}),z.factory.onCreate.addListener(ee=>{p&&p(ee)}),z.factory.onShapeInitialize.addListener(ee=>{g&&g(ee)}),z.transform.onTransaction.addListener(ee=>{b&&b(ee)}),z.transform.onAction.addListener(ee=>{v&&v(ee)}),z.transform.onUndo.addListener(ee=>{x&&x(ee)}),z.transform.onRedo.addListener(ee=>{w&&w(ee)}),z.onDblClick.addListener(ee=>{C&&C(ee)}),z.onZoom.addListener(ee=>{P&&P(ee)}),z.onScroll.addListener(ee=>{O&&O(ee)}),z.onDragStart.addListener(ee=>{T&&T(ee)}),z.onDrag.addListener(ee=>{M&&M(ee)}),z.onDragEnd.addListener(ee=>{D&&D(ee)}),z.onFileDrop.addListener(ee=>{I&&I(ee)}),H.current=z,z.fit(),z.activateDefaultHandler(),z.repaint(),c&&c(z)}return()=>{}},[]),S.useEffect(()=>{var z;(z=H.current)==null||z.setEnabled(i)},[i]),S.useEffect(()=>{var z;(z=H.current)==null||z.setDarkMode(s)},[s]),S.useEffect(()=>{var z;(z=H.current)==null||z.setShowGrid(o)},[o]),S.useEffect(()=>{var z;(z=H.current)==null||z.setSnapToGrid(a)},[a]),S.useEffect(()=>{var z;(z=H.current)==null||z.setSnapToObjects(l)},[l]),y.jsx("div",un({ref:$},R))},vwe=16,bwe=16,wwe=16,xwe=16;function Swe(t){switch(t){case"top":return"start";case"middle":return"center";case"bottom":return"end";default:return"start"}}function eH(t,e,n,r=46){var i,s;const o=((i=t.canvasElement)==null?void 0:i.offsetWidth)||0,a=((s=t.canvasElement)==null?void 0:s.offsetHeight)||0,l=mr.center(n),c=mr.height(n)*t.getScale(),d=l[1]<a/2;let u=l[0],f=d?l[1]+c/2+r:l[1]-c/2-r;const h=e.offsetWidth,p=e.offsetHeight;return u-h/2<0&&(u=h/2+vwe),u+h/2>o&&(u=o-h/2-wwe),f-p/2<0&&(f=p/2+bwe),f+p/2>a&&(f=a-p/2-xwe),e.style.left=`${u-h/2}px`,e.style.top=`${f-p/2}px`,d}function tH(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=tH(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function nH(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,d=Math.min(o.text.length,a.text.length);for(;c<d&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=nH(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}var Yt=class ds{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,n-d),r,i+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new ds(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new ds(r,i)}cutByIndex(e,n){return e==n?ds.empty:e==0&&n==this.content.length?this:new ds(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new ds(i,s)}addToStart(e){return new ds([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ds(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return tH(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return nH(this,e,n,r)}findIndex(e,n=-1){if(e==0)return m2(0,e);if(e==this.size)return m2(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?m2(r+1,o):m2(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return ds.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new ds(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ds.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new ds(n||e,r)}static from(e){if(!e)return ds.empty;if(e instanceof ds)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ds([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Yt.empty=new Yt([],0);var qk={index:0,offset:0};function m2(t,e){return qk.index=t,qk.offset=e,qk}function z_(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!z_(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!z_(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}var ol=class B_{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&z_(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return B_.none;if(e instanceof B_)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ol.none=[];var kwe=class extends Error{},sn=class pp{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=iH(this.content,e+this.openStart,n);return r&&new pp(r,this.openStart,this.openEnd)}removeBetween(e,n){return new pp(rH(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return pp.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new pp(Yt.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new pp(e,r,i)}};sn.empty=new sn(Yt.empty,0,0);function rH(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(rH(s.content,e-i-1,n-i-1)))}function iH(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=iH(o.content,e-s-1,n);return a&&t.replaceChild(i,o.copy(a))}var U_=class{constructor(t,e,n){this.$from=t,this.$to=e,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},Cwe=class H_{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new tO(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new tO(this,n,!0);return r.addAll(e,n.from,n.to),sn.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Ewe(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=nO(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=nO(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new H_(e,H_.schemaRules(e)))}},sH={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},_we={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},oH={ol:!0,ul:!0},Vw=1,Ww=2,ub=4;function eO(t,e,n){return e!=null?(e?Vw:0)|(e==="full"?Ww:0):t&&t.whitespace=="pre"?Vw|Ww:n&-5}var y2=class{constructor(t,e,n,r,i,s,o){this.type=t,this.attrs=e,this.marks=n,this.pendingMarks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=ol.none,this.stashMarks=[],this.match=s||(o&ub?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(Yt.from(t));if(e)this.match=this.type.contentMatch.matchFragment(e);else{let n=this.type.contentMatch,r;return(r=n.findWrapping(t.type))?(this.match=n,r):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Vw)){let n=this.content[this.content.length-1],r;if(n&&n.isText&&(r=/[ \t\r\n\u000c]+$/.exec(n.text))){let i=n;n.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-r[0].length))}}let e=Yt.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(Yt.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}popFromStashMark(t){for(let e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}applyPending(t){for(let e=0,n=this.pendingMarks;e<n.length;e++){let r=n[e];(this.type?this.type.allowsMarkType(r.type):Twe(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!sH.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}},tO=class{constructor(t,e,n){this.parser=t,this.options=e,this.isOpen=n,this.open=0;let r=e.topNode,i,s=eO(null,e.preserveWhitespace,0)|(n?ub:0);r?i=new y2(r.type,r.attrs,ol.none,ol.none,!0,e.topMatch||r.type.contentMatch,s):n?i=new y2(null,null,ol.none,ol.none,!0,null,s):i=new y2(t.schema.topNodeType,null,ol.none,ol.none,!0,null,s),this.nodes=[i],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t){t.nodeType==3?this.addTextNode(t):t.nodeType==1&&this.addElement(t)}withStyleRules(t,e){let n=t.getAttribute("style");if(!n)return e();let r=this.readStyles(Pwe(n));if(!r)return;let[i,s]=r,o=this.top;for(let a=0;a<s.length;a++)this.removePendingMark(s[a],o);for(let a=0;a<i.length;a++)this.addPendingMark(i[a]);e();for(let a=0;a<i.length;a++)this.removePendingMark(i[a],o);for(let a=0;a<s.length;a++)this.addPendingMark(s[a])}addTextNode(t){let e=t.nodeValue,n=this.top;if(n.options&Ww||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&Vw)n.options&Ww?e=e.replace(/\r\n?/g,`
`):e=e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){let r=n.content[n.content.length-1],i=t.previousSibling;(!r||i&&i.nodeName=="BR"||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)}addElement(t,e){let n=t.nodeName.toLowerCase(),r;oH.hasOwnProperty(n)&&this.parser.normalizeLists&&Awe(t);let i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(r=this.parser.matchTag(t,this,e));if(i?i.ignore:_we.hasOwnProperty(n))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);let s,o=this.top,a=this.needsBlock;if(sH.hasOwnProperty(n))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),s=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t);return}i&&i.skip?this.addAll(t):this.withStyleRules(t,()=>this.addAll(t)),s&&this.sync(o),this.needsBlock=a}else this.withStyleRules(t,()=>{this.addElementByRule(t,i,i.consuming===!1?r:void 0)})}leafFallback(t){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`))}ignoreFallback(t){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(t){let e=ol.none,n=ol.none;for(let r=0;r<t.length;r+=2)for(let i=void 0;;){let s=this.parser.matchStyle(t[r],t[r+1],this,i);if(!s)break;if(s.ignore)return null;if(s.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(o=>{s.clearMark(o)&&(n=o.addToSet(n))}):e=this.parser.schema.marks[s.mark].create(s.attrs).addToSet(e),s.consuming===!1)i=s;else break}return[e,n]}addElementByRule(t,e,n){let r,i,s;e.node?(i=this.parser.schema.nodes[e.node],i.isLeaf?this.insertNode(i.create(e.attrs))||this.leafFallback(t):r=this.enter(i,e.attrs||null,e.preserveWhitespace)):(s=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(s));let o=this.top;if(i&&i.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(a=>this.insertNode(a));else{let a=t;typeof e.contentElement=="string"?a=t.querySelector(e.contentElement):typeof e.contentElement=="function"?a=e.contentElement(t):e.contentElement&&(a=e.contentElement),this.findAround(t,a,!0),this.addAll(a)}r&&this.sync(o)&&this.open--,s&&this.removePendingMark(s,o)}addAll(t,e,n){let r=e||0;for(let i=e?t.childNodes[e]:t.firstChild,s=n==null?null:t.childNodes[n];i!=s;i=i.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(i);this.findAtPoint(t,r)}findPlace(t){let e,n;for(let r=this.open;r>=0;r--){let i=this.nodes[r],s=i.findWrapping(t);if(s&&(!e||e.length>s.length)&&(e=s,n=i,!s.length)||i.solid)break}if(!e)return!1;this.sync(n);for(let r=0;r<e.length;r++)this.enterInner(e[r],null,!1);return!0}insertNode(t){if(t.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();let e=this.top;e.applyPending(t.type),e.match&&(e.match=e.match.matchType(t.type));let n=e.activeMarks;for(let r=0;r<t.marks.length;r++)(!e.type||e.type.allowsMarkType(t.marks[r].type))&&(n=t.marks[r].addToSet(n));return e.content.push(t.mark(n)),!0}return!1}enter(t,e,n){let r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r}enterInner(t,e=null,n=!1,r){this.closeExtra();let i=this.top;i.applyPending(t),i.match=i.match&&i.match.matchType(t);let s=eO(t,r,i.options);i.options&ub&&i.content.length==0&&(s|=ub),this.nodes.push(new y2(t,e,i.activeMarks,i.pendingMarks,n,null,s)),this.open++}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let n=this.nodes[e].content;for(let r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].pos==null&&t.nodeType==1&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,n){if(t!=e&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&t.nodeType==1&&t.contains(this.find[r].node)&&e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+(r?0:1),s=(o,a)=>{for(;o>=0;o--){let l=e[o];if(l==""){if(o==e.length-1||o==0)continue;for(;a>=i;a--)if(s(o-1,a))return!0;return!1}else{let c=a>0||a==0&&r?this.nodes[a].type:n&&a>=i?n.node(a-i).type:null;if(!c||c.name!=l&&c.groups.indexOf(l)==-1)return!1;a--}}return!0};return s(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let n=this.parser.schema.nodes[e];if(n.isTextblock&&n.defaultAttrs)return n}}addPendingMark(t){let e=Nwe(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}removePendingMark(t,e){for(let n=this.open;n>=0;n--){let r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);let s=r.popFromStashMark(t);s&&r.type&&r.type.allowsMarkType(s.type)&&(r.activeMarks=s.addToSet(r.activeMarks))}if(r==e)break}}};function Awe(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&oH.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function Ewe(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Pwe(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function nO(t){let e={};for(let n in t)e[n]=t[n];return e}function Twe(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||s.indexOf(d)<0&&o(d))return!0}};if(o(i.contentMatch))return!0}}function Nwe(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}var aH=65535,lH=Math.pow(2,16);function Mwe(t,e){return t+e*lH}function rO(t){return t&aH}function Owe(t){return(t-(t&aH))/lH}var cH=1,uH=2,db=4,dH=8,iO=class{constructor(t,e,n){this.pos=t,this.delInfo=e,this.recover=n}get deleted(){return(this.delInfo&dH)>0}get deletedBefore(){return(this.delInfo&(cH|db))>0}get deletedAfter(){return(this.delInfo&(uH|db))>0}get deletedAcross(){return(this.delInfo&db)>0}},th=class gp{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&gp.empty)return gp.empty}recover(e){let n=0,r=rO(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+Owe(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],d=this.ranges[a+o],u=l+c;if(e<=u){let f=c?e==l?-1:e==u?1:n:n,h=l+i+(f<0?0:d);if(r)return h;let p=e==(n<0?l:u)?null:Mwe(a/3,e-l),g=e==l?uH:e==u?cH:db;return(n<0?e!=l:e!=u)&&(g|=dH),new iO(h,g,p)}i+=d-c}return r?e+i:new iO(e+i,0,null)}touches(e,n){let r=0,i=rO(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],d=l+c;if(e<=d&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],d=this.ranges[i+r];e(a,a+c,l,l+d),s+=d-c}}invert(){return new gp(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?gp.empty:new gp(e<0?[0,-e,0]:[0,0,e])}};th.empty=new th([]);var Gk=Object.create(null),ts=class{getMap(){return th.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Gk[e.stepType];if(!n)throw new RangeError(`No step type ${e.stepType} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in Gk)throw new RangeError("Duplicate use of step JSON ID "+t);return Gk[t]=e,e.prototype.jsonID=t,e}},ms=class C0{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new C0(e,null)}static fail(e){return new C0(null,e)}static fromReplace(e,n,r,i){try{return C0.ok(e.replace(n,r,i))}catch(s){if(s instanceof kwe)return C0.fail(s.message);throw s}}};function S6(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(S6(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return Yt.fromArray(r)}var fH=class _0 extends ts{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new sn(S6(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return ms.fromReplace(e,this.from,this.to,s)}invert(){return new hH(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new _0(n.pos,r.pos,this.mark)}merge(e){return e instanceof _0&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new _0(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new _0(n.from,n.to,e.markFromJSON(n.mark))}};ts.jsonID("addMark",fH);var hH=class A0 extends ts{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new sn(S6(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return ms.fromReplace(e,this.from,this.to,r)}invert(){return new fH(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new A0(n.pos,r.pos,this.mark)}merge(e){return e instanceof A0&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new A0(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new A0(n.from,n.to,e.markFromJSON(n.mark))}};ts.jsonID("removeMark",hH);var pH=class E0 extends ts{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ms.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return ms.fromReplace(e,this.pos,this.pos+1,new sn(Yt.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new E0(this.pos,n.marks[i]);return new E0(this.pos,this.mark)}}return new gH(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new E0(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new E0(n.pos,e.markFromJSON(n.mark))}};ts.jsonID("addNodeMark",pH);var gH=class V_ extends ts{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ms.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return ms.fromReplace(e,this.pos,this.pos+1,new sn(Yt.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new pH(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new V_(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new V_(n.pos,e.markFromJSON(n.mark))}};ts.jsonID("removeNodeMark",gH);var im=class Yd extends ts{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&W_(e,this.from,this.to)?ms.fail("Structure replace would overwrite content"):ms.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new th([this.from,this.to-this.from,this.slice.size])}invert(e){return new Yd(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Yd(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Yd)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?sn.empty:new sn(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Yd(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?sn.empty:new sn(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Yd(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Yd(n.from,n.to,sn.fromJSON(e,n.slice),!!n.structure)}};ts.jsonID("replace",im);var Rl=class fb extends ts{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(W_(e,this.from,this.gapFrom)||W_(e,this.gapTo,this.to)))return ms.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return ms.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?ms.fromReplace(e,this.from,this.to,r):ms.fail("Content does not fit in gap")}getMap(){return new th([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new fb(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new fb(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new fb(n.from,n.to,n.gapFrom,n.gapTo,sn.fromJSON(e,n.slice),n.insert,!!n.structure)}};ts.jsonID("replaceAround",Rl);function W_(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Rwe(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function sm(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!Rwe(i,s,o))break}return null}function mH(t,e,n=null,r=t){let i=Lwe(t,e),s=i&&Dwe(r,e);return s?i.map(sO).concat({type:e,attrs:n}).concat(s.map(sO)):null}function sO(t){return{type:t,attrs:null}}function Lwe(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function Dwe(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function xc(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,d=n-2;c>s;c--,d--){let u=i.node(c),f=i.index(c);if(u.type.spec.isolating)return!1;let h=u.content.cutByIndex(f,u.childCount),p=r&&r[d+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[d]||u;if(!u.canReplace(f+1,u.childCount)||!g.type.validContent(h))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function Sh(t,e){let n=t.resolve(e),r=n.index();return yH(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function yH(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function b5(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&yH(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function k6(t,e,n=e,r=sn.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return Iwe(i,s,r)?new im(e,n,r):new $we(i,s,r).fit()}function Iwe(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}var $we=class{constructor(t,e,n){this.$from=t,this.$to=e,this.unplaced=n,this.frontier=[],this.placed=Yt.empty;for(let r=0;r<=t.depth;r++){let i=t.node(r);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(r))})}for(let r=t.depth;r>0;r--)this.placed=Yt.from(t.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let l=this.findFittable();l?this.placeNodes(l):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(t<0?this.$to:n.doc.resolve(t));if(!r)return null;let i=this.placed,s=n.depth,o=r.depth;for(;s&&o&&i.childCount==1;)i=i.firstChild.content,s--,o--;let a=new sn(i,s,o);return t>-1?new Rl(n.pos,t,this.$to.pos,this.$to.end(),a,e):a.size||n.pos!=this.$to.pos?new im(n.pos,r.pos,a):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<t;n++){let i=e.firstChild;if(e.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){t=n;break}e=i.content}for(let e=1;e<=2;e++)for(let n=e==1?t:this.unplaced.openStart;n>=0;n--){let r,i=null;n?(i=Kk(this.unplaced.content,n-1).firstChild,r=i.content):r=this.unplaced.content;let s=r.firstChild;for(let o=this.depth;o>=0;o--){let{type:a,match:l}=this.frontier[o],c,d=null;if(e==1&&(s?l.matchType(s.type)||(d=l.fillBefore(Yt.from(s),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:o,parent:i,inject:d};if(e==2&&s&&(c=l.findWrapping(s.type)))return{sliceDepth:n,frontierDepth:o,parent:i,wrap:c};if(i&&l.matchType(i.type))break}}}openMore(){let{content:t,openStart:e,openEnd:n}=this.unplaced,r=Kk(t,e);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new sn(t,e+1,Math.max(n,r.size+e>=t.size-n?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:n}=this.unplaced,r=Kk(t,e);if(r.childCount<=1&&e>0){let i=t.size-e<=e+r.size;this.unplaced=new sn(P0(t,e-1,1),e-1,i?e-1:n)}else this.unplaced=new sn(P0(t,e,1),e,n)}placeNodes({sliceDepth:t,frontierDepth:e,parent:n,inject:r,wrap:i}){for(;this.depth>e;)this.closeFrontierNode();if(i)for(let p=0;p<i.length;p++)this.openFrontierNode(i[p]);let s=this.unplaced,o=n?n.content:s.content,a=s.openStart-t,l=0,c=[],{match:d,type:u}=this.frontier[e];if(r){for(let p=0;p<r.childCount;p++)c.push(r.child(p));d=d.matchFragment(r)}let f=o.size+t-(s.content.size-s.openEnd);for(;l<o.childCount;){let p=o.child(l),g=d.matchType(p.type);if(!g)break;l++,(l>1||a==0||p.content.size)&&(d=g,c.push(vH(p.mark(u.allowedMarks(p.marks)),l==1?a:0,l==o.childCount?f:-1)))}let h=l==o.childCount;h||(f=-1),this.placed=T0(this.placed,e,Yt.from(c)),this.frontier[e].match=d,h&&f<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let p=0,g=o;p<f;p++){let b=g.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),g=b.content}this.unplaced=h?t==0?sn.empty:new sn(P0(s.content,t-1,1),t-1,f<0?s.openEnd:t-1):new sn(P0(s.content,t,l),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],e;if(!t.type.isTextblock||!Jk(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(t){e:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:n,type:r}=this.frontier[e],i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=Jk(t,e,r,n,i);if(s){for(let o=e-1;o>=0;o--){let{match:a,type:l}=this.frontier[o],c=Jk(t,o,l,a,!0);if(!c||c.childCount)continue e}return{depth:e,fit:s,move:i?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=T0(this.placed,e.depth,e.fit)),t=e.move;for(let n=e.depth+1;n<=t.depth;n++){let r=t.node(n),i=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,i)}return t}openFrontierNode(t,e=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=T0(this.placed,this.depth,Yt.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(Yt.empty,!0);e.childCount&&(this.placed=T0(this.placed,this.frontier.length,e))}};function P0(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(P0(t.firstChild.content,e-1,n)))}function T0(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(T0(t.lastChild.content,e-1,n)))}function Kk(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function vH(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,vH(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Yt.empty,!0)))),t.copy(r)}function Jk(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!jwe(n,s.content,o)?a:null}function jwe(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}var Fwe=class hb extends ts{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return ms.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return ms.fromReplace(e,this.pos,this.pos+1,new sn(Yt.from(i),0,n.isLeaf?0:1))}getMap(){return th.empty}invert(e){return new hb(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new hb(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new hb(n.pos,n.attr,n.value)}};ts.jsonID("attr",Fwe);var zwe=class q_ extends ts{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return ms.ok(r)}getMap(){return th.empty}invert(e){return new q_(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new q_(n.attr,n.value)}};ts.jsonID("docAttr",zwe);var iy=class extends Error{};iy=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};iy.prototype=Object.create(Error.prototype);iy.prototype.constructor=iy;iy.prototype.name="TransformError";var Yk=Object.create(null),zn=class{constructor(t,e,n){this.$anchor=t,this.$head=e,this.ranges=n||[new Bwe(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=sn.empty){let n=e.content.lastChild,r=null;for(let o=0;o<e.openEnd;o++)r=n,n=n.lastChild;let i=t.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:a,$to:l}=s[o],c=t.mapping.slice(i);t.replaceRange(c.map(a.pos),c.map(l.pos),o?sn.empty:e),o==0&&lO(t,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(t,e){let n=t.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:s,$to:o}=r[i],a=t.mapping.slice(n),l=a.map(s.pos),c=a.map(o.pos);i?t.deleteRange(l,c):(t.replaceRangeWith(l,c,e),lO(t,n,e.isInline?-1:1))}}static findFrom(t,e,n=!1){let r=t.parent.inlineContent?new ri(t):mp(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(let i=t.depth-1;i>=0;i--){let s=e<0?mp(t.node(0),t.node(i),t.before(i+1),t.index(i),e,n):mp(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,e,n);if(s)return s}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new _f(t.node(0))}static atStart(t){return mp(t,t,0,0,1)||new _f(t)}static atEnd(t){return mp(t,t,t.content.size,t.childCount,-1)||new _f(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Yk[e.type];if(!n)throw new RangeError(`No selection type ${e.type} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in Yk)throw new RangeError("Duplicate use of selection JSON ID "+t);return Yk[t]=e,e.prototype.jsonID=t,e}getBookmark(){return ri.between(this.$anchor,this.$head).getBookmark()}};zn.prototype.visible=!0;var Bwe=class{constructor(t,e){this.$from=t,this.$to=e}},oO=!1;function aO(t){!oO&&!t.parent.inlineContent&&(oO=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}var ri=class N0 extends zn{constructor(e,n=e){aO(e),aO(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return zn.near(r);let i=e.resolve(n.map(this.anchor));return new N0(i.parent.inlineContent?i:r,r)}replace(e,n=sn.empty){if(super.replace(e,n),n==sn.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof N0&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new bH(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new N0(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=zn.findFrom(n,r,!0)||zn.findFrom(n,-r,!0);if(s)n=s.$head;else return zn.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(zn.findFrom(e,-r,!0)||zn.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new N0(e,n)}};zn.jsonID("text",ri);var bH=class wH{constructor(e,n){this.anchor=e,this.head=n}map(e){return new wH(e.map(this.anchor),e.map(this.head))}resolve(e){return ri.between(e.resolve(this.anchor),e.resolve(this.head))}},Br=class M0 extends zn{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?zn.near(s):new M0(s)}content(){return new sn(Yt.from(this.node),0,0)}eq(e){return e instanceof M0&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Uwe(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new M0(e.resolve(n.anchor))}static create(e,n){return new M0(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}};Br.prototype.visible=!1;zn.jsonID("node",Br);var Uwe=class xH{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new bH(r,r):new xH(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Br.isSelectable(r)?new Br(n):zn.near(n)}},_f=class pb extends zn{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=sn.empty){if(n==sn.empty){e.delete(0,e.doc.content.size);let r=zn.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new pb(e)}map(e){return new pb(e)}eq(e){return e instanceof pb}getBookmark(){return Hwe}};zn.jsonID("all",_f);var Hwe={map(){return this},resolve(t){return new _f(t)}};function mp(t,e,n,r,i,s=!1){if(e.inlineContent)return ri.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Br.isSelectable(a))return Br.create(t,n-(i<0?a.nodeSize:0))}else{let l=mp(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function lO(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof im||i instanceof Rl))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,d)=>{o==null&&(o=d)}),t.setSelection(zn.near(t.doc.resolve(o),n))}function cO(t,e){return!e||!t?t:t.bind(e)}var v2=class{constructor(t,e,n){this.name=t,this.init=cO(e.init,n),this.apply=cO(e.apply,n)}};new v2("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new v2("selection",{init(t,e){return t.selection||zn.atStart(e.doc)},apply(t){return t.selection}}),new v2("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new v2("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}});function SH(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=SH(i,e,{})),n[r]=i}return n}var Iy=class{constructor(t){this.spec=t,this.props={},t.props&&SH(t.props,this,this.props),this.key=t.key?t.key.key:kH("plugin")}getState(t){return t[this.key]}},Zk=Object.create(null);function kH(t){return t in Zk?t+"$"+ ++Zk[t]:(Zk[t]=0,t+"$")}var $y=class{constructor(t="key"){this.key=kH(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}},C6=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function CH(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}var _H=(t,e,n)=>{let r=CH(t,n);if(!r)return!1;let i=_6(r);if(!i){let o=r.blockRange(),a=o&&sm(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&LH(t,i,e))return!0;if(r.parent.content.size==0&&(Rg(s,"end")||Br.isSelectable(s))){let o=k6(t.doc,r.before(),r.after(),sn.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Rg(s,"end")?zn.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):Br.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},Vwe=(t,e,n)=>{let r=CH(t,n);if(!r)return!1;let i=_6(r);return i?AH(t,i,e):!1},Wwe=(t,e,n)=>{let r=PH(t,n);if(!r)return!1;let i=A6(r);return i?AH(t,i,e):!1};function AH(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=k6(t.doc,s,l,sn.empty);if(!c||c.from!=s||c instanceof im&&c.slice.size>=l-s)return!1;if(n){let d=t.tr.step(c);d.setSelection(ri.create(d.doc,s)),n(d.scrollIntoView())}return!0}function Rg(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}var EH=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=_6(r)}let o=s&&s.nodeBefore;return!o||!Br.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Br.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function _6(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function PH(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}var TH=(t,e,n)=>{let r=PH(t,n);if(!r)return!1;let i=A6(r);if(!i)return!1;let s=i.nodeAfter;if(LH(t,i,e))return!0;if(r.parent.content.size==0&&(Rg(s,"start")||Br.isSelectable(s))){let o=k6(t.doc,r.before(),r.after(),sn.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Rg(s,"start")?zn.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Br.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},NH=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=A6(r)}let o=s&&s.nodeAfter;return!o||!Br.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Br.create(t.doc,s.pos)).scrollIntoView()),!0)};function A6(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}var qwe=(t,e)=>{let n=t.selection,r=n instanceof Br,i;if(r){if(n.node.isTextblock||!Sh(t.doc,n.from))return!1;i=n.from}else if(i=b5(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(Br.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Gwe=(t,e)=>{let n=t.selection,r;if(n instanceof Br){if(n.node.isTextblock||!Sh(t.doc,n.to))return!1;r=n.to}else if(r=b5(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Kwe=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&sm(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},MH=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function E6(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}var Jwe=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=E6(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(zn.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},OH=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof _f||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=E6(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(ri.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},RH=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(xc(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&sm(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function Ywe(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Br&&e.selection.node.isBlock)return!r.parentOffset||!xc(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(n){let s=i.parentOffset==i.parent.content.size,o=e.tr;(e.selection instanceof ri||e.selection instanceof _f)&&o.deleteSelection();let a=r.depth==0?null:E6(r.node(-1).contentMatchAt(r.indexAfter(-1))),l=s&&a?[{type:a}]:void 0,c=xc(o.doc,o.mapping.map(r.pos),1,l);if(!l&&!c&&xc(o.doc,o.mapping.map(r.pos),1,a?[{type:a}]:void 0)&&(a&&(l=[{type:a}]),c=!0),c&&(o.split(o.mapping.map(r.pos),1,l),!s&&!r.parentOffset&&r.parent.type!=a)){let d=o.mapping.map(r.before()),u=o.doc.resolve(d);a&&r.node(-1).canReplaceWith(u.index(),u.index()+1,a)&&o.setNodeMarkup(o.mapping.map(r.before()),a)}n(o.scrollIntoView())}return!0}}var Zwe=Ywe(),Xwe=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(Br.create(t.doc,i))),!0)};function Qwe(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Sh(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function LH(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s,o;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(Qwe(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(o=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(n){let u=e.pos+i.nodeSize,f=Yt.empty;for(let g=s.length-1;g>=0;g--)f=Yt.from(s[g].create(null,f));f=Yt.from(r.copy(f));let h=t.tr.step(new Rl(e.pos-1,u,e.pos,u,new sn(f,1,0),s.length,!0)),p=u+2*s.length;Sh(h.doc,p)&&h.join(p),n(h.scrollIntoView())}return!0}let l=zn.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),d=c&&sm(c);if(d!=null&&d>=e.depth)return n&&n(t.tr.lift(c,d).scrollIntoView()),!0;if(a&&Rg(i,"start",!0)&&Rg(r,"end")){let u=r,f=[];for(;f.push(u),!u.isTextblock;)u=u.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(u.canReplace(u.childCount,u.childCount,h.content)){if(n){let g=Yt.empty;for(let v=f.length-1;v>=0;v--)g=Yt.from(f[v].copy(g));let b=t.tr.step(new Rl(e.pos-f.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new sn(g,f.length,0),0,!0));n(b.scrollIntoView())}return!0}}return!1}function DH(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(ri.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}var exe=DH(-1),txe=DH(1);function nxe(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&mH(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function uO(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let d=n.doc.resolve(c),u=d.index();i=d.parent.canReplaceWith(u,u+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}function P6(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}P6(C6,_H,EH);P6(C6,TH,NH);P6(MH,OH,RH,Zwe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function rxe(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(t)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let d=n.doc.resolve(o.start-2);l=new U_(d,d,o.depth),o.endIndex<o.parent.childCount&&(o=new U_(i,n.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=mH(l,t,e,o);return c?(r&&r(ixe(n.tr,o,c,a,t).scrollIntoView()),!0):!1}}function ixe(t,e,n,r,i){let s=Yt.empty;for(let d=n.length-1;d>=0;d--)s=Yt.from(n[d].type.create(n[d].attrs,s));t.step(new Rl(e.start-(r?2:0),e.end,e.start,e.end,new sn(s,0,0),n.length,!0));let o=0;for(let d=0;d<n.length;d++)n[d].type==i&&(o=d+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let d=e.startIndex,u=e.endIndex,f=!0;d<u;d++,f=!1)!f&&xc(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return t}function sxe(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?oxe(e,n,t,s):axe(e,n,s):!0:!1}}function oxe(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Rl(s-1,o,s,o,new sn(Yt.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new U_(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=sm(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(s,-1)-1;return Sh(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function axe(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,g=n.startIndex;p>g;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),d=s.index(-1);if(!c.canReplace(d+(a?0:1),d+1,o.content.append(l?Yt.empty:Yt.from(i))))return!1;let u=s.pos,f=u+o.nodeSize;return r.step(new Rl(u-(a?1:0),f+(l?1:0),u+1,f-1,new sn((a?Yt.empty:Yt.from(i.copy(Yt.empty))).append(l?Yt.empty:Yt.from(i.copy(Yt.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function lxe(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,d=Yt.from(c?t.create():null),u=new sn(Yt.from(t.create(null,Yt.from(a.type.create(null,d)))),c?3:1,0),f=s.start,h=s.end;n(e.tr.step(new Rl(f-(c?3:1),h,f,h,u,1,!0)).scrollIntoView())}return!0}}function IH(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return Yo(un({},e),{apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}})}var cxe=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...c)=>{const d=a(...c)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],a=!!t,l=t||i.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(u=>u===!0)),d=Yo(un({},Object.fromEntries(Object.entries(n).map(([u,f])=>[u,(...p)=>{const g=this.buildProps(l,e),b=f(...p)(g);return o.push(b),d}]))),{run:c});return d}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,s=this.buildProps(i,r),o=Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)(Yo(un({},s),{dispatch:void 0}))]));return Yo(un({},o),{chain:()=>this.createChain(i,r)})}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:t,editor:r,view:s,state:IH({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...c)=>l(...c)(o)]))}};return o}};function Pu(t,e,n){return t.config[e]===void 0&&t.parent?Pu(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind(Yo(un({},n),{parent:t.parent?Pu(t.parent,e,n):null})):t.config[e]}function uxe(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Qi(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function dxe(t){return typeof t=="function"}function yp(t,e=void 0,...n){return dxe(t)?e?t.bind(e)(...n):t(...n):t}function fxe(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function hxe(t){return Object.prototype.toString.call(t).slice(8,-1)}function Xk(t){return hxe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function $H(t,e){const n=un({},t);return Xk(t)&&Xk(e)&&Object.keys(e).forEach(r=>{Xk(e[r])?r in t?n[r]=$H(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}var Wc=class G_{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=un(un({},this.config),e),this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=yp(Pu(this,"addOptions",{name:this.name}))),this.storage=yp(Pu(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new G_(e)}configure(e={}){const n=this.extend();return n.options=$H(this.options,e),n.storage=yp(Pu(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new G_(un(un({},this.config),e));return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=yp(Pu(n,"addOptions",{name:n.name})),n.storage=yp(Pu(n,"addStorage",{name:n.name,options:n.options})),n}};function pxe(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="",l=!0;return t.nodesBetween(r,i,(c,d,u,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),u&&(a+=p({node:c,pos:d,parent:u,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,d)-d,i-d),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function gxe(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}Wc.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Iy({key:new $y("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=gxe(n);return pxe(r,{from:o,to:a},{textSerializers:l})}}})]}});var mxe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),yxe=(t=!1)=>({commands:e})=>e.setContent("",t),vxe=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,u=c.resolve(d.map(l)),f=c.resolve(d.map(l+a.nodeSize)),h=u.blockRange(f);if(!h)return;const p=sm(h);if(a.type.isTextblock){const{defaultType:g}=u.parent.contentMatchAt(u.index());e.setNodeMarkup(h.start,g)}(p||p===0)&&e.lift(h,p)})}),!0},bxe=t=>e=>t(e),wxe=()=>({state:t,dispatch:e})=>OH(t,e),xxe=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new ri(r.doc.resolve(o-1))),!0},Sxe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},kxe=t=>({tr:e,state:n,dispatch:r})=>{const i=Qi(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},Cxe=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},_xe=()=>({state:t,dispatch:e})=>C6(t,e),Axe=()=>({commands:t})=>t.keyboardShortcut("Enter"),Exe=()=>({state:t,dispatch:e})=>Jwe(t,e);function qw(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:fxe(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function K_(t,e,n={}){return t.find(r=>r.type===e&&qw(r.attrs,n))}function Pxe(t,e,n={}){return!!K_(t,e,n)}function jH(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=K_([...r.node.marks],e,n);if(!i)return;let s=r.index,o=t.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(K_([...r.node.marks],e,n);s>0&&i.isInSet(t.parent.child(s-1).marks);)s-=1,o-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&Pxe([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Nd(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var Txe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=Nd(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:d}=a;if(i){const u=jH(l,s,e);if(u&&u.from<=c&&u.to>=d){const f=ri.create(o,u.from,u.to);n.setSelection(f)}}return!0},Nxe=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function FH(t){return t instanceof ri}function ff(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Mxe(t,e=null){if(!e)return null;const n=zn.atStart(t),r=zn.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?ri.create(t,ff(0,i,s),ff(t.content.size,i,s)):ri.create(t,ff(e,i,s),ff(e,i,s))}function T6(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var Oxe=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e=un({scrollIntoView:!0},e);const o=()=>{T6()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!FH(n.state.selection))return o(),!0;const a=Mxe(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Rxe=(t,e)=>n=>t.every((r,i)=>e(r,Yo(un({},n),{index:i}))),Lxe=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),zH=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&zH(r)}return t};function dO(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return zH(n)}function Gw(t,e,n){if(n=un({slice:!0,parseOptions:{}},n),typeof t=="object"&&t!==null)try{return Array.isArray(t)&&t.length>0?Yt.fromArray(t.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),Gw("",e,n)}if(typeof t=="string"){const r=Cwe.fromSchema(e);return n.slice?r.parseSlice(dO(t),n.parseOptions).content:r.parse(dO(t),n.parseOptions)}return Gw("",e,n)}function Dxe(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof im||i instanceof Rl))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,d)=>{o===0&&(o=d)}),t.setSelection(zn.near(t.doc.resolve(o),n))}var Ixe=t=>t.toString().startsWith("<"),$xe=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{if(i){n=un({parseOptions:{},updateSelection:!0},n);const o=Gw(e,s.schema,{parseOptions:un({preserveWhitespace:"full"},n.parseOptions)});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,d=!0;if((Ixe(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,d=d?f.isBlock:!1}),a===l&&d){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),n.updateSelection&&Dxe(r,r.steps.length-1,-1)}return!0},jxe=()=>({state:t,dispatch:e})=>qwe(t,e),Fxe=()=>({state:t,dispatch:e})=>Gwe(t,e),zxe=()=>({state:t,dispatch:e})=>_H(t,e),Bxe=()=>({state:t,dispatch:e})=>TH(t,e),Uxe=()=>({tr:t,state:e,dispatch:n})=>{try{const r=b5(e.doc,e.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),n&&n(t),!0)}catch{return!1}},Hxe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=b5(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Vxe=()=>({state:t,dispatch:e})=>Vwe(t,e),Wxe=()=>({state:t,dispatch:e})=>Wwe(t,e);function BH(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function qxe(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))T6()||BH()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var Gxe=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=qxe(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const d=c.map(r.mapping);d&&i&&r.maybeStep(d)}),!0};function N6(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?Qi(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(u,f)=>{if(u.isText)return;const h=Math.max(r,f),p=Math.min(i,f+u.nodeSize);a.push({node:u,from:h,to:p})});const l=i-r,c=a.filter(u=>o?o.name===u.node.type.name:!0).filter(u=>qw(u.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((u,f)=>u+f.to-f.from,0)>=l}var Kxe=(t,e={})=>({state:n,dispatch:r})=>{const i=Qi(t,n.schema);return N6(n,i,e)?Kwe(n,r):!1},Jxe=()=>({state:t,dispatch:e})=>RH(t,e),Yxe=t=>({state:e,dispatch:n})=>{const r=Qi(t,e.schema);return sxe(r)(e,n)},Zxe=()=>({state:t,dispatch:e})=>MH(t,e);function UH(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function fO(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var Xxe=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=UH(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=Qi(t,r.schema)),a==="mark"&&(o=Nd(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,d)=>{s&&s===c.type&&n.setNodeMarkup(d,void 0,fO(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(u=>{o===u.type&&n.addMark(d,d+c.nodeSize,o.create(fO(u.attrs,e)))})})}),!0):!1},Qxe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),e5e=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),t5e=()=>({state:t,dispatch:e})=>EH(t,e),n5e=()=>({state:t,dispatch:e})=>NH(t,e),r5e=()=>({state:t,dispatch:e})=>Xwe(t,e),i5e=()=>({state:t,dispatch:e})=>txe(t,e),s5e=()=>({state:t,dispatch:e})=>exe(t,e);function o5e(t,e,n={}){return Gw(t,e,{slice:!1,parseOptions:n})}var a5e=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=o5e(t,i.schema,n);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function l5e(t,e){const n=Nd(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?un({},a.attrs):{}}function c5e(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function u5e(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function M6(t){return e=>u5e(e.$from,t)}function gb(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function d5e(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?Nd(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(u=>s?s.name===u.type.name:!0).find(u=>qw(u.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:u,$to:f})=>{const h=u.pos,p=f.pos;t.doc.nodesBetween(h,p,(g,b)=>{if(!g.isText&&!g.marks.length)return;const v=Math.max(h,b),x=Math.min(p,b+g.nodeSize),w=x-v;o+=w,a.push(...g.marks.map(C=>({mark:C,from:v,to:x})))})}),o===0)return!1;const l=a.filter(u=>s?s.name===u.mark.type.name:!0).filter(u=>qw(u.mark.attrs,n,{strict:!1})).reduce((u,f)=>u+f.to-f.from,0),c=a.filter(u=>s?u.mark.type!==s&&u.mark.type.excludes(s):!0).reduce((u,f)=>u+f.to-f.from,0);return(l>0?l+c:l)>=o}function hO(t,e){const{nodeExtensions:n}=uxe(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=yp(Pu(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function f5e(t,e,n){var r;const{selection:i}=e;let s=null;if(FH(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,u,f)=>{if(c)return!1;if(d.isInline){const h=!f||f.type.allowsMarkType(n),p=!!n.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(n));c=h&&p}return!c}),c})}var h5e=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=Nd(t,r.schema);if(i)if(o){const c=l5e(r,l);n.addStoredMark(l.create(un(un({},c),e)))}else a.forEach(c=>{const d=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(d,u,(f,h)=>{const p=Math.max(h,d),g=Math.min(h+f.nodeSize,u);f.marks.find(v=>v.type===l)?f.marks.forEach(v=>{l===v.type&&n.addMark(p,g,l.create(un(un({},v.attrs),e)))}):n.addMark(p,g,l.create(e))})});return f5e(r,n,l)},p5e=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),g5e=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=Qi(t,n.schema);return s.isTextblock?i().command(({commands:o})=>uO(s,e)(n)?!0:o.clearNodes()).command(({state:o})=>uO(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},m5e=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=ff(t,0,r.content.size),s=Br.create(r,i);e.setSelection(s)}return!0},y5e=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=ri.atStart(r).from,a=ri.atEnd(r).to,l=ff(i,o,a),c=ff(s,o,a),d=ri.create(r,l,c);e.setSelection(d)}return!0},v5e=t=>({state:e,dispatch:n})=>{const r=Qi(t,e.schema);return lxe(r)(e,n)};function pO(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}var b5e=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,d=gb(c,a.node().type.name,a.node().attrs);if(s instanceof Br&&s.node.isBlock)return!a.parentOffset||!xc(o,a.pos)?!1:(r&&(t&&pO(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const u=l.parentOffset===l.parent.content.size;s instanceof ri&&e.deleteSelection();const f=a.depth===0?void 0:c5e(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=u&&f?[{type:f,attrs:d}]:void 0,p=xc(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&xc(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:d}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!u&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),b=e.doc.resolve(g);a.node(-1).canReplaceWith(b.index(),b.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&pO(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},w5e=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var s;const o=Qi(t,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const d=a.node(-1);if(d.type!==o)return!1;const u=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let b=Yt.empty;const v=a.index(-1)?1:a.index(-2)?2:3;for(let T=a.depth-v;T>=a.depth-3;T-=1)b=Yt.from(a.node(T).copy(b));const x=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,w=gb(u,a.node().type.name,a.node().attrs),C=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(w))||void 0;b=b.append(Yt.from(o.createAndFill(null,C)||void 0));const P=a.before(a.depth-(v-1));e.replace(P,a.after(-x),new sn(b,4-v,0));let O=-1;e.doc.nodesBetween(P,e.doc.content.size,(T,M)=>{if(O>-1)return!1;T.isTextblock&&T.content.size===0&&(O=M+1)}),O>-1&&e.setSelection(ri.near(e.doc.resolve(O))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?d.contentMatchAt(0).defaultType:null,h=gb(u,d.type.name,d.attrs),p=gb(u,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const g=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!xc(e.doc,a.pos,2))return!1;if(r){const{selection:b,storedMarks:v}=n,{splittableMarks:x}=i.extensionManager,w=v||b.$to.parentOffset&&b.$from.marks();if(e.split(a.pos,2,g).scrollIntoView(),!w||!r)return!0;const C=w.filter(P=>x.includes(P.type.name));e.ensureMarks(C)}return!0},Qk=(t,e)=>{const n=M6(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Sh(t.doc,n.pos)&&t.join(n.pos),!0},e3=(t,e)=>{const n=M6(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Sh(t.doc,r)&&t.join(r),!0},x5e=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:u,splittableMarks:f}=i.extensionManager,h=Qi(t,o.schema),p=Qi(e,o.schema),{selection:g,storedMarks:b}=o,{$from:v,$to:x}=g,w=v.blockRange(x),C=b||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const P=M6(O=>hO(O.type.name,u))(g);if(w.depth>=1&&P&&w.depth-P.depth<=1){if(P.node.type===h)return c.liftListItem(p);if(hO(P.node.type.name,u)&&h.validContent(P.node.content)&&a)return l().command(()=>(s.setNodeMarkup(P.pos,h),!0)).command(()=>Qk(s,h)).command(()=>e3(s,h)).run()}return!n||!C||!a?l().command(()=>d().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>Qk(s,h)).command(()=>e3(s,h)).run():l().command(()=>{const O=d().wrapInList(h,r),T=C.filter(M=>f.includes(M.type.name));return s.ensureMarks(T),O?!0:c.clearNodes()}).wrapInList(h,r).command(()=>Qk(s,h)).command(()=>e3(s,h)).run()},S5e=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Nd(t,r.schema);return d5e(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},k5e=(t,e,n={})=>({state:r,commands:i})=>{const s=Qi(t,r.schema),o=Qi(e,r.schema);return N6(r,s,n)?i.setNode(o):i.setNode(s,n)},C5e=(t,e={})=>({state:n,commands:r})=>{const i=Qi(t,n.schema);return N6(n,i,e)?r.lift(i):r.wrapIn(i,e)},_5e=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},A5e=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},E5e=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=Nd(t,r.schema),{$from:c,empty:d,ranges:u}=a;if(!i)return!0;if(d&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(b=>b.type===l))===null||s===void 0?void 0:s.attrs,g=jH(c,l,p);g&&(f=g.from,h=g.to),n.removeMark(f,h,l)}else u.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},P5e=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=UH(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=Qi(t,r.schema)),a==="mark"&&(o=Nd(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,d=l.$to.pos;r.doc.nodesBetween(c,d,(u,f)=>{s&&s===u.type&&n.setNodeMarkup(f,void 0,un(un({},u.attrs),e)),o&&u.marks.length&&u.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),g=Math.min(f+u.nodeSize,d);n.addMark(p,g,o.create(un(un({},h.attrs),e)))}})})}),!0):!1},T5e=(t,e={})=>({state:n,dispatch:r})=>{const i=Qi(t,n.schema);return nxe(i,e)(n,r)},N5e=(t,e={})=>({state:n,dispatch:r})=>{const i=Qi(t,n.schema);return rxe(i,e)(n,r)},M5e=Object.freeze({__proto__:null,blur:mxe,clearContent:yxe,clearNodes:vxe,command:bxe,createParagraphNear:wxe,cut:xxe,deleteCurrentNode:Sxe,deleteNode:kxe,deleteRange:Cxe,deleteSelection:_xe,enter:Axe,exitCode:Exe,extendMarkRange:Txe,first:Nxe,focus:Oxe,forEach:Rxe,insertContent:Lxe,insertContentAt:$xe,joinUp:jxe,joinDown:Fxe,joinBackward:zxe,joinForward:Bxe,joinItemBackward:Uxe,joinItemForward:Hxe,joinTextblockBackward:Vxe,joinTextblockForward:Wxe,keyboardShortcut:Gxe,lift:Kxe,liftEmptyBlock:Jxe,liftListItem:Yxe,newlineInCode:Zxe,resetAttributes:Xxe,scrollIntoView:Qxe,selectAll:e5e,selectNodeBackward:t5e,selectNodeForward:n5e,selectParentNode:r5e,selectTextblockEnd:i5e,selectTextblockStart:s5e,setContent:a5e,setMark:h5e,setMeta:p5e,setNode:g5e,setNodeSelection:m5e,setTextSelection:y5e,sinkListItem:v5e,splitBlock:b5e,splitListItem:w5e,toggleList:x5e,toggleMark:S5e,toggleNode:k5e,toggleWrap:C5e,undoInputRule:_5e,unsetAllMarks:A5e,unsetMark:E5e,updateAttributes:P5e,wrapIn:T5e,wrapInList:N5e});Wc.create({name:"commands",addCommands(){return un({},M5e)}});Wc.create({name:"editable",addProseMirrorPlugins(){return[new Iy({key:new $y("editable"),props:{editable:()=>this.editor.options.editable}})]}});Wc.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Iy({key:new $y("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});Wc.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:u}=l,{pos:f,parent:h}=u,p=u.parent.isTextblock?a.doc.resolve(f-1):u,g=p.parent.type.spec.isolating,b=u.pos-u.parentOffset,v=g&&p.parent.childCount===1?b===u.pos:zn.atStart(c).from===f;return!d||!v||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i=un({},r),s=Yo(un({},r),{"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return T6()||BH()?s:i},addProseMirrorPlugins(){return[new Iy({key:new $y("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(p=>p.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=zn.atStart(e.doc).from,l=zn.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const u=n.tr,f=IH({state:n,transaction:u}),{commands:h}=new cxe({editor:this.editor,state:f});if(h.clearNodes(),!!u.steps.length)return u}})]}});Wc.create({name:"tabindex",addProseMirrorPlugins(){return[new Iy({key:new $y("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var O5e=Wc.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${M1.toCssColor(t.color)}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),R5e=Wc.create({name:"fontSize",addOptions:function(){return{types:["textStyle"]}},addGlobalAttributes:function(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:function(n){return n.style.fontSize.replace(/['"]+/g,"")},renderHTML:function(n){return n.fontSize?{style:"font-size: "+n.fontSize}:{}}}}}]},addCommands:function(){return{setFontSize:function(n){return function(r){var i=r.chain;return i().setMark("textStyle",{fontSize:n}).run()}},unsetFontSize:function(){return function(n){var r=n.chain;return r().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}}}),L5e=Wc.create({name:"fontWeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontWeight:{default:null,parseHTML:t=>t.style.fontWeight.replace(/['"]+/g,""),renderHTML:t=>t.fontWeight?{style:`font-weight: ${t.fontWeight}`}:{}}}}]},addCommands(){return{setFontWeight:t=>({chain:e})=>e().setMark("textStyle",{fontWeight:t}).run(),unsetFontWeight:()=>({chain:t})=>t().setMark("textStyle",{fontWeight:null}).removeEmptyTextStyle().run()}}}),D5e=[Nbe,Mbe,Ibe,jbe,Bbe,Ube,Zbe,nwe,rwe,swe,owe,cwe,uwe,dwe,O5e,fwe,R5e,L5e,hwe.configure({types:["paragraph"]})];function HH(t){var e=t,{editor:n,fontFamily:r,fontSize:i,fontWeight:s,fontColor:o,lineHeight:a=1,textHeight:l=0,paragraphSpacing:c=1,alignItems:d="start"}=e,u=xh(e,["editor","fontFamily","fontSize","fontWeight","fontColor","lineHeight","textHeight","paragraphSpacing","alignItems"]);return y.jsxs(y.Fragment,{children:[y.jsx("style",{children:`.RichTextEditor {
            display: flex;
            align-items: ${d};
            min-width: 1px;
          }
          .RichTextEditor > .ProseMirror {
            outline: none;
            word-break: keep-all;
            width: 100%;
            height: 100%;
          }
          .RichTextEditor > .ProseMirror p {
            display: block;
          }
          .RichTextEditor > .ProseMirror ul {
            list-style-type: " ";
            padding-inline-start: 1.5em;
          }
          .RichTextEditor > .ProseMirror ol {
            list-style-type: decimal;
            padding-inline-start: 1.5em;
          }
          .RichTextEditor .ProseMirror p,
          .RichTextEditor .ProseMirror ul,
          .RichTextEditor .ProseMirror ol {
            margin-block-end: 0px;
            margin-block-end: ${c}em;
        }`}),y.jsx(Cbe,un({editor:n,className:"RichTextEditor",style:{width:"100%",fontFamily:r,fontSize:i,fontWeight:s,color:o,lineHeight:a,height:l}},u))]})}HH.displayName="TiptapEditorComponent";var I5e=t=>{var e=t,{editor:n,toolbar:r,onMount:i,onOpen:s}=e,o=xh(e,["editor","toolbar","onMount","onOpen"]);const a=S.useRef(null),[l,c]=S.useState({textShape:null,padding:[0,0,0,0],alignItems:"start",textAlign:"left",lineHeight:1.2,paragraphSpacing:1,fontFamily:"",fontSize:16,fontWeight:400,color:"",scale:1,left:0,top:0,width:0,height:0,textWidth:0,textHeight:0}),d=Abe({extensions:D5e,content:"",onUpdate:C=>{if(C&&d&&l.textShape){const P=d.getJSON();p(l.textShape,P)}}});S.useEffect(()=>(n&&(n.onDblClick.addListener(x),n.onKeyDown.addListener(v),n.factory.onCreate.addListener(w)),function(){n&&(n.onDblClick.removeListener(x),n.factory.onCreate.removeListener(w))}),[n]),S.useEffect(()=>{d&&i&&i(d)},[d]),S.useEffect(()=>{l.textShape&&f({left:l.left,top:l.top,width:l.textShape.width,height:l.textShape.height})},[l.left,l.top,l.textShape]);const u=(C,P)=>{const O=C.getRectInDCS(n.canvas),T=EC.measureText(n.canvas,C,P),M=T.minWidth+l.padding[1]+l.padding[3],D=T.height+l.padding[0]+l.padding[2];return{left:O[0][0],top:O[0][1],width:Math.max(M,1),height:D,textWidth:T.width,textHeight:T.height}},f=C=>{a.current&&eH(n,a.current,[[C.left,C.top],[C.left+C.width,C.top+C.height]],32)},h=C=>{n.getCurrentPage()&&C&&(C.allowRenderText=!1,C.update(n.canvas),n.repaint(),n.transform.startAction(xt.EDIT_TEXT),d==null||d.commands.setContent(C.text),d==null||d.commands.focus(),d==null||d.commands.selectAll(),p(C,C.text),setTimeout(()=>{s&&s(C)},0))},p=(C,P)=>{if(n.getCurrentPage()){n.transform.transact(T=>{T.assign(C,"text",P),LD.resolveAllConstraints(T,n.getCurrentPage(),n.canvas)});const O=u(C,P);c({textShape:C,padding:C.padding,alignItems:Swe(C.vertAlign),textAlign:C.horzAlign,lineHeight:C.lineHeight,paragraphSpacing:C.paragraphSpacing,fontFamily:C.fontFamily,fontSize:C.fontSize,fontWeight:C.fontWeight,color:n.canvas.resolveColor(C.fontColor),scale:n.getScale(),left:O.left,top:O.top,width:Math.max(C.width,O.width),height:Math.max(C.height,O.height),textWidth:O.textWidth,textHeight:O.textHeight})}},g=()=>{if(d&&l.textShape){n.transform.endAction();const C=EC.convertTextNodeToString(d.getJSON());l.textShape instanceof hg&&C.trim().length===0&&n.actions.remove([l.textShape]),l.textShape.allowRenderText=!0,l.textShape.update(n.canvas),n.repaint(),c(P=>Yo(un({},P),{textShape:null}))}},b=C=>{C.key==="Escape"&&g()},v=C=>{if(C.key==="Enter"&&n.selection.size()===1){const P=n.selection.shapes[0];P instanceof St&&P.textEditable&&h(P)}},x=({shape:C,point:P})=>{C instanceof St&&C.textEditable&&h(C)},w=C=>{C instanceof hg&&C.textEditable&&(n.selection.deselectAll(),h(C))};return y.jsx(y.Fragment,{children:l.textShape&&y.jsxs(y.Fragment,{children:[y.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e4},onPointerDown:g}),y.jsx("div",Yo(un({style:{position:"absolute",display:"flex",zIndex:1e4,outline:"none",overflow:"hidden",paddingTop:l.padding[0],paddingRight:l.padding[1],paddingBottom:l.padding[2],paddingLeft:l.padding[3],alignItems:l.alignItems,left:l.left,top:l.top,width:l.width,height:l.height,transform:`scale(${l.scale})`}},o),{children:y.jsx(HH,{editor:d,fontFamily:l.fontFamily,fontSize:l.fontSize,fontWeight:l.fontWeight,fontColor:l.color,lineHeight:l.lineHeight,textHeight:l.textHeight,paragraphSpacing:l.paragraphSpacing,alignItems:l.alignItems,onBlur:()=>{},onKeyDown:b})})),y.jsx("div",{ref:a,style:{position:"absolute",background:"transparent",zIndex:1e4,outline:"none"},children:r})]})})};function $5e(t){if(t.selection.shapes.length>0){const e=t.selection.shapes.map(n=>n.getRectInDCS(t.canvas,!0));return e.reduce((n,r)=>mr.unionRect(n,r),e[0])}return[[0,0],[0,0]]}var j5e=t=>{var e=t,{editor:n,toolbar:r,distance:i=46,onMove:s}=e;xh(e,["editor","toolbar","distance","onMove"]);const o=S.useRef(null),[a,l]=S.useState([0,0]),[c,d]=S.useState(1),[u,f]=S.useState(!1),[h,p]=S.useState([]);S.useEffect(()=>(n&&(n.onScroll.addListener(g),n.onZoom.addListener(b),n.onDragStart.addListener(v),n.onDragEnd.addListener(x),n.selection.onChange.addListener(w)),function(){n&&(n.onScroll.removeListener(g),n.onZoom.removeListener(b),n.onDragStart.removeListener(v),n.onDragEnd.removeListener(x),n.selection.onChange.removeListener(w))}),[n]),S.useEffect(()=>{var C,P;if(n&&n.getCurrentPage()&&o.current){const O=((C=n.canvasElement)==null?void 0:C.offsetWidth)||0,T=((P=n.canvasElement)==null?void 0:P.offsetHeight)||0;let M=h.length>0,D=$5e(n);(D[1][0]<0||D[0][0]>O||D[1][1]<0||D[0][1]>T)&&(M=!1),u&&(M=!1),o.current.style.display=M?"flex":"none";const I=eH(n,o.current,D,i);s&&s(I)}},[n,a,c,u,h]);const g=C=>l([...C]),b=C=>d(C),v=()=>f(!0),x=()=>f(!1),w=C=>p(C);return y.jsx("div",{ref:o,style:{position:"absolute",background:"transparent",zIndex:10,outline:"none",display:"none"},children:r})},F5e=t=>{var e=t,{onMount:n,textInplaceEditorToolbar:r,floatingToolbar:i,floatingToolbarDistance:s,onTextInplaceEditorMount:o,onTextInplaceEditorOpen:a,onFloatingToolbarMove:l}=e,c=xh(e,["onMount","textInplaceEditorToolbar","floatingToolbar","floatingToolbarDistance","onTextInplaceEditorMount","onTextInplaceEditorOpen","onFloatingToolbarMove"]);const[d,u]=S.useState(null);return y.jsx(y.Fragment,{children:y.jsxs(ywe,Yo(un({onMount:f=>{u(f),n&&n(f)}},c),{children:[y.jsx(I5e,{editor:d,toolbar:r,onMount:o,onOpen:a}),y.jsx(j5e,{editor:d,toolbar:i,distance:s,onMove:l})]}))})},z5e=S.forwardRef((t,e)=>{var n=t,{shapes:r=[],heightRatio:i=.75,darkMode:s=!1,maxScale:o=1,scaleAdjust:a=1,update:l=!1,showDOM:c=!1,style:d,children:u}=n,f=xh(n,["shapes","heightRatio","darkMode","maxScale","scaleAdjust","update","showDOM","style","children"]);const h=S.useRef(null),p=S.useRef(null),[g,b]=S.useState([0,0]),v=(x,w)=>{p.current&&sI(r,p.current,s,null,[x,w],o,a,l,c)};return S.useImperativeHandle(e,()=>({repaint:()=>v(g[0],g[1]),focus:()=>{var x;return(x=h.current)==null?void 0:x.focus()},getWrapperRef:()=>h.current})),S.useEffect(()=>{const x=new ResizeObserver(w=>{for(let C of w){const P=C.contentRect,{width:O}=P,T=Math.round(O*i);b([O,T]),h.current&&(h.current.style.height=`${T}px`),v(O,T)}});return h.current&&x.observe(h.current),()=>x.disconnect()},[s,r]),y.jsxs("div",Yo(un({ref:h,style:un({display:"flex",justifyContent:"center",alignItems:"center"},d)},f),{children:[y.jsx("div",{className:"relative",children:y.jsx("canvas",{ref:p,style:{width:"100%"}})}),u]}))});z5e.displayName="DGMShapeView";var VH=S.forwardRef((t,e)=>{var n=t,{page:r,darkMode:i=!1,maxScale:s=1,scaleAdjust:o=1,update:a=!1,showDOM:l=!1,style:c,children:d}=n,u=xh(n,["page","darkMode","maxScale","scaleAdjust","update","showDOM","style","children"]);const f=S.useRef(null),h=S.useRef(null),p=r.size?r.size[1]/r.size[0]:.75,[g,b]=S.useState([0,0]),v=(x,w)=>{h.current&&sI([r],h.current,i,r.size,[x,w],s,o,a,l)};return S.useImperativeHandle(e,()=>({repaint:()=>v(g[0],g[1]),focus:()=>{var x;return(x=f.current)==null?void 0:x.focus()},getWrapperRef:()=>f.current})),S.useEffect(()=>{const x=new ResizeObserver(w=>{for(let C of w){const P=C.contentRect,{width:O}=P,T=Math.round(O*p);b([O,T]),f.current&&(f.current.style.height=`${T}px`),v(O,T)}});return f.current&&x.observe(f.current),()=>x.disconnect()},[i,r]),y.jsxs("div",Yo(un({ref:f,style:un({display:"flex",justifyContent:"center",alignItems:"center"},c)},u),{children:[y.jsx("div",{className:"relative",children:y.jsx("canvas",{ref:h,style:{width:"100%"}})}),d]}))});VH.displayName="DGMPageView";const B5e=({doc:t,page:e,idx:n,pagesCount:r,onPageSelect:i,className:s,onRefresh:o,...a})=>{const{darkMode:l,setDoc:c}=Dl(),d=S.useRef(null);return y.jsxs("div",{className:qe("text-sm px-4 py-2 cursor-pointer hover:bg-muted transition-colors",s),...a,children:[y.jsx("div",{children:y.jsx(VH,{ref:d,className:"w-full border rounded",page:e,maxScale:1,scaleAdjust:e.size?1:.8,darkMode:l})}),y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("div",{children:e.name||"(Untitled)"}),y.jsxs("div",{children:[y.jsx(Nt,{variant:"ghost",size:"icon",className:"w-7 h-7",onClick:()=>{window.editor.actions.duplicatePage(e,n+1,u=>{u.name=`Copy of ${u.name}`}),o()},children:y.jsx(uoe,{size:16})}),y.jsx(Nt,{variant:"ghost",size:"icon",className:"w-7 h-7",onClick:()=>{n>0&&(window.editor.actions.reorderPage(e,n-1),o())},children:y.jsx(ioe,{size:16})}),y.jsx(Nt,{variant:"ghost",size:"icon",className:"w-7 h-7",onClick:()=>{window.editor.actions.reorderPage(e,n+1),o()},children:y.jsx(roe,{size:16})}),y.jsx(Nt,{variant:"ghost",size:"icon",className:"w-7 h-7",onClick:()=>{if(window.editor.actions.removePage(e),o(),r<=1){window.editor.newDoc(),c(window.editor.getDoc()),i(window.editor.getCurrentPage());const u=window.editor.store.toJSON();localStorage.setItem("local-data",JSON.stringify(u))}},children:y.jsx(Dx,{size:16})}),y.jsx(Nt,{variant:"ghost",size:"icon",className:"w-7 h-7",onClick:()=>{var u;(u=d.current)==null||u.repaint()},children:y.jsx(Coe,{size:16})})]})]})]},e.id)},U5e=({doc:t,currentPage:e,onPageSelect:n})=>{const[r,i]=S.useState(Date.now()),s=()=>{i(Date.now())};return y.jsx(kg,{className:"h-full w-full",children:t==null?void 0:t.children.map((o,a)=>y.jsx(B5e,{doc:t,page:o,idx:a,pagesCount:t.children.length,className:qe(o.id===(e==null?void 0:e.id)&&"bg-muted"),onPageSelect:n,onClick:()=>{n&&n(o)},onRefresh:s},o.id))},r)},H5e=({doc:t,currentPage:e,onSelect:n,onPageSelect:r})=>y.jsx("div",{id:"shape-sidebar",className:"h-full w-full bg-background p-2",children:y.jsxs(p4,{defaultValue:"pages",className:"h-full w-full",children:[y.jsxs(Bx,{className:"grid w-full grid-cols-3",children:[y.jsx(yc,{value:"pages",children:"Pages"}),y.jsx(yc,{value:"layers",children:"Layers"}),y.jsx(yc,{value:"libary",children:"Libary"})]}),y.jsx(vc,{value:"pages",children:y.jsx(U5e,{doc:t,currentPage:e,onPageSelect:r})}),y.jsx(vc,{value:"layers",children:y.jsx(R0e,{page:e,onSelect:n})}),y.jsx(vc,{value:"libary",className:"h-full",children:y.jsx(md,{message:"Not Available"})})]})});function V5e({tiptapEditor:t,darkMode:e,shape:n}){const[r,i]=S.useState({fontSize:SM.toString(),bold:!1,italic:!1,underline:!1,strike:!1,bulletList:!1,orderedList:!1,textAlign:"left"});return S.useEffect(()=>{t.on("transaction",s=>{var o;i({fontSize:((o=s.editor.getAttributes("textStyle").fontSize)==null?void 0:o.trim().slice(0,-2))??(n==null?void 0:n.fontSize.toString())??SM.toString(),bold:s.editor.isActive("bold"),italic:s.editor.isActive("italic"),underline:s.editor.isActive("underline"),strike:s.editor.isActive("strike"),bulletList:s.editor.isActive("bulletList"),orderedList:s.editor.isActive("orderedList"),textAlign:s.editor.getAttributes("paragraph").textAlign||"left"})})},[]),y.jsxs("div",{className:"h-8 rounded-md p-0 gap-0 flex items-center bg-background drop-shadow-lg",children:[y.jsxs(gh,{children:[y.jsx(mh,{asChild:!0,children:y.jsx(Nt,{variant:"ghost",className:"h-8 w-8 px-2 border rounded-r-none",children:y.jsx(Soe,{size:16})})}),y.jsx(_d,{sideOffset:8,className:"w-fit dark:bg-slate-950 z-[10000]",children:y.jsx(o_,{theme:e?"dark":"light",palette:gF,onClick:s=>{console.log(s),t.chain().focus().setColor(s).run()}})})]}),y.jsx(Ca,{className:"w-8 h-8 px-2 border-y rounded-none",pressed:r.bold,onPressedChange:()=>t.chain().focus().toggleBold().run(),children:y.jsx(soe,{size:16})}),y.jsx(Ca,{className:"w-8 h-8 px-2 border-y rounded-none",pressed:r.italic,onPressedChange:()=>t.chain().focus().toggleItalic().run(),children:y.jsx(moe,{size:16})}),y.jsx(Ca,{className:"w-8 h-8 px-2 border-y rounded-none",pressed:r.underline,onPressedChange:()=>t.chain().focus().toggleUnderline().run(),children:y.jsx(Noe,{size:16})}),y.jsx(Ca,{className:"w-8 h-8 px-2 border-y rounded-none",pressed:r.strike,onPressedChange:()=>t.chain().focus().toggleStrike().run(),children:y.jsx(Poe,{size:16})}),y.jsx(Ca,{className:"w-8 h-8 px-2 border-l border-y rounded-none",pressed:r.bulletList,onPressedChange:()=>t.chain().focus().toggleBulletList().run(),children:y.jsx(voe,{size:16})}),y.jsx(Ca,{className:"w-8 h-8 px-2 border-y rounded-none",pressed:r.orderedList,onPressedChange:()=>t.chain().focus().toggleOrderedList().run(),children:y.jsx(yoe,{size:16})}),y.jsxs(Ag,{type:"single",className:"border-none h-8 gap-0",value:r.textAlign,onValueChange:s=>{t.chain().focus().setTextAlign(s).run()},children:[y.jsx(Hi,{size:"sm",value:"left",className:"w-8 h-8 px-2 border-l border-y rounded-none",children:y.jsx(W9,{size:16})}),y.jsx(Hi,{size:"sm",value:"center",className:"w-8 h-8 px-2 border-y rounded-none",children:y.jsx(V9,{size:16})}),y.jsx(Hi,{size:"sm",value:"right",className:"w-8 h-8 px-2 border-y rounded-none",children:y.jsx(q9,{size:16})})]})]})}const W5e=({darkMode:t=!0,onMount:e,...n})=>{const[r,i]=S.useState(null),[s,o]=S.useState(null);return y.jsx(y.Fragment,{children:y.jsx(F5e,{darkMode:t,onMount:a=>{e&&e(a)},textInplaceEditorToolbar:y.jsx(V5e,{darkMode:t,tiptapEditor:r,shape:s}),onTextInplaceEditorMount:a=>{i(a)},onTextInplaceEditorOpen:a=>{o(a)},onFloatingToolbarMove:a=>{},...n})})},q5e=1200,G5e=2500,Kw=3e4,J_=t=>{if(t.shouldConnect&&t.ws===null){const e=new WebSocket(t.url),n=t.binaryType;let r=null;n&&(e.binaryType=n),t.ws=e,t.connecting=!0,t.connected=!1,e.onmessage=o=>{t.lastMessageReceived=Nc();const a=o.data,l=typeof a=="string"?JSON.parse(a):a;l&&l.type==="pong"&&(clearTimeout(r),r=setTimeout(s,Kw/2)),t.emit("message",[l,t])};const i=o=>{t.ws!==null&&(t.ws=null,t.connecting=!1,t.connected?(t.connected=!1,t.emit("disconnect",[{type:"disconnect",error:o},t])):t.unsuccessfulReconnects++,setTimeout(J_,zE(ere(t.unsuccessfulReconnects+1)*q5e,G5e),t)),clearTimeout(r)},s=()=>{t.ws===e&&t.send({type:"ping"})};e.onclose=()=>i(null),e.onerror=o=>i(o),e.onopen=()=>{t.lastMessageReceived=Nc(),t.connecting=!1,t.connected=!0,t.unsuccessfulReconnects=0,t.emit("connect",[{type:"connect"},t]),r=setTimeout(s,Kw/2)}}};class K5e extends FE{constructor(e,{binaryType:n}={}){super(),this.url=e,this.ws=null,this.binaryType=n||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&Kw<Nc()-this.lastMessageReceived&&this.ws.close()},Kw/2),J_(this)}send(e){this.ws&&this.ws.send(JSON.stringify(e))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&J_(this)}}const WH=new Map;class J5e{constructor(e){this.room=e,this.onmessage=null,this._onChange=n=>n.key===e&&this.onmessage!==null&&this.onmessage({data:BI(n.newValue||"")}),Lre(this._onChange)}postMessage(e){DI.setItem(this.room,zI(Yre(e)))}close(){Dre(this._onChange)}}const Y5e=typeof BroadcastChannel>"u"?J5e:BroadcastChannel,O6=t=>Co(WH,t,()=>{const e=cd(),n=new Y5e(t);return n.onmessage=r=>e.forEach(i=>i(r.data,"broadcastchannel")),{bc:n,subs:e}}),Z5e=(t,e)=>(O6(t).subs.add(e),e),X5e=(t,e)=>{const n=O6(t),r=n.subs.delete(e);return r&&n.subs.size===0&&(n.bc.close(),WH.delete(t)),r},Q5e=(t,e,n=null)=>{const r=O6(t);r.bc.postMessage(e),r.subs.forEach(i=>i(e,n))},eSe=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}};function b2(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qH={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(){var n=Math.floor,r=Math.abs,i=Math.pow;return function(){function s(o,a,l){function c(f,h){if(!a[f]){if(!o[f]){var p=typeof b2=="function"&&b2;if(!h&&p)return p(f,!0);if(d)return d(f,!0);var g=new Error("Cannot find module '"+f+"'");throw g.code="MODULE_NOT_FOUND",g}var b=a[f]={exports:{}};o[f][0].call(b.exports,function(v){var x=o[f][1][v];return c(x||v)},b,b.exports,s,o,a,l)}return a[f].exports}for(var d=typeof b2=="function"&&b2,u=0;u<l.length;u++)c(l[u]);return c}return s}()({1:[function(s,o,a){function l(C){var P=C.length;if(0<P%4)throw new Error("Invalid string. Length must be a multiple of 4");var O=C.indexOf("=");O===-1&&(O=P);var T=O===P?0:4-O%4;return[O,T]}function c(C,P,O){return 3*(P+O)/4-O}function d(C){var P,O,T=l(C),M=T[0],D=T[1],I=new b(c(C,M,D)),R=0,$=0<D?M-4:M;for(O=0;O<$;O+=4)P=g[C.charCodeAt(O)]<<18|g[C.charCodeAt(O+1)]<<12|g[C.charCodeAt(O+2)]<<6|g[C.charCodeAt(O+3)],I[R++]=255&P>>16,I[R++]=255&P>>8,I[R++]=255&P;return D===2&&(P=g[C.charCodeAt(O)]<<2|g[C.charCodeAt(O+1)]>>4,I[R++]=255&P),D===1&&(P=g[C.charCodeAt(O)]<<10|g[C.charCodeAt(O+1)]<<4|g[C.charCodeAt(O+2)]>>2,I[R++]=255&P>>8,I[R++]=255&P),I}function u(C){return p[63&C>>18]+p[63&C>>12]+p[63&C>>6]+p[63&C]}function f(C,P,O){for(var T,M=[],D=P;D<O;D+=3)T=(16711680&C[D]<<16)+(65280&C[D+1]<<8)+(255&C[D+2]),M.push(u(T));return M.join("")}function h(C){for(var P,O=C.length,T=O%3,M=[],D=16383,I=0,R=O-T;I<R;I+=D)M.push(f(C,I,I+D>R?R:I+D));return T===1?(P=C[O-1],M.push(p[P>>2]+p[63&P<<4]+"==")):T===2&&(P=(C[O-2]<<8)+C[O-1],M.push(p[P>>10]+p[63&P>>4]+p[63&P<<2]+"=")),M.join("")}a.byteLength=function(C){var P=l(C),O=P[0],T=P[1];return 3*(O+T)/4-T},a.toByteArray=d,a.fromByteArray=h;for(var p=[],g=[],b=typeof Uint8Array>"u"?Array:Uint8Array,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x=0,w=v.length;x<w;++x)p[x]=v[x],g[v.charCodeAt(x)]=x;g[45]=62,g[95]=63},{}],2:[function(){},{}],3:[function(s,o,a){(function(){(function(){var l=String.fromCharCode,c=Math.min;function d(_){if(2147483647<_)throw new RangeError('The value "'+_+'" is invalid for option "size"');var A=new Uint8Array(_);return A.__proto__=u.prototype,A}function u(_,A,j){if(typeof _=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(_)}return f(_,A,j)}function f(_,A,j){if(typeof _=="string")return b(_,A);if(ArrayBuffer.isView(_))return v(_);if(_==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _);if(ne(_,ArrayBuffer)||_&&ne(_.buffer,ArrayBuffer))return x(_,A,j);if(typeof _=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var oe=_.valueOf&&_.valueOf();if(oe!=null&&oe!==_)return u.from(oe,A,j);var ye=w(_);if(ye)return ye;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof _[Symbol.toPrimitive]=="function")return u.from(_[Symbol.toPrimitive]("string"),A,j);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _)}function h(_){if(typeof _!="number")throw new TypeError('"size" argument must be of type number');if(0>_)throw new RangeError('The value "'+_+'" is invalid for option "size"')}function p(_,A,j){return h(_),0>=_||A===void 0?d(_):typeof j=="string"?d(_).fill(A,j):d(_).fill(A)}function g(_){return h(_),d(0>_?0:0|C(_))}function b(_,A){if((typeof A!="string"||A==="")&&(A="utf8"),!u.isEncoding(A))throw new TypeError("Unknown encoding: "+A);var j=0|P(_,A),oe=d(j),ye=oe.write(_,A);return ye!==j&&(oe=oe.slice(0,ye)),oe}function v(_){for(var A=0>_.length?0:0|C(_.length),j=d(A),oe=0;oe<A;oe+=1)j[oe]=255&_[oe];return j}function x(_,A,j){if(0>A||_.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(_.byteLength<A+(j||0))throw new RangeError('"length" is outside of buffer bounds');var oe;return oe=A===void 0&&j===void 0?new Uint8Array(_):j===void 0?new Uint8Array(_,A):new Uint8Array(_,A,j),oe.__proto__=u.prototype,oe}function w(_){if(u.isBuffer(_)){var A=0|C(_.length),j=d(A);return j.length===0||_.copy(j,0,0,A),j}return _.length===void 0?_.type==="Buffer"&&Array.isArray(_.data)?v(_.data):void 0:typeof _.length!="number"||V(_.length)?d(0):v(_)}function C(_){if(_>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|_}function P(_,A){if(u.isBuffer(_))return _.length;if(ArrayBuffer.isView(_)||ne(_,ArrayBuffer))return _.byteLength;if(typeof _!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof _);var j=_.length,oe=2<arguments.length&&arguments[2]===!0;if(!oe&&j===0)return 0;for(var ye=!1;;)switch(A){case"ascii":case"latin1":case"binary":return j;case"utf8":case"utf-8":return me(_).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*j;case"hex":return j>>>1;case"base64":return je(_).length;default:if(ye)return oe?-1:me(_).length;A=(""+A).toLowerCase(),ye=!0}}function O(_,A,j){var oe=!1;if((A===void 0||0>A)&&(A=0),A>this.length||((j===void 0||j>this.length)&&(j=this.length),0>=j)||(j>>>=0,A>>>=0,j<=A))return"";for(_||(_="utf8");;)switch(_){case"hex":return Ce(this,A,j);case"utf8":case"utf-8":return le(this,A,j);case"ascii":return Z(this,A,j);case"latin1":case"binary":return de(this,A,j);case"base64":return ce(this,A,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,A,j);default:if(oe)throw new TypeError("Unknown encoding: "+_);_=(_+"").toLowerCase(),oe=!0}}function T(_,A,j){var oe=_[A];_[A]=_[j],_[j]=oe}function M(_,A,j,oe,ye){if(_.length===0)return-1;if(typeof j=="string"?(oe=j,j=0):2147483647<j?j=2147483647:-2147483648>j&&(j=-2147483648),j=+j,V(j)&&(j=ye?0:_.length-1),0>j&&(j=_.length+j),j>=_.length){if(ye)return-1;j=_.length-1}else if(0>j)if(ye)j=0;else return-1;if(typeof A=="string"&&(A=u.from(A,oe)),u.isBuffer(A))return A.length===0?-1:D(_,A,j,oe,ye);if(typeof A=="number")return A&=255,typeof Uint8Array.prototype.indexOf=="function"?ye?Uint8Array.prototype.indexOf.call(_,A,j):Uint8Array.prototype.lastIndexOf.call(_,A,j):D(_,[A],j,oe,ye);throw new TypeError("val must be string, number or Buffer")}function D(_,A,j,oe,ye){function Ee(Ht,Tr){return Ge===1?Ht[Tr]:Ht.readUInt16BE(Tr*Ge)}var Ge=1,Ze=_.length,bt=A.length;if(oe!==void 0&&(oe=(oe+"").toLowerCase(),oe==="ucs2"||oe==="ucs-2"||oe==="utf16le"||oe==="utf-16le")){if(2>_.length||2>A.length)return-1;Ge=2,Ze/=2,bt/=2,j/=2}var tt;if(ye){var rt=-1;for(tt=j;tt<Ze;tt++)if(Ee(_,tt)!==Ee(A,rt===-1?0:tt-rt))rt!==-1&&(tt-=tt-rt),rt=-1;else if(rt===-1&&(rt=tt),tt-rt+1===bt)return rt*Ge}else for(j+bt>Ze&&(j=Ze-bt),tt=j;0<=tt;tt--){for(var Be=!0,In=0;In<bt;In++)if(Ee(_,tt+In)!==Ee(A,In)){Be=!1;break}if(Be)return tt}return-1}function I(_,A,j,oe){j=+j||0;var ye=_.length-j;oe?(oe=+oe,oe>ye&&(oe=ye)):oe=ye;var Ee=A.length;oe>Ee/2&&(oe=Ee/2);for(var Ge,Ze=0;Ze<oe;++Ze){if(Ge=parseInt(A.substr(2*Ze,2),16),V(Ge))return Ze;_[j+Ze]=Ge}return Ze}function R(_,A,j,oe){return Qe(me(A,_.length-j),_,j,oe)}function $(_,A,j,oe){return Qe(_e(A),_,j,oe)}function H(_,A,j,oe){return $(_,A,j,oe)}function z(_,A,j,oe){return Qe(je(A),_,j,oe)}function ee(_,A,j,oe){return Qe(Te(A,_.length-j),_,j,oe)}function ce(_,A,j){return A===0&&j===_.length?Re.fromByteArray(_):Re.fromByteArray(_.slice(A,j))}function le(_,A,j){j=c(_.length,j);for(var oe=[],ye=A;ye<j;){var Ee=_[ye],Ge=null,Ze=239<Ee?4:223<Ee?3:191<Ee?2:1;if(ye+Ze<=j){var bt,tt,rt,Be;Ze===1?128>Ee&&(Ge=Ee):Ze===2?(bt=_[ye+1],(192&bt)==128&&(Be=(31&Ee)<<6|63&bt,127<Be&&(Ge=Be))):Ze===3?(bt=_[ye+1],tt=_[ye+2],(192&bt)==128&&(192&tt)==128&&(Be=(15&Ee)<<12|(63&bt)<<6|63&tt,2047<Be&&(55296>Be||57343<Be)&&(Ge=Be))):Ze===4&&(bt=_[ye+1],tt=_[ye+2],rt=_[ye+3],(192&bt)==128&&(192&tt)==128&&(192&rt)==128&&(Be=(15&Ee)<<18|(63&bt)<<12|(63&tt)<<6|63&rt,65535<Be&&1114112>Be&&(Ge=Be)))}Ge===null?(Ge=65533,Ze=1):65535<Ge&&(Ge-=65536,oe.push(55296|1023&Ge>>>10),Ge=56320|1023&Ge),oe.push(Ge),ye+=Ze}return te(oe)}function te(_){var A=_.length;if(A<=4096)return l.apply(String,_);for(var j="",oe=0;oe<A;)j+=l.apply(String,_.slice(oe,oe+=4096));return j}function Z(_,A,j){var oe="";j=c(_.length,j);for(var ye=A;ye<j;++ye)oe+=l(127&_[ye]);return oe}function de(_,A,j){var oe="";j=c(_.length,j);for(var ye=A;ye<j;++ye)oe+=l(_[ye]);return oe}function Ce(_,A,j){var oe=_.length;(!A||0>A)&&(A=0),(!j||0>j||j>oe)&&(j=oe);for(var ye="",Ee=A;Ee<j;++Ee)ye+=pe(_[Ee]);return ye}function F(_,A,j){for(var oe=_.slice(A,j),ye="",Ee=0;Ee<oe.length;Ee+=2)ye+=l(oe[Ee]+256*oe[Ee+1]);return ye}function X(_,A,j){if(_%1!=0||0>_)throw new RangeError("offset is not uint");if(_+A>j)throw new RangeError("Trying to access beyond buffer length")}function re(_,A,j,oe,ye,Ee){if(!u.isBuffer(_))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>ye||A<Ee)throw new RangeError('"value" argument is out of bounds');if(j+oe>_.length)throw new RangeError("Index out of range")}function ue(_,A,j,oe){if(j+oe>_.length)throw new RangeError("Index out of range");if(0>j)throw new RangeError("Index out of range")}function he(_,A,j,oe,ye){return A=+A,j>>>=0,ye||ue(_,A,j,4),Fe.write(_,A,j,oe,23,4),j+4}function fe(_,A,j,oe,ye){return A=+A,j>>>=0,ye||ue(_,A,j,8),Fe.write(_,A,j,oe,52,8),j+8}function be(_){if(_=_.split("=")[0],_=_.trim().replace(K,""),2>_.length)return"";for(;_.length%4!=0;)_+="=";return _}function pe(_){return 16>_?"0"+_.toString(16):_.toString(16)}function me(_,A){A=A||1/0;for(var j,oe=_.length,ye=null,Ee=[],Ge=0;Ge<oe;++Ge){if(j=_.charCodeAt(Ge),55295<j&&57344>j){if(!ye){if(56319<j){-1<(A-=3)&&Ee.push(239,191,189);continue}else if(Ge+1===oe){-1<(A-=3)&&Ee.push(239,191,189);continue}ye=j;continue}if(56320>j){-1<(A-=3)&&Ee.push(239,191,189),ye=j;continue}j=(ye-55296<<10|j-56320)+65536}else ye&&-1<(A-=3)&&Ee.push(239,191,189);if(ye=null,128>j){if(0>(A-=1))break;Ee.push(j)}else if(2048>j){if(0>(A-=2))break;Ee.push(192|j>>6,128|63&j)}else if(65536>j){if(0>(A-=3))break;Ee.push(224|j>>12,128|63&j>>6,128|63&j)}else if(1114112>j){if(0>(A-=4))break;Ee.push(240|j>>18,128|63&j>>12,128|63&j>>6,128|63&j)}else throw new Error("Invalid code point")}return Ee}function _e(_){for(var A=[],j=0;j<_.length;++j)A.push(255&_.charCodeAt(j));return A}function Te(_,A){for(var j,oe,ye,Ee=[],Ge=0;Ge<_.length&&!(0>(A-=2));++Ge)j=_.charCodeAt(Ge),oe=j>>8,ye=j%256,Ee.push(ye),Ee.push(oe);return Ee}function je(_){return Re.toByteArray(be(_))}function Qe(_,A,j,oe){for(var ye=0;ye<oe&&!(ye+j>=A.length||ye>=_.length);++ye)A[ye+j]=_[ye];return ye}function ne(_,A){return _ instanceof A||_!=null&&_.constructor!=null&&_.constructor.name!=null&&_.constructor.name===A.name}function V(_){return _!==_}var Re=s("base64-js"),Fe=s("ieee754");a.Buffer=u,a.SlowBuffer=function(_){return+_!=_&&(_=0),u.alloc(+_)},a.INSPECT_MAX_BYTES=50,a.kMaxLength=2147483647,u.TYPED_ARRAY_SUPPORT=function(){try{var _=new Uint8Array(1);return _.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},_.foo()===42}catch{return!1}}(),u.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){return u.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){return u.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192,u.from=function(_,A,j){return f(_,A,j)},u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,u.alloc=function(_,A,j){return p(_,A,j)},u.allocUnsafe=function(_){return g(_)},u.allocUnsafeSlow=function(_){return g(_)},u.isBuffer=function(_){return _!=null&&_._isBuffer===!0&&_!==u.prototype},u.compare=function(_,A){if(ne(_,Uint8Array)&&(_=u.from(_,_.offset,_.byteLength)),ne(A,Uint8Array)&&(A=u.from(A,A.offset,A.byteLength)),!u.isBuffer(_)||!u.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(_===A)return 0;for(var j=_.length,oe=A.length,ye=0,Ee=c(j,oe);ye<Ee;++ye)if(_[ye]!==A[ye]){j=_[ye],oe=A[ye];break}return j<oe?-1:oe<j?1:0},u.isEncoding=function(_){switch((_+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(_,A){if(!Array.isArray(_))throw new TypeError('"list" argument must be an Array of Buffers');if(_.length===0)return u.alloc(0);var j;if(A===void 0)for(A=0,j=0;j<_.length;++j)A+=_[j].length;var oe=u.allocUnsafe(A),ye=0;for(j=0;j<_.length;++j){var Ee=_[j];if(ne(Ee,Uint8Array)&&(Ee=u.from(Ee)),!u.isBuffer(Ee))throw new TypeError('"list" argument must be an Array of Buffers');Ee.copy(oe,ye),ye+=Ee.length}return oe},u.byteLength=P,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var _=this.length;if(_%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var A=0;A<_;A+=2)T(this,A,A+1);return this},u.prototype.swap32=function(){var _=this.length;if(_%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var A=0;A<_;A+=4)T(this,A,A+3),T(this,A+1,A+2);return this},u.prototype.swap64=function(){var _=this.length;if(_%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var A=0;A<_;A+=8)T(this,A,A+7),T(this,A+1,A+6),T(this,A+2,A+5),T(this,A+3,A+4);return this},u.prototype.toString=function(){var _=this.length;return _===0?"":arguments.length===0?le(this,0,_):O.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(_){if(!u.isBuffer(_))throw new TypeError("Argument must be a Buffer");return this===_||u.compare(this,_)===0},u.prototype.inspect=function(){var _="",A=a.INSPECT_MAX_BYTES;return _=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(_+=" ... "),"<Buffer "+_+">"},u.prototype.compare=function(_,A,j,oe,ye){if(ne(_,Uint8Array)&&(_=u.from(_,_.offset,_.byteLength)),!u.isBuffer(_))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof _);if(A===void 0&&(A=0),j===void 0&&(j=_?_.length:0),oe===void 0&&(oe=0),ye===void 0&&(ye=this.length),0>A||j>_.length||0>oe||ye>this.length)throw new RangeError("out of range index");if(oe>=ye&&A>=j)return 0;if(oe>=ye)return-1;if(A>=j)return 1;if(A>>>=0,j>>>=0,oe>>>=0,ye>>>=0,this===_)return 0;for(var Ee=ye-oe,Ge=j-A,Ze=c(Ee,Ge),bt=this.slice(oe,ye),tt=_.slice(A,j),rt=0;rt<Ze;++rt)if(bt[rt]!==tt[rt]){Ee=bt[rt],Ge=tt[rt];break}return Ee<Ge?-1:Ge<Ee?1:0},u.prototype.includes=function(_,A,j){return this.indexOf(_,A,j)!==-1},u.prototype.indexOf=function(_,A,j){return M(this,_,A,j,!0)},u.prototype.lastIndexOf=function(_,A,j){return M(this,_,A,j,!1)},u.prototype.write=function(_,A,j,oe){if(A===void 0)oe="utf8",j=this.length,A=0;else if(j===void 0&&typeof A=="string")oe=A,j=this.length,A=0;else if(isFinite(A))A>>>=0,isFinite(j)?(j>>>=0,oe===void 0&&(oe="utf8")):(oe=j,j=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ye=this.length-A;if((j===void 0||j>ye)&&(j=ye),0<_.length&&(0>j||0>A)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");oe||(oe="utf8");for(var Ee=!1;;)switch(oe){case"hex":return I(this,_,A,j);case"utf8":case"utf-8":return R(this,_,A,j);case"ascii":return $(this,_,A,j);case"latin1":case"binary":return H(this,_,A,j);case"base64":return z(this,_,A,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,_,A,j);default:if(Ee)throw new TypeError("Unknown encoding: "+oe);oe=(""+oe).toLowerCase(),Ee=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(_,A){var j=this.length;_=~~_,A=A===void 0?j:~~A,0>_?(_+=j,0>_&&(_=0)):_>j&&(_=j),0>A?(A+=j,0>A&&(A=0)):A>j&&(A=j),A<_&&(A=_);var oe=this.subarray(_,A);return oe.__proto__=u.prototype,oe},u.prototype.readUIntLE=function(_,A,j){_>>>=0,A>>>=0,j||X(_,A,this.length);for(var oe=this[_],ye=1,Ee=0;++Ee<A&&(ye*=256);)oe+=this[_+Ee]*ye;return oe},u.prototype.readUIntBE=function(_,A,j){_>>>=0,A>>>=0,j||X(_,A,this.length);for(var oe=this[_+--A],ye=1;0<A&&(ye*=256);)oe+=this[_+--A]*ye;return oe},u.prototype.readUInt8=function(_,A){return _>>>=0,A||X(_,1,this.length),this[_]},u.prototype.readUInt16LE=function(_,A){return _>>>=0,A||X(_,2,this.length),this[_]|this[_+1]<<8},u.prototype.readUInt16BE=function(_,A){return _>>>=0,A||X(_,2,this.length),this[_]<<8|this[_+1]},u.prototype.readUInt32LE=function(_,A){return _>>>=0,A||X(_,4,this.length),(this[_]|this[_+1]<<8|this[_+2]<<16)+16777216*this[_+3]},u.prototype.readUInt32BE=function(_,A){return _>>>=0,A||X(_,4,this.length),16777216*this[_]+(this[_+1]<<16|this[_+2]<<8|this[_+3])},u.prototype.readIntLE=function(_,A,j){_>>>=0,A>>>=0,j||X(_,A,this.length);for(var oe=this[_],ye=1,Ee=0;++Ee<A&&(ye*=256);)oe+=this[_+Ee]*ye;return ye*=128,oe>=ye&&(oe-=i(2,8*A)),oe},u.prototype.readIntBE=function(_,A,j){_>>>=0,A>>>=0,j||X(_,A,this.length);for(var oe=A,ye=1,Ee=this[_+--oe];0<oe&&(ye*=256);)Ee+=this[_+--oe]*ye;return ye*=128,Ee>=ye&&(Ee-=i(2,8*A)),Ee},u.prototype.readInt8=function(_,A){return _>>>=0,A||X(_,1,this.length),128&this[_]?-1*(255-this[_]+1):this[_]},u.prototype.readInt16LE=function(_,A){_>>>=0,A||X(_,2,this.length);var j=this[_]|this[_+1]<<8;return 32768&j?4294901760|j:j},u.prototype.readInt16BE=function(_,A){_>>>=0,A||X(_,2,this.length);var j=this[_+1]|this[_]<<8;return 32768&j?4294901760|j:j},u.prototype.readInt32LE=function(_,A){return _>>>=0,A||X(_,4,this.length),this[_]|this[_+1]<<8|this[_+2]<<16|this[_+3]<<24},u.prototype.readInt32BE=function(_,A){return _>>>=0,A||X(_,4,this.length),this[_]<<24|this[_+1]<<16|this[_+2]<<8|this[_+3]},u.prototype.readFloatLE=function(_,A){return _>>>=0,A||X(_,4,this.length),Fe.read(this,_,!0,23,4)},u.prototype.readFloatBE=function(_,A){return _>>>=0,A||X(_,4,this.length),Fe.read(this,_,!1,23,4)},u.prototype.readDoubleLE=function(_,A){return _>>>=0,A||X(_,8,this.length),Fe.read(this,_,!0,52,8)},u.prototype.readDoubleBE=function(_,A){return _>>>=0,A||X(_,8,this.length),Fe.read(this,_,!1,52,8)},u.prototype.writeUIntLE=function(_,A,j,oe){if(_=+_,A>>>=0,j>>>=0,!oe){var ye=i(2,8*j)-1;re(this,_,A,j,ye,0)}var Ee=1,Ge=0;for(this[A]=255&_;++Ge<j&&(Ee*=256);)this[A+Ge]=255&_/Ee;return A+j},u.prototype.writeUIntBE=function(_,A,j,oe){if(_=+_,A>>>=0,j>>>=0,!oe){var ye=i(2,8*j)-1;re(this,_,A,j,ye,0)}var Ee=j-1,Ge=1;for(this[A+Ee]=255&_;0<=--Ee&&(Ge*=256);)this[A+Ee]=255&_/Ge;return A+j},u.prototype.writeUInt8=function(_,A,j){return _=+_,A>>>=0,j||re(this,_,A,1,255,0),this[A]=255&_,A+1},u.prototype.writeUInt16LE=function(_,A,j){return _=+_,A>>>=0,j||re(this,_,A,2,65535,0),this[A]=255&_,this[A+1]=_>>>8,A+2},u.prototype.writeUInt16BE=function(_,A,j){return _=+_,A>>>=0,j||re(this,_,A,2,65535,0),this[A]=_>>>8,this[A+1]=255&_,A+2},u.prototype.writeUInt32LE=function(_,A,j){return _=+_,A>>>=0,j||re(this,_,A,4,4294967295,0),this[A+3]=_>>>24,this[A+2]=_>>>16,this[A+1]=_>>>8,this[A]=255&_,A+4},u.prototype.writeUInt32BE=function(_,A,j){return _=+_,A>>>=0,j||re(this,_,A,4,4294967295,0),this[A]=_>>>24,this[A+1]=_>>>16,this[A+2]=_>>>8,this[A+3]=255&_,A+4},u.prototype.writeIntLE=function(_,A,j,oe){if(_=+_,A>>>=0,!oe){var ye=i(2,8*j-1);re(this,_,A,j,ye-1,-ye)}var Ee=0,Ge=1,Ze=0;for(this[A]=255&_;++Ee<j&&(Ge*=256);)0>_&&Ze===0&&this[A+Ee-1]!==0&&(Ze=1),this[A+Ee]=255&(_/Ge>>0)-Ze;return A+j},u.prototype.writeIntBE=function(_,A,j,oe){if(_=+_,A>>>=0,!oe){var ye=i(2,8*j-1);re(this,_,A,j,ye-1,-ye)}var Ee=j-1,Ge=1,Ze=0;for(this[A+Ee]=255&_;0<=--Ee&&(Ge*=256);)0>_&&Ze===0&&this[A+Ee+1]!==0&&(Ze=1),this[A+Ee]=255&(_/Ge>>0)-Ze;return A+j},u.prototype.writeInt8=function(_,A,j){return _=+_,A>>>=0,j||re(this,_,A,1,127,-128),0>_&&(_=255+_+1),this[A]=255&_,A+1},u.prototype.writeInt16LE=function(_,A,j){return _=+_,A>>>=0,j||re(this,_,A,2,32767,-32768),this[A]=255&_,this[A+1]=_>>>8,A+2},u.prototype.writeInt16BE=function(_,A,j){return _=+_,A>>>=0,j||re(this,_,A,2,32767,-32768),this[A]=_>>>8,this[A+1]=255&_,A+2},u.prototype.writeInt32LE=function(_,A,j){return _=+_,A>>>=0,j||re(this,_,A,4,2147483647,-2147483648),this[A]=255&_,this[A+1]=_>>>8,this[A+2]=_>>>16,this[A+3]=_>>>24,A+4},u.prototype.writeInt32BE=function(_,A,j){return _=+_,A>>>=0,j||re(this,_,A,4,2147483647,-2147483648),0>_&&(_=4294967295+_+1),this[A]=_>>>24,this[A+1]=_>>>16,this[A+2]=_>>>8,this[A+3]=255&_,A+4},u.prototype.writeFloatLE=function(_,A,j){return he(this,_,A,!0,j)},u.prototype.writeFloatBE=function(_,A,j){return he(this,_,A,!1,j)},u.prototype.writeDoubleLE=function(_,A,j){return fe(this,_,A,!0,j)},u.prototype.writeDoubleBE=function(_,A,j){return fe(this,_,A,!1,j)},u.prototype.copy=function(_,A,j,oe){if(!u.isBuffer(_))throw new TypeError("argument should be a Buffer");if(j||(j=0),oe||oe===0||(oe=this.length),A>=_.length&&(A=_.length),A||(A=0),0<oe&&oe<j&&(oe=j),oe===j||_.length===0||this.length===0)return 0;if(0>A)throw new RangeError("targetStart out of bounds");if(0>j||j>=this.length)throw new RangeError("Index out of range");if(0>oe)throw new RangeError("sourceEnd out of bounds");oe>this.length&&(oe=this.length),_.length-A<oe-j&&(oe=_.length-A+j);var ye=oe-j;if(this===_&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(A,j,oe);else if(this===_&&j<A&&A<oe)for(var Ee=ye-1;0<=Ee;--Ee)_[Ee+A]=this[Ee+j];else Uint8Array.prototype.set.call(_,this.subarray(j,oe),A);return ye},u.prototype.fill=function(_,A,j,oe){if(typeof _=="string"){if(typeof A=="string"?(oe=A,A=0,j=this.length):typeof j=="string"&&(oe=j,j=this.length),oe!==void 0&&typeof oe!="string")throw new TypeError("encoding must be a string");if(typeof oe=="string"&&!u.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);if(_.length===1){var ye=_.charCodeAt(0);(oe==="utf8"&&128>ye||oe==="latin1")&&(_=ye)}}else typeof _=="number"&&(_&=255);if(0>A||this.length<A||this.length<j)throw new RangeError("Out of range index");if(j<=A)return this;A>>>=0,j=j===void 0?this.length:j>>>0,_||(_=0);var Ee;if(typeof _=="number")for(Ee=A;Ee<j;++Ee)this[Ee]=_;else{var Ge=u.isBuffer(_)?_:u.from(_,oe),Ze=Ge.length;if(Ze===0)throw new TypeError('The value "'+_+'" is invalid for argument "value"');for(Ee=0;Ee<j-A;++Ee)this[Ee+A]=Ge[Ee%Ze]}return this};var K=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,s("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(s,o,a){(function(l){(function(){function c(){let u;try{u=a.storage.getItem("debug")}catch{}return!u&&typeof l<"u"&&"env"in l&&(u=l.env.DEBUG),u}a.formatArgs=function(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+o.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;u.splice(1,0,f,"color: inherit");let h=0,p=0;u[0].replace(/%[a-zA-Z%]/g,g=>{g==="%%"||(h++,g==="%c"&&(p=h))}),u.splice(p,0,f)},a.save=function(u){try{u?a.storage.setItem("debug",u):a.storage.removeItem("debug")}catch{}},a.load=c,a.useColors=function(){return!!(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},a.storage=function(){try{return localStorage}catch{}}(),a.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),a.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],a.log=console.debug||console.log||(()=>{}),o.exports=s("./common")(a);const{formatters:d}=o.exports;d.j=function(u){try{return JSON.stringify(u)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}}).call(this)}).call(this,s("_process"))},{"./common":5,_process:12}],5:[function(s,o){o.exports=function(a){function l(u){function f(...g){if(!f.enabled)return;const b=f,v=+new Date,x=v-(h||v);b.diff=x,b.prev=h,b.curr=v,h=v,g[0]=l.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let w=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(P,O)=>{if(P==="%%")return"%";w++;const T=l.formatters[O];if(typeof T=="function"){const M=g[w];P=T.call(b,M),g.splice(w,1),w--}return P}),l.formatArgs.call(b,g),(b.log||l.log).apply(b,g)}let h,p=null;return f.namespace=u,f.useColors=l.useColors(),f.color=l.selectColor(u),f.extend=c,f.destroy=l.destroy,Object.defineProperty(f,"enabled",{enumerable:!0,configurable:!1,get:()=>p===null?l.enabled(u):p,set:g=>{p=g}}),typeof l.init=="function"&&l.init(f),f}function c(u,f){const h=l(this.namespace+(typeof f>"u"?":":f)+u);return h.log=this.log,h}function d(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}return l.debug=l,l.default=l,l.coerce=function(u){return u instanceof Error?u.stack||u.message:u},l.disable=function(){const u=[...l.names.map(d),...l.skips.map(d).map(f=>"-"+f)].join(",");return l.enable(""),u},l.enable=function(u){l.save(u),l.names=[],l.skips=[];let f;const h=(typeof u=="string"?u:"").split(/[\s,]+/),p=h.length;for(f=0;f<p;f++)h[f]&&(u=h[f].replace(/\*/g,".*?"),u[0]==="-"?l.skips.push(new RegExp("^"+u.substr(1)+"$")):l.names.push(new RegExp("^"+u+"$")))},l.enabled=function(u){if(u[u.length-1]==="*")return!0;let f,h;for(f=0,h=l.skips.length;f<h;f++)if(l.skips[f].test(u))return!1;for(f=0,h=l.names.length;f<h;f++)if(l.names[f].test(u))return!0;return!1},l.humanize=s("ms"),l.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(a).forEach(u=>{l[u]=a[u]}),l.names=[],l.skips=[],l.formatters={},l.selectColor=function(u){let f=0;for(let h=0;h<u.length;h++)f=(f<<5)-f+u.charCodeAt(h),f|=0;return l.colors[r(f)%l.colors.length]},l.enable(l.load()),l}},{ms:11}],6:[function(s,o){function a(l,c){for(const d in c)Object.defineProperty(l,d,{value:c[d],enumerable:!0,configurable:!0});return l}o.exports=function(l,c,d){if(!l||typeof l=="string")throw new TypeError("Please pass an Error to err-code");d||(d={}),typeof c=="object"&&(d=c,c=""),c&&(d.code=c);try{return a(l,d)}catch{d.message=l.message,d.stack=l.stack;const f=function(){};return f.prototype=Object.create(Object.getPrototypeOf(l)),a(new f,d)}}},{}],7:[function(s,o){function a(I){console&&console.warn&&console.warn(I)}function l(){l.init.call(this)}function c(I){if(typeof I!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof I)}function d(I){return I._maxListeners===void 0?l.defaultMaxListeners:I._maxListeners}function u(I,R,$,H){var z,ee,ce;if(c($),ee=I._events,ee===void 0?(ee=I._events=Object.create(null),I._eventsCount=0):(ee.newListener!==void 0&&(I.emit("newListener",R,$.listener?$.listener:$),ee=I._events),ce=ee[R]),ce===void 0)ce=ee[R]=$,++I._eventsCount;else if(typeof ce=="function"?ce=ee[R]=H?[$,ce]:[ce,$]:H?ce.unshift($):ce.push($),z=d(I),0<z&&ce.length>z&&!ce.warned){ce.warned=!0;var le=new Error("Possible EventEmitter memory leak detected. "+ce.length+" "+(R+" listeners added. Use emitter.setMaxListeners() to increase limit"));le.name="MaxListenersExceededWarning",le.emitter=I,le.type=R,le.count=ce.length,a(le)}return I}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(I,R,$){var H={fired:!1,wrapFn:void 0,target:I,type:R,listener:$},z=f.bind(H);return z.listener=$,H.wrapFn=z,z}function p(I,R,$){var H=I._events;if(H===void 0)return[];var z=H[R];return z===void 0?[]:typeof z=="function"?$?[z.listener||z]:[z]:$?x(z):b(z,z.length)}function g(I){var R=this._events;if(R!==void 0){var $=R[I];if(typeof $=="function")return 1;if($!==void 0)return $.length}return 0}function b(I,R){for(var $=Array(R),H=0;H<R;++H)$[H]=I[H];return $}function v(I,R){for(;R+1<I.length;R++)I[R]=I[R+1];I.pop()}function x(I){for(var R=Array(I.length),$=0;$<R.length;++$)R[$]=I[$].listener||I[$];return R}function w(I,R,$){typeof I.on=="function"&&C(I,"error",R,$)}function C(I,R,$,H){if(typeof I.on=="function")H.once?I.once(R,$):I.on(R,$);else if(typeof I.addEventListener=="function")I.addEventListener(R,function z(ee){H.once&&I.removeEventListener(R,z),$(ee)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof I)}var P,O=typeof Reflect=="object"?Reflect:null,T=O&&typeof O.apply=="function"?O.apply:function(I,R,$){return Function.prototype.apply.call(I,R,$)};P=O&&typeof O.ownKeys=="function"?O.ownKeys:Object.getOwnPropertySymbols?function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:function(I){return Object.getOwnPropertyNames(I)};var M=Number.isNaN||function(I){return I!==I};o.exports=l,o.exports.once=function(I,R){return new Promise(function($,H){function z(ce){I.removeListener(R,ee),H(ce)}function ee(){typeof I.removeListener=="function"&&I.removeListener("error",z),$([].slice.call(arguments))}C(I,R,ee,{once:!0}),R!=="error"&&w(I,z,{once:!0})})},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var D=10;Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return D},set:function(I){if(typeof I!="number"||0>I||M(I))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+I+".");D=I}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(I){if(typeof I!="number"||0>I||M(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this},l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(I){for(var R=[],$=1;$<arguments.length;$++)R.push(arguments[$]);var H=I==="error",z=this._events;if(z!==void 0)H=H&&z.error===void 0;else if(!H)return!1;if(H){var ee;if(0<R.length&&(ee=R[0]),ee instanceof Error)throw ee;var ce=new Error("Unhandled error."+(ee?" ("+ee.message+")":""));throw ce.context=ee,ce}var le=z[I];if(le===void 0)return!1;if(typeof le=="function")T(le,this,R);else for(var te=le.length,Z=b(le,te),$=0;$<te;++$)T(Z[$],this,R);return!0},l.prototype.addListener=function(I,R){return u(this,I,R,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(I,R){return u(this,I,R,!0)},l.prototype.once=function(I,R){return c(R),this.on(I,h(this,I,R)),this},l.prototype.prependOnceListener=function(I,R){return c(R),this.prependListener(I,h(this,I,R)),this},l.prototype.removeListener=function(I,R){var $,H,z,ee,ce;if(c(R),H=this._events,H===void 0)return this;if($=H[I],$===void 0)return this;if($===R||$.listener===R)--this._eventsCount==0?this._events=Object.create(null):(delete H[I],H.removeListener&&this.emit("removeListener",I,$.listener||R));else if(typeof $!="function"){for(z=-1,ee=$.length-1;0<=ee;ee--)if($[ee]===R||$[ee].listener===R){ce=$[ee].listener,z=ee;break}if(0>z)return this;z===0?$.shift():v($,z),$.length===1&&(H[I]=$[0]),H.removeListener!==void 0&&this.emit("removeListener",I,ce||R)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(I){var R,$,H;if($=this._events,$===void 0)return this;if($.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):$[I]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete $[I]),this;if(arguments.length===0){var z,ee=Object.keys($);for(H=0;H<ee.length;++H)z=ee[H],z!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=$[I],typeof R=="function")this.removeListener(I,R);else if(R!==void 0)for(H=R.length-1;0<=H;H--)this.removeListener(I,R[H]);return this},l.prototype.listeners=function(I){return p(this,I,!0)},l.prototype.rawListeners=function(I){return p(this,I,!1)},l.listenerCount=function(I,R){return typeof I.listenerCount=="function"?I.listenerCount(R):g.call(I,R)},l.prototype.listenerCount=g,l.prototype.eventNames=function(){return 0<this._eventsCount?P(this._events):[]}},{}],8:[function(s,o){o.exports=function(){if(typeof globalThis>"u")return null;var a={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return a.RTCPeerConnection?a:null}},{}],9:[function(s,o,a){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */a.read=function(l,c,d,u,f){var h,p,g=8*f-u-1,b=(1<<g)-1,v=b>>1,x=-7,w=d?f-1:0,C=d?-1:1,P=l[c+w];for(w+=C,h=P&(1<<-x)-1,P>>=-x,x+=g;0<x;h=256*h+l[c+w],w+=C,x-=8);for(p=h&(1<<-x)-1,h>>=-x,x+=u;0<x;p=256*p+l[c+w],w+=C,x-=8);if(h===0)h=1-v;else{if(h===b)return p?NaN:(P?-1:1)*(1/0);p+=i(2,u),h-=v}return(P?-1:1)*p*i(2,h-u)},a.write=function(l,c,d,u,f,h){var p,g,b,v=Math.LN2,x=Math.log,w=8*h-f-1,C=(1<<w)-1,P=C>>1,O=f===23?i(2,-24)-i(2,-77):0,T=u?0:h-1,M=u?1:-1,D=0>c||c===0&&0>1/c?1:0;for(c=r(c),isNaN(c)||c===1/0?(g=isNaN(c)?1:0,p=C):(p=n(x(c)/v),1>c*(b=i(2,-p))&&(p--,b*=2),c+=1<=p+P?O/b:O*i(2,1-P),2<=c*b&&(p++,b/=2),p+P>=C?(g=0,p=C):1<=p+P?(g=(c*b-1)*i(2,f),p+=P):(g=c*i(2,P-1)*i(2,f),p=0));8<=f;l[d+T]=255&g,T+=M,g/=256,f-=8);for(p=p<<f|g,w+=f;0<w;l[d+T]=255&p,T+=M,p/=256,w-=8);l[d+T-M]|=128*D}},{}],10:[function(s,o){o.exports=typeof Object.create=="function"?function(a,l){l&&(a.super_=l,a.prototype=Object.create(l.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:function(a,l){if(l){a.super_=l;var c=function(){};c.prototype=l.prototype,a.prototype=new c,a.prototype.constructor=a}}},{}],11:[function(s,o){var a=Math.round;function l(f){if(f+="",!(100<f.length)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(h){var p=parseFloat(h[1]),g=(h[2]||"ms").toLowerCase();return g==="years"||g==="year"||g==="yrs"||g==="yr"||g==="y"?315576e5*p:g==="weeks"||g==="week"||g==="w"?6048e5*p:g==="days"||g==="day"||g==="d"?864e5*p:g==="hours"||g==="hour"||g==="hrs"||g==="hr"||g==="h"?36e5*p:g==="minutes"||g==="minute"||g==="mins"||g==="min"||g==="m"?6e4*p:g==="seconds"||g==="second"||g==="secs"||g==="sec"||g==="s"?1e3*p:g==="milliseconds"||g==="millisecond"||g==="msecs"||g==="msec"||g==="ms"?p:void 0}}}function c(f){var h=r(f);return 864e5<=h?a(f/864e5)+"d":36e5<=h?a(f/36e5)+"h":6e4<=h?a(f/6e4)+"m":1e3<=h?a(f/1e3)+"s":f+"ms"}function d(f){var h=r(f);return 864e5<=h?u(f,h,864e5,"day"):36e5<=h?u(f,h,36e5,"hour"):6e4<=h?u(f,h,6e4,"minute"):1e3<=h?u(f,h,1e3,"second"):f+" ms"}function u(f,h,p,g){return a(f/p)+" "+g+(h>=1.5*p?"s":"")}o.exports=function(f,h){h=h||{};var p=typeof f;if(p=="string"&&0<f.length)return l(f);if(p==="number"&&isFinite(f))return h.long?d(f):c(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))}},{}],12:[function(s,o){function a(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function c(O){if(g===setTimeout)return setTimeout(O,0);if((g===a||!g)&&setTimeout)return g=setTimeout,setTimeout(O,0);try{return g(O,0)}catch{try{return g.call(null,O,0)}catch{return g.call(this,O,0)}}}function d(O){if(b===clearTimeout)return clearTimeout(O);if((b===l||!b)&&clearTimeout)return b=clearTimeout,clearTimeout(O);try{return b(O)}catch{try{return b.call(null,O)}catch{return b.call(this,O)}}}function u(){C&&x&&(C=!1,x.length?w=x.concat(w):P=-1,w.length&&f())}function f(){if(!C){var O=c(u);C=!0;for(var T=w.length;T;){for(x=w,w=[];++P<T;)x&&x[P].run();P=-1,T=w.length}x=null,C=!1,d(O)}}function h(O,T){this.fun=O,this.array=T}function p(){}var g,b,v=o.exports={};(function(){try{g=typeof setTimeout=="function"?setTimeout:a}catch{g=a}try{b=typeof clearTimeout=="function"?clearTimeout:l}catch{b=l}})();var x,w=[],C=!1,P=-1;v.nextTick=function(O){var T=Array(arguments.length-1);if(1<arguments.length)for(var M=1;M<arguments.length;M++)T[M-1]=arguments[M];w.push(new h(O,T)),w.length!==1||C||c(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},v.title="browser",v.browser=!0,v.env={},v.argv=[],v.version="",v.versions={},v.on=p,v.addListener=p,v.once=p,v.off=p,v.removeListener=p,v.removeAllListeners=p,v.emit=p,v.prependListener=p,v.prependOnceListener=p,v.listeners=function(){return[]},v.binding=function(){throw new Error("process.binding is not supported")},v.cwd=function(){return"/"},v.chdir=function(){throw new Error("process.chdir is not supported")},v.umask=function(){return 0}},{}],13:[function(s,o){(function(a){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let l;o.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window>"u"?a:window):c=>(l||(l=Promise.resolve())).then(c).catch(d=>setTimeout(()=>{throw d},0))}).call(this)}).call(this,typeof zi>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:zi)},{}],14:[function(s,o){(function(a,l){(function(){var c=s("safe-buffer").Buffer,d=l.crypto||l.msCrypto;o.exports=d&&d.getRandomValues?function(u,f){if(u>4294967295)throw new RangeError("requested too many random bytes");var h=c.allocUnsafe(u);if(0<u)if(65536<u)for(var p=0;p<u;p+=65536)d.getRandomValues(h.slice(p,p+65536));else d.getRandomValues(h);return typeof f=="function"?a.nextTick(function(){f(null,h)}):h}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,s("_process"),typeof zi>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:zi)},{_process:12,"safe-buffer":30}],15:[function(s,o){function a(p,g){p.prototype=Object.create(g.prototype),p.prototype.constructor=p,p.__proto__=g}function l(p,g,b){function v(w,C,P){return typeof g=="string"?g:g(w,C,P)}b||(b=Error);var x=function(w){function C(P,O,T){return w.call(this,v(P,O,T))||this}return a(C,w),C}(b);x.prototype.name=b.name,x.prototype.code=p,h[p]=x}function c(p,g){if(Array.isArray(p)){var b=p.length;return p=p.map(function(v){return v+""}),2<b?"one of ".concat(g," ").concat(p.slice(0,b-1).join(", "),", or ")+p[b-1]:b===2?"one of ".concat(g," ").concat(p[0]," or ").concat(p[1]):"of ".concat(g," ").concat(p[0])}return"of ".concat(g," ").concat(p+"")}function d(p,g,b){return p.substr(0,g.length)===g}function u(p,g,b){return(b===void 0||b>p.length)&&(b=p.length),p.substring(b-g.length,b)===g}function f(p,g,b){return typeof b!="number"&&(b=0),!(b+g.length>p.length)&&p.indexOf(g,b)!==-1}var h={};l("ERR_INVALID_OPT_VALUE",function(p,g){return'The value "'+g+'" is invalid for option "'+p+'"'},TypeError),l("ERR_INVALID_ARG_TYPE",function(p,g,b){var v;typeof g=="string"&&d(g,"not ")?(v="must not be",g=g.replace(/^not /,"")):v="must be";var x;if(u(p," argument"))x="The ".concat(p," ").concat(v," ").concat(c(g,"type"));else{var w=f(p,".")?"property":"argument";x='The "'.concat(p,'" ').concat(w," ").concat(v," ").concat(c(g,"type"))}return x+=". Received type ".concat(typeof b),x},TypeError),l("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),l("ERR_METHOD_NOT_IMPLEMENTED",function(p){return"The "+p+" method is not implemented"}),l("ERR_STREAM_PREMATURE_CLOSE","Premature close"),l("ERR_STREAM_DESTROYED",function(p){return"Cannot call "+p+" after a stream was destroyed"}),l("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),l("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),l("ERR_STREAM_WRITE_AFTER_END","write after end"),l("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),l("ERR_UNKNOWN_ENCODING",function(p){return"Unknown encoding: "+p},TypeError),l("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),o.exports.codes=h},{}],16:[function(s,o){(function(a){(function(){function l(v){return this instanceof l?(f.call(this,v),h.call(this,v),this.allowHalfOpen=!0,void(v&&(v.readable===!1&&(this.readable=!1),v.writable===!1&&(this.writable=!1),v.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",c))))):new l(v)}function c(){this._writableState.ended||a.nextTick(d,this)}function d(v){v.end()}var u=Object.keys||function(v){var x=[];for(var w in v)x.push(w);return x};o.exports=l;var f=s("./_stream_readable"),h=s("./_stream_writable");s("inherits")(l,f);for(var p,g=u(h.prototype),b=0;b<g.length;b++)p=g[b],l.prototype[p]||(l.prototype[p]=h.prototype[p]);Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(v){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=v,this._writableState.destroyed=v)}})}).call(this)}).call(this,s("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(s,o){function a(c){return this instanceof a?void l.call(this,c):new a(c)}o.exports=a;var l=s("./_stream_transform");s("inherits")(a,l),a.prototype._transform=function(c,d,u){u(null,c)}},{"./_stream_transform":19,inherits:10}],18:[function(s,o){(function(a,l){(function(){function c(K){return F.from(K)}function d(K){return F.isBuffer(K)||K instanceof X}function u(K,_,A){return typeof K.prependListener=="function"?K.prependListener(_,A):void(K._events&&K._events[_]?Array.isArray(K._events[_])?K._events[_].unshift(A):K._events[_]=[A,K._events[_]]:K.on(_,A))}function f(K,_,A){te=te||s("./_stream_duplex"),K=K||{},typeof A!="boolean"&&(A=_ instanceof te),this.objectMode=!!K.objectMode,A&&(this.objectMode=this.objectMode||!!K.readableObjectMode),this.highWaterMark=_e(this,K,"readableHighWaterMark",A),this.buffer=new be,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=K.emitClose!==!1,this.autoDestroy=!!K.autoDestroy,this.destroyed=!1,this.defaultEncoding=K.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,K.encoding&&(!ue&&(ue=s("string_decoder/").StringDecoder),this.decoder=new ue(K.encoding),this.encoding=K.encoding)}function h(K){if(te=te||s("./_stream_duplex"),!(this instanceof h))return new h(K);var _=this instanceof te;this._readableState=new f(K,this,_),this.readable=!0,K&&(typeof K.read=="function"&&(this._read=K.read),typeof K.destroy=="function"&&(this._destroy=K.destroy)),Ce.call(this)}function p(K,_,A,j,oe){Z("readableAddChunk",_);var ye=K._readableState;if(_===null)ye.reading=!1,w(K,ye);else{var Ee;if(oe||(Ee=b(ye,_)),Ee)Re(K,Ee);else if(!(ye.objectMode||_&&0<_.length))j||(ye.reading=!1,O(K,ye));else if(typeof _=="string"||ye.objectMode||Object.getPrototypeOf(_)===F.prototype||(_=c(_)),j)ye.endEmitted?Re(K,new V):g(K,ye,_,!0);else if(ye.ended)Re(K,new Qe);else{if(ye.destroyed)return!1;ye.reading=!1,ye.decoder&&!A?(_=ye.decoder.write(_),ye.objectMode||_.length!==0?g(K,ye,_,!1):O(K,ye)):g(K,ye,_,!1)}}return!ye.ended&&(ye.length<ye.highWaterMark||ye.length===0)}function g(K,_,A,j){_.flowing&&_.length===0&&!_.sync?(_.awaitDrain=0,K.emit("data",A)):(_.length+=_.objectMode?1:A.length,j?_.buffer.unshift(A):_.buffer.push(A),_.needReadable&&C(K)),O(K,_)}function b(K,_){var A;return d(_)||typeof _=="string"||_===void 0||K.objectMode||(A=new je("chunk",["string","Buffer","Uint8Array"],_)),A}function v(K){return 1073741824<=K?K=1073741824:(K--,K|=K>>>1,K|=K>>>2,K|=K>>>4,K|=K>>>8,K|=K>>>16,K++),K}function x(K,_){return 0>=K||_.length===0&&_.ended?0:_.objectMode?1:K===K?(K>_.highWaterMark&&(_.highWaterMark=v(K)),K<=_.length?K:_.ended?_.length:(_.needReadable=!0,0)):_.flowing&&_.length?_.buffer.head.data.length:_.length}function w(K,_){if(Z("onEofChunk"),!_.ended){if(_.decoder){var A=_.decoder.end();A&&A.length&&(_.buffer.push(A),_.length+=_.objectMode?1:A.length)}_.ended=!0,_.sync?C(K):(_.needReadable=!1,!_.emittedReadable&&(_.emittedReadable=!0,P(K)))}}function C(K){var _=K._readableState;Z("emitReadable",_.needReadable,_.emittedReadable),_.needReadable=!1,_.emittedReadable||(Z("emitReadable",_.flowing),_.emittedReadable=!0,a.nextTick(P,K))}function P(K){var _=K._readableState;Z("emitReadable_",_.destroyed,_.length,_.ended),!_.destroyed&&(_.length||_.ended)&&(K.emit("readable"),_.emittedReadable=!1),_.needReadable=!_.flowing&&!_.ended&&_.length<=_.highWaterMark,H(K)}function O(K,_){_.readingMore||(_.readingMore=!0,a.nextTick(T,K,_))}function T(K,_){for(;!_.reading&&!_.ended&&(_.length<_.highWaterMark||_.flowing&&_.length===0);){var A=_.length;if(Z("maybeReadMore read 0"),K.read(0),A===_.length)break}_.readingMore=!1}function M(K){return function(){var _=K._readableState;Z("pipeOnDrain",_.awaitDrain),_.awaitDrain&&_.awaitDrain--,_.awaitDrain===0&&de(K,"data")&&(_.flowing=!0,H(K))}}function D(K){var _=K._readableState;_.readableListening=0<K.listenerCount("readable"),_.resumeScheduled&&!_.paused?_.flowing=!0:0<K.listenerCount("data")&&K.resume()}function I(K){Z("readable nexttick read 0"),K.read(0)}function R(K,_){_.resumeScheduled||(_.resumeScheduled=!0,a.nextTick($,K,_))}function $(K,_){Z("resume",_.reading),_.reading||K.read(0),_.resumeScheduled=!1,K.emit("resume"),H(K),_.flowing&&!_.reading&&K.read(0)}function H(K){var _=K._readableState;for(Z("flow",_.flowing);_.flowing&&K.read()!==null;);}function z(K,_){if(_.length===0)return null;var A;return _.objectMode?A=_.buffer.shift():!K||K>=_.length?(A=_.decoder?_.buffer.join(""):_.buffer.length===1?_.buffer.first():_.buffer.concat(_.length),_.buffer.clear()):A=_.buffer.consume(K,_.decoder),A}function ee(K){var _=K._readableState;Z("endReadable",_.endEmitted),_.endEmitted||(_.ended=!0,a.nextTick(ce,_,K))}function ce(K,_){if(Z("endReadableNT",K.endEmitted,K.length),!K.endEmitted&&K.length===0&&(K.endEmitted=!0,_.readable=!1,_.emit("end"),K.autoDestroy)){var A=_._writableState;(!A||A.autoDestroy&&A.finished)&&_.destroy()}}function le(K,_){for(var A=0,j=K.length;A<j;A++)if(K[A]===_)return A;return-1}o.exports=h;var te;h.ReadableState=f;var Z;s("events").EventEmitter;var de=function(K,_){return K.listeners(_).length},Ce=s("./internal/streams/stream"),F=s("buffer").Buffer,X=l.Uint8Array||function(){},re=s("util");Z=re&&re.debuglog?re.debuglog("stream"):function(){};var ue,he,fe,be=s("./internal/streams/buffer_list"),pe=s("./internal/streams/destroy"),me=s("./internal/streams/state"),_e=me.getHighWaterMark,Te=s("../errors").codes,je=Te.ERR_INVALID_ARG_TYPE,Qe=Te.ERR_STREAM_PUSH_AFTER_EOF,ne=Te.ERR_METHOD_NOT_IMPLEMENTED,V=Te.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;s("inherits")(h,Ce);var Re=pe.errorOrDestroy,Fe=["error","close","destroy","pause","resume"];Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(K){this._readableState&&(this._readableState.destroyed=K)}}),h.prototype.destroy=pe.destroy,h.prototype._undestroy=pe.undestroy,h.prototype._destroy=function(K,_){_(K)},h.prototype.push=function(K,_){var A,j=this._readableState;return j.objectMode?A=!0:typeof K=="string"&&(_=_||j.defaultEncoding,_!==j.encoding&&(K=F.from(K,_),_=""),A=!0),p(this,K,_,!1,A)},h.prototype.unshift=function(K){return p(this,K,null,!0,!1)},h.prototype.isPaused=function(){return this._readableState.flowing===!1},h.prototype.setEncoding=function(K){ue||(ue=s("string_decoder/").StringDecoder);var _=new ue(K);this._readableState.decoder=_,this._readableState.encoding=this._readableState.decoder.encoding;for(var A=this._readableState.buffer.head,j="";A!==null;)j+=_.write(A.data),A=A.next;return this._readableState.buffer.clear(),j!==""&&this._readableState.buffer.push(j),this._readableState.length=j.length,this},h.prototype.read=function(K){Z("read",K),K=parseInt(K,10);var _=this._readableState,A=K;if(K!==0&&(_.emittedReadable=!1),K===0&&_.needReadable&&((_.highWaterMark===0?0<_.length:_.length>=_.highWaterMark)||_.ended))return Z("read: emitReadable",_.length,_.ended),_.length===0&&_.ended?ee(this):C(this),null;if(K=x(K,_),K===0&&_.ended)return _.length===0&&ee(this),null;var j=_.needReadable;Z("need readable",j),(_.length===0||_.length-K<_.highWaterMark)&&(j=!0,Z("length less than watermark",j)),_.ended||_.reading?(j=!1,Z("reading or ended",j)):j&&(Z("do read"),_.reading=!0,_.sync=!0,_.length===0&&(_.needReadable=!0),this._read(_.highWaterMark),_.sync=!1,!_.reading&&(K=x(A,_)));var oe;return oe=0<K?z(K,_):null,oe===null?(_.needReadable=_.length<=_.highWaterMark,K=0):(_.length-=K,_.awaitDrain=0),_.length===0&&(!_.ended&&(_.needReadable=!0),A!==K&&_.ended&&ee(this)),oe!==null&&this.emit("data",oe),oe},h.prototype._read=function(){Re(this,new ne("_read()"))},h.prototype.pipe=function(K,_){function A(nt,ct){Z("onunpipe"),nt===tt&&ct&&ct.hasUnpiped===!1&&(ct.hasUnpiped=!0,oe())}function j(){Z("onend"),K.end()}function oe(){Z("cleanup"),K.removeListener("close",Ge),K.removeListener("finish",Ze),K.removeListener("drain",Ht),K.removeListener("error",Ee),K.removeListener("unpipe",A),tt.removeListener("end",j),tt.removeListener("end",bt),tt.removeListener("data",ye),Tr=!0,rt.awaitDrain&&(!K._writableState||K._writableState.needDrain)&&Ht()}function ye(nt){Z("ondata");var ct=K.write(nt);Z("dest.write",ct),ct===!1&&((rt.pipesCount===1&&rt.pipes===K||1<rt.pipesCount&&le(rt.pipes,K)!==-1)&&!Tr&&(Z("false write response, pause",rt.awaitDrain),rt.awaitDrain++),tt.pause())}function Ee(nt){Z("onerror",nt),bt(),K.removeListener("error",Ee),de(K,"error")===0&&Re(K,nt)}function Ge(){K.removeListener("finish",Ze),bt()}function Ze(){Z("onfinish"),K.removeListener("close",Ge),bt()}function bt(){Z("unpipe"),tt.unpipe(K)}var tt=this,rt=this._readableState;switch(rt.pipesCount){case 0:rt.pipes=K;break;case 1:rt.pipes=[rt.pipes,K];break;default:rt.pipes.push(K)}rt.pipesCount+=1,Z("pipe count=%d opts=%j",rt.pipesCount,_);var Be=(!_||_.end!==!1)&&K!==a.stdout&&K!==a.stderr,In=Be?j:bt;rt.endEmitted?a.nextTick(In):tt.once("end",In),K.on("unpipe",A);var Ht=M(tt);K.on("drain",Ht);var Tr=!1;return tt.on("data",ye),u(K,"error",Ee),K.once("close",Ge),K.once("finish",Ze),K.emit("pipe",tt),rt.flowing||(Z("pipe resume"),tt.resume()),K},h.prototype.unpipe=function(K){var _=this._readableState,A={hasUnpiped:!1};if(_.pipesCount===0)return this;if(_.pipesCount===1)return K&&K!==_.pipes?this:(K||(K=_.pipes),_.pipes=null,_.pipesCount=0,_.flowing=!1,K&&K.emit("unpipe",this,A),this);if(!K){var j=_.pipes,oe=_.pipesCount;_.pipes=null,_.pipesCount=0,_.flowing=!1;for(var ye=0;ye<oe;ye++)j[ye].emit("unpipe",this,{hasUnpiped:!1});return this}var Ee=le(_.pipes,K);return Ee===-1?this:(_.pipes.splice(Ee,1),_.pipesCount-=1,_.pipesCount===1&&(_.pipes=_.pipes[0]),K.emit("unpipe",this,A),this)},h.prototype.on=function(K,_){var A=Ce.prototype.on.call(this,K,_),j=this._readableState;return K==="data"?(j.readableListening=0<this.listenerCount("readable"),j.flowing!==!1&&this.resume()):K=="readable"&&!j.endEmitted&&!j.readableListening&&(j.readableListening=j.needReadable=!0,j.flowing=!1,j.emittedReadable=!1,Z("on readable",j.length,j.reading),j.length?C(this):!j.reading&&a.nextTick(I,this)),A},h.prototype.addListener=h.prototype.on,h.prototype.removeListener=function(K,_){var A=Ce.prototype.removeListener.call(this,K,_);return K==="readable"&&a.nextTick(D,this),A},h.prototype.removeAllListeners=function(K){var _=Ce.prototype.removeAllListeners.apply(this,arguments);return(K==="readable"||K===void 0)&&a.nextTick(D,this),_},h.prototype.resume=function(){var K=this._readableState;return K.flowing||(Z("resume"),K.flowing=!K.readableListening,R(this,K)),K.paused=!1,this},h.prototype.pause=function(){return Z("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Z("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},h.prototype.wrap=function(K){var _=this,A=this._readableState,j=!1;for(var oe in K.on("end",function(){if(Z("wrapped end"),A.decoder&&!A.ended){var Ee=A.decoder.end();Ee&&Ee.length&&_.push(Ee)}_.push(null)}),K.on("data",function(Ee){if(Z("wrapped data"),A.decoder&&(Ee=A.decoder.write(Ee)),!(A.objectMode&&Ee==null)&&(A.objectMode||Ee&&Ee.length)){var Ge=_.push(Ee);Ge||(j=!0,K.pause())}}),K)this[oe]===void 0&&typeof K[oe]=="function"&&(this[oe]=function(Ee){return function(){return K[Ee].apply(K,arguments)}}(oe));for(var ye=0;ye<Fe.length;ye++)K.on(Fe[ye],this.emit.bind(this,Fe[ye]));return this._read=function(Ee){Z("wrapped _read",Ee),j&&(j=!1,K.resume())},this},typeof Symbol=="function"&&(h.prototype[Symbol.asyncIterator]=function(){return he===void 0&&(he=s("./internal/streams/async_iterator")),he(this)}),Object.defineProperty(h.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(h.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(h.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(K){this._readableState&&(this._readableState.flowing=K)}}),h._fromList=z,Object.defineProperty(h.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(h.from=function(K,_){return fe===void 0&&(fe=s("./internal/streams/from")),fe(h,K,_)})}).call(this)}).call(this,s("_process"),typeof zi>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:zi)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(s,o){function a(v,x){var w=this._transformState;w.transforming=!1;var C=w.writecb;if(C===null)return this.emit("error",new h);w.writechunk=null,w.writecb=null,x!=null&&this.push(x),C(v);var P=this._readableState;P.reading=!1,(P.needReadable||P.length<P.highWaterMark)&&this._read(P.highWaterMark)}function l(v){return this instanceof l?(b.call(this,v),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&(typeof v.transform=="function"&&(this._transform=v.transform),typeof v.flush=="function"&&(this._flush=v.flush)),void this.on("prefinish",c)):new l(v)}function c(){var v=this;typeof this._flush!="function"||this._readableState.destroyed?d(this,null,null):this._flush(function(x,w){d(v,x,w)})}function d(v,x,w){if(x)return v.emit("error",x);if(w!=null&&v.push(w),v._writableState.length)throw new g;if(v._transformState.transforming)throw new p;return v.push(null)}o.exports=l;var u=s("../errors").codes,f=u.ERR_METHOD_NOT_IMPLEMENTED,h=u.ERR_MULTIPLE_CALLBACK,p=u.ERR_TRANSFORM_ALREADY_TRANSFORMING,g=u.ERR_TRANSFORM_WITH_LENGTH_0,b=s("./_stream_duplex");s("inherits")(l,b),l.prototype.push=function(v,x){return this._transformState.needTransform=!1,b.prototype.push.call(this,v,x)},l.prototype._transform=function(v,x,w){w(new f("_transform()"))},l.prototype._write=function(v,x,w){var C=this._transformState;if(C.writecb=w,C.writechunk=v,C.writeencoding=x,!C.transforming){var P=this._readableState;(C.needTransform||P.needReadable||P.length<P.highWaterMark)&&this._read(P.highWaterMark)}},l.prototype._read=function(){var v=this._transformState;v.writechunk===null||v.transforming?v.needTransform=!0:(v.transforming=!0,this._transform(v.writechunk,v.writeencoding,v.afterTransform))},l.prototype._destroy=function(v,x){b.prototype._destroy.call(this,v,function(w){x(w)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(s,o){(function(a,l){(function(){function c(ne){var V=this;this.next=null,this.entry=null,this.finish=function(){ee(V,ne)}}function d(ne){return Z.from(ne)}function u(ne){return Z.isBuffer(ne)||ne instanceof de}function f(){}function h(ne,V,Re){ce=ce||s("./_stream_duplex"),ne=ne||{},typeof Re!="boolean"&&(Re=V instanceof ce),this.objectMode=!!ne.objectMode,Re&&(this.objectMode=this.objectMode||!!ne.writableObjectMode),this.highWaterMark=X(this,ne,"writableHighWaterMark",Re),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Fe=ne.decodeStrings===!1;this.decodeStrings=!Fe,this.defaultEncoding=ne.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(K){O(V,K)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=ne.emitClose!==!1,this.autoDestroy=!!ne.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new c(this)}function p(ne){ce=ce||s("./_stream_duplex");var V=this instanceof ce;return V||Qe.call(p,this)?(this._writableState=new h(ne,this,V),this.writable=!0,ne&&(typeof ne.write=="function"&&(this._write=ne.write),typeof ne.writev=="function"&&(this._writev=ne.writev),typeof ne.destroy=="function"&&(this._destroy=ne.destroy),typeof ne.final=="function"&&(this._final=ne.final)),void te.call(this)):new p(ne)}function g(ne,V){var Re=new _e;je(ne,Re),a.nextTick(V,Re)}function b(ne,V,Re,Fe){var K;return Re===null?K=new me:typeof Re!="string"&&!V.objectMode&&(K=new ue("chunk",["string","Buffer"],Re)),!K||(je(ne,K),a.nextTick(Fe,K),!1)}function v(ne,V,Re){return ne.objectMode||ne.decodeStrings===!1||typeof V!="string"||(V=Z.from(V,Re)),V}function x(ne,V,Re,Fe,K,_){if(!Re){var A=v(V,Fe,K);Fe!==A&&(Re=!0,K="buffer",Fe=A)}var j=V.objectMode?1:Fe.length;V.length+=j;var oe=V.length<V.highWaterMark;if(oe||(V.needDrain=!0),V.writing||V.corked){var ye=V.lastBufferedRequest;V.lastBufferedRequest={chunk:Fe,encoding:K,isBuf:Re,callback:_,next:null},ye?ye.next=V.lastBufferedRequest:V.bufferedRequest=V.lastBufferedRequest,V.bufferedRequestCount+=1}else w(ne,V,!1,j,Fe,K,_);return oe}function w(ne,V,Re,Fe,K,_,A){V.writelen=Fe,V.writecb=A,V.writing=!0,V.sync=!0,V.destroyed?V.onwrite(new pe("write")):Re?ne._writev(K,V.onwrite):ne._write(K,_,V.onwrite),V.sync=!1}function C(ne,V,Re,Fe,K){--V.pendingcb,Re?(a.nextTick(K,Fe),a.nextTick(H,ne,V),ne._writableState.errorEmitted=!0,je(ne,Fe)):(K(Fe),ne._writableState.errorEmitted=!0,je(ne,Fe),H(ne,V))}function P(ne){ne.writing=!1,ne.writecb=null,ne.length-=ne.writelen,ne.writelen=0}function O(ne,V){var Re=ne._writableState,Fe=Re.sync,K=Re.writecb;if(typeof K!="function")throw new fe;if(P(Re),V)C(ne,Re,Fe,V,K);else{var _=I(Re)||ne.destroyed;_||Re.corked||Re.bufferProcessing||!Re.bufferedRequest||D(ne,Re),Fe?a.nextTick(T,ne,Re,_,K):T(ne,Re,_,K)}}function T(ne,V,Re,Fe){Re||M(ne,V),V.pendingcb--,Fe(),H(ne,V)}function M(ne,V){V.length===0&&V.needDrain&&(V.needDrain=!1,ne.emit("drain"))}function D(ne,V){V.bufferProcessing=!0;var Re=V.bufferedRequest;if(ne._writev&&Re&&Re.next){var Fe=V.bufferedRequestCount,K=Array(Fe),_=V.corkedRequestsFree;_.entry=Re;for(var A=0,j=!0;Re;)K[A]=Re,Re.isBuf||(j=!1),Re=Re.next,A+=1;K.allBuffers=j,w(ne,V,!0,V.length,K,"",_.finish),V.pendingcb++,V.lastBufferedRequest=null,_.next?(V.corkedRequestsFree=_.next,_.next=null):V.corkedRequestsFree=new c(V),V.bufferedRequestCount=0}else{for(;Re;){var oe=Re.chunk,ye=Re.encoding,Ee=Re.callback,Ge=V.objectMode?1:oe.length;if(w(ne,V,!1,Ge,oe,ye,Ee),Re=Re.next,V.bufferedRequestCount--,V.writing)break}Re===null&&(V.lastBufferedRequest=null)}V.bufferedRequest=Re,V.bufferProcessing=!1}function I(ne){return ne.ending&&ne.length===0&&ne.bufferedRequest===null&&!ne.finished&&!ne.writing}function R(ne,V){ne._final(function(Re){V.pendingcb--,Re&&je(ne,Re),V.prefinished=!0,ne.emit("prefinish"),H(ne,V)})}function $(ne,V){V.prefinished||V.finalCalled||(typeof ne._final!="function"||V.destroyed?(V.prefinished=!0,ne.emit("prefinish")):(V.pendingcb++,V.finalCalled=!0,a.nextTick(R,ne,V)))}function H(ne,V){var Re=I(V);if(Re&&($(ne,V),V.pendingcb===0&&(V.finished=!0,ne.emit("finish"),V.autoDestroy))){var Fe=ne._readableState;(!Fe||Fe.autoDestroy&&Fe.endEmitted)&&ne.destroy()}return Re}function z(ne,V,Re){V.ending=!0,H(ne,V),Re&&(V.finished?a.nextTick(Re):ne.once("finish",Re)),V.ended=!0,ne.writable=!1}function ee(ne,V,Re){var Fe=ne.entry;for(ne.entry=null;Fe;){var K=Fe.callback;V.pendingcb--,K(Re),Fe=Fe.next}V.corkedRequestsFree.next=ne}o.exports=p;var ce;p.WritableState=h;var le={deprecate:s("util-deprecate")},te=s("./internal/streams/stream"),Z=s("buffer").Buffer,de=l.Uint8Array||function(){},Ce=s("./internal/streams/destroy"),F=s("./internal/streams/state"),X=F.getHighWaterMark,re=s("../errors").codes,ue=re.ERR_INVALID_ARG_TYPE,he=re.ERR_METHOD_NOT_IMPLEMENTED,fe=re.ERR_MULTIPLE_CALLBACK,be=re.ERR_STREAM_CANNOT_PIPE,pe=re.ERR_STREAM_DESTROYED,me=re.ERR_STREAM_NULL_VALUES,_e=re.ERR_STREAM_WRITE_AFTER_END,Te=re.ERR_UNKNOWN_ENCODING,je=Ce.errorOrDestroy;s("inherits")(p,te),h.prototype.getBuffer=function(){for(var ne=this.bufferedRequest,V=[];ne;)V.push(ne),ne=ne.next;return V},function(){try{Object.defineProperty(h.prototype,"buffer",{get:le.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Qe;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Qe=Function.prototype[Symbol.hasInstance],Object.defineProperty(p,Symbol.hasInstance,{value:function(ne){return!!Qe.call(this,ne)||this===p&&ne&&ne._writableState instanceof h}})):Qe=function(ne){return ne instanceof this},p.prototype.pipe=function(){je(this,new be)},p.prototype.write=function(ne,V,Re){var Fe=this._writableState,K=!1,_=!Fe.objectMode&&u(ne);return _&&!Z.isBuffer(ne)&&(ne=d(ne)),typeof V=="function"&&(Re=V,V=null),_?V="buffer":!V&&(V=Fe.defaultEncoding),typeof Re!="function"&&(Re=f),Fe.ending?g(this,Re):(_||b(this,Fe,ne,Re))&&(Fe.pendingcb++,K=x(this,Fe,_,ne,V,Re)),K},p.prototype.cork=function(){this._writableState.corked++},p.prototype.uncork=function(){var ne=this._writableState;ne.corked&&(ne.corked--,!ne.writing&&!ne.corked&&!ne.bufferProcessing&&ne.bufferedRequest&&D(this,ne))},p.prototype.setDefaultEncoding=function(ne){if(typeof ne=="string"&&(ne=ne.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ne+"").toLowerCase())))throw new Te(ne);return this._writableState.defaultEncoding=ne,this},Object.defineProperty(p.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),p.prototype._write=function(ne,V,Re){Re(new he("_write()"))},p.prototype._writev=null,p.prototype.end=function(ne,V,Re){var Fe=this._writableState;return typeof ne=="function"?(Re=ne,ne=null,V=null):typeof V=="function"&&(Re=V,V=null),ne!=null&&this.write(ne,V),Fe.corked&&(Fe.corked=1,this.uncork()),Fe.ending||z(this,Fe,Re),this},Object.defineProperty(p.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(ne){this._writableState&&(this._writableState.destroyed=ne)}}),p.prototype.destroy=Ce.destroy,p.prototype._undestroy=Ce.undestroy,p.prototype._destroy=function(ne,V){V(ne)}}).call(this)}).call(this,s("_process"),typeof zi>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:zi)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(s,o){(function(a){(function(){function l(M,D,I){return D in M?Object.defineProperty(M,D,{value:I,enumerable:!0,configurable:!0,writable:!0}):M[D]=I,M}function c(M,D){return{value:M,done:D}}function d(M){var D=M[g];if(D!==null){var I=M[P].read();I!==null&&(M[w]=null,M[g]=null,M[b]=null,D(c(I,!1)))}}function u(M){a.nextTick(d,M)}function f(M,D){return function(I,R){M.then(function(){return D[x]?void I(c(void 0,!0)):void D[C](I,R)},R)}}var h,p=s("./end-of-stream"),g=Symbol("lastResolve"),b=Symbol("lastReject"),v=Symbol("error"),x=Symbol("ended"),w=Symbol("lastPromise"),C=Symbol("handlePromise"),P=Symbol("stream"),O=Object.getPrototypeOf(function(){}),T=Object.setPrototypeOf((h={get stream(){return this[P]},next:function(){var M=this,D=this[v];if(D!==null)return Promise.reject(D);if(this[x])return Promise.resolve(c(void 0,!0));if(this[P].destroyed)return new Promise(function(H,z){a.nextTick(function(){M[v]?z(M[v]):H(c(void 0,!0))})});var I,R=this[w];if(R)I=new Promise(f(R,this));else{var $=this[P].read();if($!==null)return Promise.resolve(c($,!1));I=new Promise(this[C])}return this[w]=I,I}},l(h,Symbol.asyncIterator,function(){return this}),l(h,"return",function(){var M=this;return new Promise(function(D,I){M[P].destroy(null,function(R){return R?void I(R):void D(c(void 0,!0))})})}),h),O);o.exports=function(M){var D,I=Object.create(T,(D={},l(D,P,{value:M,writable:!0}),l(D,g,{value:null,writable:!0}),l(D,b,{value:null,writable:!0}),l(D,v,{value:null,writable:!0}),l(D,x,{value:M._readableState.endEmitted,writable:!0}),l(D,C,{value:function(R,$){var H=I[P].read();H?(I[w]=null,I[g]=null,I[b]=null,R(c(H,!1))):(I[g]=R,I[b]=$)},writable:!0}),D));return I[w]=null,p(M,function(R){if(R&&R.code!=="ERR_STREAM_PREMATURE_CLOSE"){var $=I[b];return $!==null&&(I[w]=null,I[g]=null,I[b]=null,$(R)),void(I[v]=R)}var H=I[g];H!==null&&(I[w]=null,I[g]=null,I[b]=null,H(c(void 0,!0))),I[x]=!0}),M.on("readable",u.bind(null,I)),I}}).call(this)}).call(this,s("_process"))},{"./end-of-stream":24,_process:12}],22:[function(s,o){function a(w,C){var P=Object.keys(w);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(w);C&&(O=O.filter(function(T){return Object.getOwnPropertyDescriptor(w,T).enumerable})),P.push.apply(P,O)}return P}function l(w){for(var C,P=1;P<arguments.length;P++)C=arguments[P]==null?{}:arguments[P],P%2?a(Object(C),!0).forEach(function(O){c(w,O,C[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(C)):a(Object(C)).forEach(function(O){Object.defineProperty(w,O,Object.getOwnPropertyDescriptor(C,O))});return w}function c(w,C,P){return C in w?Object.defineProperty(w,C,{value:P,enumerable:!0,configurable:!0,writable:!0}):w[C]=P,w}function d(w,C){if(!(w instanceof C))throw new TypeError("Cannot call a class as a function")}function u(w,C){for(var P,O=0;O<C.length;O++)P=C[O],P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(w,P.key,P)}function f(w,C,P){return C&&u(w.prototype,C),w}function h(w,C,P){g.prototype.copy.call(w,C,P)}var p=s("buffer"),g=p.Buffer,b=s("util"),v=b.inspect,x=v&&v.custom||"inspect";o.exports=function(){function w(){d(this,w),this.head=null,this.tail=null,this.length=0}return f(w,[{key:"push",value:function(C){var P={data:C,next:null};0<this.length?this.tail.next=P:this.head=P,this.tail=P,++this.length}},{key:"unshift",value:function(C){var P={data:C,next:this.head};this.length===0&&(this.tail=P),this.head=P,++this.length}},{key:"shift",value:function(){if(this.length!==0){var C=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,C}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(C){if(this.length===0)return"";for(var P=this.head,O=""+P.data;P=P.next;)O+=C+P.data;return O}},{key:"concat",value:function(C){if(this.length===0)return g.alloc(0);for(var P=g.allocUnsafe(C>>>0),O=this.head,T=0;O;)h(O.data,P,T),T+=O.data.length,O=O.next;return P}},{key:"consume",value:function(C,P){var O;return C<this.head.data.length?(O=this.head.data.slice(0,C),this.head.data=this.head.data.slice(C)):C===this.head.data.length?O=this.shift():O=P?this._getString(C):this._getBuffer(C),O}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(C){var P=this.head,O=1,T=P.data;for(C-=T.length;P=P.next;){var M=P.data,D=C>M.length?M.length:C;if(T+=D===M.length?M:M.slice(0,C),C-=D,C===0){D===M.length?(++O,this.head=P.next?P.next:this.tail=null):(this.head=P,P.data=M.slice(D));break}++O}return this.length-=O,T}},{key:"_getBuffer",value:function(C){var P=g.allocUnsafe(C),O=this.head,T=1;for(O.data.copy(P),C-=O.data.length;O=O.next;){var M=O.data,D=C>M.length?M.length:C;if(M.copy(P,P.length-C,0,D),C-=D,C===0){D===M.length?(++T,this.head=O.next?O.next:this.tail=null):(this.head=O,O.data=M.slice(D));break}++T}return this.length-=T,P}},{key:x,value:function(C,P){return v(this,l({},P,{depth:0,customInspect:!1}))}}]),w}()},{buffer:3,util:2}],23:[function(s,o){(function(a){(function(){function l(u,f){d(u,f),c(u)}function c(u){u._writableState&&!u._writableState.emitClose||u._readableState&&!u._readableState.emitClose||u.emit("close")}function d(u,f){u.emit("error",f)}o.exports={destroy:function(u,f){var h=this,p=this._readableState&&this._readableState.destroyed,g=this._writableState&&this._writableState.destroyed;return p||g?(f?f(u):u&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,a.nextTick(d,this,u)):a.nextTick(d,this,u)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(u||null,function(b){!f&&b?h._writableState?h._writableState.errorEmitted?a.nextTick(c,h):(h._writableState.errorEmitted=!0,a.nextTick(l,h,b)):a.nextTick(l,h,b):f?(a.nextTick(c,h),f(b)):a.nextTick(c,h)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(u,f){var h=u._readableState,p=u._writableState;h&&h.autoDestroy||p&&p.autoDestroy?u.destroy(f):u.emit("error",f)}}}).call(this)}).call(this,s("_process"))},{_process:12}],24:[function(s,o){function a(f){var h=!1;return function(){if(!h){h=!0;for(var p=arguments.length,g=Array(p),b=0;b<p;b++)g[b]=arguments[b];f.apply(this,g)}}}function l(){}function c(f){return f.setHeader&&typeof f.abort=="function"}function d(f,h,p){if(typeof h=="function")return d(f,null,h);h||(h={}),p=a(p||l);var g=h.readable||h.readable!==!1&&f.readable,b=h.writable||h.writable!==!1&&f.writable,v=function(){f.writable||w()},x=f._writableState&&f._writableState.finished,w=function(){b=!1,x=!0,g||p.call(f)},C=f._readableState&&f._readableState.endEmitted,P=function(){g=!1,C=!0,b||p.call(f)},O=function(D){p.call(f,D)},T=function(){var D;return g&&!C?(f._readableState&&f._readableState.ended||(D=new u),p.call(f,D)):b&&!x?(f._writableState&&f._writableState.ended||(D=new u),p.call(f,D)):void 0},M=function(){f.req.on("finish",w)};return c(f)?(f.on("complete",w),f.on("abort",T),f.req?M():f.on("request",M)):b&&!f._writableState&&(f.on("end",v),f.on("close",v)),f.on("end",P),f.on("finish",w),h.error!==!1&&f.on("error",O),f.on("close",T),function(){f.removeListener("complete",w),f.removeListener("abort",T),f.removeListener("request",M),f.req&&f.req.removeListener("finish",w),f.removeListener("end",v),f.removeListener("close",v),f.removeListener("finish",w),f.removeListener("end",P),f.removeListener("error",O),f.removeListener("close",T)}}var u=s("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;o.exports=d},{"../../../errors":15}],25:[function(s,o){o.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(s,o){function a(x){var w=!1;return function(){w||(w=!0,x.apply(void 0,arguments))}}function l(x){if(x)throw x}function c(x){return x.setHeader&&typeof x.abort=="function"}function d(x,w,C,P){P=a(P);var O=!1;x.on("close",function(){O=!0}),p===void 0&&(p=s("./end-of-stream")),p(x,{readable:w,writable:C},function(M){return M?P(M):(O=!0,void P())});var T=!1;return function(M){if(!O)return T?void 0:(T=!0,c(x)?x.abort():typeof x.destroy=="function"?x.destroy():void P(M||new v("pipe")))}}function u(x){x()}function f(x,w){return x.pipe(w)}function h(x){return x.length&&typeof x[x.length-1]=="function"?x.pop():l}var p,g=s("../../../errors").codes,b=g.ERR_MISSING_ARGS,v=g.ERR_STREAM_DESTROYED;o.exports=function(){for(var x=arguments.length,w=Array(x),C=0;C<x;C++)w[C]=arguments[C];var P=h(w);if(Array.isArray(w[0])&&(w=w[0]),2>w.length)throw new b("streams");var O,T=w.map(function(M,D){var I=D<w.length-1;return d(M,I,0<D,function(R){O||(O=R),R&&T.forEach(u),I||(T.forEach(u),P(O))})});return w.reduce(f)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(s,o){function a(c,d,u){return c.highWaterMark==null?d?c[u]:null:c.highWaterMark}var l=s("../../../errors").codes.ERR_INVALID_OPT_VALUE;o.exports={getHighWaterMark:function(c,d,u,f){var h=a(d,f,u);if(h!=null){if(!(isFinite(h)&&n(h)===h)||0>h){var p=f?u:"highWaterMark";throw new l(p,h)}return n(h)}return c.objectMode?16:16384}}},{"../../../errors":15}],28:[function(s,o){o.exports=s("events").EventEmitter},{events:7}],29:[function(s,o,a){a=o.exports=s("./lib/_stream_readable.js"),a.Stream=a,a.Readable=a,a.Writable=s("./lib/_stream_writable.js"),a.Duplex=s("./lib/_stream_duplex.js"),a.Transform=s("./lib/_stream_transform.js"),a.PassThrough=s("./lib/_stream_passthrough.js"),a.finished=s("./lib/internal/streams/end-of-stream.js"),a.pipeline=s("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(s,o,a){function l(f,h){for(var p in f)h[p]=f[p]}function c(f,h,p){return u(f,h,p)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var d=s("buffer"),u=d.Buffer;u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?o.exports=d:(l(d,a),a.Buffer=c),c.prototype=Object.create(u.prototype),l(u,c),c.from=function(f,h,p){if(typeof f=="number")throw new TypeError("Argument must not be a number");return u(f,h,p)},c.alloc=function(f,h,p){if(typeof f!="number")throw new TypeError("Argument must be a number");var g=u(f);return h===void 0?g.fill(0):typeof p=="string"?g.fill(h,p):g.fill(h),g},c.allocUnsafe=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return u(f)},c.allocUnsafeSlow=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return d.SlowBuffer(f)}},{buffer:3}],31:[function(s,o,a){function l(T){if(!T)return"utf8";for(var M;;)switch(T){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return T;default:if(M)return;T=(""+T).toLowerCase(),M=!0}}function c(T){var M=l(T);if(typeof M!="string"&&(P.isEncoding===O||!O(T)))throw new Error("Unknown encoding: "+T);return M||T}function d(T){this.encoding=c(T);var M;switch(this.encoding){case"utf16le":this.text=g,this.end=b,M=4;break;case"utf8":this.fillLast=p,M=4;break;case"base64":this.text=v,this.end=x,M=3;break;default:return this.write=w,void(this.end=C)}this.lastNeed=0,this.lastTotal=0,this.lastChar=P.allocUnsafe(M)}function u(T){return 127>=T?0:T>>5==6?2:T>>4==14?3:T>>3==30?4:T>>6==2?-1:-2}function f(T,M,D){var I=M.length-1;if(I<D)return 0;var R=u(M[I]);return 0<=R?(0<R&&(T.lastNeed=R-1),R):--I<D||R===-2?0:(R=u(M[I]),0<=R?(0<R&&(T.lastNeed=R-2),R):--I<D||R===-2?0:(R=u(M[I]),0<=R?(0<R&&(R===2?R=0:T.lastNeed=R-3),R):0))}function h(T,M){if((192&M[0])!=128)return T.lastNeed=0,"";if(1<T.lastNeed&&1<M.length){if((192&M[1])!=128)return T.lastNeed=1,"";if(2<T.lastNeed&&2<M.length&&(192&M[2])!=128)return T.lastNeed=2,""}}function p(T){var M=this.lastTotal-this.lastNeed,D=h(this,T);return D===void 0?this.lastNeed<=T.length?(T.copy(this.lastChar,M,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(T.copy(this.lastChar,M,0,T.length),void(this.lastNeed-=T.length)):D}function g(T,M){if((T.length-M)%2==0){var D=T.toString("utf16le",M);if(D){var I=D.charCodeAt(D.length-1);if(55296<=I&&56319>=I)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1],D.slice(0,-1)}return D}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=T[T.length-1],T.toString("utf16le",M,T.length-1)}function b(T){var M=T&&T.length?this.write(T):"";if(this.lastNeed){var D=this.lastTotal-this.lastNeed;return M+this.lastChar.toString("utf16le",0,D)}return M}function v(T,M){var D=(T.length-M)%3;return D==0?T.toString("base64",M):(this.lastNeed=3-D,this.lastTotal=3,D==1?this.lastChar[0]=T[T.length-1]:(this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1]),T.toString("base64",M,T.length-D))}function x(T){var M=T&&T.length?this.write(T):"";return this.lastNeed?M+this.lastChar.toString("base64",0,3-this.lastNeed):M}function w(T){return T.toString(this.encoding)}function C(T){return T&&T.length?this.write(T):""}var P=s("safe-buffer").Buffer,O=P.isEncoding||function(T){switch(T=""+T,T&&T.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};a.StringDecoder=d,d.prototype.write=function(T){if(T.length===0)return"";var M,D;if(this.lastNeed){if(M=this.fillLast(T),M===void 0)return"";D=this.lastNeed,this.lastNeed=0}else D=0;return D<T.length?M?M+this.text(T,D):this.text(T,D):M||""},d.prototype.end=function(T){var M=T&&T.length?this.write(T):"";return this.lastNeed?M+"":M},d.prototype.text=function(T,M){var D=f(this,T,M);if(!this.lastNeed)return T.toString("utf8",M);this.lastTotal=D;var I=T.length-(D-this.lastNeed);return T.copy(this.lastChar,0,I),T.toString("utf8",M,I)},d.prototype.fillLast=function(T){return this.lastNeed<=T.length?(T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,T.length),void(this.lastNeed-=T.length))}},{"safe-buffer":30}],32:[function(s,o){(function(a){(function(){function l(c){try{if(!a.localStorage)return!1}catch{return!1}var d=a.localStorage[c];return d!=null&&(d+"").toLowerCase()==="true"}o.exports=function(c,d){function u(){if(!f){if(l("throwDeprecation"))throw new Error(d);l("traceDeprecation")?console.trace(d):console.warn(d),f=!0}return c.apply(this,arguments)}if(l("noDeprecation"))return c;var f=!1;return u}}).call(this)}).call(this,typeof zi>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:zi)},{}],"/":[function(s,o){function a(x){return x.replace(/a=ice-options:trickle\s\n/g,"")}function l(x){console.warn(x)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const c=s("debug")("simple-peer"),d=s("get-browser-rtc"),u=s("randombytes"),f=s("readable-stream"),h=s("queue-microtask"),p=s("err-code"),{Buffer:g}=s("buffer"),b=65536;class v extends f.Duplex{constructor(w){if(w=Object.assign({allowHalfOpen:!1},w),super(w),this._id=u(4).toString("hex").slice(0,7),this._debug("new peer %o",w),this.channelName=w.initiator?w.channelName||u(20).toString("hex"):null,this.initiator=w.initiator||!1,this.channelConfig=w.channelConfig||v.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},v.config,w.config),this.offerOptions=w.offerOptions||{},this.answerOptions=w.answerOptions||{},this.sdpTransform=w.sdpTransform||(C=>C),this.streams=w.streams||(w.stream?[w.stream]:[]),this.trickle=w.trickle===void 0||w.trickle,this.allowHalfTrickle=w.allowHalfTrickle!==void 0&&w.allowHalfTrickle,this.iceCompleteTimeout=w.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=w.wrtc&&typeof w.wrtc=="object"?w.wrtc:d(),!this._wrtc)throw p(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(C){return void this.destroy(p(C,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=C=>{this._onIceCandidate(C)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(C=>{this.destroy(p(C,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=C=>{this._setupData(C)},this.streams&&this.streams.forEach(C=>{this.addStream(C)}),this._pc.ontrack=C=>{this._onTrack(C)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(w){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof w=="string")try{w=JSON.parse(w)}catch{w={}}this._debug("signal()"),w.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),w.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(w.transceiverRequest.kind,w.transceiverRequest.init)),w.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(w.candidate):this._pendingCandidates.push(w.candidate)),w.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(w)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(C=>{this._addIceCandidate(C)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(C=>{this.destroy(p(C,"ERR_SET_REMOTE_DESCRIPTION"))}),w.sdp||w.candidate||w.renegotiate||w.transceiverRequest||this.destroy(p(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(w){const C=new this._wrtc.RTCIceCandidate(w);this._pc.addIceCandidate(C).catch(P=>{!C.address||C.address.endsWith(".local")?l("Ignoring unsupported ICE candidate."):this.destroy(p(P,"ERR_ADD_ICE_CANDIDATE"))})}send(w){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(w)}}addTransceiver(w,C){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(w,C),this._needsNegotiation()}catch(P){this.destroy(p(P,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:w,init:C}})}}addStream(w){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),w.getTracks().forEach(C=>{this.addTrack(C,w)})}}addTrack(w,C){if(this.destroying)return;if(this.destroyed)throw p(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const P=this._senderMap.get(w)||new Map;let O=P.get(C);if(!O)O=this._pc.addTrack(w,C),P.set(C,O),this._senderMap.set(w,P),this._needsNegotiation();else throw O.removed?p(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):p(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(w,C,P){if(this.destroying)return;if(this.destroyed)throw p(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const O=this._senderMap.get(w),T=O?O.get(P):null;if(!T)throw p(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");C&&this._senderMap.set(C,O),T.replaceTrack==null?this.destroy(p(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):T.replaceTrack(C)}removeTrack(w,C){if(this.destroying)return;if(this.destroyed)throw p(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const P=this._senderMap.get(w),O=P?P.get(C):null;if(!O)throw p(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{O.removed=!0,this._pc.removeTrack(O)}catch(T){T.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(O):this.destroy(p(T,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(w){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),w.getTracks().forEach(C=>{this.removeTrack(C,w)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,h(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(w){this._destroy(w,()=>{})}_destroy(w,C){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",w&&(w.message||w)),h(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",w&&(w.message||w)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,w&&this.emit("error",w),this.emit("close"),C()}))}_setupData(w){if(!w.channel)return this.destroy(p(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=w.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=b),this.channelName=this._channel.label,this._channel.onmessage=P=>{this._onChannelMessage(P)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=P=>{const O=P.error instanceof Error?P.error:new Error(`Datachannel error: ${P.message} ${P.filename}:${P.lineno}:${P.colno}`);this.destroy(p(O,"ERR_DATA_CHANNEL"))};let C=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(C&&this._onChannelClose(),C=!0):C=!1},5e3)}_read(){}_write(w,C,P){if(this.destroyed)return P(p(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(w)}catch(O){return this.destroy(p(O,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>b?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=P):P(null)}else this._debug("write before connect"),this._chunk=w,this._cb=P}_onFinish(){if(!this.destroyed){const w=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?w():this.once("connect",w)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(w=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(w.sdp=a(w.sdp)),w.sdp=this.sdpTransform(w.sdp);const C=()=>{if(!this.destroyed){const P=this._pc.localDescription||w;this._debug("signal"),this.emit("signal",{type:P.type,sdp:P.sdp})}};this._pc.setLocalDescription(w).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?C():this.once("_iceComplete",C))}).catch(P=>{this.destroy(p(P,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(w=>{this.destroy(p(w,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(w=>{w.mid||!w.sender.track||w.requested||(w.requested=!0,this.addTransceiver(w.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(w=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(w.sdp=a(w.sdp)),w.sdp=this.sdpTransform(w.sdp);const C=()=>{if(!this.destroyed){const P=this._pc.localDescription||w;this._debug("signal"),this.emit("signal",{type:P.type,sdp:P.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(w).then(()=>{this.destroyed||(this.trickle||this._iceComplete?C():this.once("_iceComplete",C))}).catch(P=>{this.destroy(p(P,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(w=>{this.destroy(p(w,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(p(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const w=this._pc.iceConnectionState,C=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",w,C),this.emit("iceStateChange",w,C),(w==="connected"||w==="completed")&&(this._pcReady=!0,this._maybeReady()),w==="failed"&&this.destroy(p(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),w==="closed"&&this.destroy(p(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(w){const C=P=>(Object.prototype.toString.call(P.values)==="[object Array]"&&P.values.forEach(O=>{Object.assign(P,O)}),P);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(P=>{const O=[];P.forEach(T=>{O.push(C(T))}),w(null,O)},P=>w(P)):0<this._pc.getStats.length?this._pc.getStats(P=>{if(this.destroyed)return;const O=[];P.result().forEach(T=>{const M={};T.names().forEach(D=>{M[D]=T.stat(D)}),M.id=T.id,M.type=T.type,M.timestamp=T.timestamp,O.push(C(M))}),w(null,O)},P=>w(P)):w(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const w=()=>{this.destroyed||this.getStats((C,P)=>{if(this.destroyed)return;C&&(P=[]);const O={},T={},M={};let D=!1;P.forEach(R=>{(R.type==="remotecandidate"||R.type==="remote-candidate")&&(O[R.id]=R),(R.type==="localcandidate"||R.type==="local-candidate")&&(T[R.id]=R),(R.type==="candidatepair"||R.type==="candidate-pair")&&(M[R.id]=R)});const I=R=>{D=!0;let $=T[R.localCandidateId];$&&($.ip||$.address)?(this.localAddress=$.ip||$.address,this.localPort=+$.port):$&&$.ipAddress?(this.localAddress=$.ipAddress,this.localPort=+$.portNumber):typeof R.googLocalAddress=="string"&&($=R.googLocalAddress.split(":"),this.localAddress=$[0],this.localPort=+$[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let H=O[R.remoteCandidateId];H&&(H.ip||H.address)?(this.remoteAddress=H.ip||H.address,this.remotePort=+H.port):H&&H.ipAddress?(this.remoteAddress=H.ipAddress,this.remotePort=+H.portNumber):typeof R.googRemoteAddress=="string"&&(H=R.googRemoteAddress.split(":"),this.remoteAddress=H[0],this.remotePort=+H[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(P.forEach(R=>{R.type==="transport"&&R.selectedCandidatePairId&&I(M[R.selectedCandidatePairId]),(R.type==="googCandidatePair"&&R.googActiveConnection==="true"||(R.type==="candidatepair"||R.type==="candidate-pair")&&R.selected)&&I(R)}),!D&&(!Object.keys(M).length||Object.keys(T).length))return void setTimeout(w,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch($){return this.destroy(p($,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const R=this._cb;this._cb=null,R(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};w()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>b)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(w=>{this._pc.removeTrack(w),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(w){this.destroyed||(w.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:w.candidate.candidate,sdpMLineIndex:w.candidate.sdpMLineIndex,sdpMid:w.candidate.sdpMid}}):!w.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),w.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(w){if(this.destroyed)return;let C=w.data;C instanceof ArrayBuffer&&(C=g.from(C)),this.push(C)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const w=this._cb;this._cb=null,w(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(w){this.destroyed||w.streams.forEach(C=>{this._debug("on track"),this.emit("track",w.track,C),this._remoteTracks.push({track:w.track,stream:C}),this._remoteStreams.some(P=>P.id===C.id)||(this._remoteStreams.push(C),h(()=>{this._debug("on stream"),this.emit("stream",C)}))})}_debug(){const w=[].slice.call(arguments);w[0]="["+this._id+"] "+w[0],c.apply(null,w)}}v.WEBRTC_SUPPORT=!!d(),v.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},v.channelConfig={},o.exports=v},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})})(qH);var tSe=qH.exports;const nSe=rh(tSe);var ma={};(function(t){(function(e){var n="undefined",r=n!==typeof Buffer&&Buffer,i=n!==typeof Uint8Array&&Uint8Array,s=n!==typeof ArrayBuffer&&ArrayBuffer,o=[0,0,0,0,0,0,0,0],a=Array.isArray||O,l=4294967296,c=16777216,d;u("Uint64BE",!0,!0),u("Int64BE",!0,!1),u("Uint64LE",!1,!0),u("Int64LE",!1,!1);function u(T,M,D){var I=M?0:4,R=M?4:0,$=M?0:3,H=M?1:2,z=M?2:1,ee=M?3:0,ce=M?x:C,le=M?w:P,te=Ce.prototype,Z="is"+T,de="_"+Z;return te.buffer=void 0,te.offset=0,te[de]=!0,te.toNumber=ue,te.toString=he,te.toJSON=ue,te.toArray=f,r&&(te.toBuffer=h),i&&(te.toArrayBuffer=p),Ce[Z]=F,e[T]=Ce,Ce;function Ce(pe,me,_e,Te){return this instanceof Ce?X(this,pe,me,_e,Te):new Ce(pe,me,_e,Te)}function F(pe){return!!(pe&&pe[de])}function X(pe,me,_e,Te,je){if(i&&s&&(me instanceof s&&(me=new i(me)),Te instanceof s&&(Te=new i(Te))),!me&&!_e&&!Te&&!d){pe.buffer=v(o,0);return}if(!g(me,_e)){var Qe=d||Array;je=_e,Te=me,_e=0,me=d===r?r.alloc(8):new Qe(8)}pe.buffer=me,pe.offset=_e|=0,n!==typeof Te&&(typeof Te=="string"?re(me,_e,Te,je||10):g(Te,je)?b(me,_e,Te,je):typeof je=="number"?(fe(me,_e+I,Te),fe(me,_e+R,je)):Te>0?ce(me,_e,Te):Te<0?le(me,_e,Te):b(me,_e,o,0))}function re(pe,me,_e,Te){var je=0,Qe=_e.length,ne=0,V=0;_e[0]==="-"&&je++;for(var Re=je;je<Qe;){var Fe=parseInt(_e[je++],Te);if(!(Fe>=0))break;V=V*Te+Fe,ne=ne*Te+Math.floor(V/l),V%=l}Re&&(ne=~ne,V?V=l-V:ne++),fe(pe,me+I,ne),fe(pe,me+R,V)}function ue(){var pe=this.buffer,me=this.offset,_e=be(pe,me+I),Te=be(pe,me+R);return D||(_e|=0),_e?_e*l+Te:Te}function he(pe){var me=this.buffer,_e=this.offset,Te=be(me,_e+I),je=be(me,_e+R),Qe="",ne=!D&&Te&2147483648;for(ne&&(Te=~Te,je=l-je),pe=pe||10;;){var V=Te%pe*l+je;if(Te=Math.floor(Te/pe),je=Math.floor(V/pe),Qe=(V%pe).toString(pe)+Qe,!Te&&!je)break}return ne&&(Qe="-"+Qe),Qe}function fe(pe,me,_e){pe[me+ee]=_e&255,_e=_e>>8,pe[me+z]=_e&255,_e=_e>>8,pe[me+H]=_e&255,_e=_e>>8,pe[me+$]=_e&255}function be(pe,me){return pe[me+$]*c+(pe[me+H]<<16)+(pe[me+z]<<8)+pe[me+ee]}}function f(T){var M=this.buffer,D=this.offset;return d=null,T!==!1&&a(M)?M.length===8?M:M.slice(D,D+8):v(M,D)}function h(T){var M=this.buffer,D=this.offset;return d=r,T!==!1&&r.isBuffer(M)?M.length===8?M:M.slice(D,D+8):r.from(p.call(this,T))}function p(T){var M=this.buffer,D=this.offset,I=M.buffer;if(d=i,T!==!1&&!M.offset&&I instanceof s)return I.byteLength===8?I:I.slice(D,D+8);var R=new i(8);return b(R,0,M,D),R.buffer}function g(T,M){var D=T&&T.length;return M|=0,D&&M+8<=D&&typeof T[M]!="string"}function b(T,M,D,I){M|=0,I|=0;for(var R=0;R<8;R++)T[M++]=D[I++]&255}function v(T,M){return Array.prototype.slice.call(T,M,M+8)}function x(T,M,D){for(var I=M+8;I>M;)T[--I]=D&255,D/=256}function w(T,M,D){var I=M+8;for(D++;I>M;)T[--I]=-D&255^255,D/=256}function C(T,M,D){for(var I=M+8;M<I;)T[M++]=D&255,D/=256}function P(T,M,D){var I=M+8;for(D++;M<I;)T[M++]=-D&255^255,D/=256}function O(T){return!!T&&Object.prototype.toString.call(T)=="[object Array]"}})(typeof t.nodeName!="string"?t:zi||{})})(ma);const rSe=1024*16-512,iSe=1e3*30,sSe=64*1024;function gO(t,e){let n=0;for(let s of e)n+=s.length;let r=new t(n),i=0;for(let s of e)r.set(s,i),i+=s.length;return r}class oSe extends nSe{constructor(e){super(e),this._opts=e,this._txOrdinal=0,this._rxPackets=[],this._txPause=!1,this.webRTCMessageQueue=[],this.webRTCPaused=!1}encodePacket({chunk:e,txOrd:n,index:r,length:i,totalSize:s,chunkSize:o}){return gO(Uint8Array,[new Uint8Array(new ma.Int64BE(n).toArrayBuffer()),new Uint8Array(new ma.Int64BE(r).toArrayBuffer()),new Uint8Array(new ma.Int64BE(i).toArrayBuffer()),new Uint8Array(new ma.Int64BE(s).toArrayBuffer()),new Uint8Array(new ma.Int64BE(o).toArrayBuffer()),e])}decodePacket(e){return{txOrd:new ma.Int64BE(e.slice(0,8)).toNumber(),index:new ma.Int64BE(e.slice(8,16)).toNumber(),length:new ma.Int64BE(e.slice(16,24)).toNumber(),totalSize:new ma.Int64BE(e.slice(24,32)).toNumber(),chunkSize:new ma.Int64BE(e.slice(32,40)).toNumber(),chunk:e.slice(40)}}packetArray(e,n){const r=this._txOrdinal;this._txOrdinal++;const i=[],s=e.length||e.byteLength;let o=0;for(;o<s;)i.push(e.slice(o,n+o)),o+=n;return i.map((a,l)=>this.encodePacket({chunk:a,txOrd:r,index:l,totalSize:s,length:i.length,chunkSize:a.byteLength}))}_onChannelMessage(e){let{data:n}=e,r=this.decodePacket(n);if(r.chunk instanceof ArrayBuffer&&(r.chunk=new Uint8Array(r.chunk)),r.chunkSize===r.totalSize)this.push(r.chunk);else{let i=this._rxPackets.filter(o=>o.txOrd===r.txOrd);i.push(r);let s=i.map(o=>o.index);if(new Set(s).size===r.length){i.sort(this.sortPacketArray);let o=gO(Uint8Array,i.map(a=>a.chunk));this.push(o),setTimeout(()=>{this._rxPackets=this._rxPackets.filter(a=>a.txOrd!==r.txOrd)},iSe)}else this._rxPackets.push(r)}}sortPacketArray(e,n){return e.index>n.index?1:-1}send(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));let n=this.packetArray(e,rSe);this.webRTCMessageQueue=this.webRTCMessageQueue.concat(n),!this.webRTCPaused&&this.sendMessageQueued()}sendMessageQueued(){this.webRTCPaused=!1;let e=this.webRTCMessageQueue.shift();for(;e;){if(this._channel.bufferedAmount&&this._channel.bufferedAmount>sSe){this.webRTCPaused=!0,this.webRTCMessageQueue.unshift(e);const n=()=>{this._channel.removeEventListener("bufferedamountlow",n),this.sendMessageQueued()};this._channel.addEventListener("bufferedamountlow",n);return}try{super.send(e),e=this.webRTCMessageQueue.shift()}catch(n){console.warn({error:n}),super.destroy()}}}}const R6=0,w5=1,L6=2,GH=(t,e)=>{kt(t,R6);const n=Nie(e);Er(t,n)},KH=(t,e,n)=>{kt(t,w5),Er(t,Aie(e,n))},aSe=(t,e,n)=>KH(e,n,Jr(t)),JH=(t,e,n)=>{try{kie(e,Jr(t),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},lSe=(t,e)=>{kt(t,L6),Er(t,e)},cSe=JH,uSe=(t,e,n,r)=>{const i=Ut(t);switch(i){case R6:aSe(t,e,n);break;case w5:JH(t,n,r);break;case L6:cSe(t,n,r);break;default:throw new Error("Unknown message type")}return i},t3=3e4;class dSe extends FE{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=Nc();this.getLocalState()!==null&&t3/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((i,s)=>{s!==this.clientID&&t3<=n-i.lastUpdated&&this.states.has(s)&&r.push(s)}),r.length>0&&Y_(this,r,"timeout")},kl(t3/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const n=this.clientID,r=this.meta.get(n),i=r===void 0?0:r.clock+1,s=this.states.get(n);e===null?this.states.delete(n):this.states.set(n,e),this.meta.set(n,{clock:i,lastUpdated:Nc()});const o=[],a=[],l=[],c=[];e===null?c.push(n):s==null?e!=null&&o.push(n):(a.push(n),W0(s,e)||l.push(n)),(o.length>0||l.length>0||c.length>0)&&this.emit("change",[{added:o,updated:l,removed:c},"local"]),this.emit("update",[{added:o,updated:a,removed:c},"local"])}setLocalStateField(e,n){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[e]:n})}getStates(){return this.states}}const Y_=(t,e,n)=>{const r=[];for(let i=0;i<e.length;i++){const s=e[i];if(t.states.has(s)){if(t.states.delete(s),s===t.clientID){const o=t.meta.get(s);t.meta.set(s,{clock:o.clock+1,lastUpdated:Nc()})}r.push(s)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},Jw=(t,e,n=t.states)=>{const r=e.length,i=pi();kt(i,r);for(let s=0;s<r;s++){const o=e[s],a=n.get(o)||null,l=t.meta.get(o).clock;kt(i,o),kt(i,l),pl(i,JSON.stringify(a))}return yr(i)},fSe=(t,e,n)=>{const r=Ha(e),i=Nc(),s=[],o=[],a=[],l=[],c=Ut(r);for(let d=0;d<c;d++){const u=Ut(r);let f=Ut(r);const h=JSON.parse(mc(r)),p=t.meta.get(u),g=t.states.get(u),b=p===void 0?0:p.clock;(b<f||b===f&&h===null&&t.states.has(u))&&(h===null?u===t.clientID&&t.getLocalState()!=null?f++:t.states.delete(u):t.states.set(u,h),t.meta.set(u,{clock:f,lastUpdated:i}),p===void 0&&h!==null?s.push(u):p!==void 0&&h===null?l.push(u):h!==null&&(W0(h,g)||a.push(u),o.push(u)))}(s.length>0||a.length>0||l.length>0)&&t.emit("change",[{added:s,updated:a,removed:l},n]),(s.length>0||o.length>0||l.length>0)&&t.emit("update",[{added:s,updated:o,removed:l},n])},hSe=(t,e)=>{const n=IC(t).buffer,r=IC(e).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then(i=>crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},YH=(t,e)=>{if(!e)return WE(t);const n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},e,t).then(r=>{const i=pi();return pl(i,"AES-GCM"),Er(i,n),Er(i,new Uint8Array(r)),yr(i)})},pSe=(t,e)=>{const n=pi();return gg(n,t),YH(yr(n),e)},ZH=(t,e)=>{if(!e)return WE(t);const n=Ha(t);mc(n)!=="AES-GCM"&&Ore(Cl("Unknown encryption algorithm"));const i=Jr(n),s=Jr(n);return crypto.subtle.decrypt({name:"AES-GCM",iv:i},e,s).then(o=>new Uint8Array(o))},gSe=(t,e)=>ZH(t,e).then(n=>mg(Ha(new Uint8Array(n)))),go=die("y-webrtc"),Xu=0,XH=3,sy=1,D6=4,Yw=new Map,Af=new Map,QH=t=>{let e=!0;t.webrtcConns.forEach(n=>{n.synced||(e=!1)}),(!e&&t.synced||e&&!t.synced)&&(t.synced=e,t.provider.emit("synced",[{synced:e}]),go("synced ",qo,t.name,zf," with all peers"))},mSe=async(t,e)=>{const n=Ha(e),r=Ut(n),i=Ut(n);if(console.warn("validMessage:decode",{messageType1:r,messageType2:i,messageSync:Xu,data:e}),r===Xu&&(w5===i||L6===i))try{const s=await Promise.resolve(t.validateUpdate(Jr(n)));return console.log("validMessage",{valid:s,room:t,data:e}),s}catch(s){return console.warn("!InvalidDataFromUpdate",{e:s,room:t,data:e}),!1}return!0},eV=(t,e,n)=>{const r=Ha(e),i=pi(),s=Ut(r);if(t===void 0)return null;const o=t.awareness,a=t.doc;let l=!1;switch(s){case Xu:{kt(i,Xu);const c=uSe(r,i,a,t);c===w5&&!t.synced&&n(),c===R6&&(l=!0);break}case XH:kt(i,sy),Er(i,Jw(o,Array.from(o.getStates().keys()))),l=!0;break;case sy:fSe(o,Jr(r),t);break;case D6:{const c=Ff(r)===1,d=mc(r);if(d!==t.peerId&&(t.bcConns.has(d)&&!c||!t.bcConns.has(d)&&c)){const u=[],f=[];c?(t.bcConns.add(d),f.push(d)):(t.bcConns.delete(d),u.push(d)),t.provider.emit("peers",[{added:f,removed:u,webrtcPeers:Array.from(t.webrtcConns.keys()),bcPeers:Array.from(t.bcConns)}]),tV(t)}break}default:return console.error("Unable to compute message"),i}return l?i:null},ySe=(t,e)=>{const n=t.room;return go("received message from ",qo,t.remotePeerId,KE," (",n.name,")",zf,Tx),eV(n,e,()=>{t.synced=!0,go("synced ",qo,n.name,zf," with ",qo,t.remotePeerId),QH(n)})},n3=(t,e)=>{go("send message to ",qo,t.remotePeerId,zf,KE," (",t.room.name,")",Tx);try{t.peer.send(yr(e))}catch{}},vSe=(t,e)=>{go("broadcast message in ",qo,t.name,zf),t.webrtcConns.forEach(n=>{try{n.peer.send(e)}catch{}})};class mO{constructor(e,n,r,i){go("establishing connection to ",qo,r),this.room=i,this.remotePeerId=r,this.glareToken=void 0,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new oSe({initiator:n,...i.provider.peerOpts}),this.peer.on("signal",s=>{this.glareToken===void 0&&(this.glareToken=Date.now()+Math.random()),I6(e,i,{to:r,from:i.peerId,type:"signal",token:this.glareToken,signal:s})}),this.peer.on("connect",()=>{go("connected to ",qo,r),this.connected=!0;const o=i.provider.doc,a=i.awareness,l=pi();kt(l,Xu),GH(l,o),n3(this,l);const c=a.getStates();if(c.size>0){const d=pi();kt(d,sy),Er(d,Jw(a,Array.from(c.keys()))),n3(this,d)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,i.webrtcConns.has(this.remotePeerId)&&(i.webrtcConns.delete(this.remotePeerId),i.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}])),QH(i),this.peer.destroy(),go("closed connection to ",qo,r),Z_(i)}),this.peer.on("error",s=>{go("Error in connection to ",qo,r,": ",s),Z_(i)}),this.peer.on("data",async s=>{if(!await mSe(i,s.slice()))return console.warn("!InvalidData",{peer:this.peer,context:this,room:i,data:s});const a=ySe(this,s);a!==null&&n3(this,a)})}destroy(){this.peer.destroy()}}const ku=(t,e)=>YH(e,t.key).then(n=>t.mux(()=>Q5e(t.name,n))),yO=(t,e)=>{t.bcconnected&&ku(t,e),vSe(t,e)},Z_=t=>{Yw.forEach(e=>{e.connected&&(e.send({type:"subscribe",topics:[t.name]}),t.webrtcConns.size<t.provider.maxConns&&I6(e,t,{type:"announce",from:t.peerId}))})},tV=t=>{if(t.provider.filterBcConns){const e=pi();kt(e,D6),F1(e,1),pl(e,t.peerId),ku(t,yr(e))}};class bSe{constructor(e,n,r,i,s){this.peerId=RI(),this.doc=e,this.awareness=n.awareness,this.provider=n,this.synced=!1,this.name=r,this.validateUpdate=s,this.key=i,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=eSe(),this.bcconnected=!1,this._bcSubscriber=o=>ZH(new Uint8Array(o),i).then(a=>this.mux(()=>{const l=eV(this,a,()=>{});l&&ku(this,yr(l))})),this._docUpdateHandler=(o,a)=>{const l=pi();kt(l,Xu),lSe(l,o),yO(this,yr(l))},this._awarenessUpdateHandler=({added:o,updated:a,removed:l},c)=>{const d=o.concat(a).concat(l),u=pi();kt(u,sy),Er(u,Jw(this.awareness,d)),yO(this,yr(u))},this._beforeUnloadHandler=()=>{Y_(this.awareness,[e.clientID],"window unload"),Af.forEach(o=>{o.disconnect()})},typeof window<"u"?window.addEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),Z_(this);const e=this.name;Z5e(e,this._bcSubscriber),this.bcconnected=!0,tV(this);const n=pi();kt(n,Xu),GH(n,this.doc),ku(this,yr(n));const r=pi();kt(r,Xu),KH(r,this.doc),ku(this,yr(r));const i=pi();kt(i,XH),ku(this,yr(i));const s=pi();kt(s,sy),Er(s,Jw(this.awareness,[this.doc.clientID])),ku(this,yr(s))}disconnect(){Yw.forEach(n=>{n.connected&&n.send({type:"unsubscribe",topics:[this.name]})}),Y_(this.awareness,[this.doc.clientID],"disconnect");const e=pi();kt(e,D6),F1(e,0),pl(e,this.peerId),ku(this,yr(e)),X5e(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(n=>n.destroy())}destroy(){this.disconnect(),typeof window<"u"?window.removeEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.off("exit",this._beforeUnloadHandler)}}const wSe=(t,e,n,r,i)=>{if(Af.has(n))throw Cl(`A Yjs Doc connected to room "${n}" already exists!`);const s=new bSe(t,e,n,r,i);return Af.set(n,s),s},I6=(t,e,n)=>{e.key?pSe(n,e.key).then(r=>{t.send({type:"publish",topic:e.name,data:zI(r)})}):t.send({type:"publish",topic:e.name,data:n})};class xSe extends K5e{constructor(e){super(e),this.providers=new Set,this.on("connect",()=>{go(`connected (${e})`);const n=Array.from(Af.keys());this.send({type:"subscribe",topics:n}),Af.forEach(r=>I6(this,r,{type:"announce",from:r.peerId}))}),this.on("message",n=>{switch(n.type){case"publish":{const r=n.topic,i=Af.get(r);if(i==null||typeof r!="string")return;const s=o=>{const a=i.webrtcConns,l=i.peerId;if(o==null||o.from===l||o.to!==void 0&&o.to!==l||i.bcConns.has(o.from))return;const c=a.has(o.from)?()=>{}:()=>i.provider.emit("peers",[{removed:[],added:[o.from],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}]);switch(o.type){case"announce":a.size<i.provider.maxConns&&(Co(a,o.from,()=>new mO(this,!0,o.from,i)),c());break;case"signal":if(o.signal.type==="offer"){const d=a.get(o.from);if(d){const u=o.token,f=d.glareToken;if(f&&f>u){go("offer rejected: ",o.from);return}d.glareToken=void 0}}if(o.signal.type==="answer"){go("offer answered by: ",o.from);const d=a.get(o.from);d.glareToken=void 0}o.to===l&&(Co(a,o.from,()=>new mO(this,!1,o.from,i)).peer.signal(o.signal),c());break}};i.key?typeof n.data=="string"&&gSe(BI(n.data),i.key).then(s):s(n.data)}}}),this.on("disconnect",()=>go(`disconnect (${e})`))}}class SSe extends FE{constructor(e,n,{signaling:r=["wss://signaling.yjs.dev","wss://y-webrtc-signaling-eu.herokuapp.com","wss://y-webrtc-signaling-us.herokuapp.com"],password:i=null,awareness:s=new dSe(n),maxConns:o=20+kl(Nre()*15),filterBcConns:a=!0,peerOpts:l={}}={},c=()=>!0){super(),this.validateUpdate=c,this.roomName=e,this.doc=n,this.filterBcConns=a,this.awareness=s,this.shouldConnect=!1,this.signalingUrls=r,this.signalingConns=[],this.maxConns=o,this.peerOpts=l,this.key=i?hSe(i,e):WE(null),this.room=null,this.key.then(d=>{this.room=wSe(n,this,e,d,c),this.shouldConnect?this.room.connect():this.room.disconnect()}),this.connect(),this.destroy=this.destroy.bind(this),n.on("destroy",this.destroy)}get connected(){return this.room!==null&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(e=>{const n=Co(Yw,e,()=>new xSe(e));this.signalingConns.push(n),n.providers.add(this)}),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(e=>{e.providers.delete(this),e.providers.size===0&&(e.destroy(),Yw.delete(e.url))}),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),Af.delete(this.roomName)}),super.destroy()}}const vO=t=>{t=1831565813+(t|=0)|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296};let kSe=class{constructor(e){this.dictionaries=void 0,this.length=void 0,this.separator=void 0,this.style=void 0,this.seed=void 0;const{length:n,separator:r,dictionaries:i,style:s,seed:o}=e;this.dictionaries=i,this.separator=r,this.length=n,this.style=s,this.seed=o}generate(){if(!this.dictionaries)throw new Error('Cannot find any dictionary. Please provide at least one, or leave the "dictionary" field empty in the config object');if(this.length<=0)throw new Error("Invalid length provided");if(this.length>this.dictionaries.length)throw new Error(`The length cannot be bigger than the number of dictionaries.
Length provided: ${this.length}. Number of dictionaries provided: ${this.dictionaries.length}`);let e=this.seed;return this.dictionaries.slice(0,this.length).reduce((n,r)=>{let i;e?(i=(o=>{if(typeof o=="string"){const a=o.split("").map(c=>c.charCodeAt(0)).reduce((c,d)=>c+d,1),l=Math.floor(Number(a));return vO(l)}return vO(o)})(e),e=4294967296*i):i=Math.random();let s=r[Math.floor(i*r.length)]||"";if(this.style==="lowerCase")s=s.toLowerCase();else if(this.style==="capital"){const[o,...a]=s.split("");s=o.toUpperCase()+a.join("")}else this.style==="upperCase"&&(s=s.toUpperCase());return n?`${n}${this.separator}${s}`:`${s}`},"")}};const bO={separator:"_",dictionaries:[]},CSe=t=>{const e=[...t&&t.dictionaries||bO.dictionaries],n={...bO,...t,length:t&&t.length||e.length,dictionaries:e};if(!t||!t.dictionaries||!t.dictionaries.length)throw new Error('A "dictionaries" array must be provided. This is a breaking change introduced starting from Unique Name Generator v4. Read more about the breaking change here: https://github.com/andreasonny83/unique-names-generator#migration-guide');return new kSe(n).generate()};var _Se=["aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","booby","bovid","bug","butterfly","buzzard","camel","canid","canidae","capybara","cardinal","caribou","carp","cat","caterpillar","catfish","catshark","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","cicada","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragon","dragonfly","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","felidae","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","galliform","gamefowl","gayal","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","unicorn","urial","vicuna","viper","vole","vulture","wallaby","walrus","warbler","wasp","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra"],ASe=["amaranth","amber","amethyst","apricot","aqua","aquamarine","azure","beige","black","blue","blush","bronze","brown","chocolate","coffee","copper","coral","crimson","cyan","emerald","fuchsia","gold","gray","green","harlequin","indigo","ivory","jade","lavender","lime","magenta","maroon","moccasin","olive","orange","peach","pink","plum","purple","red","rose","salmon","sapphire","scarlet","silver","tan","teal","tomato","turquoise","violet","white","yellow"];const Zw=["#E54D2E","#E54666","#E54666","#8E4EC6","#6E56CF","#3E63DD","#0090FF","#00A2C7","#12A594","#30A46C","#46A758","#A18072","#A18072","#F76B15","#BDEE63","#86EAD4","#7CE2FE"];function ESe(){const t=CSe({dictionaries:[ASe,_Se],separator:" "}),e=Zw[Math.round(Math.random()*Zw.length-1)];return{name:t,color:e}}class PSe{constructor(){Qa(this,"editor",null);Qa(this,"docSyncPlugin",null);Qa(this,"userPresencePlugin",null);Qa(this,"yDoc");Qa(this,"yProvider");Qa(this,"syncStarted");Qa(this,"oDocReady");Qa(this,"signalingUrls",[]);Qa(this,"signalingPassword","");this.yDoc=null,this.yProvider=null,this.syncStarted=!1,this.oDocReady=new Wn}autoDetermineSignalingUrl(){const e=window.location.protocol==="https:"?"wss":"ws",n=window.location.protocol==="https:"?"":`:${window.location.port}`;this.signalingUrls=[`${e}://${window.location.hostname}${n}`]}setSignalingUrl(e){e==="*"?this.autoDetermineSignalingUrl():this.signalingUrls=[e]}setSignalingPassword(e){this.signalingPassword=e}start(e,n,r){this.editor=e,this.docSyncPlugin=this.editor.getPlugin("dgmjs/yjs-doc-sync"),this.userPresencePlugin=this.editor.getPlugin("dgmjs/yjs-user-presence"),this.syncStarted=!0,this.yDoc=new Gg,this.yDoc.on("update",i=>{this.syncStarted&&(this.syncStarted=!1,this.oDocReady.emit())}),this.yProvider=new SSe(n,this.yDoc,{signaling:this.signalingUrls,password:this.signalingPassword}),this.docSyncPlugin.start(this.yDoc),this.userPresencePlugin.start(this.yProvider.awareness,r),this.userPresencePlugin.onUserEnter.addListener(i=>{}),this.userPresencePlugin.onUserLeave.addListener(i=>{}),this.userPresencePlugin.onUserIdentityUpdate.addListener(i=>{})}updateUserIdentity(e){var n,r;(n=this.userPresencePlugin.localUserState)==null||n.setName(e.name),(r=this.userPresencePlugin.localUserState)==null||r.setColor(e.color)}stop(){var e,n;this.docSyncPlugin.stop(),this.userPresencePlugin.stop(),(e=this.yDoc)==null||e.destroy(),this.yDoc=null,(n=this.yProvider)==null||n.disconnect(),this.yProvider=null}flush(){this.docSyncPlugin.flush()}}const fu=new PSe,nV="ContextMenu",[TSe,bAe]=Zs(nV,[i5]),sa=i5(),[NSe,rV]=TSe(nV),MSe=t=>{const{__scopeContextMenu:e,children:n,onOpenChange:r,dir:i,modal:s=!0}=t,[o,a]=S.useState(!1),l=sa(e),c=Xr(r),d=S.useCallback(u=>{a(u),c(u)},[c]);return S.createElement(NSe,{scope:e,open:o,onOpenChange:d,modal:s},S.createElement(AF,Ie({},l,{dir:i,open:o,onOpenChange:d,modal:s}),n))},OSe="ContextMenuTrigger",RSe=S.forwardRef((t,e)=>{const{__scopeContextMenu:n,disabled:r=!1,...i}=t,s=rV(OSe,n),o=sa(n),a=S.useRef({x:0,y:0}),l=S.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),c=S.useRef(0),d=S.useCallback(()=>window.clearTimeout(c.current),[]),u=f=>{a.current={x:f.clientX,y:f.clientY},s.onOpenChange(!0)};return S.useEffect(()=>d,[d]),S.useEffect(()=>void(r&&d()),[r,d]),S.createElement(S.Fragment,null,S.createElement(EF,Ie({},o,{virtualRef:l})),S.createElement(jt.span,Ie({"data-state":s.open?"open":"closed","data-disabled":r?"":void 0},i,{ref:e,style:{WebkitTouchCallout:"none",...t.style},onContextMenu:r?t.onContextMenu:ot(t.onContextMenu,f=>{d(),u(f),f.preventDefault()}),onPointerDown:r?t.onPointerDown:ot(t.onPointerDown,w2(f=>{d(),c.current=window.setTimeout(()=>u(f),700)})),onPointerMove:r?t.onPointerMove:ot(t.onPointerMove,w2(d)),onPointerCancel:r?t.onPointerCancel:ot(t.onPointerCancel,w2(d)),onPointerUp:r?t.onPointerUp:ot(t.onPointerUp,w2(d))})))}),LSe=t=>{const{__scopeContextMenu:e,...n}=t,r=sa(e);return S.createElement(PF,Ie({},r,n))},DSe="ContextMenuContent",ISe=S.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=rV(DSe,n),s=sa(n),o=S.useRef(!1);return S.createElement(TF,Ie({},s,r,{ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{var l;(l=t.onCloseAutoFocus)===null||l===void 0||l.call(t,a),!a.defaultPrevented&&o.current&&a.preventDefault(),o.current=!1},onInteractOutside:a=>{var l;(l=t.onInteractOutside)===null||l===void 0||l.call(t,a),!a.defaultPrevented&&!i.modal&&(o.current=!0)},style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),$Se=S.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=sa(n);return S.createElement(NF,Ie({},i,r,{ref:e}))}),jSe=S.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=sa(n);return S.createElement(MF,Ie({},i,r,{ref:e}))}),FSe=S.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=sa(n);return S.createElement(OF,Ie({},i,r,{ref:e}))}),zSe=S.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=sa(n);return S.createElement(RF,Ie({},i,r,{ref:e}))}),BSe=S.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=sa(n);return S.createElement(LF,Ie({},i,r,{ref:e}))}),USe=S.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=sa(n);return S.createElement(DF,Ie({},i,r,{ref:e}))}),HSe=S.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=sa(n);return S.createElement(IF,Ie({},i,r,{ref:e}))}),VSe=S.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,i=sa(n);return S.createElement($F,Ie({},i,r,{ref:e,style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))});function w2(t){return e=>e.pointerType!=="mouse"?t(e):void 0}const WSe=MSe,qSe=RSe,GSe=LSe,iV=ISe,sV=$Se,oV=jSe,aV=FSe,lV=zSe,cV=BSe,uV=USe,dV=HSe,fV=VSe,KSe=WSe,JSe=qSe,YSe=S.forwardRef(({className:t,inset:e,children:n,...r},i)=>y.jsxs(dV,{ref:i,className:qe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e&&"pl-8",t),...r,children:[n,y.jsx(G$,{className:"ml-auto h-4 w-4"})]}));YSe.displayName=dV.displayName;const ZSe=S.forwardRef(({className:t,...e},n)=>y.jsx(fV,{ref:n,className:qe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));ZSe.displayName=fV.displayName;const hV=S.forwardRef(({className:t,...e},n)=>y.jsx(GSe,{children:y.jsx(iV,{ref:n,className:qe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e})}));hV.displayName=iV.displayName;const mb=S.forwardRef(({className:t,inset:e,...n},r)=>y.jsx(oV,{ref:r,className:qe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));mb.displayName=oV.displayName;const XSe=S.forwardRef(({className:t,children:e,checked:n,...r},i)=>y.jsxs(aV,{ref:i,className:qe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(cV,{children:y.jsx(Ux,{className:"h-4 w-4"})})}),e]}));XSe.displayName=aV.displayName;const QSe=S.forwardRef(({className:t,children:e,...n},r)=>y.jsxs(lV,{ref:r,className:qe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(cV,{children:y.jsx(K$,{className:"h-4 w-4 fill-current"})})}),e]}));QSe.displayName=lV.displayName;const eke=S.forwardRef(({className:t,inset:e,...n},r)=>y.jsx(sV,{ref:r,className:qe("px-2 py-1.5 text-sm font-semibold text-foreground",e&&"pl-8",t),...n}));eke.displayName=sV.displayName;const tke=S.forwardRef(({className:t,...e},n)=>y.jsx(uV,{ref:n,className:qe("-mx-1 my-1 h-px bg-border",t),...e}));tke.displayName=uV.displayName;const r3=768;function nke(){const[t,e]=S.useState(void 0);return S.useEffect(()=>{const n=window.matchMedia(`(max-width: ${r3-1}px)`),r=()=>{e(window.innerWidth<r3)};return n.addEventListener("change",r),e(window.innerWidth<r3),()=>n.removeEventListener("change",r)},[]),!!t}const rke=q4,ike=G4,pV=S.forwardRef(({className:t,...e},n)=>y.jsx(Py,{className:qe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));pV.displayName=Py.displayName;const ske=Cy("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),gV=S.forwardRef(({side:t="right",className:e,children:n,...r},i)=>y.jsxs(ike,{children:[y.jsx(pV,{}),y.jsxs(Ty,{ref:i,className:qe(ske({side:t}),e),...r,children:[y.jsxs(Bz,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[y.jsx(Dx,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]}),n]})]}));gV.displayName=Ty.displayName;const oke=S.forwardRef(({className:t,...e},n)=>y.jsx(Ny,{ref:n,className:qe("text-lg font-semibold text-foreground",t),...e}));oke.displayName=Ny.displayName;const ake=S.forwardRef(({className:t,...e},n)=>y.jsx(My,{ref:n,className:qe("text-sm text-muted-foreground",t),...e}));ake.displayName=My.displayName;function wO({className:t,...e}){return y.jsx("div",{className:qe("animate-pulse rounded-md bg-primary/10",t),...e})}function lc(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function xO(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function mV(...t){return e=>{let n=!1;const r=t.map(i=>{const s=xO(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():xO(t[i],null)}}}}function kh(...t){return S.useCallback(mV(...t),t)}function yV(t,e=[]){let n=[];function r(s,o){const a=S.createContext(o),l=n.length;n=[...n,o];const c=u=>{var v;const{scope:f,children:h,...p}=u,g=((v=f==null?void 0:f[t])==null?void 0:v[l])||a,b=S.useMemo(()=>p,Object.values(p));return y.jsx(g.Provider,{value:b,children:h})};c.displayName=s+"Provider";function d(u,f){var g;const h=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,p=S.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${s}\``)}return[c,d]}const i=()=>{const s=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,lke(i,...e)]}function lke(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const u=l(s)[`__scope${c}`];return{...a,...u}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var vV=S.forwardRef((t,e)=>{const{children:n,...r}=t,i=S.Children.toArray(n),s=i.find(cke);if(s){const o=s.props.children,a=i.map(l=>l===s?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:l);return y.jsx(X_,{...r,ref:e,children:S.isValidElement(o)?S.cloneElement(o,void 0,a):null})}return y.jsx(X_,{...r,ref:e,children:n})});vV.displayName="Slot";var X_=S.forwardRef((t,e)=>{const{children:n,...r}=t;if(S.isValidElement(n)){const i=dke(n),s=uke(r,n.props);return n.type!==S.Fragment&&(s.ref=e?mV(e,i):i),S.cloneElement(n,s)}return S.Children.count(n)>1?S.Children.only(null):null});X_.displayName="SlotClone";var bV=({children:t})=>y.jsx(y.Fragment,{children:t});function cke(t){return S.isValidElement(t)&&t.type===bV}function uke(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function dke(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var fke=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Md=fke.reduce((t,e)=>{const n=S.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?vV:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(a,{...o,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function hke(t,e){t&&Ua.flushSync(()=>t.dispatchEvent(e))}function om(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function pke(t,e=globalThis==null?void 0:globalThis.document){const n=om(t);S.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var gke="DismissableLayer",Q_="dismissableLayer.update",mke="dismissableLayer.pointerDownOutside",yke="dismissableLayer.focusOutside",SO,wV=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xV=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=S.useContext(wV),[d,u]=S.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=S.useState({}),p=kh(e,T=>u(T)),g=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(b),x=d?g.indexOf(d):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,C=x>=v,P=wke(T=>{const M=T.target,D=[...c.branches].some(I=>I.contains(M));!C||D||(i==null||i(T),o==null||o(T),T.defaultPrevented||a==null||a())},f),O=xke(T=>{const M=T.target;[...c.branches].some(I=>I.contains(M))||(s==null||s(T),o==null||o(T),T.defaultPrevented||a==null||a())},f);return pke(T=>{x===c.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},f),S.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(SO=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),kO(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=SO)}},[d,f,n,c]),S.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),kO())},[d,c]),S.useEffect(()=>{const T=()=>h({});return document.addEventListener(Q_,T),()=>document.removeEventListener(Q_,T)},[]),y.jsx(Md.div,{...l,ref:p,style:{pointerEvents:w?C?"auto":"none":void 0,...t.style},onFocusCapture:lc(t.onFocusCapture,O.onFocusCapture),onBlurCapture:lc(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:lc(t.onPointerDownCapture,P.onPointerDownCapture)})});xV.displayName=gke;var vke="DismissableLayerBranch",bke=S.forwardRef((t,e)=>{const n=S.useContext(wV),r=S.useRef(null),i=kh(e,r);return S.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),y.jsx(Md.div,{...t,ref:i})});bke.displayName=vke;function wke(t,e=globalThis==null?void 0:globalThis.document){const n=om(t),r=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){SV(mke,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function xke(t,e=globalThis==null?void 0:globalThis.document){const n=om(t),r=S.useRef(!1);return S.useEffect(()=>{const i=s=>{s.target&&!r.current&&SV(yke,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function kO(){const t=new CustomEvent(Q_);document.dispatchEvent(t)}function SV(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?hke(i,s):i.dispatchEvent(s)}var nh=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},Ske=vA.useId||(()=>{}),kke=0;function Cke(t){const[e,n]=S.useState(Ske());return nh(()=>{n(r=>r??String(kke++))},[t]),e?`radix-${e}`:""}var _ke="Arrow",kV=S.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return y.jsx(Md.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});kV.displayName=_ke;var Ake=kV;function Eke(t){const[e,n]=S.useState(void 0);return nh(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var $6="Popper",[CV,_V]=yV($6),[Pke,AV]=CV($6),EV=t=>{const{__scopePopper:e,children:n}=t,[r,i]=S.useState(null);return y.jsx(Pke,{scope:e,anchor:r,onAnchorChange:i,children:n})};EV.displayName=$6;var PV="PopperAnchor",TV=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=AV(PV,n),o=S.useRef(null),a=kh(e,o);return S.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:y.jsx(Md.div,{...i,ref:a})});TV.displayName=PV;var j6="PopperContent",[Tke,Nke]=CV(j6),NV=S.forwardRef((t,e)=>{var fe,be,pe,me,_e,Te;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:u="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:p,...g}=t,b=AV(j6,n),[v,x]=S.useState(null),w=kh(e,je=>x(je)),[C,P]=S.useState(null),O=Eke(C),T=(O==null?void 0:O.width)??0,M=(O==null?void 0:O.height)??0,D=r+(s!=="center"?"-"+s:""),I=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},R=Array.isArray(c)?c:[c],$=R.length>0,H={padding:I,boundary:R.filter(Oke),altBoundary:$},{refs:z,floatingStyles:ee,placement:ce,isPositioned:le,middlewareData:te}=mj({strategy:"fixed",placement:D,whileElementsMounted:(...je)=>lj(...je,{animationFrame:h==="always"}),elements:{reference:b.anchor},middleware:[X$({mainAxis:i+M,alignmentAxis:o}),l&&cj({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?hj():void 0,...H}),l&&uj({...H}),dj({...H,apply:({elements:je,rects:Qe,availableWidth:ne,availableHeight:V})=>{const{width:Re,height:Fe}=Qe.reference,K=je.floating.style;K.setProperty("--radix-popper-available-width",`${ne}px`),K.setProperty("--radix-popper-available-height",`${V}px`),K.setProperty("--radix-popper-anchor-width",`${Re}px`),K.setProperty("--radix-popper-anchor-height",`${Fe}px`)}}),C&&pj({element:C,padding:a}),Rke({arrowWidth:T,arrowHeight:M}),f&&fj({strategy:"referenceHidden",...H})]}),[Z,de]=RV(ce),Ce=om(p);nh(()=>{le&&(Ce==null||Ce())},[le,Ce]);const F=(fe=te.arrow)==null?void 0:fe.x,X=(be=te.arrow)==null?void 0:be.y,re=((pe=te.arrow)==null?void 0:pe.centerOffset)!==0,[ue,he]=S.useState();return nh(()=>{v&&he(window.getComputedStyle(v).zIndex)},[v]),y.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:le?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ue,"--radix-popper-transform-origin":[(me=te.transformOrigin)==null?void 0:me.x,(_e=te.transformOrigin)==null?void 0:_e.y].join(" "),...((Te=te.hide)==null?void 0:Te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:y.jsx(Tke,{scope:n,placedSide:Z,onArrowChange:P,arrowX:F,arrowY:X,shouldHideArrow:re,children:y.jsx(Md.div,{"data-side":Z,"data-align":de,...g,ref:w,style:{...g.style,animation:le?void 0:"none"}})})})});NV.displayName=j6;var MV="PopperArrow",Mke={top:"bottom",right:"left",bottom:"top",left:"right"},OV=S.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=Nke(MV,r),o=Mke[s.placedSide];return y.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:y.jsx(Ake,{...i,ref:n,style:{...i.style,display:"block"}})})});OV.displayName=MV;function Oke(t){return t!==null}var Rke=t=>({name:"transformOrigin",options:t,fn(e){var b,v,x;const{placement:n,rects:r,middlewareData:i}=e,o=((b=i.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=RV(n),u={start:"0%",center:"50%",end:"100%"}[d],f=(((v=i.arrow)==null?void 0:v.x)??0)+a/2,h=(((x=i.arrow)==null?void 0:x.y)??0)+l/2;let p="",g="";return c==="bottom"?(p=o?u:`${f}px`,g=`${-l}px`):c==="top"?(p=o?u:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(p=`${-l}px`,g=o?u:`${h}px`):c==="left"&&(p=`${r.floating.width+l}px`,g=o?u:`${h}px`),{data:{x:p,y:g}}}});function RV(t){const[e,n="center"]=t.split("-");return[e,n]}var Lke=EV,Dke=TV,Ike=NV,$ke=OV,jke="Portal",LV=S.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=S.useState(!1);nh(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?yx.createPortal(y.jsx(Md.div,{...r,ref:e}),o):null});LV.displayName=jke;function Fke(t,e){return S.useReducer((n,r)=>e[n][r]??n,t)}var F6=t=>{const{present:e,children:n}=t,r=zke(e),i=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),s=kh(r.ref,Bke(i));return typeof n=="function"||r.isPresent?S.cloneElement(i,{ref:s}):null};F6.displayName="Presence";function zke(t){const[e,n]=S.useState(),r=S.useRef({}),i=S.useRef(t),s=S.useRef("none"),o=t?"mounted":"unmounted",[a,l]=Fke(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=x2(r.current);s.current=a==="mounted"?c:"none"},[a]),nh(()=>{const c=r.current,d=i.current;if(d!==t){const f=s.current,h=x2(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),nh(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,u=h=>{const g=x2(r.current).includes(h.animationName);if(h.target===e&&g&&(l("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},f=h=>{h.target===e&&(s.current=x2(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function x2(t){return(t==null?void 0:t.animationName)||"none"}function Bke(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Uke({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=Hke({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=om(n),l=S.useCallback(c=>{if(s){const u=typeof c=="function"?c(t):c;u!==t&&a(u)}else i(c)},[s,t,i,a]);return[o,l]}function Hke({defaultProp:t,onChange:e}){const n=S.useState(t),[r]=n,i=S.useRef(r),s=om(e);return S.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}var Vke="VisuallyHidden",DV=S.forwardRef((t,e)=>y.jsx(Md.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));DV.displayName=Vke;var Wke=DV,[x5,wAe]=yV("Tooltip",[_V]),S5=_V(),IV="TooltipProvider",qke=700,eA="tooltip.open",[Gke,z6]=x5(IV),$V=t=>{const{__scopeTooltip:e,delayDuration:n=qke,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,[o,a]=S.useState(!0),l=S.useRef(!1),c=S.useRef(0);return S.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),y.jsx(Gke,{scope:e,isOpenDelayed:o,delayDuration:n,onOpen:S.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:S.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:S.useCallback(d=>{l.current=d},[]),disableHoverableContent:i,children:s})};$V.displayName=IV;var k5="Tooltip",[Kke,jy]=x5(k5),jV=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=t,l=z6(k5,t.__scopeTooltip),c=S5(e),[d,u]=S.useState(null),f=Cke(),h=S.useRef(0),p=o??l.disableHoverableContent,g=a??l.delayDuration,b=S.useRef(!1),[v=!1,x]=Uke({prop:r,defaultProp:i,onChange:T=>{T?(l.onOpen(),document.dispatchEvent(new CustomEvent(eA))):l.onClose(),s==null||s(T)}}),w=S.useMemo(()=>v?b.current?"delayed-open":"instant-open":"closed",[v]),C=S.useCallback(()=>{window.clearTimeout(h.current),h.current=0,b.current=!1,x(!0)},[x]),P=S.useCallback(()=>{window.clearTimeout(h.current),h.current=0,x(!1)},[x]),O=S.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{b.current=!0,x(!0),h.current=0},g)},[g,x]);return S.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),y.jsx(Lke,{...c,children:y.jsx(Kke,{scope:e,contentId:f,open:v,stateAttribute:w,trigger:d,onTriggerChange:u,onTriggerEnter:S.useCallback(()=>{l.isOpenDelayed?O():C()},[l.isOpenDelayed,O,C]),onTriggerLeave:S.useCallback(()=>{p?P():(window.clearTimeout(h.current),h.current=0)},[P,p]),onOpen:C,onClose:P,disableHoverableContent:p,children:n})})};jV.displayName=k5;var tA="TooltipTrigger",FV=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=jy(tA,n),s=z6(tA,n),o=S5(n),a=S.useRef(null),l=kh(e,a,i.onTriggerChange),c=S.useRef(!1),d=S.useRef(!1),u=S.useCallback(()=>c.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),y.jsx(Dke,{asChild:!0,...o,children:y.jsx(Md.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:lc(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:lc(t.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:lc(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:lc(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:lc(t.onBlur,i.onClose),onClick:lc(t.onClick,i.onClose)})})});FV.displayName=tA;var B6="TooltipPortal",[Jke,Yke]=x5(B6,{forceMount:void 0}),zV=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:i}=t,s=jy(B6,e);return y.jsx(Jke,{scope:e,forceMount:n,children:y.jsx(F6,{present:n||s.open,children:y.jsx(LV,{asChild:!0,container:i,children:r})})})};zV.displayName=B6;var Lg="TooltipContent",BV=S.forwardRef((t,e)=>{const n=Yke(Lg,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=jy(Lg,t.__scopeTooltip);return y.jsx(F6,{present:r||o.open,children:o.disableHoverableContent?y.jsx(UV,{side:i,...s,ref:e}):y.jsx(Zke,{side:i,...s,ref:e})})}),Zke=S.forwardRef((t,e)=>{const n=jy(Lg,t.__scopeTooltip),r=z6(Lg,t.__scopeTooltip),i=S.useRef(null),s=kh(e,i),[o,a]=S.useState(null),{trigger:l,onClose:c}=n,d=i.current,{onPointerInTransitChange:u}=r,f=S.useCallback(()=>{a(null),u(!1)},[u]),h=S.useCallback((p,g)=>{const b=p.currentTarget,v={x:p.clientX,y:p.clientY},x=t3e(v,b.getBoundingClientRect()),w=n3e(v,x),C=r3e(g.getBoundingClientRect()),P=s3e([...w,...C]);a(P),u(!0)},[u]);return S.useEffect(()=>()=>f(),[f]),S.useEffect(()=>{if(l&&d){const p=b=>h(b,d),g=b=>h(b,l);return l.addEventListener("pointerleave",p),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",p),d.removeEventListener("pointerleave",g)}}},[l,d,h,f]),S.useEffect(()=>{if(o){const p=g=>{const b=g.target,v={x:g.clientX,y:g.clientY},x=(l==null?void 0:l.contains(b))||(d==null?void 0:d.contains(b)),w=!i3e(v,o);x?f():w&&(f(),c())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,d,o,c,f]),y.jsx(UV,{...t,ref:s})}),[Xke,Qke]=x5(k5,{isInside:!1}),UV=S.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=jy(Lg,n),c=S5(n),{onClose:d}=l;return S.useEffect(()=>(document.addEventListener(eA,d),()=>document.removeEventListener(eA,d)),[d]),S.useEffect(()=>{if(l.trigger){const u=f=>{const h=f.target;h!=null&&h.contains(l.trigger)&&d()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[l.trigger,d]),y.jsx(xV,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:u=>u.preventDefault(),onDismiss:d,children:y.jsxs(Ike,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(bV,{children:r}),y.jsx(Xke,{scope:n,isInside:!0,children:y.jsx(Wke,{id:l.contentId,role:"tooltip",children:i||r})})]})})});BV.displayName=Lg;var HV="TooltipArrow",e3e=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=S5(n);return Qke(HV,n).isInside?null:y.jsx($ke,{...i,...r,ref:e})});e3e.displayName=HV;function t3e(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function n3e(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function r3e(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function i3e(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,d=e[o].y;l>r!=d>r&&n<(c-a)*(r-l)/(d-l)+a&&(i=!i)}return i}function s3e(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),o3e(e)}function o3e(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var a3e=$V,l3e=jV,c3e=FV,u3e=zV,VV=BV;const d3e=a3e,f3e=l3e,h3e=c3e,WV=S.forwardRef(({className:t,sideOffset:e=4,...n},r)=>y.jsx(u3e,{children:y.jsx(VV,{ref:r,sideOffset:e,className:qe("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));WV.displayName=VV.displayName;const p3e="sidebar_state",g3e=60*60*24*7,m3e="16rem",y3e="18rem",v3e="3rem",b3e="b",qV=S.createContext(null);function C5(){const t=S.useContext(qV);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const GV=S.forwardRef(({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:i,children:s,...o},a)=>{const l=nke(),[c,d]=S.useState(!1),[u,f]=S.useState(t),h=e??u,p=S.useCallback(x=>{const w=typeof x=="function"?x(h):x;n?n(w):f(w),document.cookie=`${p3e}=${w}; path=/; max-age=${g3e}`},[n,h]),g=S.useCallback(()=>l?d(x=>!x):p(x=>!x),[l,p,d]);S.useEffect(()=>{const x=w=>{w.key===b3e&&(w.metaKey||w.ctrlKey)&&(w.preventDefault(),g())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[g]);const b=h?"expanded":"collapsed",v=S.useMemo(()=>({state:b,open:h,setOpen:p,isMobile:l,openMobile:c,setOpenMobile:d,toggleSidebar:g}),[b,h,p,l,c,d,g]);return y.jsx(qV.Provider,{value:v,children:y.jsx(d3e,{delayDuration:0,children:y.jsx("div",{style:{"--sidebar-width":m3e,"--sidebar-width-icon":v3e,...i},className:qe("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:a,...o,children:s})})})});GV.displayName="SidebarProvider";const KV=S.forwardRef(({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:i,...s},o)=>{const{isMobile:a,state:l,openMobile:c,setOpenMobile:d}=C5();return n==="none"?y.jsx("div",{className:qe("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...s,children:i}):a?y.jsx(rke,{open:c,onOpenChange:d,...s,children:y.jsx(gV,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":y3e},side:t,children:y.jsx("div",{className:"flex h-full w-full flex-col",children:i})})}):y.jsxs("div",{ref:o,className:"group peer hidden text-sidebar-foreground md:block","data-state":l,"data-collapsible":l==="collapsed"?n:"","data-variant":e,"data-side":t,children:[y.jsx("div",{className:qe("relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),y.jsx("div",{className:qe("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...s,children:y.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:i})})]})});KV.displayName="Sidebar";const JV=S.forwardRef(({className:t,onClick:e,...n},r)=>{const{toggleSidebar:i}=C5();return y.jsxs(Nt,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:qe("h-7 w-7",t),onClick:s=>{e==null||e(s),i()},...n,children:[y.jsx(koe,{}),y.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});JV.displayName="SidebarTrigger";const w3e=S.forwardRef(({className:t,...e},n)=>{const{toggleSidebar:r}=C5();return y.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:qe("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...e})});w3e.displayName="SidebarRail";const x3e=S.forwardRef(({className:t,...e},n)=>y.jsx("main",{ref:n,className:qe("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...e}));x3e.displayName="SidebarInset";const S3e=S.forwardRef(({className:t,...e},n)=>y.jsx(qf,{ref:n,"data-sidebar":"input",className:qe("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...e}));S3e.displayName="SidebarInput";const k3e=S.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,"data-sidebar":"header",className:qe("flex flex-col gap-2 p-2",t),...e}));k3e.displayName="SidebarHeader";const C3e=S.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,"data-sidebar":"footer",className:qe("flex flex-col gap-2 p-2",t),...e}));C3e.displayName="SidebarFooter";const _3e=S.forwardRef(({className:t,...e},n)=>y.jsx(lf,{ref:n,"data-sidebar":"separator",className:qe("mx-2 w-auto bg-sidebar-border",t),...e}));_3e.displayName="SidebarSeparator";const A3e=S.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,"data-sidebar":"content",className:qe("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e}));A3e.displayName="SidebarContent";const E3e=S.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,"data-sidebar":"group",className:qe("relative flex w-full min-w-0 flex-col p-2",t),...e}));E3e.displayName="SidebarGroup";const P3e=S.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const i=e?_o:"div";return y.jsx(i,{ref:r,"data-sidebar":"group-label",className:qe("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})});P3e.displayName="SidebarGroupLabel";const T3e=S.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const i=e?_o:"button";return y.jsx(i,{ref:r,"data-sidebar":"group-action",className:qe("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...n})});T3e.displayName="SidebarGroupAction";const N3e=S.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,"data-sidebar":"group-content",className:qe("w-full text-sm",t),...e}));N3e.displayName="SidebarGroupContent";const M3e=S.forwardRef(({className:t,...e},n)=>y.jsx("ul",{ref:n,"data-sidebar":"menu",className:qe("flex w-full min-w-0 flex-col gap-1",t),...e}));M3e.displayName="SidebarMenu";const O3e=S.forwardRef(({className:t,...e},n)=>y.jsx("li",{ref:n,"data-sidebar":"menu-item",className:qe("group/menu-item relative",t),...e}));O3e.displayName="SidebarMenuItem";const R3e=Cy("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),L3e=S.forwardRef(({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:i,className:s,...o},a)=>{const l=t?_o:"button",{isMobile:c,state:d}=C5(),u=y.jsx(l,{ref:a,"data-sidebar":"menu-button","data-size":r,"data-active":e,className:qe(R3e({variant:n,size:r}),s),...o});return i?(typeof i=="string"&&(i={children:i}),y.jsxs(f3e,{children:[y.jsx(h3e,{asChild:!0,children:u}),y.jsx(WV,{side:"right",align:"center",hidden:d!=="collapsed"||c,...i})]})):u});L3e.displayName="SidebarMenuButton";const D3e=S.forwardRef(({className:t,asChild:e=!1,showOnHover:n=!1,...r},i)=>{const s=e?_o:"button";return y.jsx(s,{ref:i,"data-sidebar":"menu-action",className:qe("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...r})});D3e.displayName="SidebarMenuAction";const I3e=S.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:qe("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...e}));I3e.displayName="SidebarMenuBadge";const $3e=S.forwardRef(({className:t,showIcon:e=!1,...n},r)=>{const i=S.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return y.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:qe("flex h-8 items-center gap-2 rounded-md px-2",t),...n,children:[e&&y.jsx(wO,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),y.jsx(wO,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":i}})]})});$3e.displayName="SidebarMenuSkeleton";const j3e=S.forwardRef(({className:t,...e},n)=>y.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:qe("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...e}));j3e.displayName="SidebarMenuSub";const F3e=S.forwardRef(({...t},e)=>y.jsx("li",{ref:e,...t}));F3e.displayName="SidebarMenuSubItem";const z3e=S.forwardRef(({asChild:t=!1,size:e="md",isActive:n,className:r,...i},s)=>{const o=t?_o:"a";return y.jsx(o,{ref:s,"data-sidebar":"menu-sub-button","data-size":e,"data-active":n,className:qe("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...i})});z3e.displayName="SidebarMenuSubButton";var YV={exports:{}};(function(t,e){(function(n,r){r()})(zi,function(){function n(c,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,d,u){var f=new XMLHttpRequest;f.open("GET",c),f.responseType="blob",f.onload=function(){l(f.response,d,u)},f.onerror=function(){console.error("could not download file")},f.send()}function i(c){var d=new XMLHttpRequest;d.open("HEAD",c,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(d)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof zi=="object"&&zi.global===zi?zi:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,d,u){var f=o.URL||o.webkitURL,h=document.createElement("a");d=d||c.name||"download",h.download=d,h.rel="noopener",typeof c=="string"?(h.href=c,h.origin===location.origin?s(h):i(h.href)?r(c,d,u):s(h,h.target="_blank")):(h.href=f.createObjectURL(c),setTimeout(function(){f.revokeObjectURL(h.href)},4e4),setTimeout(function(){s(h)},0))}:"msSaveOrOpenBlob"in navigator?function(c,d,u){if(d=d||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,u),d);else if(i(c))r(c,d,u);else{var f=document.createElement("a");f.href=c,f.target="_blank",setTimeout(function(){s(f)})}}:function(c,d,u,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof c=="string")return r(c,d,u);var h=c.type==="application/octet-stream",p=/constructor/i.test(o.HTMLElement)||o.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||h&&p||a)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var w=b.result;w=g?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=w:location=w,f=null},b.readAsDataURL(c)}else{var v=o.URL||o.webkitURL,x=v.createObjectURL(c);f?f.location=x:location.href=x,f=null,setTimeout(function(){v.revokeObjectURL(x)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(YV);var B3e=YV.exports;const U3e=rh(B3e);var U6={};Object.defineProperty(U6,"__esModule",{value:!0});function CO(t){return!t||typeof t=="string"?t:t+""}class H3e{async svg2canvas(e,n,r){const i=await new Promise(a=>{var l=new Image;l.onload=function(){a(l)},l.src=e});var s=document.createElement("canvas");return s.width=n,s.height=r,s.getContext("2d").drawImage(i,0,0),s}toDataURL(e,n,r,i,s,o){var a=new XMLSerializer().serializeToString(e),l=document.documentMode;if(l){var c=/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi;c.test(a)&&(a=a.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink'))}o||(o={});var d="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(a);if(i==="image/svg+xml"||!i)return o.async?Promise.resolve(d):d;if(i==="image/jpeg"||i==="image/png"){if(!o.async)throw new Error("svgcanvas: options.async must be set to true if type is image/jpeg | image/png");return(async()=>{const u=await this.svg2canvas(d,n,r),f=u.toDataURL(i,s);return u.remove(),f})()}throw new Error("svgcanvas: Unknown type for toDataURL, please use image/jpeg | image/png | image/svg+xml.")}getImageData(e,n,r,i,s,o,a,l){if(l||(l={}),!l.async)throw new Error("svgcanvas: options.async must be set to true for getImageData");const c=this.toDataURL(e,n,r,"image/svg+xml");return(async()=>{const d=await this.svg2canvas(c,n,r),f=d.getContext("2d").getImageData(i,s,o,a);return d.remove(),f})()}}const ZV=new H3e;/*!!
 *  SVGCanvas v2.0.3
 *  Draw on SVG using Canvas's 2D Context API.
 *
 *  Licensed under the MIT license:
 *  http://www.opensource.org/licenses/mit-license.php
 *
 *  Author:
 *  Kerry Liu
 *  Zeno Zeng
 *
 *  Copyright (c) 2014 Gliffy Inc.
 *  Copyright (c) 2021 Zeno Zeng
 */var XV=function(){var t,e,n,r,i;function s(u,f){var h=Object.keys(f),p;for(p=0;p<h.length;p++)u=u.replace(new RegExp("\\{"+h[p]+"\\}","gi"),f[h[p]]);return u}function o(u){var f,h,p;if(!u)throw new Error("cannot create a random attribute name for an undefined object");f="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",h="";do for(h="",p=0;p<12;p++)h+=f[Math.floor(Math.random()*f.length)];while(u[h]);return h}function a(u,f){var h,p,g={},b;for(u=u.split(","),f=f||10,h=0;h<u.length;h+=2)p="&"+u[h+1]+";",b=parseInt(u[h],f),g[p]="&#"+b+";";return g["\\xa0"]="&#160;",g}function l(u){var f={left:"start",right:"end",center:"middle",start:"start",end:"end"};return f[u]||f.start}function c(u){var f={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return f[u]||f.alphabetic}i=a("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),t={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},n=function(u,f){this.__root=u,this.__ctx=f},n.prototype.addColorStop=function(u,f){var h=this.__ctx.__createElement("stop"),p,g;h.setAttribute("offset",u),CO(f).indexOf("rgba")!==-1?(p=/rgba\(\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,g=p.exec(f),h.setAttribute("stop-color",s("rgb({r},{g},{b})",{r:g[1],g:g[2],b:g[3]})),h.setAttribute("stop-opacity",g[4])):h.setAttribute("stop-color",CO(f)),this.__root.appendChild(h)},r=function(u,f){this.__root=u,this.__ctx=f},e=function(u){var f={width:500,height:500,enableMirroring:!1},h;if(arguments.length>1?(h=f,h.width=arguments[0],h.height=arguments[1]):u?h=u:h=f,!(this instanceof e))return new e(h);this.width=h.width||f.width,this.height=h.height||f.height,this.enableMirroring=h.enableMirroring!==void 0?h.enableMirroring:f.enableMirroring,this.canvas=this,this.__document=h.document||document,h.ctx?this.__ctx=h.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__styleStack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement),this.resetTransform(),this.__options=h,this.__id=Math.random().toString(16).substring(2,8),this.__debug("new",u)},e.prototype.__debug=function(...u){this.__options.debug&&console.debug(`svgcanvas#${this.__id}:`,...u)},e.prototype.__createElement=function(u,f,h){typeof f>"u"&&(f={});var p=this.__document.createElementNS("http://www.w3.org/2000/svg",u),g=Object.keys(f),b,v;for(h&&(p.setAttribute("fill","none"),p.setAttribute("stroke","none")),b=0;b<g.length;b++)v=g[b],p.setAttribute(v,f[v]);return p},e.prototype.__setDefaultStyles=function(){var u=Object.keys(t),f,h;for(f=0;f<u.length;f++)h=u[f],this[h]=t[h].canvas},e.prototype.__applyStyleState=function(u){var f=Object.keys(u),h,p;for(h=0;h<f.length;h++)p=f[h],this[p]=u[p]},e.prototype.__getStyleState=function(){var u,f={},h=Object.keys(t),p;for(u=0;u<h.length;u++)p=h[u],f[p]=this[p];return f},e.prototype.__applyTransformation=function(u,f){const{a:h,b:p,c:g,d:b,e:v,f:x}=f||this.getTransform();u.setAttribute("transform",`matrix(${h} ${p} ${g} ${b} ${v} ${x})`)},e.prototype.__applyStyleToCurrentElement=function(u){var f=this.__currentElement,h=this.__currentElementsToStyle;h&&(f.setAttribute(u,""),f=h.element,h.children.forEach(function(R){R.setAttribute(u,"")}));var p=Object.keys(t),g,b,v,x,w,C,P,O;for(g=0;g<p.length;g++)if(b=t[p[g]],v=this[p[g]],b.apply){if(v instanceof r){if(v.__ctx)for(P=0;P<v.__ctx.__defs.childNodes.length;P++)O=v.__ctx.__defs.childNodes[P],C=O.getAttribute("id"),this.__ids[C]=C,this.__defs.appendChild(O);f.setAttribute(b.apply,s("url(#{id})",{id:v.__root.getAttribute("id")}))}else if(v instanceof n)f.setAttribute(b.apply,s("url(#{id})",{id:v.__root.getAttribute("id")}));else if(b.apply.indexOf(u)!==-1&&b.svg!==v)if((b.svgAttr==="stroke"||b.svgAttr==="fill")&&v.indexOf("rgba")!==-1){x=/rgba\(\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,w=x.exec(v),f.setAttribute(b.svgAttr,s("rgb({r},{g},{b})",{r:w[1],g:w[2],b:w[3]}));var T=w[4],M=this.globalAlpha;M!=null&&(T*=M),f.setAttribute(b.svgAttr+"-opacity",T)}else{var D=b.svgAttr;if(p[g]==="globalAlpha"){if(D=u+"-"+b.svgAttr,f.getAttribute(D))continue}else if(p[g]==="lineWidth"){var I=this.__getTransformScale();v=v*Math.max(I.x,I.y)}f.setAttribute(D,v)}}},e.prototype.__closestGroupOrSvg=function(u){return u=u||this.__currentElement,u.nodeName==="g"||u.nodeName==="svg"?u:this.__closestGroupOrSvg(u.parentNode)},e.prototype.getSerializedSvg=function(u){var f=new XMLSerializer().serializeToString(this.__root),h,p,g,b,v,x;if(x=/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi,x.test(f)&&(f=f.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),u)for(h=Object.keys(i),p=0;p<h.length;p++)g=h[p],b=i[g],v=new RegExp(g,"gi"),v.test(f)&&(f=f.replace(v,b));return f},e.prototype.getSvg=function(){return this.__root},e.prototype.save=function(){var u=this.__createElement("g"),f=this.__closestGroupOrSvg();this.__groupStack.push(f),f.appendChild(u),this.__currentElement=u;const h=this.__getStyleState();this.__debug("save style",h),this.__styleStack.push(h),this.__transformMatrixStack||(this.__transformMatrixStack=[]),this.__transformMatrixStack.push(this.getTransform())},e.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var u=this.__styleStack.pop();this.__debug("restore style",u),this.__applyStyleState(u),this.__transformMatrixStack&&this.__transformMatrixStack.length>0&&this.setTransform(this.__transformMatrixStack.pop())},e.prototype.beginPath=function(){var u,f;this.__currentDefaultPath="",this.__currentPosition={},u=this.__createElement("path",{},!0),f=this.__closestGroupOrSvg(),f.appendChild(u),this.__currentElement=u},e.prototype.__applyCurrentDefaultPath=function(){var u=this.__currentElement;u.nodeName==="path"?u.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",u.nodeName)},e.prototype.__addPathCommand=function(u){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=u},e.prototype.moveTo=function(u,f){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:u,y:f},this.__addPathCommand(s("M {x} {y}",{x:this.__matrixTransform(u,f).x,y:this.__matrixTransform(u,f).y}))},e.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},e.prototype.lineTo=function(u,f){this.__currentPosition={x:u,y:f},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(s("L {x} {y}",{x:this.__matrixTransform(u,f).x,y:this.__matrixTransform(u,f).y})):this.__addPathCommand(s("M {x} {y}",{x:this.__matrixTransform(u,f).x,y:this.__matrixTransform(u,f).y}))},e.prototype.bezierCurveTo=function(u,f,h,p,g,b){this.__currentPosition={x:g,y:b},this.__addPathCommand(s("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:this.__matrixTransform(u,f).x,cp1y:this.__matrixTransform(u,f).y,cp2x:this.__matrixTransform(h,p).x,cp2y:this.__matrixTransform(h,p).y,x:this.__matrixTransform(g,b).x,y:this.__matrixTransform(g,b).y}))},e.prototype.quadraticCurveTo=function(u,f,h,p){this.__currentPosition={x:h,y:p},this.__addPathCommand(s("Q {cpx} {cpy} {x} {y}",{cpx:this.__matrixTransform(u,f).x,cpy:this.__matrixTransform(u,f).y,x:this.__matrixTransform(h,p).x,y:this.__matrixTransform(h,p).y}))};var d=function(u){var f=Math.sqrt(u[0]*u[0]+u[1]*u[1]);return[u[0]/f,u[1]/f]};return e.prototype.arcTo=function(u,f,h,p,g){var b=this.__currentPosition&&this.__currentPosition.x,v=this.__currentPosition&&this.__currentPosition.y;if(!(typeof b>"u"||typeof v>"u")){if(g<0)throw new Error("IndexSizeError: The radius provided ("+g+") is negative.");if(b===u&&v===f||u===h&&f===p||g===0){this.lineTo(u,f);return}var x=d([b-u,v-f]),w=d([h-u,p-f]);if(x[0]*w[1]===x[1]*w[0]){this.lineTo(u,f);return}var C=x[0]*w[0]+x[1]*w[1],P=Math.acos(Math.abs(C)),O=d([x[0]+w[0],x[1]+w[1]]),T=g/Math.sin(P/2),M=u+T*O[0],D=f+T*O[1],I=[-x[1],x[0]],R=[w[1],-w[0]],$=function(ee){var ce=ee[0],le=ee[1];return le>=0?Math.acos(ce):-Math.acos(ce)},H=$(I),z=$(R);this.lineTo(M+I[0]*g,D+I[1]*g),this.arc(M,D,g,H,z)}},e.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},e.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},e.prototype.rect=function(u,f,h,p){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(u,f),this.lineTo(u+h,f),this.lineTo(u+h,f+p),this.lineTo(u,f+p),this.lineTo(u,f),this.closePath()},e.prototype.fillRect=function(u,f,h,p){let{a:g,b,c:v,d:x,e:w,f:C}=this.getTransform();JSON.stringify([g,b,v,x,w,C])===JSON.stringify([1,0,0,1,0,0])&&u===0&&f===0&&h===this.width&&p===this.height&&this.__clearCanvas();var P,O;P=this.__createElement("rect",{x:u,y:f,width:h,height:p},!0),O=this.__closestGroupOrSvg(),O.appendChild(P),this.__currentElement=P,this.__applyTransformation(P),this.__applyStyleToCurrentElement("fill")},e.prototype.strokeRect=function(u,f,h,p){var g,b;g=this.__createElement("rect",{x:u,y:f,width:h,height:p},!0),b=this.__closestGroupOrSvg(),b.appendChild(g),this.__currentElement=g,this.__applyTransformation(g),this.__applyStyleToCurrentElement("stroke")},e.prototype.__clearCanvas=function(){var u=this.__root.childNodes[1];this.__root.removeChild(u),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement),this.__groupStack=[]},e.prototype.clearRect=function(u,f,h,p){let{a:g,b,c:v,d:x,e:w,f:C}=this.getTransform();if(JSON.stringify([g,b,v,x,w,C])===JSON.stringify([1,0,0,1,0,0])&&u===0&&f===0&&h===this.width&&p===this.height){this.__clearCanvas();return}var P,O=this.__closestGroupOrSvg();P=this.__createElement("rect",{x:u,y:f,width:h,height:p,fill:"#FFFFFF"},!0),this.__applyTransformation(P),O.appendChild(P)},e.prototype.createLinearGradient=function(u,f,h,p){var g=this.__createElement("linearGradient",{id:o(this.__ids),x1:u+"px",x2:h+"px",y1:f+"px",y2:p+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(g),new n(g,this)},e.prototype.createRadialGradient=function(u,f,h,p,g,b){var v=this.__createElement("radialGradient",{id:o(this.__ids),cx:p+"px",cy:g+"px",r:b+"px",fx:u+"px",fy:f+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(v),new n(v,this)},e.prototype.__applyText=function(u,f,h,p){var g=document.createElement("span");g.setAttribute("style","font:"+this.font);var b=g.style,v=this.__closestGroupOrSvg(),x=this.__createElement("text",{"font-family":b.fontFamily,"font-size":b.fontSize,"font-style":b.fontStyle,"font-weight":b.fontWeight,"text-decoration":this.__fontUnderline,x:f,y:h,"text-anchor":l(this.textAlign),"dominant-baseline":c(this.textBaseline)},!0);if(x.appendChild(this.__document.createTextNode(u)),this.__currentElement=x,this.__applyTransformation(x),this.__applyStyleToCurrentElement(p),this.__fontHref){var w=this.__createElement("a");w.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.__fontHref),w.appendChild(x),x=w}v.appendChild(x)},e.prototype.fillText=function(u,f,h){this.__applyText(u,f,h,"fill")},e.prototype.strokeText=function(u,f,h){this.__applyText(u,f,h,"stroke")},e.prototype.measureText=function(u){return this.__ctx.font=this.font,this.__ctx.measureText(u)},e.prototype.arc=function(u,f,h,p,g,b){if(p!==g){p=p%(2*Math.PI),g=g%(2*Math.PI),p===g&&(g=(g+2*Math.PI-.001*(b?-1:1))%(2*Math.PI));var v=u+h*Math.cos(g),x=f+h*Math.sin(g),w=u+h*Math.cos(p),C=f+h*Math.sin(p),P=b?0:1,O=0,T=g-p;T<0&&(T+=2*Math.PI),b?O=T>Math.PI?0:1:O=T>Math.PI?1:0;var M=Math.hypot(this.__transformMatrix.a,this.__transformMatrix.b),D=Math.hypot(this.__transformMatrix.c,this.__transformMatrix.d);this.lineTo(w,C),this.__addPathCommand(s("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:h*M,ry:h*D,xAxisRotation:0,largeArcFlag:O,sweepFlag:P,endX:this.__matrixTransform(v,x).x,endY:this.__matrixTransform(v,x).y})),this.__currentPosition={x:v,y:x}}},e.prototype.ellipse=function(u,f,h,p,g,b,v,x){if(b!==v){var w=this.__matrixTransform(u,f);u=w.x,f=w.y;var C=this.__getTransformScale();h=h*C.x,p=p*C.y,g=g+this.__getTransformRotation(),b=b%(2*Math.PI),v=v%(2*Math.PI),b===v&&(v=(v+2*Math.PI-.001*(x?-1:1))%(2*Math.PI));var P=u+Math.cos(-g)*h*Math.cos(v)+Math.sin(-g)*p*Math.sin(v),O=f-Math.sin(-g)*h*Math.cos(v)+Math.cos(-g)*p*Math.sin(v),T=u+Math.cos(-g)*h*Math.cos(b)+Math.sin(-g)*p*Math.sin(b),M=f-Math.sin(-g)*h*Math.cos(b)+Math.cos(-g)*p*Math.sin(b),D=x?0:1,I=0,R=v-b;R<0&&(R+=2*Math.PI),x?I=R>Math.PI?0:1:I=R>Math.PI?1:0;var $=this.__transformMatrix;this.resetTransform(),this.lineTo(T,M),this.__transformMatrix=$,this.__addPathCommand(s("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:h,ry:p,xAxisRotation:g*(180/Math.PI),largeArcFlag:I,sweepFlag:D,endX:P,endY:O})),this.__currentPosition={x:P,y:O}}},e.prototype.clip=function(){var u=this.__closestGroupOrSvg(),f=this.__createElement("clipPath"),h=o(this.__ids),p=this.__createElement("g");this.__applyCurrentDefaultPath(),u.removeChild(this.__currentElement),f.setAttribute("id",h),f.appendChild(this.__currentElement),this.__defs.appendChild(f),u.setAttribute("clip-path",s("url(#{id})",{id:h})),u.appendChild(p),this.__currentElement=p},e.prototype.drawImage=function(){var u=Array.prototype.slice.call(arguments),f=u[0],h,p,g,b,v=0,x=0,w,C,P,O,T,M,D,I,R,$;if(u.length===3)h=u[1],p=u[2],w=f.width,C=f.height,g=w,b=C;else if(u.length===5)h=u[1],p=u[2],g=u[3],b=u[4],w=f.width,C=f.height;else if(u.length===9)v=u[1],x=u[2],w=u[3],C=u[4],h=u[5],p=u[6],g=u[7],b=u[8];else throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);P=this.__closestGroupOrSvg();const H=this.getTransform().translate(h,p);if(f instanceof e){if(O=f.getSvg().cloneNode(!0),O.childNodes&&O.childNodes.length>1){for(T=O.childNodes[0];T.childNodes.length;)$=T.childNodes[0].getAttribute("id"),this.__ids[$]=$,this.__defs.appendChild(T.childNodes[0]);M=O.childNodes[1],M&&(this.__applyTransformation(M,H),P.appendChild(M))}}else(f.nodeName==="CANVAS"||f.nodeName==="IMG")&&(D=this.__createElement("image"),D.setAttribute("width",g),D.setAttribute("height",b),D.setAttribute("preserveAspectRatio","none"),(v||x||w!==f.width||C!==f.height)&&(I=this.__document.createElement("canvas"),I.width=g,I.height=b,R=I.getContext("2d"),R.drawImage(f,v,x,w,C,0,0,g,b),f=I),this.__applyTransformation(D,H),D.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f.nodeName==="CANVAS"?f.toDataURL():f.getAttribute("src")),P.appendChild(D))},e.prototype.createPattern=function(u,f){var h=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),p=o(this.__ids),g;return h.setAttribute("id",p),h.setAttribute("width",u.width),h.setAttribute("height",u.height),h.setAttribute("patternUnits","userSpaceOnUse"),u.nodeName==="CANVAS"||u.nodeName==="IMG"?(g=this.__document.createElementNS("http://www.w3.org/2000/svg","image"),g.setAttribute("width",u.width),g.setAttribute("height",u.height),g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u.nodeName==="CANVAS"?u.toDataURL():u.getAttribute("src")),h.appendChild(g),this.__defs.appendChild(h)):u instanceof e&&(h.appendChild(u.__root.childNodes[1]),this.__defs.appendChild(h)),new r(h,this)},e.prototype.setLineDash=function(u){u&&u.length>0?this.lineDash=u.join(","):this.lineDash=null},e.prototype.setTransform=function(u,f,h,p,g,b){u instanceof DOMMatrix?this.__transformMatrix=new DOMMatrix([u.a,u.b,u.c,u.d,u.e,u.f]):this.__transformMatrix=new DOMMatrix([u,f,h,p,g,b])},e.prototype.getTransform=function(){let{a:u,b:f,c:h,d:p,e:g,f:b}=this.__transformMatrix;return new DOMMatrix([u,f,h,p,g,b])},e.prototype.resetTransform=function(){this.setTransform(1,0,0,1,0,0)},e.prototype.scale=function(u,f){if(f===void 0&&(f=u),isNaN(u)||isNaN(f)||!isFinite(u)||!isFinite(f))return;let h=this.getTransform().scale(u,f);this.setTransform(h)},e.prototype.rotate=function(u){let f=this.getTransform().multiply(new DOMMatrix([Math.cos(u),Math.sin(u),-Math.sin(u),Math.cos(u),0,0]));this.setTransform(f)},e.prototype.translate=function(u,f){const h=this.getTransform().translate(u,f);this.setTransform(h)},e.prototype.transform=function(u,f,h,p,g,b){const v=this.getTransform().multiply(new DOMMatrix([u,f,h,p,g,b]));this.setTransform(v)},e.prototype.__matrixTransform=function(u,f){return new DOMPoint(u,f).matrixTransform(this.__transformMatrix)},e.prototype.__getTransformScale=function(){return{x:Math.hypot(this.__transformMatrix.a,this.__transformMatrix.b),y:Math.hypot(this.__transformMatrix.c,this.__transformMatrix.d)}},e.prototype.__getTransformRotation=function(){return Math.atan2(this.__transformMatrix.b,this.__transformMatrix.a)},e.prototype.getImageData=function(u,f,h,p,g){return ZV.getImageData(this.getSvg(),this.width,this.height,u,f,h,p,g)},e.prototype.drawFocusRing=function(){},e.prototype.createImageData=function(){},e.prototype.putImageData=function(){},e.prototype.globalCompositeOperation=function(){},e}();function Od(t){this.ctx=new XV(t),this.svg=this.ctx.__root;var e=this.svg,n=this,r=document.createElement("div");r.style.display="inline-block",r.appendChild(e),this.wrapper=r,Object.defineProperty(this,"className",{get:function(){return r.getAttribute("class")||""},set:function(i){return r.setAttribute("class",i)}}),Object.defineProperty(this,"tagName",{get:function(){return"CANVAS"},set:function(){}}),["width","height"].forEach(function(i){Object.defineProperty(n,i,{get:function(){return e.getAttribute(i)|0},set:function(s){if(!(isNaN(s)||typeof s>"u"))return n.ctx[i]=s,e.setAttribute(i,s),r[i]=s}})}),["style","id"].forEach(function(i){Object.defineProperty(n,i,{get:function(){return r[i]},set:function(s){if(typeof s<"u")return r[i]=s}})}),["getBoundingClientRect"].forEach(function(i){n[i]=function(){return e[i]()}})}Od.prototype.getContext=function(t){if(t!=="2d")throw new Error("Unsupported type of context for SVGCanvas");return this.ctx};Od.prototype.toObjectURL=function(){var t=new XMLSerializer().serializeToString(this.svg),e=new Blob([t],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(e)};Od.prototype.toDataURL=function(t,e,n){return ZV.toDataURL(this.svg,this.width,this.height,t,e,n)};Od.prototype.addEventListener=function(){return this.svg.addEventListener.apply(this.svg,arguments)};Od.prototype.getElement=function(){return this.wrapper};Od.prototype.getAttribute=function(t){return this.wrapper.getAttribute(t)};Od.prototype.setAttribute=function(t,e){this.wrapper.setAttribute(t,e)};var V3e=U6.Context=XV;U6.Element=Od;var W3e=Object.defineProperty,_O=Object.getOwnPropertySymbols,q3e=Object.prototype.hasOwnProperty,G3e=Object.prototype.propertyIsEnumerable,AO=(t,e,n)=>e in t?W3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,QV=(t,e)=>{for(var n in e||(e={}))q3e.call(e,n)&&AO(t,n,e[n]);if(_O)for(var n of _O(e))G3e.call(e,n)&&AO(t,n,e[n]);return t},H6=(t,e,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(c){i(c)}},o=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())}),{saveAs:EO}=U3e,eW=8;function K3e(t,e,n,r){const{scale:i,dark:s,fillBackground:o,margin:a}=r,c=xl[s?"dark":"light"],d=e.getOrderedShapes(n),u=document.createElement("canvas"),f=new gy(u,i);let h=e.getViewport(f,d);h=mr.expandRect(h,a);const p=mr.width(h),g=mr.height(h);return f.origin=[-h[0][0],-h[0][1]],f.ratio=i,f.scale=1,f.colorVariables=c,u.width=p*f.ratio,u.height=g*f.ratio,u.style.width=p+"px",u.style.height=g+"px",o&&(f.context.fillStyle=f.resolveColor("$background"),f.context.fillRect(0,0,u.width,u.height)),e.update(f),e.draw(f,!1,d),e.update(t),u}function tW(t,e,n,r){return H6(this,null,function*(){const i=K3e(t,e,n,QV({scale:1,dark:!1,fillBackground:!0,format:"image/png",margin:eW},r));return new Promise(s=>{i.toBlob(o=>{s(o)},r.format)})})}function J3e(t,e,n,r,i){return H6(this,null,function*(){const{scale:s,dark:o,fillBackground:a,margin:l}=QV({scale:1,dark:!1,fillBackground:!0,margin:eW},r),d=xl[o?"dark":"light"],u=e.getOrderedShapes(n),f=mr.expandRect(e.getViewport(t,u),l),h=mr.width(f),p=mr.height(f),g=new V3e(h*s,p*s),b={getContext:O=>{if(O==="2d")return g}},v=new gy(b,1);v.origin=[-f[0][0],-f[0][1]],v.ratio=s,v.scale=1,v.colorVariables=d;const x=h*s,w=p*s;a&&(v.context.fillStyle=v.resolveColor("$background"),v.context.fillRect(0,0,x,w)),e.update(v),e.draw(v,!1,u),g.getSvg().getElementsByTagName("defs");const P=g.getSerializedSvg(!0);return e.update(t),P})}function S2(t,e,n,r,i,s){return H6(this,null,function*(){switch(i.format){case"image/png":case"image/jpeg":case"image/webp":{const o=yield tW(t,e,n,i);o&&EO(o,r);break}case"image/svg+xml":{const o=yield J3e(t,e,n,i);if(o){const a=new Blob([o],{type:"image/svg+xml"});EO(a,r)}break}}})}const Y3e="modulepreload",Z3e=function(t,e){return new URL(t,e).href},PO={},nA=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=Z3e(c,r),c in PO)return;PO[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(!!r)for(let p=o.length-1;p>=0;p--){const g=o[p];if(g.href===c&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Y3e,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function Ln(t){"@babel/helpers - typeof";return Ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(t)}var qi=Uint8Array,mo=Uint16Array,V6=Int32Array,_5=new qi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),A5=new qi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rA=new qi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nW=function(t,e){for(var n=new mo(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new V6(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},rW=nW(_5,2),iW=rW.b,iA=rW.r;iW[28]=258,iA[258]=28;var sW=nW(A5,0),X3e=sW.b,TO=sW.r,sA=new mo(32768);for(var sr=0;sr<32768;++sr){var hu=(sr&43690)>>1|(sr&21845)<<1;hu=(hu&52428)>>2|(hu&13107)<<2,hu=(hu&61680)>>4|(hu&3855)<<4,sA[sr]=((hu&65280)>>8|(hu&255)<<8)>>1}var ml=function(t,e,n){for(var r=t.length,i=0,s=new mo(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new mo(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new mo(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],d=e-t[i],u=o[t[i]-1]++<<d,f=u|(1<<d)-1;u<=f;++u)a[sA[u]>>l]=c}else for(a=new mo(r),i=0;i<r;++i)t[i]&&(a[i]=sA[o[t[i]-1]++]>>15-t[i]);return a},vd=new qi(288);for(var sr=0;sr<144;++sr)vd[sr]=8;for(var sr=144;sr<256;++sr)vd[sr]=9;for(var sr=256;sr<280;++sr)vd[sr]=7;for(var sr=280;sr<288;++sr)vd[sr]=8;var oy=new qi(32);for(var sr=0;sr<32;++sr)oy[sr]=5;var Q3e=ml(vd,9,0),eCe=ml(vd,9,1),tCe=ml(oy,5,0),nCe=ml(oy,5,1),i3=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},pa=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},s3=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},W6=function(t){return(t+7)/8|0},oW=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new qi(t.subarray(e,n))},rCe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],wa=function(t,e,n){var r=new Error(e||rCe[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,wa),!n)throw r;return r},iCe=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new qi(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new qi(i*3));var c=function(_e){var Te=n.length;if(_e>Te){var je=new qi(Math.max(Te*2,_e));je.set(n),n=je}},d=e.f||0,u=e.p||0,f=e.b||0,h=e.l,p=e.d,g=e.m,b=e.n,v=i*8;do{if(!h){d=pa(t,u,1);var x=pa(t,u+1,3);if(u+=3,x)if(x==1)h=eCe,p=nCe,g=9,b=5;else if(x==2){var O=pa(t,u,31)+257,T=pa(t,u+10,15)+4,M=O+pa(t,u+5,31)+1;u+=14;for(var D=new qi(M),I=new qi(19),R=0;R<T;++R)I[rA[R]]=pa(t,u+R*3,7);u+=T*3;for(var $=i3(I),H=(1<<$)-1,z=ml(I,$,1),R=0;R<M;){var ee=z[pa(t,u,H)];u+=ee&15;var w=ee>>4;if(w<16)D[R++]=w;else{var ce=0,le=0;for(w==16?(le=3+pa(t,u,3),u+=2,ce=D[R-1]):w==17?(le=3+pa(t,u,7),u+=3):w==18&&(le=11+pa(t,u,127),u+=7);le--;)D[R++]=ce}}var te=D.subarray(0,O),Z=D.subarray(O);g=i3(te),b=i3(Z),h=ml(te,g,1),p=ml(Z,b,1)}else wa(1);else{var w=W6(u)+4,C=t[w-4]|t[w-3]<<8,P=w+C;if(P>i){l&&wa(0);break}a&&c(f+C),n.set(t.subarray(w,P),f),e.b=f+=C,e.p=u=P*8,e.f=d;continue}if(u>v){l&&wa(0);break}}a&&c(f+131072);for(var de=(1<<g)-1,Ce=(1<<b)-1,F=u;;F=u){var ce=h[s3(t,u)&de],X=ce>>4;if(u+=ce&15,u>v){l&&wa(0);break}if(ce||wa(2),X<256)n[f++]=X;else if(X==256){F=u,h=null;break}else{var re=X-254;if(X>264){var R=X-257,ue=_5[R];re=pa(t,u,(1<<ue)-1)+iW[R],u+=ue}var he=p[s3(t,u)&Ce],fe=he>>4;he||wa(3),u+=he&15;var Z=X3e[fe];if(fe>3){var ue=A5[fe];Z+=s3(t,u)&(1<<ue)-1,u+=ue}if(u>v){l&&wa(0);break}a&&c(f+131072);var be=f+re;if(f<Z){var pe=s-Z,me=Math.min(Z,be);for(pe+f<0&&wa(3);f<me;++f)n[f]=r[pe+f]}for(;f<be;++f)n[f]=n[f-Z]}}e.l=h,e.p=F,e.b=f,e.f=d,h&&(d=1,e.m=g,e.d=p,e.n=b)}while(!d);return f!=n.length&&o?oW(n,0,f):n.subarray(0,f)},tc=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},e0=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},o3=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:lW,l:0};if(i==1){var o=new qi(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(P,O){return P.f-O.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,d=1,u=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=i-1;)a=n[n[c].f<n[u].f?c++:u++],l=n[c!=d&&n[c].f<n[u].f?c++:u++],n[d++]={s:-1,f:a.f+l.f,l:a,r:l};for(var f=s[0].s,r=1;r<i;++r)s[r].s>f&&(f=s[r].s);var h=new mo(f+1),p=oA(n[d-1],h,0);if(p>e){var r=0,g=0,b=p-e,v=1<<b;for(s.sort(function(O,T){return h[T.s]-h[O.s]||O.f-T.f});r<i;++r){var x=s[r].s;if(h[x]>e)g+=v-(1<<p-h[x]),h[x]=e;else break}for(g>>=b;g>0;){var w=s[r].s;h[w]<e?g-=1<<e-h[w]++-1:++r}for(;r>=0&&g;--r){var C=s[r].s;h[C]==e&&(--h[C],++g)}p=e}return{t:new qi(h),l:p}},oA=function(t,e,n){return t.s==-1?Math.max(oA(t.l,e,n+1),oA(t.r,e,n+1)):e[t.s]=n},NO=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new mo(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},t0=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},aW=function(t,e,n){var r=n.length,i=W6(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},MO=function(t,e,n,r,i,s,o,a,l,c,d){tc(e,d++,n),++i[256];for(var u=o3(i,15),f=u.t,h=u.l,p=o3(s,15),g=p.t,b=p.l,v=NO(f),x=v.c,w=v.n,C=NO(g),P=C.c,O=C.n,T=new mo(19),M=0;M<x.length;++M)++T[x[M]&31];for(var M=0;M<P.length;++M)++T[P[M]&31];for(var D=o3(T,7),I=D.t,R=D.l,$=19;$>4&&!I[rA[$-1]];--$);var H=c+5<<3,z=t0(i,vd)+t0(s,oy)+o,ee=t0(i,f)+t0(s,g)+o+14+3*$+t0(T,I)+2*T[16]+3*T[17]+7*T[18];if(l>=0&&H<=z&&H<=ee)return aW(e,d,t.subarray(l,l+c));var ce,le,te,Z;if(tc(e,d,1+(ee<z)),d+=2,ee<z){ce=ml(f,h,0),le=f,te=ml(g,b,0),Z=g;var de=ml(I,R,0);tc(e,d,w-257),tc(e,d+5,O-1),tc(e,d+10,$-4),d+=14;for(var M=0;M<$;++M)tc(e,d+3*M,I[rA[M]]);d+=3*$;for(var Ce=[x,P],F=0;F<2;++F)for(var X=Ce[F],M=0;M<X.length;++M){var re=X[M]&31;tc(e,d,de[re]),d+=I[re],re>15&&(tc(e,d,X[M]>>5&127),d+=X[M]>>12)}}else ce=Q3e,le=vd,te=tCe,Z=oy;for(var M=0;M<a;++M){var ue=r[M];if(ue>255){var re=ue>>18&31;e0(e,d,ce[re+257]),d+=le[re+257],re>7&&(tc(e,d,ue>>23&31),d+=_5[re]);var he=ue&31;e0(e,d,te[he]),d+=Z[he],he>3&&(e0(e,d,ue>>5&8191),d+=A5[he])}else e0(e,d,ce[ue]),d+=le[ue]}return e0(e,d,ce[256]),d+le[256]},sCe=new V6([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),lW=new qi(0),oCe=function(t,e,n,r,i,s){var o=s.z||t.length,a=new qi(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var u=sCe[e-1],f=u>>13,h=u&8191,p=(1<<n)-1,g=s.p||new mo(32768),b=s.h||new mo(p+1),v=Math.ceil(n/3),x=2*v,w=function(Qe){return(t[Qe]^t[Qe+1]<<v^t[Qe+2]<<x)&p},C=new V6(25e3),P=new mo(288),O=new mo(32),T=0,M=0,D=s.i||0,I=0,R=s.w||0,$=0;D+2<o;++D){var H=w(D),z=D&32767,ee=b[H];if(g[z]=ee,b[H]=z,R<=D){var ce=o-D;if((T>7e3||I>24576)&&(ce>423||!c)){d=MO(t,l,0,C,P,O,M,I,$,D-$,d),I=T=M=0,$=D;for(var le=0;le<286;++le)P[le]=0;for(var le=0;le<30;++le)O[le]=0}var te=2,Z=0,de=h,Ce=z-ee&32767;if(ce>2&&H==w(D-Ce))for(var F=Math.min(f,ce)-1,X=Math.min(32767,D),re=Math.min(258,ce);Ce<=X&&--de&&z!=ee;){if(t[D+te]==t[D+te-Ce]){for(var ue=0;ue<re&&t[D+ue]==t[D+ue-Ce];++ue);if(ue>te){if(te=ue,Z=Ce,ue>F)break;for(var he=Math.min(Ce,ue-2),fe=0,le=0;le<he;++le){var be=D-Ce+le&32767,pe=g[be],me=be-pe&32767;me>fe&&(fe=me,ee=be)}}}z=ee,ee=g[z],Ce+=z-ee&32767}if(Z){C[I++]=268435456|iA[te]<<18|TO[Z];var _e=iA[te]&31,Te=TO[Z]&31;M+=_5[_e]+A5[Te],++P[257+_e],++O[Te],R=D+te,++T}else C[I++]=t[D],++P[t[D]]}}for(D=Math.max(D,R);D<o;++D)C[I++]=t[D],++P[t[D]];d=MO(t,l,c,C,P,O,M,I,$,D-$,d),c||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=b,s.p=g,s.i=D,s.w=R)}else{for(var D=s.w||0;D<o+c;D+=65535){var je=D+65535;je>=o&&(l[d/8|0]=c,je=o),d=aW(l,d+1,t.subarray(D,je))}s.i=o}return oW(a,0,r+W6(d)+i)},cW=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},aCe=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new qi(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return oCe(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},uW=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},lCe=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=cW();i.p(e.dictionary),uW(t,2,i.d())}},cCe=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&wa(6,"invalid zlib data"),(t[1]>>5&1)==1&&wa(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function aA(t,e){e||(e={});var n=cW();n.p(t);var r=aCe(t,e,e.dictionary?6:2,4);return lCe(r,e),uW(r,r.length-4,n.d()),r}function uCe(t,e){return iCe(t.subarray(cCe(t),-4),{i:2},e,e)}var dCe=typeof TextDecoder<"u"&&new TextDecoder,fCe=0;try{dCe.decode(lW,{stream:!0}),fCe=1}catch{}var Lt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function a3(){Lt.console&&typeof Lt.console.log=="function"&&Lt.console.log.apply(Lt.console,arguments)}var qn={log:a3,warn:function(t){Lt.console&&(typeof Lt.console.warn=="function"?Lt.console.warn.apply(Lt.console,arguments):a3.call(null,arguments))},error:function(t){Lt.console&&(typeof Lt.console.error=="function"?Lt.console.error.apply(Lt.console,arguments):a3(t))}};function l3(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Zd(r.response,e,n)},r.onerror=function(){qn.error("could not download file")},r.send()}function OO(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function k2(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var X0,lA,Zd=Lt.saveAs||((typeof window>"u"?"undefined":Ln(window))!=="object"||window!==Lt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Lt.URL||Lt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?OO(i.href)?l3(t,e,n):k2(i,i.target="_blank"):k2(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){k2(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(OO(t))l3(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){k2(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Ln(s)!=="object"&&(qn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return l3(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(Lt.HTMLElement)||Lt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Ln(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},a.readAsDataURL(t)}else{var l=Lt.URL||Lt.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function dW(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function c3(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Ii(n,r,i,s,e[0],7,-680876936),s=Ii(s,n,r,i,e[1],12,-389564586),i=Ii(i,s,n,r,e[2],17,606105819),r=Ii(r,i,s,n,e[3],22,-1044525330),n=Ii(n,r,i,s,e[4],7,-176418897),s=Ii(s,n,r,i,e[5],12,1200080426),i=Ii(i,s,n,r,e[6],17,-1473231341),r=Ii(r,i,s,n,e[7],22,-45705983),n=Ii(n,r,i,s,e[8],7,1770035416),s=Ii(s,n,r,i,e[9],12,-1958414417),i=Ii(i,s,n,r,e[10],17,-42063),r=Ii(r,i,s,n,e[11],22,-1990404162),n=Ii(n,r,i,s,e[12],7,1804603682),s=Ii(s,n,r,i,e[13],12,-40341101),i=Ii(i,s,n,r,e[14],17,-1502002290),n=$i(n,r=Ii(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=$i(s,n,r,i,e[6],9,-1069501632),i=$i(i,s,n,r,e[11],14,643717713),r=$i(r,i,s,n,e[0],20,-373897302),n=$i(n,r,i,s,e[5],5,-701558691),s=$i(s,n,r,i,e[10],9,38016083),i=$i(i,s,n,r,e[15],14,-660478335),r=$i(r,i,s,n,e[4],20,-405537848),n=$i(n,r,i,s,e[9],5,568446438),s=$i(s,n,r,i,e[14],9,-1019803690),i=$i(i,s,n,r,e[3],14,-187363961),r=$i(r,i,s,n,e[8],20,1163531501),n=$i(n,r,i,s,e[13],5,-1444681467),s=$i(s,n,r,i,e[2],9,-51403784),i=$i(i,s,n,r,e[7],14,1735328473),n=ji(n,r=$i(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=ji(s,n,r,i,e[8],11,-2022574463),i=ji(i,s,n,r,e[11],16,1839030562),r=ji(r,i,s,n,e[14],23,-35309556),n=ji(n,r,i,s,e[1],4,-1530992060),s=ji(s,n,r,i,e[4],11,1272893353),i=ji(i,s,n,r,e[7],16,-155497632),r=ji(r,i,s,n,e[10],23,-1094730640),n=ji(n,r,i,s,e[13],4,681279174),s=ji(s,n,r,i,e[0],11,-358537222),i=ji(i,s,n,r,e[3],16,-722521979),r=ji(r,i,s,n,e[6],23,76029189),n=ji(n,r,i,s,e[9],4,-640364487),s=ji(s,n,r,i,e[12],11,-421815835),i=ji(i,s,n,r,e[15],16,530742520),n=Fi(n,r=ji(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Fi(s,n,r,i,e[7],10,1126891415),i=Fi(i,s,n,r,e[14],15,-1416354905),r=Fi(r,i,s,n,e[5],21,-57434055),n=Fi(n,r,i,s,e[12],6,1700485571),s=Fi(s,n,r,i,e[3],10,-1894986606),i=Fi(i,s,n,r,e[10],15,-1051523),r=Fi(r,i,s,n,e[1],21,-2054922799),n=Fi(n,r,i,s,e[8],6,1873313359),s=Fi(s,n,r,i,e[15],10,-30611744),i=Fi(i,s,n,r,e[6],15,-1560198380),r=Fi(r,i,s,n,e[13],21,1309151649),n=Fi(n,r,i,s,e[4],6,-145523070),s=Fi(s,n,r,i,e[11],10,-1120210379),i=Fi(i,s,n,r,e[2],15,718787259),r=Fi(r,i,s,n,e[9],21,-343485551),t[0]=Du(n,t[0]),t[1]=Du(r,t[1]),t[2]=Du(i,t[2]),t[3]=Du(s,t[3])}function E5(t,e,n,r,i,s){return e=Du(Du(e,t),Du(r,s)),Du(e<<i|e>>>32-i,n)}function Ii(t,e,n,r,i,s,o){return E5(e&n|~e&r,t,e,i,s,o)}function $i(t,e,n,r,i,s,o){return E5(e&r|n&~r,t,e,i,s,o)}function ji(t,e,n,r,i,s,o){return E5(e^n^r,t,e,i,s,o)}function Fi(t,e,n,r,i,s,o){return E5(n^(e|~r),t,e,i,s,o)}function fW(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)c3(r,hCe(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(c3(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,c3(r,i),r}function hCe(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}X0=Lt.atob.bind(Lt),lA=Lt.btoa.bind(Lt);var RO="0123456789abcdef".split("");function pCe(t){for(var e="",n=0;n<4;n++)e+=RO[t>>8*n+4&15]+RO[t>>8*n&15];return e}function gCe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function cA(t){return fW(t).map(gCe).join("")}var mCe=function(t){for(var e=0;e<t.length;e++)t[e]=pCe(t[e]);return t.join("")}(fW("hello"))!="5d41402abc4b2a76b9719d911017c592";function Du(t,e){if(mCe){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function uA(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var d=a[l];c=(c+d+o.charCodeAt(l))%256,a[l]=a[c],a[c]=d}n=t,r=a}else a=r;var u=e.length,f=0,h=0,p="";for(l=0;l<u;l++)h=(h+(d=a[f=(f+1)%256]))%256,a[f]=a[h],a[h]=d,o=a[(a[f]+a[h])%256],p+=String.fromCharCode(e.charCodeAt(l)^o);return p}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var LO={print:4,modify:8,copy:16,"annot-forms":32};function vp(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(LO.perm!==void 0)throw new Error("Invalid permission: "+a);i+=LO[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=cA(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=uA(this.encryptionKey,this.padding)}function bp(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function DO(t){if(Ln(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){Lt.console&&qn.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Xw(t){if(!(this instanceof Xw))return new Xw(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function hW(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function tf(t,e,n,r,i){if(!(this instanceof tf))return new tf(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,hW.call(this,r,i)}function $p(t,e,n,r,i){if(!(this instanceof $p))return new $p(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,hW.call(this,r,i)}function Tt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",d=null;Ln(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var u=t.putOnlyUsedFonts||!1,f={},h={internal:{},__private__:{}};h.__private__.PubSub=DO;var p="1.3",g=h.__private__.getPdfVersion=function(){return p};h.__private__.setPdfVersion=function(E){p=E};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return b};var v=h.__private__.getPageFormat=function(E){return b[E]};i=i||"a4";var x={COMPAT:"compat",ADVANCED:"advanced"},w=x.COMPAT;function C(){this.saveGraphicsState(),V(new At(Be,0,0,-Be,0,Zc()*Be).toString()+" cm"),this.setFontSize(this.getFontSize()/Be),c="n",w=x.ADVANCED}function P(){this.restoreGraphicsState(),c="S",w=x.COMPAT}var O=h.__private__.combineFontStyleAndFontWeight=function(E,U){if(E=="bold"&&U=="normal"||E=="bold"&&U==400||E=="normal"&&U=="italic"||E=="bold"&&U=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return U&&(E=U==400||U==="normal"?E==="italic"?"italic":"normal":U!=700&&U!=="bold"||E!=="normal"?(U==700?"bold":U)+""+E:"bold"),E};h.advancedAPI=function(E){var U=w===x.COMPAT;return U&&C.call(this),typeof E!="function"||(E(this),U&&P.call(this)),this},h.compatAPI=function(E){var U=w===x.ADVANCED;return U&&P.call(this),typeof E!="function"||(E(this),U&&C.call(this)),this},h.isAdvancedAPI=function(){return w===x.ADVANCED};var T,M=function(E){if(w!==x.ADVANCED)throw new Error(E+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},D=h.roundToPrecision=h.__private__.roundToPrecision=function(E,U){var ae=e||U;if(isNaN(E)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return E.toFixed(ae).replace(/0+$/,"")};T=h.hpf=h.__private__.hpf=typeof l=="number"?function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return D(E,l)}:l==="smart"?function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return D(E,E>-1&&E<1?16:5)}:function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return D(E,16)};var I=h.f2=h.__private__.f2=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.f2");return D(E,2)},R=h.__private__.f3=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.f3");return D(E,3)},$=h.scale=h.__private__.scale=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.scale");return w===x.COMPAT?E*Be:w===x.ADVANCED?E:void 0},H=function(E){return w===x.COMPAT?Zc()-E:w===x.ADVANCED?E:void 0},z=function(E){return $(H(E))};h.__private__.setPrecision=h.setPrecision=function(E){typeof parseInt(E,10)=="number"&&(e=parseInt(E,10))};var ee,ce="00000000000000000000000000000000",le=h.__private__.getFileId=function(){return ce},te=h.__private__.setFileId=function(E){return ce=E!==void 0&&/^[a-fA-F0-9]{32}$/.test(E)?E.toUpperCase():ce.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Oi=new vp(d.userPermissions,d.userPassword,d.ownerPassword,ce)),ce};h.setFileId=function(E){return te(E),this},h.getFileId=function(){return le()};var Z=h.__private__.convertDateToPDFDate=function(E){var U=E.getTimezoneOffset(),ae=U<0?"+":"-",ve=Math.floor(Math.abs(U/60)),Pe=Math.abs(U%60),ze=[ae,re(ve),"'",re(Pe),"'"].join("");return["D:",E.getFullYear(),re(E.getMonth()+1),re(E.getDate()),re(E.getHours()),re(E.getMinutes()),re(E.getSeconds()),ze].join("")},de=h.__private__.convertPDFDateToDate=function(E){var U=parseInt(E.substr(2,4),10),ae=parseInt(E.substr(6,2),10)-1,ve=parseInt(E.substr(8,2),10),Pe=parseInt(E.substr(10,2),10),ze=parseInt(E.substr(12,2),10),Je=parseInt(E.substr(14,2),10);return new Date(U,ae,ve,Pe,ze,Je,0)},Ce=h.__private__.setCreationDate=function(E){var U;if(E===void 0&&(E=new Date),E instanceof Date)U=Z(E);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(E))throw new Error("Invalid argument passed to jsPDF.setCreationDate");U=E}return ee=U},F=h.__private__.getCreationDate=function(E){var U=ee;return E==="jsDate"&&(U=de(ee)),U};h.setCreationDate=function(E){return Ce(E),this},h.getCreationDate=function(E){return F(E)};var X,re=h.__private__.padd2=function(E){return("0"+parseInt(E)).slice(-2)},ue=h.__private__.padd2Hex=function(E){return("00"+(E=E.toString())).substr(E.length)},he=0,fe=[],be=[],pe=0,me=[],_e=[],Te=!1,je=be,Qe=function(){he=0,pe=0,be=[],fe=[],me=[],er=Sr(),Ns=Sr()};h.__private__.setCustomOutputDestination=function(E){Te=!0,je=E};var ne=function(E){Te||(je=E)};h.__private__.resetCustomOutputDestination=function(){Te=!1,je=be};var V=h.__private__.out=function(E){return E=E.toString(),pe+=E.length+1,je.push(E),je},Re=h.__private__.write=function(E){return V(arguments.length===1?E.toString():Array.prototype.join.call(arguments," "))},Fe=h.__private__.getArrayBuffer=function(E){for(var U=E.length,ae=new ArrayBuffer(U),ve=new Uint8Array(ae);U--;)ve[U]=E.charCodeAt(U);return ae},K=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return K};var _=t.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(E){return _=w===x.ADVANCED?E/Be:E,this};var A,j=h.__private__.getFontSize=h.getFontSize=function(){return w===x.COMPAT?_:_*Be},oe=t.R2L||!1;h.__private__.setR2L=h.setR2L=function(E){return oe=E,this},h.__private__.getR2L=h.getR2L=function(){return oe};var ye,Ee=h.__private__.setZoomMode=function(E){var U=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(E))A=E;else if(isNaN(E)){if(U.indexOf(E)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+E+'" is not recognized.');A=E}else A=parseInt(E,10)};h.__private__.getZoomMode=function(){return A};var Ge,Ze=h.__private__.setPageMode=function(E){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(E)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+E+'" is not recognized.');ye=E};h.__private__.getPageMode=function(){return ye};var bt=h.__private__.setLayoutMode=function(E){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(E)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+E+'" is not recognized.');Ge=E};h.__private__.getLayoutMode=function(){return Ge},h.__private__.setDisplayMode=h.setDisplayMode=function(E,U,ae){return Ee(E),bt(U),Ze(ae),this};var tt={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(E){if(Object.keys(tt).indexOf(E)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return tt[E]},h.__private__.getDocumentProperties=function(){return tt},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(E){for(var U in tt)tt.hasOwnProperty(U)&&E[U]&&(tt[U]=E[U]);return this},h.__private__.setDocumentProperty=function(E,U){if(Object.keys(tt).indexOf(E)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return tt[E]=U};var rt,Be,In,Ht,Tr,nt={},ct={},ln=[],dt={},Cn={},Ft={},Kn={},dr=null,wn=0,Pt=[],Qt=new DO(h),Ni=t.hotfixes||[],xr={},To={},Ps=[],At=function E(U,ae,ve,Pe,ze,Je){if(!(this instanceof E))return new E(U,ae,ve,Pe,ze,Je);isNaN(U)&&(U=1),isNaN(ae)&&(ae=0),isNaN(ve)&&(ve=0),isNaN(Pe)&&(Pe=1),isNaN(ze)&&(ze=0),isNaN(Je)&&(Je=0),this._matrix=[U,ae,ve,Pe,ze,Je]};Object.defineProperty(At.prototype,"sx",{get:function(){return this._matrix[0]},set:function(E){this._matrix[0]=E}}),Object.defineProperty(At.prototype,"shy",{get:function(){return this._matrix[1]},set:function(E){this._matrix[1]=E}}),Object.defineProperty(At.prototype,"shx",{get:function(){return this._matrix[2]},set:function(E){this._matrix[2]=E}}),Object.defineProperty(At.prototype,"sy",{get:function(){return this._matrix[3]},set:function(E){this._matrix[3]=E}}),Object.defineProperty(At.prototype,"tx",{get:function(){return this._matrix[4]},set:function(E){this._matrix[4]=E}}),Object.defineProperty(At.prototype,"ty",{get:function(){return this._matrix[5]},set:function(E){this._matrix[5]=E}}),Object.defineProperty(At.prototype,"a",{get:function(){return this._matrix[0]},set:function(E){this._matrix[0]=E}}),Object.defineProperty(At.prototype,"b",{get:function(){return this._matrix[1]},set:function(E){this._matrix[1]=E}}),Object.defineProperty(At.prototype,"c",{get:function(){return this._matrix[2]},set:function(E){this._matrix[2]=E}}),Object.defineProperty(At.prototype,"d",{get:function(){return this._matrix[3]},set:function(E){this._matrix[3]=E}}),Object.defineProperty(At.prototype,"e",{get:function(){return this._matrix[4]},set:function(E){this._matrix[4]=E}}),Object.defineProperty(At.prototype,"f",{get:function(){return this._matrix[5]},set:function(E){this._matrix[5]=E}}),Object.defineProperty(At.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(At.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(At.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(At.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),At.prototype.join=function(E){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(E)},At.prototype.multiply=function(E){var U=E.sx*this.sx+E.shy*this.shx,ae=E.sx*this.shy+E.shy*this.sy,ve=E.shx*this.sx+E.sy*this.shx,Pe=E.shx*this.shy+E.sy*this.sy,ze=E.tx*this.sx+E.ty*this.shx+this.tx,Je=E.tx*this.shy+E.ty*this.sy+this.ty;return new At(U,ae,ve,Pe,ze,Je)},At.prototype.decompose=function(){var E=this.sx,U=this.shy,ae=this.shx,ve=this.sy,Pe=this.tx,ze=this.ty,Je=Math.sqrt(E*E+U*U),ut=(E/=Je)*ae+(U/=Je)*ve;ae-=E*ut,ve-=U*ut;var wt=Math.sqrt(ae*ae+ve*ve);return ut/=wt,E*(ve/=wt)<U*(ae/=wt)&&(E=-E,U=-U,ut=-ut,Je=-Je),{scale:new At(Je,0,0,wt,0,0),translate:new At(1,0,0,1,Pe,ze),rotate:new At(E,U,-U,E,0,0),skew:new At(1,0,ut,1,0,0)}},At.prototype.toString=function(E){return this.join(" ")},At.prototype.inversed=function(){var E=this.sx,U=this.shy,ae=this.shx,ve=this.sy,Pe=this.tx,ze=this.ty,Je=1/(E*ve-U*ae),ut=ve*Je,wt=-U*Je,Kt=-ae*Je,Vt=E*Je;return new At(ut,wt,Kt,Vt,-ut*Pe-Kt*ze,-wt*Pe-Vt*ze)},At.prototype.applyToPoint=function(E){var U=E.x*this.sx+E.y*this.shx+this.tx,ae=E.x*this.shy+E.y*this.sy+this.ty;return new Rh(U,ae)},At.prototype.applyToRectangle=function(E){var U=this.applyToPoint(E),ae=this.applyToPoint(new Rh(E.x+E.w,E.y+E.h));return new mm(U.x,U.y,ae.x-U.x,ae.y-U.y)},At.prototype.clone=function(){var E=this.sx,U=this.shy,ae=this.shx,ve=this.sy,Pe=this.tx,ze=this.ty;return new At(E,U,ae,ve,Pe,ze)},h.Matrix=At;var Qs=h.matrixMult=function(E,U){return U.multiply(E)},Ts=new At(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Ts;var Mi=function(E,U){if(!Cn[E]){var ae=(U instanceof tf?"Sh":"P")+(Object.keys(dt).length+1).toString(10);U.id=ae,Cn[E]=ae,dt[ae]=U,Qt.publish("addPattern",U)}};h.ShadingPattern=tf,h.TilingPattern=$p,h.addShadingPattern=function(E,U){return M("addShadingPattern()"),Mi(E,U),this},h.beginTilingPattern=function(E){M("beginTilingPattern()"),Xy(E.boundingBox[0],E.boundingBox[1],E.boundingBox[2]-E.boundingBox[0],E.boundingBox[3]-E.boundingBox[1],E.matrix)},h.endTilingPattern=function(E,U){M("endTilingPattern()"),U.stream=_e[X].join(`
`),Mi(E,U),Qt.publish("endTilingPattern",U),Ps.pop().restore()};var Nr=h.__private__.newObject=function(){var E=Sr();return ns(E,!0),E},Sr=h.__private__.newObjectDeferred=function(){return he++,fe[he]=function(){return pe},he},ns=function(E,U){return U=typeof U=="boolean"&&U,fe[E]=pe,U&&V(E+" 0 obj"),E},Ga=h.__private__.newAdditionalObject=function(){var E={objId:Sr(),content:""};return me.push(E),E},er=Sr(),Ns=Sr(),si=h.__private__.decodeColorString=function(E){var U=E.split(" ");if(U.length!==2||U[1]!=="g"&&U[1]!=="G")U.length===5&&(U[4]==="k"||U[4]==="K")&&(U=[(1-U[0])*(1-U[3]),(1-U[1])*(1-U[3]),(1-U[2])*(1-U[3]),"r"]);else{var ae=parseFloat(U[0]);U=[ae,ae,ae,"r"]}for(var ve="#",Pe=0;Pe<3;Pe++)ve+=("0"+Math.floor(255*parseFloat(U[Pe])).toString(16)).slice(-2);return ve},Ms=h.__private__.encodeColorString=function(E){var U;typeof E=="string"&&(E={ch1:E});var ae=E.ch1,ve=E.ch2,Pe=E.ch3,ze=E.ch4,Je=E.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var ut=new dW(ae);if(ut.ok)ae=ut.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var wt=parseInt(ae.substr(1),16);ae=wt>>16&255,ve=wt>>8&255,Pe=255&wt}if(ve===void 0||ze===void 0&&ae===ve&&ve===Pe)if(typeof ae=="string")U=ae+" "+Je[0];else switch(E.precision){case 2:U=I(ae/255)+" "+Je[0];break;case 3:default:U=R(ae/255)+" "+Je[0]}else if(ze===void 0||Ln(ze)==="object"){if(ze&&!isNaN(ze.a)&&ze.a===0)return U=["1.","1.","1.",Je[1]].join(" ");if(typeof ae=="string")U=[ae,ve,Pe,Je[1]].join(" ");else switch(E.precision){case 2:U=[I(ae/255),I(ve/255),I(Pe/255),Je[1]].join(" ");break;default:case 3:U=[R(ae/255),R(ve/255),R(Pe/255),Je[1]].join(" ")}}else if(typeof ae=="string")U=[ae,ve,Pe,ze,Je[2]].join(" ");else switch(E.precision){case 2:U=[I(ae),I(ve),I(Pe),I(ze),Je[2]].join(" ");break;case 3:default:U=[R(ae),R(ve),R(Pe),R(ze),Je[2]].join(" ")}return U},fn=h.__private__.getFilters=function(){return o},rs=h.__private__.putStream=function(E){var U=(E=E||{}).data||"",ae=E.filters||fn(),ve=E.alreadyAppliedFilters||[],Pe=E.addLength1||!1,ze=U.length,Je=E.objectId,ut=function(Ri){return Ri};if(d!==null&&Je===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(ut=Oi.encryptor(Je,0));var wt={};ae===!0&&(ae=["FlateEncode"]);var Kt=E.additionalKeyValues||[],Vt=(wt=Tt.API.processDataByFilters!==void 0?Tt.API.processDataByFilters(U,ae):{data:U,reverseChain:[]}).reverseChain+(Array.isArray(ve)?ve.join(" "):ve.toString());if(wt.data.length!==0&&(Kt.push({key:"Length",value:wt.data.length}),Pe===!0&&Kt.push({key:"Length1",value:ze})),Vt.length!=0)if(Vt.split("/").length-1==1)Kt.push({key:"Filter",value:Vt});else{Kt.push({key:"Filter",value:"["+Vt+"]"});for(var yn=0;yn<Kt.length;yn+=1)if(Kt[yn].key==="DecodeParms"){for(var fr=[],kr=0;kr<wt.reverseChain.split("/").length-1;kr+=1)fr.push("null");fr.push(Kt[yn].value),Kt[yn].value="["+fr.join(" ")+"]"}}V("<<");for(var Ur=0;Ur<Kt.length;Ur++)V("/"+Kt[Ur].key+" "+Kt[Ur].value);V(">>"),wt.data.length!==0&&(V("stream"),V(ut(wt.data)),V("endstream"))},eo=h.__private__.putPage=function(E){var U=E.number,ae=E.data,ve=E.objId,Pe=E.contentsObjId;ns(ve,!0),V("<</Type /Page"),V("/Parent "+E.rootDictionaryObjId+" 0 R"),V("/Resources "+E.resourceDictionaryObjId+" 0 R"),V("/MediaBox ["+parseFloat(T(E.mediaBox.bottomLeftX))+" "+parseFloat(T(E.mediaBox.bottomLeftY))+" "+T(E.mediaBox.topRightX)+" "+T(E.mediaBox.topRightY)+"]"),E.cropBox!==null&&V("/CropBox ["+T(E.cropBox.bottomLeftX)+" "+T(E.cropBox.bottomLeftY)+" "+T(E.cropBox.topRightX)+" "+T(E.cropBox.topRightY)+"]"),E.bleedBox!==null&&V("/BleedBox ["+T(E.bleedBox.bottomLeftX)+" "+T(E.bleedBox.bottomLeftY)+" "+T(E.bleedBox.topRightX)+" "+T(E.bleedBox.topRightY)+"]"),E.trimBox!==null&&V("/TrimBox ["+T(E.trimBox.bottomLeftX)+" "+T(E.trimBox.bottomLeftY)+" "+T(E.trimBox.topRightX)+" "+T(E.trimBox.topRightY)+"]"),E.artBox!==null&&V("/ArtBox ["+T(E.artBox.bottomLeftX)+" "+T(E.artBox.bottomLeftY)+" "+T(E.artBox.topRightX)+" "+T(E.artBox.topRightY)+"]"),typeof E.userUnit=="number"&&E.userUnit!==1&&V("/UserUnit "+E.userUnit),Qt.publish("putPage",{objId:ve,pageContext:Pt[U],pageNumber:U,page:ae}),V("/Contents "+Pe+" 0 R"),V(">>"),V("endobj");var ze=ae.join(`
`);return w===x.ADVANCED&&(ze+=`
Q`),ns(Pe,!0),rs({data:ze,filters:fn(),objectId:Pe}),V("endobj"),ve},zl=h.__private__.putPages=function(){var E,U,ae=[];for(E=1;E<=wn;E++)Pt[E].objId=Sr(),Pt[E].contentsObjId=Sr();for(E=1;E<=wn;E++)ae.push(eo({number:E,data:_e[E],objId:Pt[E].objId,contentsObjId:Pt[E].contentsObjId,mediaBox:Pt[E].mediaBox,cropBox:Pt[E].cropBox,bleedBox:Pt[E].bleedBox,trimBox:Pt[E].trimBox,artBox:Pt[E].artBox,userUnit:Pt[E].userUnit,rootDictionaryObjId:er,resourceDictionaryObjId:Ns}));ns(er,!0),V("<</Type /Pages");var ve="/Kids [";for(U=0;U<wn;U++)ve+=ae[U]+" 0 R ";V(ve+"]"),V("/Count "+wn),V(">>"),V("endobj"),Qt.publish("postPutPages")},Bl=function(E){Qt.publish("putFont",{font:E,out:V,newObject:Nr,putStream:rs}),E.isAlreadyPutted!==!0&&(E.objectNumber=Nr(),V("<<"),V("/Type /Font"),V("/BaseFont /"+bp(E.postScriptName)),V("/Subtype /Type1"),typeof E.encoding=="string"&&V("/Encoding /"+E.encoding),V("/FirstChar 32"),V("/LastChar 255"),V(">>"),V("endobj"))},Ka=function(){for(var E in nt)nt.hasOwnProperty(E)&&(u===!1||u===!0&&f.hasOwnProperty(E))&&Bl(nt[E])},Os=function(E){E.objectNumber=Nr();var U=[];U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Form"}),U.push({key:"BBox",value:"["+[T(E.x),T(E.y),T(E.x+E.width),T(E.y+E.height)].join(" ")+"]"}),U.push({key:"Matrix",value:"["+E.matrix.toString()+"]"});var ae=E.pages[1].join(`
`);rs({data:ae,additionalKeyValues:U,objectId:E.objectNumber}),V("endobj")},Gt=function(){for(var E in xr)xr.hasOwnProperty(E)&&Os(xr[E])},_h=function(E,U){var ae,ve=[],Pe=1/(U-1);for(ae=0;ae<1;ae+=Pe)ve.push(ae);if(ve.push(1),E[0].offset!=0){var ze={offset:0,color:E[0].color};E.unshift(ze)}if(E[E.length-1].offset!=1){var Je={offset:1,color:E[E.length-1].color};E.push(Je)}for(var ut="",wt=0,Kt=0;Kt<ve.length;Kt++){for(ae=ve[Kt];ae>E[wt+1].offset;)wt++;var Vt=E[wt].offset,yn=(ae-Vt)/(E[wt+1].offset-Vt),fr=E[wt].color,kr=E[wt+1].color;ut+=ue(Math.round((1-yn)*fr[0]+yn*kr[0]).toString(16))+ue(Math.round((1-yn)*fr[1]+yn*kr[1]).toString(16))+ue(Math.round((1-yn)*fr[2]+yn*kr[2]).toString(16))}return ut.trim()},qc=function(E,U){U||(U=21);var ae=Nr(),ve=_h(E.colors,U),Pe=[];Pe.push({key:"FunctionType",value:"0"}),Pe.push({key:"Domain",value:"[0.0 1.0]"}),Pe.push({key:"Size",value:"["+U+"]"}),Pe.push({key:"BitsPerSample",value:"8"}),Pe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rs({data:ve,additionalKeyValues:Pe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),V("endobj"),E.objectNumber=Nr(),V("<< /ShadingType "+E.type),V("/ColorSpace /DeviceRGB");var ze="/Coords ["+T(parseFloat(E.coords[0]))+" "+T(parseFloat(E.coords[1]))+" ";E.type===2?ze+=T(parseFloat(E.coords[2]))+" "+T(parseFloat(E.coords[3])):ze+=T(parseFloat(E.coords[2]))+" "+T(parseFloat(E.coords[3]))+" "+T(parseFloat(E.coords[4]))+" "+T(parseFloat(E.coords[5])),V(ze+="]"),E.matrix&&V("/Matrix ["+E.matrix.toString()+"]"),V("/Function "+ae+" 0 R"),V("/Extend [true true]"),V(">>"),V("endobj")},Ah=function(E,U){var ae=Sr(),ve=Nr();U.push({resourcesOid:ae,objectOid:ve}),E.objectNumber=ve;var Pe=[];Pe.push({key:"Type",value:"/Pattern"}),Pe.push({key:"PatternType",value:"1"}),Pe.push({key:"PaintType",value:"1"}),Pe.push({key:"TilingType",value:"1"}),Pe.push({key:"BBox",value:"["+E.boundingBox.map(T).join(" ")+"]"}),Pe.push({key:"XStep",value:T(E.xStep)}),Pe.push({key:"YStep",value:T(E.yStep)}),Pe.push({key:"Resources",value:ae+" 0 R"}),E.matrix&&Pe.push({key:"Matrix",value:"["+E.matrix.toString()+"]"}),rs({data:E.stream,additionalKeyValues:Pe,objectId:E.objectNumber}),V("endobj")},to=function(E){var U;for(U in dt)dt.hasOwnProperty(U)&&(dt[U]instanceof tf?qc(dt[U]):dt[U]instanceof $p&&Ah(dt[U],E))},W=function(E){for(var U in E.objectNumber=Nr(),V("<<"),E)switch(U){case"opacity":V("/ca "+I(E[U]));break;case"stroke-opacity":V("/CA "+I(E[U]))}V(">>"),V("endobj")},Y=function(){var E;for(E in Ft)Ft.hasOwnProperty(E)&&W(Ft[E])},ge=function(){for(var E in V("/XObject <<"),xr)xr.hasOwnProperty(E)&&xr[E].objectNumber>=0&&V("/"+E+" "+xr[E].objectNumber+" 0 R");Qt.publish("putXobjectDict"),V(">>")},ie=function(){Oi.oid=Nr(),V("<<"),V("/Filter /Standard"),V("/V "+Oi.v),V("/R "+Oi.r),V("/U <"+Oi.toHexString(Oi.U)+">"),V("/O <"+Oi.toHexString(Oi.O)+">"),V("/P "+Oi.P),V(">>"),V("endobj")},ke=function(){for(var E in V("/Font <<"),nt)nt.hasOwnProperty(E)&&(u===!1||u===!0&&f.hasOwnProperty(E))&&V("/"+E+" "+nt[E].objectNumber+" 0 R");V(">>")},Ke=function(){if(Object.keys(dt).length>0){for(var E in V("/Shading <<"),dt)dt.hasOwnProperty(E)&&dt[E]instanceof tf&&dt[E].objectNumber>=0&&V("/"+E+" "+dt[E].objectNumber+" 0 R");Qt.publish("putShadingPatternDict"),V(">>")}},no=function(E){if(Object.keys(dt).length>0){for(var U in V("/Pattern <<"),dt)dt.hasOwnProperty(U)&&dt[U]instanceof h.TilingPattern&&dt[U].objectNumber>=0&&dt[U].objectNumber<E&&V("/"+U+" "+dt[U].objectNumber+" 0 R");Qt.publish("putTilingPatternDict"),V(">>")}},Rd=function(){if(Object.keys(Ft).length>0){var E;for(E in V("/ExtGState <<"),Ft)Ft.hasOwnProperty(E)&&Ft[E].objectNumber>=0&&V("/"+E+" "+Ft[E].objectNumber+" 0 R");Qt.publish("putGStateDict"),V(">>")}},Jn=function(E){ns(E.resourcesOid,!0),V("<<"),V("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ke(),Ke(),no(E.objectOid),Rd(),ge(),V(">>"),V("endobj")},Gc=function(){var E=[];Ka(),Y(),Gt(),to(E),Qt.publish("putResources"),E.forEach(Jn),Jn({resourcesOid:Ns,objectOid:Number.MAX_SAFE_INTEGER}),Qt.publish("postPutResources")},Ul=function(){Qt.publish("putAdditionalObjects");for(var E=0;E<me.length;E++){var U=me[E];ns(U.objId,!0),V(U.content),V("endobj")}Qt.publish("postPutAdditionalObjects")},Kc=function(E){ct[E.fontName]=ct[E.fontName]||{},ct[E.fontName][E.fontStyle]=E.id},am=function(E,U,ae,ve,Pe){var ze={id:"F"+(Object.keys(nt).length+1).toString(10),postScriptName:E,fontName:U,fontStyle:ae,encoding:ve,isStandardFont:Pe||!1,metadata:{}};return Qt.publish("addFont",{font:ze,instance:this}),nt[ze.id]=ze,Kc(ze),ze.id},P5=function(E){for(var U=0,ae=K.length;U<ae;U++){var ve=am.call(this,E[U][0],E[U][1],E[U][2],K[U][3],!0);u===!1&&(f[ve]=!0);var Pe=E[U][0].split("-");Kc({id:ve,fontName:Pe[0],fontStyle:Pe[1]||""})}Qt.publish("addFonts",{fonts:nt,dictionary:ct})},oa=function(E){return E.foo=function(){try{return E.apply(this,arguments)}catch(ve){var U=ve.stack||"";~U.indexOf(" at ")&&(U=U.split(" at ")[1]);var ae="Error in function "+U.split(`
`)[0].split("<")[0]+": "+ve.message;if(!Lt.console)throw new Error(ae);Lt.console.error(ae,ve),Lt.alert&&alert(ae)}},E.foo.bar=E,E.foo},Eh=function(E,U){var ae,ve,Pe,ze,Je,ut,wt,Kt,Vt;if(Pe=(U=U||{}).sourceEncoding||"Unicode",Je=U.outputEncoding,(U.autoencode||Je)&&nt[rt].metadata&&nt[rt].metadata[Pe]&&nt[rt].metadata[Pe].encoding&&(ze=nt[rt].metadata[Pe].encoding,!Je&&nt[rt].encoding&&(Je=nt[rt].encoding),!Je&&ze.codePages&&(Je=ze.codePages[0]),typeof Je=="string"&&(Je=ze[Je]),Je)){for(wt=!1,ut=[],ae=0,ve=E.length;ae<ve;ae++)(Kt=Je[E.charCodeAt(ae)])?ut.push(String.fromCharCode(Kt)):ut.push(E[ae]),ut[ae].charCodeAt(0)>>8&&(wt=!0);E=ut.join("")}for(ae=E.length;wt===void 0&&ae!==0;)E.charCodeAt(ae-1)>>8&&(wt=!0),ae--;if(!wt)return E;for(ut=U.noBOM?[]:[254,255],ae=0,ve=E.length;ae<ve;ae++){if((Vt=(Kt=E.charCodeAt(ae))>>8)>>8)throw new Error("Character at position "+ae+" of string '"+E+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ut.push(Vt),ut.push(Kt-(Vt<<8))}return String.fromCharCode.apply(void 0,ut)},Rs=h.__private__.pdfEscape=h.pdfEscape=function(E,U){return Eh(E,U).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},lm=h.__private__.beginPage=function(E){_e[++wn]=[],Pt[wn]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(E[0]),topRightY:Number(E[1])}},By(wn),ne(_e[X])},zy=function(E,U){var ae,ve,Pe;switch(n=U||n,typeof E=="string"&&(ae=v(E.toLowerCase()),Array.isArray(ae)&&(ve=ae[0],Pe=ae[1])),Array.isArray(E)&&(ve=E[0]*Be,Pe=E[1]*Be),isNaN(ve)&&(ve=i[0],Pe=i[1]),(ve>14400||Pe>14400)&&(qn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ve=Math.min(14400,ve),Pe=Math.min(14400,Pe)),i=[ve,Pe],n.substr(0,1)){case"l":Pe>ve&&(i=[Pe,ve]);break;case"p":ve>Pe&&(i=[Pe,ve])}lm(i),Gy(fm),V(aa),pm!==0&&V(pm+" J"),gm!==0&&V(gm+" j"),Qt.publish("addPage",{pageNumber:wn})},T5=function(E){E>0&&E<=wn&&(_e.splice(E,1),Pt.splice(E,1),wn--,X>wn&&(X=wn),this.setPage(X))},By=function(E){E>0&&E<=wn&&(X=E)},N5=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return _e.length-1},Uy=function(E,U,ae){var ve,Pe=void 0;return ae=ae||{},E=E!==void 0?E:nt[rt].fontName,U=U!==void 0?U:nt[rt].fontStyle,ve=E.toLowerCase(),ct[ve]!==void 0&&ct[ve][U]!==void 0?Pe=ct[ve][U]:ct[E]!==void 0&&ct[E][U]!==void 0?Pe=ct[E][U]:ae.disableWarning===!1&&qn.warn("Unable to look up font label for font '"+E+"', '"+U+"'. Refer to getFontList() for available fonts."),Pe||ae.noFallback||(Pe=ct.times[U])==null&&(Pe=ct.times.normal),Pe},M5=h.__private__.putInfo=function(){var E=Nr(),U=function(ve){return ve};for(var ae in d!==null&&(U=Oi.encryptor(E,0)),V("<<"),V("/Producer ("+Rs(U("jsPDF "+Tt.version))+")"),tt)tt.hasOwnProperty(ae)&&tt[ae]&&V("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+Rs(U(tt[ae]))+")");V("/CreationDate ("+Rs(U(ee))+")"),V(">>"),V("endobj")},cm=h.__private__.putCatalog=function(E){var U=(E=E||{}).rootDictionaryObjId||er;switch(Nr(),V("<<"),V("/Type /Catalog"),V("/Pages "+U+" 0 R"),A||(A="fullwidth"),A){case"fullwidth":V("/OpenAction [3 0 R /FitH null]");break;case"fullheight":V("/OpenAction [3 0 R /FitV null]");break;case"fullpage":V("/OpenAction [3 0 R /Fit]");break;case"original":V("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+A;ae.substr(ae.length-1)==="%"&&(A=parseInt(A)/100),typeof A=="number"&&V("/OpenAction [3 0 R /XYZ null null "+I(A)+"]")}switch(Ge||(Ge="continuous"),Ge){case"continuous":V("/PageLayout /OneColumn");break;case"single":V("/PageLayout /SinglePage");break;case"two":case"twoleft":V("/PageLayout /TwoColumnLeft");break;case"tworight":V("/PageLayout /TwoColumnRight")}ye&&V("/PageMode /"+ye),Qt.publish("putCatalog"),V(">>"),V("endobj")},O5=h.__private__.putTrailer=function(){V("trailer"),V("<<"),V("/Size "+(he+1)),V("/Root "+he+" 0 R"),V("/Info "+(he-1)+" 0 R"),d!==null&&V("/Encrypt "+Oi.oid+" 0 R"),V("/ID [ <"+ce+"> <"+ce+"> ]"),V(">>")},R5=h.__private__.putHeader=function(){V("%PDF-"+p),V("%")},L5=h.__private__.putXRef=function(){var E="0000000000";V("xref"),V("0 "+(he+1)),V("0000000000 65535 f ");for(var U=1;U<=he;U++)typeof fe[U]=="function"?V((E+fe[U]()).slice(-10)+" 00000 n "):fe[U]!==void 0?V((E+fe[U]).slice(-10)+" 00000 n "):V("0000000000 00000 n ")},Hl=h.__private__.buildDocument=function(){Qe(),ne(be),Qt.publish("buildDocument"),R5(),zl(),Ul(),Gc(),d!==null&&ie(),M5(),cm();var E=pe;return L5(),O5(),V("startxref"),V(""+E),V("%%EOF"),ne(_e[X]),be.join(`
`)},Ph=h.__private__.getBlob=function(E){return new Blob([Fe(E)],{type:"application/pdf"})},Th=h.output=h.__private__.output=oa(function(E,U){switch(typeof(U=U||{})=="string"?U={filename:U}:U.filename=U.filename||"generated.pdf",E){case void 0:return Hl();case"save":h.save(U.filename);break;case"arraybuffer":return Fe(Hl());case"blob":return Ph(Hl());case"bloburi":case"bloburl":if(Lt.URL!==void 0&&typeof Lt.URL.createObjectURL=="function")return Lt.URL&&Lt.URL.createObjectURL(Ph(Hl()))||void 0;qn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",ve=Hl();try{ae=lA(ve)}catch{ae=lA(unescape(encodeURIComponent(ve)))}return"data:application/pdf;filename="+U.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Lt)==="[object Window]"){var Pe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ze=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';U.pdfObjectUrl&&(Pe=U.pdfObjectUrl,ze="");var Je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Pe+'"'+ze+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(U)+");<\/script></body></html>",ut=Lt.open();return ut!==null&&ut.document.write(Je),ut}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Lt)==="[object Window]"){var wt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(U.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+U.filename+'" width="500px" height="400px" /></body></html>',Kt=Lt.open();if(Kt!==null){Kt.document.write(wt);var Vt=this;Kt.document.documentElement.querySelector("#pdfViewer").onload=function(){Kt.document.title=U.filename,Kt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Vt.output("bloburl"))}}return Kt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Lt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var yn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",U)+'"></iframe></body></html>',fr=Lt.open();if(fr!==null&&(fr.document.write(yn),fr.document.title=U.filename),fr||typeof safari>"u")return fr;break;case"datauri":case"dataurl":return Lt.document.location.href=this.output("datauristring",U);default:return null}}),Hy=function(E){return Array.isArray(Ni)===!0&&Ni.indexOf(E)>-1};switch(r){case"pt":Be=1;break;case"mm":Be=72/25.4;break;case"cm":Be=72/2.54;break;case"in":Be=72;break;case"px":Be=Hy("px_scaling")==1?.75:96/72;break;case"pc":case"em":Be=12;break;case"ex":Be=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Be=r}var Oi=null;Ce(),te();var D5=function(E){return d!==null?Oi.encryptor(E,0):function(U){return U}},Vy=h.__private__.getPageInfo=h.getPageInfo=function(E){if(isNaN(E)||E%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Pt[E].objId,pageNumber:E,pageContext:Pt[E]}},zt=h.__private__.getPageInfoByObjId=function(E){if(isNaN(E)||E%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var U in Pt)if(Pt[U].objId===E)break;return Vy(U)},I5=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Pt[X].objId,pageNumber:X,pageContext:Pt[X]}};h.addPage=function(){return zy.apply(this,arguments),this},h.setPage=function(){return By.apply(this,arguments),ne.call(this,_e[X]),this},h.insertPage=function(E){return this.addPage(),this.movePage(X,E),this},h.movePage=function(E,U){var ae,ve;if(E>U){ae=_e[E],ve=Pt[E];for(var Pe=E;Pe>U;Pe--)_e[Pe]=_e[Pe-1],Pt[Pe]=Pt[Pe-1];_e[U]=ae,Pt[U]=ve,this.setPage(U)}else if(E<U){ae=_e[E],ve=Pt[E];for(var ze=E;ze<U;ze++)_e[ze]=_e[ze+1],Pt[ze]=Pt[ze+1];_e[U]=ae,Pt[U]=ve,this.setPage(U)}return this},h.deletePage=function(){return T5.apply(this,arguments),this},h.__private__.text=h.text=function(E,U,ae,ve,Pe){var ze,Je,ut,wt,Kt,Vt,yn,fr,kr,Ur=(ve=ve||{}).scope||this;if(typeof E=="number"&&typeof U=="number"&&(typeof ae=="string"||Array.isArray(ae))){var Ri=ae;ae=U,U=E,E=Ri}if(arguments[3]instanceof At?(M("The transform parameter of text() with a Matrix value"),kr=Pe):(ut=arguments[4],wt=arguments[5],Ln(yn=arguments[3])==="object"&&yn!==null||(typeof ut=="string"&&(wt=ut,ut=null),typeof yn=="string"&&(wt=yn,yn=null),typeof yn=="number"&&(ut=yn,yn=null),ve={flags:yn,angle:ut,align:wt})),isNaN(U)||isNaN(ae)||E==null)throw new Error("Invalid arguments passed to jsPDF.text");if(E.length===0)return Ur;var oi="",la=!1,ro=typeof ve.lineHeightFactor=="number"?ve.lineHeightFactor:Dd,Za=Ur.internal.scaleFactor;function Qy(Yn){return Yn=Yn.split("	").join(Array(ve.TabLen||9).join(" ")),Rs(Yn,yn)}function wm(Yn){for(var Zn,Or=Yn.concat(),Kr=[],Kl=Or.length;Kl--;)typeof(Zn=Or.shift())=="string"?Kr.push(Zn):Array.isArray(Yn)&&(Zn.length===1||Zn[1]===void 0&&Zn[2]===void 0)?Kr.push(Zn[0]):Kr.push([Zn[0],Zn[1],Zn[2]]);return Kr}function xm(Yn,Zn){var Or;if(typeof Yn=="string")Or=Zn(Yn)[0];else if(Array.isArray(Yn)){for(var Kr,Kl,Tm=Yn.concat(),Vh=[],iv=Tm.length;iv--;)typeof(Kr=Tm.shift())=="string"?Vh.push(Zn(Kr)[0]):Array.isArray(Kr)&&typeof Kr[0]=="string"&&(Kl=Zn(Kr[0],Kr[1],Kr[2]),Vh.push([Kl[0],Kl[1],Kl[2]]));Or=Vh}return Or}var Dh=!1,Sm=!0;if(typeof E=="string")Dh=!0;else if(Array.isArray(E)){var km=E.concat();Je=[];for(var Ih,xi=km.length;xi--;)(typeof(Ih=km.shift())!="string"||Array.isArray(Ih)&&typeof Ih[0]!="string")&&(Sm=!1);Dh=Sm}if(Dh===!1)throw new Error('Type of text must be string or Array. "'+E+'" is not recognized.');typeof E=="string"&&(E=E.match(/[\r?\n]/)?E.split(/\r\n|\r|\n/g):[E]);var $h=_/Ur.internal.scaleFactor,jh=$h*(ro-1);switch(ve.baseline){case"bottom":ae-=jh;break;case"top":ae+=$h-jh;break;case"hanging":ae+=$h-2*jh;break;case"middle":ae+=$h/2-jh}if((Vt=ve.maxWidth||0)>0&&(typeof E=="string"?E=Ur.splitTextToSize(E,Vt):Object.prototype.toString.call(E)==="[object Array]"&&(E=E.reduce(function(Yn,Zn){return Yn.concat(Ur.splitTextToSize(Zn,Vt))},[]))),ze={text:E,x:U,y:ae,options:ve,mutex:{pdfEscape:Rs,activeFontKey:rt,fonts:nt,activeFontSize:_}},Qt.publish("preProcessText",ze),E=ze.text,ut=(ve=ze.options).angle,!(kr instanceof At)&&ut&&typeof ut=="number"){ut*=Math.PI/180,ve.rotationDirection===0&&(ut=-ut),w===x.ADVANCED&&(ut=-ut);var Fh=Math.cos(ut),Cm=Math.sin(ut);kr=new At(Fh,Cm,-Cm,Fh,0,0)}else ut&&ut instanceof At&&(kr=ut);w!==x.ADVANCED||kr||(kr=Ts),(Kt=ve.charSpace||Oh)!==void 0&&(oi+=T($(Kt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(fr=ve.horizontalScale)!==void 0&&(oi+=T(100*fr)+` Tz
`),ve.lang;var Ls=-1,q5=ve.renderingMode!==void 0?ve.renderingMode:ve.stroke,_m=Ur.internal.getCurrentPageInfo().pageContext;switch(q5){case 0:case!1:case"fill":Ls=0;break;case 1:case!0:case"stroke":Ls=1;break;case 2:case"fillThenStroke":Ls=2;break;case 3:case"invisible":Ls=3;break;case 4:case"fillAndAddForClipping":Ls=4;break;case 5:case"strokeAndAddPathForClipping":Ls=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ls=6;break;case 7:case"addToPathForClipping":Ls=7}var ev=_m.usedRenderingMode!==void 0?_m.usedRenderingMode:-1;Ls!==-1?oi+=Ls+` Tr
`:ev!==-1&&(oi+=`0 Tr
`),Ls!==-1&&(_m.usedRenderingMode=Ls),wt=ve.align||"left";var No,zh=_*ro,tv=Ur.internal.pageSize.getWidth(),nv=nt[rt];Kt=ve.charSpace||Oh,Vt=ve.maxWidth||0,yn=Object.assign({autoencode:!0,noBOM:!0},ve.flags);var Xc=[],jd=function(Yn){return Ur.getStringUnitWidth(Yn,{font:nv,charSpace:Kt,fontSize:_,doKerning:!1})*_/Za};if(Object.prototype.toString.call(E)==="[object Array]"){var Ds;Je=wm(E),wt!=="left"&&(No=Je.map(jd));var is,Qc=0;if(wt==="right"){U-=No[0],E=[],xi=Je.length;for(var Wl=0;Wl<xi;Wl++)Wl===0?(is=Ya(U),Ds=Vl(ae)):(is=$(Qc-No[Wl]),Ds=-zh),E.push([Je[Wl],is,Ds]),Qc=No[Wl]}else if(wt==="center"){U-=No[0]/2,E=[],xi=Je.length;for(var ql=0;ql<xi;ql++)ql===0?(is=Ya(U),Ds=Vl(ae)):(is=$((Qc-No[ql])/2),Ds=-zh),E.push([Je[ql],is,Ds]),Qc=No[ql]}else if(wt==="left"){E=[],xi=Je.length;for(var Bh=0;Bh<xi;Bh++)E.push(Je[Bh])}else if(wt==="justify"&&nv.encoding==="Identity-H"){E=[],xi=Je.length,Vt=Vt!==0?Vt:tv;for(var Gl=0,Mr=0;Mr<xi;Mr++)if(Ds=Mr===0?Vl(ae):-zh,is=Mr===0?Ya(U):Gl,Mr<xi-1){var Am=$((Vt-No[Mr])/(Je[Mr].split(" ").length-1)),ss=Je[Mr].split(" ");E.push([ss[0]+" ",is,Ds]),Gl=0;for(var Mo=1;Mo<ss.length;Mo++){var Uh=(jd(ss[Mo-1]+" "+ss[Mo])-jd(ss[Mo]))*Za+Am;Mo==ss.length-1?E.push([ss[Mo],Uh,0]):E.push([ss[Mo]+" ",Uh,0]),Gl-=Uh}}else E.push([Je[Mr],is,Ds]);E.push(["",Gl,0])}else{if(wt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(E=[],xi=Je.length,Vt=Vt!==0?Vt:tv,Mr=0;Mr<xi;Mr++)Ds=Mr===0?Vl(ae):-zh,is=Mr===0?Ya(U):0,Mr<xi-1?Xc.push(T($((Vt-No[Mr])/(Je[Mr].split(" ").length-1)))):Xc.push(0),E.push([Je[Mr],is,Ds])}}var rv=typeof ve.R2L=="boolean"?ve.R2L:oe;rv===!0&&(E=xm(E,function(Yn,Zn,Or){return[Yn.split("").reverse().join(""),Zn,Or]})),ze={text:E,x:U,y:ae,options:ve,mutex:{pdfEscape:Rs,activeFontKey:rt,fonts:nt,activeFontSize:_}},Qt.publish("postProcessText",ze),E=ze.text,la=ze.mutex.isHex||!1;var Em=nt[rt].encoding;Em!=="WinAnsiEncoding"&&Em!=="StandardEncoding"||(E=xm(E,function(Yn,Zn,Or){return[Qy(Yn),Zn,Or]})),Je=wm(E),E=[];for(var Fd,zd,eu,Bd=0,Hh=1,Ud=Array.isArray(Je[0])?Hh:Bd,tu="",Pm=function(Yn,Zn,Or){var Kr="";return Or instanceof At?(Or=typeof ve.angle=="number"?Qs(Or,new At(1,0,0,1,Yn,Zn)):Qs(new At(1,0,0,1,Yn,Zn),Or),w===x.ADVANCED&&(Or=Qs(new At(1,0,0,-1,0,0),Or)),Kr=Or.join(" ")+` Tm
`):Kr=T(Yn)+" "+T(Zn)+` Td
`,Kr},Oo=0;Oo<Je.length;Oo++){switch(tu="",Ud){case Hh:eu=(la?"<":"(")+Je[Oo][0]+(la?">":")"),Fd=parseFloat(Je[Oo][1]),zd=parseFloat(Je[Oo][2]);break;case Bd:eu=(la?"<":"(")+Je[Oo]+(la?">":")"),Fd=Ya(U),zd=Vl(ae)}Xc!==void 0&&Xc[Oo]!==void 0&&(tu=Xc[Oo]+` Tw
`),Oo===0?E.push(tu+Pm(Fd,zd,kr)+eu):Ud===Bd?E.push(tu+eu):Ud===Hh&&E.push(tu+Pm(Fd,zd,kr)+eu)}E=Ud===Bd?E.join(` Tj
T* `):E.join(` Tj
`),E+=` Tj
`;var Ro=`BT
/`;return Ro+=rt+" "+_+` Tf
`,Ro+=T(_*ro)+` TL
`,Ro+=Id+`
`,Ro+=oi,Ro+=E,V(Ro+="ET"),f[rt]=!0,Ur};var $5=h.__private__.clip=h.clip=function(E){return V(E==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return $5("evenodd")},h.__private__.discardPath=h.discardPath=function(){return V("n"),this};var Ja=h.__private__.isValidStyle=function(E){var U=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(E)!==-1&&(U=!0),U};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(E){return Ja(E)&&(c=E),this};var Wy=h.__private__.getStyle=h.getStyle=function(E){var U=c;switch(E){case"D":case"S":U="S";break;case"F":U="f";break;case"FD":case"DF":U="B";break;case"f":case"f*":case"B":case"B*":U=E}return U},qy=h.close=function(){return V("h"),this};h.stroke=function(){return V("S"),this},h.fill=function(E){return Nh("f",E),this},h.fillEvenOdd=function(E){return Nh("f*",E),this},h.fillStroke=function(E){return Nh("B",E),this},h.fillStrokeEvenOdd=function(E){return Nh("B*",E),this};var Nh=function(E,U){Ln(U)==="object"?F5(U,E):V(E)},um=function(E){E===null||w===x.ADVANCED&&E===void 0||(E=Wy(E),V(E))};function j5(E,U,ae,ve,Pe){var ze=new $p(U||this.boundingBox,ae||this.xStep,ve||this.yStep,this.gState,Pe||this.matrix);ze.stream=this.stream;var Je=E+"$$"+this.cloneIndex+++"$$";return Mi(Je,ze),ze}var F5=function(E,U){var ae=Cn[E.key],ve=dt[ae];if(ve instanceof tf)V("q"),V(z5(U)),ve.gState&&h.setGState(ve.gState),V(E.matrix.toString()+" cm"),V("/"+ae+" sh"),V("Q");else if(ve instanceof $p){var Pe=new At(1,0,0,-1,0,Zc());E.matrix&&(Pe=Pe.multiply(E.matrix||Ts),ae=j5.call(ve,E.key,E.boundingBox,E.xStep,E.yStep,Pe).id),V("q"),V("/Pattern cs"),V("/"+ae+" scn"),ve.gState&&h.setGState(ve.gState),V(U),V("Q")}},z5=function(E){switch(E){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},dm=h.moveTo=function(E,U){return V(T($(E))+" "+T(z(U))+" m"),this},Ld=h.lineTo=function(E,U){return V(T($(E))+" "+T(z(U))+" l"),this},Jc=h.curveTo=function(E,U,ae,ve,Pe,ze){return V([T($(E)),T(z(U)),T($(ae)),T(z(ve)),T($(Pe)),T(z(ze)),"c"].join(" ")),this};h.__private__.line=h.line=function(E,U,ae,ve,Pe){if(isNaN(E)||isNaN(U)||isNaN(ae)||isNaN(ve)||!Ja(Pe))throw new Error("Invalid arguments passed to jsPDF.line");return w===x.COMPAT?this.lines([[ae-E,ve-U]],E,U,[1,1],Pe||"S"):this.lines([[ae-E,ve-U]],E,U,[1,1]).stroke()},h.__private__.lines=h.lines=function(E,U,ae,ve,Pe,ze){var Je,ut,wt,Kt,Vt,yn,fr,kr,Ur,Ri,oi,la;if(typeof E=="number"&&(la=ae,ae=U,U=E,E=la),ve=ve||[1,1],ze=ze||!1,isNaN(U)||isNaN(ae)||!Array.isArray(E)||!Array.isArray(ve)||!Ja(Pe)||typeof ze!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(dm(U,ae),Je=ve[0],ut=ve[1],Kt=E.length,Ri=U,oi=ae,wt=0;wt<Kt;wt++)(Vt=E[wt]).length===2?(Ri=Vt[0]*Je+Ri,oi=Vt[1]*ut+oi,Ld(Ri,oi)):(yn=Vt[0]*Je+Ri,fr=Vt[1]*ut+oi,kr=Vt[2]*Je+Ri,Ur=Vt[3]*ut+oi,Ri=Vt[4]*Je+Ri,oi=Vt[5]*ut+oi,Jc(yn,fr,kr,Ur,Ri,oi));return ze&&qy(),um(Pe),this},h.path=function(E){for(var U=0;U<E.length;U++){var ae=E[U],ve=ae.c;switch(ae.op){case"m":dm(ve[0],ve[1]);break;case"l":Ld(ve[0],ve[1]);break;case"c":Jc.apply(this,ve);break;case"h":qy()}}return this},h.__private__.rect=h.rect=function(E,U,ae,ve,Pe){if(isNaN(E)||isNaN(U)||isNaN(ae)||isNaN(ve)||!Ja(Pe))throw new Error("Invalid arguments passed to jsPDF.rect");return w===x.COMPAT&&(ve=-ve),V([T($(E)),T(z(U)),T($(ae)),T($(ve)),"re"].join(" ")),um(Pe),this},h.__private__.triangle=h.triangle=function(E,U,ae,ve,Pe,ze,Je){if(isNaN(E)||isNaN(U)||isNaN(ae)||isNaN(ve)||isNaN(Pe)||isNaN(ze)||!Ja(Je))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-E,ve-U],[Pe-ae,ze-ve],[E-Pe,U-ze]],E,U,[1,1],Je,!0),this},h.__private__.roundedRect=h.roundedRect=function(E,U,ae,ve,Pe,ze,Je){if(isNaN(E)||isNaN(U)||isNaN(ae)||isNaN(ve)||isNaN(Pe)||isNaN(ze)||!Ja(Je))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ut=4/3*(Math.SQRT2-1);return Pe=Math.min(Pe,.5*ae),ze=Math.min(ze,.5*ve),this.lines([[ae-2*Pe,0],[Pe*ut,0,Pe,ze-ze*ut,Pe,ze],[0,ve-2*ze],[0,ze*ut,-Pe*ut,ze,-Pe,ze],[2*Pe-ae,0],[-Pe*ut,0,-Pe,-ze*ut,-Pe,-ze],[0,2*ze-ve],[0,-ze*ut,Pe*ut,-ze,Pe,-ze]],E+Pe,U,[1,1],Je,!0),this},h.__private__.ellipse=h.ellipse=function(E,U,ae,ve,Pe){if(isNaN(E)||isNaN(U)||isNaN(ae)||isNaN(ve)||!Ja(Pe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ze=4/3*(Math.SQRT2-1)*ae,Je=4/3*(Math.SQRT2-1)*ve;return dm(E+ae,U),Jc(E+ae,U-Je,E+ze,U-ve,E,U-ve),Jc(E-ze,U-ve,E-ae,U-Je,E-ae,U),Jc(E-ae,U+Je,E-ze,U+ve,E,U+ve),Jc(E+ze,U+ve,E+ae,U+Je,E+ae,U),um(Pe),this},h.__private__.circle=h.circle=function(E,U,ae,ve){if(isNaN(E)||isNaN(U)||isNaN(ae)||!Ja(ve))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(E,U,ae,ae,ve)},h.setFont=function(E,U,ae){return ae&&(U=O(U,ae)),rt=Uy(E,U,{disableWarning:!1}),this};var B5=h.__private__.getFont=h.getFont=function(){return nt[Uy.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var E,U,ae={};for(E in ct)if(ct.hasOwnProperty(E))for(U in ae[E]=[],ct[E])ct[E].hasOwnProperty(U)&&ae[E].push(U);return ae},h.addFont=function(E,U,ae,ve,Pe){var ze=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ze.indexOf(arguments[3])!==-1?Pe=arguments[3]:arguments[3]&&ze.indexOf(arguments[3])==-1&&(ae=O(ae,ve)),Pe=Pe||"Identity-H",am.call(this,E,U,ae,Pe)};var Dd,fm=t.lineWidth||.200025,Mh=h.__private__.getLineWidth=h.getLineWidth=function(){return fm},Gy=h.__private__.setLineWidth=h.setLineWidth=function(E){return fm=E,V(T($(E))+" w"),this};h.__private__.setLineDash=Tt.API.setLineDash=Tt.API.setLineDashPattern=function(E,U){if(E=E||[],U=U||0,isNaN(U)||!Array.isArray(E))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return E=E.map(function(ae){return T($(ae))}).join(" "),U=T($(U)),V("["+E+"] "+U+" d"),this};var Ky=h.__private__.getLineHeight=h.getLineHeight=function(){return _*Dd};h.__private__.getLineHeight=h.getLineHeight=function(){return _*Dd};var Jy=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(E){return typeof(E=E||1.15)=="number"&&(Dd=E),this},Yy=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Dd};Jy(t.lineHeight);var Ya=h.__private__.getHorizontalCoordinate=function(E){return $(E)},Vl=h.__private__.getVerticalCoordinate=function(E){return w===x.ADVANCED?E:Pt[X].mediaBox.topRightY-Pt[X].mediaBox.bottomLeftY-$(E)},U5=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(E){return T(Ya(E))},Yc=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(E){return T(Vl(E))},aa=t.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return si(aa)},h.__private__.setStrokeColor=h.setDrawColor=function(E,U,ae,ve){return aa=Ms({ch1:E,ch2:U,ch3:ae,ch4:ve,pdfColorType:"draw",precision:2}),V(aa),this};var hm=t.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return si(hm)},h.__private__.setFillColor=h.setFillColor=function(E,U,ae,ve){return hm=Ms({ch1:E,ch2:U,ch3:ae,ch4:ve,pdfColorType:"fill",precision:2}),V(hm),this};var Id=t.textColor||"0 g",H5=h.__private__.getTextColor=h.getTextColor=function(){return si(Id)};h.__private__.setTextColor=h.setTextColor=function(E,U,ae,ve){return Id=Ms({ch1:E,ch2:U,ch3:ae,ch4:ve,pdfColorType:"text",precision:3}),this};var Oh=t.charSpace,V5=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Oh||0)};h.__private__.setCharSpace=h.setCharSpace=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Oh=E,this};var pm=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(E){var U=h.CapJoinStyles[E];if(U===void 0)throw new Error("Line cap style of '"+E+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pm=U,V(U+" J"),this};var gm=0;h.__private__.setLineJoin=h.setLineJoin=function(E){var U=h.CapJoinStyles[E];if(U===void 0)throw new Error("Line join style of '"+E+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gm=U,V(U+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(E){if(E=E||0,isNaN(E))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return V(T($(E))+" M"),this},h.GState=Xw,h.setGState=function(E){(E=typeof E=="string"?Ft[Kn[E]]:Zy(null,E)).equals(dr)||(V("/"+E.id+" gs"),dr=E)};var Zy=function(E,U){if(!E||!Kn[E]){var ae=!1;for(var ve in Ft)if(Ft.hasOwnProperty(ve)&&Ft[ve].equals(U)){ae=!0;break}if(ae)U=Ft[ve];else{var Pe="GS"+(Object.keys(Ft).length+1).toString(10);Ft[Pe]=U,U.id=Pe}return E&&(Kn[E]=U.id),Qt.publish("addGState",U),U}};h.addGState=function(E,U){return Zy(E,U),this},h.saveGraphicsState=function(){return V("q"),ln.push({key:rt,size:_,color:Id}),this},h.restoreGraphicsState=function(){V("Q");var E=ln.pop();return rt=E.key,_=E.size,Id=E.color,dr=null,this},h.setCurrentTransformationMatrix=function(E){return V(E.toString()+" cm"),this},h.comment=function(E){return V("#"+E),this};var Rh=function(E,U){var ae=E||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(ze){isNaN(ze)||(ae=parseFloat(ze))}});var ve=U||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ve},set:function(ze){isNaN(ze)||(ve=parseFloat(ze))}});var Pe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Pe},set:function(ze){Pe=ze.toString()}}),this},mm=function(E,U,ae,ve){Rh.call(this,E,U),this.type="rect";var Pe=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Pe},set:function(Je){isNaN(Je)||(Pe=parseFloat(Je))}});var ze=ve||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ze},set:function(Je){isNaN(Je)||(ze=parseFloat(Je))}}),this},ym=function(){this.page=wn,this.currentPage=X,this.pages=_e.slice(0),this.pagesContext=Pt.slice(0),this.x=In,this.y=Ht,this.matrix=Tr,this.width=$d(X),this.height=Zc(X),this.outputDestination=je,this.id="",this.objectNumber=-1};ym.prototype.restore=function(){wn=this.page,X=this.currentPage,Pt=this.pagesContext,_e=this.pages,In=this.x,Ht=this.y,Tr=this.matrix,vm(X,this.width),bm(X,this.height),je=this.outputDestination};var Xy=function(E,U,ae,ve,Pe){Ps.push(new ym),wn=X=0,_e=[],In=E,Ht=U,Tr=Pe,lm([ae,ve])},W5=function(E){if(To[E])Ps.pop().restore();else{var U=new ym,ae="Xo"+(Object.keys(xr).length+1).toString(10);U.id=ae,To[E]=ae,xr[ae]=U,Qt.publish("addFormObject",U),Ps.pop().restore()}};for(var Lh in h.beginFormObject=function(E,U,ae,ve,Pe){return Xy(E,U,ae,ve,Pe),this},h.endFormObject=function(E){return W5(E),this},h.doFormObject=function(E,U){var ae=xr[To[E]];return V("q"),V(U.toString()+" cm"),V("/"+ae.id+" Do"),V("Q"),this},h.getFormObject=function(E){var U=xr[To[E]];return{x:U.x,y:U.y,width:U.width,height:U.height,matrix:U.matrix}},h.save=function(E,U){return E=E||"generated.pdf",(U=U||{}).returnPromise=U.returnPromise||!1,U.returnPromise===!1?(Zd(Ph(Hl()),E),typeof Zd.unload=="function"&&Lt.setTimeout&&setTimeout(Zd.unload,911),this):new Promise(function(ae,ve){try{var Pe=Zd(Ph(Hl()),E);typeof Zd.unload=="function"&&Lt.setTimeout&&setTimeout(Zd.unload,911),ae(Pe)}catch(ze){ve(ze.message)}})},Tt.API)Tt.API.hasOwnProperty(Lh)&&(Lh==="events"&&Tt.API.events.length?function(E,U){var ae,ve,Pe;for(Pe=U.length-1;Pe!==-1;Pe--)ae=U[Pe][0],ve=U[Pe][1],E.subscribe.apply(E,[ae].concat(typeof ve=="function"?[ve]:ve))}(Qt,Tt.API.events):h[Lh]=Tt.API[Lh]);var $d=h.getPageWidth=function(E){return(Pt[E=E||X].mediaBox.topRightX-Pt[E].mediaBox.bottomLeftX)/Be},vm=h.setPageWidth=function(E,U){Pt[E].mediaBox.topRightX=U*Be+Pt[E].mediaBox.bottomLeftX},Zc=h.getPageHeight=function(E){return(Pt[E=E||X].mediaBox.topRightY-Pt[E].mediaBox.bottomLeftY)/Be},bm=h.setPageHeight=function(E,U){Pt[E].mediaBox.topRightY=U*Be+Pt[E].mediaBox.bottomLeftY};return h.internal={pdfEscape:Rs,getStyle:Wy,getFont:B5,getFontSize:j,getCharSpace:V5,getTextColor:H5,getLineHeight:Ky,getLineHeightFactor:Yy,getLineWidth:Mh,write:Re,getHorizontalCoordinate:Ya,getVerticalCoordinate:Vl,getCoordinateString:U5,getVerticalCoordinateString:Yc,collections:{},newObject:Nr,newAdditionalObject:Ga,newObjectDeferred:Sr,newObjectDeferredBegin:ns,getFilters:fn,putStream:rs,events:Qt,scaleFactor:Be,pageSize:{getWidth:function(){return $d(X)},setWidth:function(E){vm(X,E)},getHeight:function(){return Zc(X)},setHeight:function(E){bm(X,E)}},encryptionOptions:d,encryption:Oi,getEncryptor:D5,output:Th,getNumberOfPages:N5,pages:_e,out:V,f2:I,f3:R,getPageInfo:Vy,getPageInfoByObjId:zt,getCurrentPageInfo:I5,getPDFVersion:g,Point:Rh,Rectangle:mm,Matrix:At,hasHotfix:Hy},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return $d(X)},set:function(E){vm(X,E)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Zc(X)},set:function(E){bm(X,E)},enumerable:!0,configurable:!0}),P5.call(h,K),rt="F1",zy(i,n),Qt.publish("initialized"),h}vp.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},vp.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},vp.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},vp.prototype.processOwnerPassword=function(t,e){return uA(cA(e).substr(0,5),t)},vp.prototype.encryptor=function(t,e){var n=cA(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return uA(n,r)}},Xw.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Ln(t)!==Ln(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Tt.API={events:[]},Tt.version="2.5.2";var Ar=Tt.API,q6=1,Ch=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},op=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Wt=function(t){return t.toFixed(2)},pu=function(t){return t.toFixed(5)};Ar.__acroform__={};var Xs=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},IO=function(t){return t*q6},rl=function(t){var e=new gW,n=gt.internal.getHeight(t)||0,r=gt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Wt(r)),Number(Wt(n))],e},yCe=Ar.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},vCe=Ar.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},bCe=Ar.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Ir=Ar.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return bCe(t,e-1)},$r=Ar.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return yCe(t,e-1)},jr=Ar.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return vCe(t,e-1)},wCe=Ar.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Wt(l.lowerLeft_X)),Number(Wt(l.lowerLeft_Y)),Number(Wt(l.upperRight_X)),Number(Wt(l.upperRight_Y))]},xCe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=dA(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Wt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=rl(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},dA=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(R){return R.split(`
`)}):i.map(function(R){return[R]});var s=n,o=gt.internal.getHeight(t)||0;o=o<0?-o:o;var a=gt.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(R,$,H){if(R+1<i.length){var z=$+" "+i[R+1][0];return C2(z,t,H).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,d,u=C2("3",t,s).height,f=t.multiline?o-s:(o-u)/2,h=f+=2,p=0,g=0,b=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+C2(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var v="",x=0,w=0;w<i.length;w++)if(i.hasOwnProperty(w)){var C=!1;if(i[w].length!==1&&b!==i[w].length-1){if((u+2)*(x+2)+2>o)continue e;v+=i[w][b],C=!0,g=w,w--}else{v=(v+=i[w][b]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var P=parseInt(w),O=l(P,v,s),T=w>=i.length-1;if(O&&!T){v+=" ",b=0;continue}if(O||T){if(T)g=P;else if(t.multiline&&(u+2)*(x+2)+2>o)continue e}else{if(!t.multiline||(u+2)*(x+2)+2>o)continue e;g=P}}for(var M="",D=p;D<=g;D++){var I=i[D];if(t.multiline){if(D===g){M+=I[b]+" ",b=(b+1)%I.length;continue}if(D===p){M+=I[I.length-1]+" ";continue}}M+=I[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,d=C2(M,t,s).width,t.textAlign){case"right":c=a-d-2;break;case"center":c=(a-d)/2;break;case"left":default:c=2}e+=Wt(c)+" "+Wt(h)+` Td
`,e+="("+Ch(M)+`) Tj
`,e+=-Wt(c)+` 0 Td
`,h=-(s+2),d=0,p=C?g:g+1,x++,v=""}break}return r.text=e,r.fontSize=s,r},C2=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},SCe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},kCe=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},CCe=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Ln(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},_Ce=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Wa.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(SCe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");q6=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new mW,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&kCe(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=wCe(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=gt.createDefaultAppearanceStream(a),Ln(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=xCe(a);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var u="";for(var f in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(f)){var h=a.appearanceStreamContent[f];if(u+="/"+f+" ",u+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var p=h[o];typeof p=="function"&&(p=p.call(i,a)),u+="/"+o+" "+p+" ",i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p)}}else typeof(p=h)=="function"&&(p=p.call(i,a)),u+="/"+o+" "+p,i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p);u+=">>"}l.push({key:"AP",value:`<<
`+u+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&CCe(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},pW=Ar.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Ln(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Ch(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},u3=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Ch(r(t))+")"},ul=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ul.prototype.toString=function(){return this.objId+" 0 R"},ul.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ul.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:pW(i,this.objId,this.scope)}):i instanceof ul?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var gW=function(){ul.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Xs(gW,ul);var mW=function(){ul.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Ch(n(t))+")"}},set:function(n){t=n}})};Xs(mW,ul);var Wa=function t(){ul.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');e=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ir(e,3)},set:function(v){v?this.F=$r(e,3):this.F=jr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');n=v}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(v){r=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(v){r[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(v){r[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(v){r[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(v){r[3]=v}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Qw)return;s="FieldObject"+t.FieldNum++}var v=function(x){return x};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+Ch(v(s))+")"},set:function(v){s=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(v){s=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(v){a=v}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/q6:c},set:function(v){c=v}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(v){d=v}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof Qw||this instanceof Ef))return u3(u,this.objId,this.scope)},set:function(v){v=v.toString(),u=v}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof hi?f:u3(f,this.objId,this.scope)},set:function(v){v=v.toString(),f=this instanceof hi?v:v.substr(0,1)==="("?op(v.substr(1,v.length-2)):op(v)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof hi?op(f.substr(1,f.length-1)):f},set:function(v){v=v.toString(),f=this instanceof hi?"/"+v:v}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof hi?h:u3(h,this.objId,this.scope)},set:function(v){v=v.toString(),h=this instanceof hi?v:v.substr(0,1)==="("?op(v.substr(1,v.length-2)):op(v)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof hi?op(h.substr(1,h.length-1)):h},set:function(v){v=v.toString(),h=this instanceof hi?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(v){v=!!v,g=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(v){p=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,1)},set:function(v){v?this.Ff=$r(this.Ff,1):this.Ff=jr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,2)},set:function(v){v?this.Ff=$r(this.Ff,2):this.Ff=jr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,3)},set:function(v){v?this.Ff=$r(this.Ff,3):this.Ff=jr(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');b=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(b){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};Xs(Wa,ul);var Zp=function(){Wa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return pW(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,18)},set:function(n){n?this.Ff=$r(this.Ff,18):this.Ff=jr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=$r(this.Ff,19):this.Ff=jr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,20)},set:function(n){n?(this.Ff=$r(this.Ff,20),e.sort()):this.Ff=jr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,22)},set:function(n){n?this.Ff=$r(this.Ff,22):this.Ff=jr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,23)},set:function(n){n?this.Ff=$r(this.Ff,23):this.Ff=jr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,27)},set:function(n){n?this.Ff=$r(this.Ff,27):this.Ff=jr(this.Ff,27)}}),this.hasAppearanceStream=!1};Xs(Zp,Wa);var Xp=function(){Zp.call(this),this.fontName="helvetica",this.combo=!1};Xs(Xp,Zp);var Qp=function(){Xp.call(this),this.combo=!0};Xs(Qp,Xp);var yb=function(){Qp.call(this),this.edit=!0};Xs(yb,Qp);var hi=function(){Wa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,15)},set:function(n){n?this.Ff=$r(this.Ff,15):this.Ff=jr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,16)},set:function(n){n?this.Ff=$r(this.Ff,16):this.Ff=jr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,17)},set:function(n){n?this.Ff=$r(this.Ff,17):this.Ff=jr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,26)},set:function(n){n?this.Ff=$r(this.Ff,26):this.Ff=jr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Ch(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Ln(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Xs(hi,Wa);var vb=function(){hi.call(this),this.pushButton=!0};Xs(vb,hi);var eg=function(){hi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Xs(eg,hi);var Qw=function(){var t,e;Wa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Ch(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Ln(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=gt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Xs(Qw,Wa),eg.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},eg.prototype.createOption=function(t){var e=new Qw;return e.Parent=this,e.optionName=t,this.Kids.push(e),ACe.call(this.scope,e),e};var bb=function(){hi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=gt.CheckBox.createAppearanceStream()};Xs(bb,hi);var Ef=function(){Wa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,13)},set:function(e){e?this.Ff=$r(this.Ff,13):this.Ff=jr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,21)},set:function(e){e?this.Ff=$r(this.Ff,21):this.Ff=jr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,23)},set:function(e){e?this.Ff=$r(this.Ff,23):this.Ff=jr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,24)},set:function(e){e?this.Ff=$r(this.Ff,24):this.Ff=jr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,25)},set:function(e){e?this.Ff=$r(this.Ff,25):this.Ff=jr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,26)},set:function(e){e?this.Ff=$r(this.Ff,26):this.Ff=jr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Xs(Ef,Wa);var wb=function(){Ef.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,14)},set:function(t){t?this.Ff=$r(this.Ff,14):this.Ff=jr(this.Ff,14)}}),this.password=!0};Xs(wb,Ef);var gt={CheckBox:{createAppearanceStream:function(){return{N:{On:gt.CheckBox.YesNormal},D:{On:gt.CheckBox.YesPushDown,Off:gt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=rl(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=dA(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Wt(gt.internal.getWidth(t))+" "+Wt(gt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Wt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=rl(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=gt.internal.getHeight(t),o=gt.internal.getWidth(t),a=dA(t,t.caption);return i.push("1 g"),i.push("0 0 "+Wt(o)+" "+Wt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Wt(o-1)+" "+Wt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Wt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=rl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Wt(gt.internal.getWidth(t))+" "+Wt(gt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:gt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=gt.RadioButton.Circle.YesNormal,e.D[t]=gt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=rl(t);e.scope=t.scope;var n=[],r=gt.internal.getWidth(t)<=gt.internal.getHeight(t)?gt.internal.getWidth(t)/4:gt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=gt.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+pu(gt.internal.getWidth(t)/2)+" "+pu(gt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=rl(t);e.scope=t.scope;var n=[],r=gt.internal.getWidth(t)<=gt.internal.getHeight(t)?gt.internal.getWidth(t)/4:gt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*gt.internal.Bezier_C).toFixed(5)),o=Number((r*gt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+pu(gt.internal.getWidth(t)/2)+" "+pu(gt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+pu(gt.internal.getWidth(t)/2)+" "+pu(gt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=rl(t);e.scope=t.scope;var n=[],r=gt.internal.getWidth(t)<=gt.internal.getHeight(t)?gt.internal.getWidth(t)/4:gt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*gt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+pu(gt.internal.getWidth(t)/2)+" "+pu(gt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:gt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=gt.RadioButton.Cross.YesNormal,e.D[t]=gt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=rl(t);e.scope=t.scope;var n=[],r=gt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Wt(gt.internal.getWidth(t)-2)+" "+Wt(gt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Wt(r.x1.x)+" "+Wt(r.x1.y)+" m"),n.push(Wt(r.x2.x)+" "+Wt(r.x2.y)+" l"),n.push(Wt(r.x4.x)+" "+Wt(r.x4.y)+" m"),n.push(Wt(r.x3.x)+" "+Wt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=rl(t);e.scope=t.scope;var n=gt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Wt(gt.internal.getWidth(t))+" "+Wt(gt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Wt(gt.internal.getWidth(t)-2)+" "+Wt(gt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Wt(n.x1.x)+" "+Wt(n.x1.y)+" m"),r.push(Wt(n.x2.x)+" "+Wt(n.x2.y)+" l"),r.push(Wt(n.x4.x)+" "+Wt(n.x4.y)+" m"),r.push(Wt(n.x3.x)+" "+Wt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=rl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Wt(gt.internal.getWidth(t))+" "+Wt(gt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};gt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=gt.internal.getWidth(t),n=gt.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},gt.internal.getWidth=function(t){var e=0;return Ln(t)==="object"&&(e=IO(t.Rect[2])),e},gt.internal.getHeight=function(t){var e=0;return Ln(t)==="object"&&(e=IO(t.Rect[3])),e};var ACe=Ar.addField=function(t){if(_Ce(this,t),!(t instanceof Wa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Ar.AcroFormChoiceField=Zp,Ar.AcroFormListBox=Xp,Ar.AcroFormComboBox=Qp,Ar.AcroFormEditBox=yb,Ar.AcroFormButton=hi,Ar.AcroFormPushButton=vb,Ar.AcroFormRadioButton=eg,Ar.AcroFormCheckBox=bb,Ar.AcroFormTextField=Ef,Ar.AcroFormPasswordField=wb,Ar.AcroFormAppearance=gt,Ar.AcroForm={ChoiceField:Zp,ListBox:Xp,ComboBox:Qp,EditBox:yb,Button:hi,PushButton:vb,RadioButton:eg,CheckBox:bb,TextField:Ef,PasswordField:wb,Appearance:gt},Tt.AcroForm={ChoiceField:Zp,ListBox:Xp,ComboBox:Qp,EditBox:yb,Button:hi,PushButton:vb,RadioButton:eg,CheckBox:bb,TextField:Ef,PasswordField:wb,Appearance:gt};Tt.AcroForm;function yW(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(R,$){var H,z,ee,ce,le,te=e;if(($=$||e)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(O(R))for(le in n)for(ee=n[le],H=0;H<ee.length;H+=1){for(ce=!0,z=0;z<ee[H].length;z+=1)if(ee[H][z]!==void 0&&ee[H][z]!==R[z]){ce=!1;break}if(ce===!0){te=le;break}}else for(le in n)for(ee=n[le],H=0;H<ee.length;H+=1){for(ce=!0,z=0;z<ee[H].length;z+=1)if(ee[H][z]!==void 0&&ee[H][z]!==R.charCodeAt(z)){ce=!1;break}if(ce===!0){te=le;break}}return te===e&&$!==e&&(te=$),te},i=function R($){for(var H=this.internal.write,z=this.internal.putStream,ee=(0,this.internal.getFilters)();ee.indexOf("FlateEncode")!==-1;)ee.splice(ee.indexOf("FlateEncode"),1);$.objectId=this.internal.newObject();var ce=[];if(ce.push({key:"Type",value:"/XObject"}),ce.push({key:"Subtype",value:"/Image"}),ce.push({key:"Width",value:$.width}),ce.push({key:"Height",value:$.height}),$.colorSpace===b.INDEXED?ce.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+($.palette.length/3-1)+" "+("sMask"in $&&$.sMask!==void 0?$.objectId+2:$.objectId+1)+" 0 R]"}):(ce.push({key:"ColorSpace",value:"/"+$.colorSpace}),$.colorSpace===b.DEVICE_CMYK&&ce.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ce.push({key:"BitsPerComponent",value:$.bitsPerComponent}),"decodeParameters"in $&&$.decodeParameters!==void 0&&ce.push({key:"DecodeParms",value:"<<"+$.decodeParameters+">>"}),"transparency"in $&&Array.isArray($.transparency)){for(var le="",te=0,Z=$.transparency.length;te<Z;te++)le+=$.transparency[te]+" "+$.transparency[te]+" ";ce.push({key:"Mask",value:"["+le+"]"})}$.sMask!==void 0&&ce.push({key:"SMask",value:$.objectId+1+" 0 R"});var de=$.filter!==void 0?["/"+$.filter]:void 0;if(z({data:$.data,additionalKeyValues:ce,alreadyAppliedFilters:de,objectId:$.objectId}),H("endobj"),"sMask"in $&&$.sMask!==void 0){var Ce="/Predictor "+$.predictor+" /Colors 1 /BitsPerComponent "+$.bitsPerComponent+" /Columns "+$.width,F={width:$.width,height:$.height,colorSpace:"DeviceGray",bitsPerComponent:$.bitsPerComponent,decodeParameters:Ce,data:$.sMask};"filter"in $&&(F.filter=$.filter),R.call(this,F)}if($.colorSpace===b.INDEXED){var X=this.internal.newObject();z({data:M(new Uint8Array($.palette)),objectId:X}),H("endobj")}},s=function(){var R=this.internal.collections.addImage_images;for(var $ in R)i.call(this,R[$])},o=function(){var R,$=this.internal.collections.addImage_images,H=this.internal.write;for(var z in $)H("/I"+(R=$[z]).index,R.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var R=this.internal.collections.addImage_images;return a.call(this),R},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(R){return typeof t["process"+R.toUpperCase()]=="function"},u=function(R){return Ln(R)==="object"&&R.nodeType===1},f=function(R,$){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var H=""+R.getAttribute("src");if(H.indexOf("data:image/")===0)return X0(unescape(H).split("base64,").pop());var z=t.loadFile(H,!0);if(z!==void 0)return z}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var ee;switch($){case"PNG":ee="image/png";break;case"WEBP":ee="image/webp";break;case"JPEG":case"JPG":default:ee="image/jpeg"}return X0(R.toDataURL(ee,1).split("base64,").pop())}},h=function(R){var $=this.internal.collections.addImage_images;if($){for(var H in $)if(R===$[H].alias)return $[H]}},p=function(R,$,H){return R||$||(R=-96,$=-96),R<0&&(R=-1*H.width*72/R/this.internal.scaleFactor),$<0&&($=-1*H.height*72/$/this.internal.scaleFactor),R===0&&(R=$*H.width/H.height),$===0&&($=R*H.height/H.width),[R,$]},g=function(R,$,H,z,ee,ce){var le=p.call(this,H,z,ee),te=this.internal.getCoordinateString,Z=this.internal.getVerticalCoordinateString,de=l.call(this);if(H=le[0],z=le[1],de[ee.index]=ee,ce){ce*=Math.PI/180;var Ce=Math.cos(ce),F=Math.sin(ce),X=function(ue){return ue.toFixed(4)},re=[X(Ce),X(F),X(-1*F),X(Ce),0,0,"cm"]}this.internal.write("q"),ce?(this.internal.write([1,"0","0",1,te(R),Z($+z),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([te(H),"0","0",te(z),"0","0","cm"].join(" "))):this.internal.write([te(H),"0","0",te(z),te(R),Z($+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ee.index+" Do"),this.internal.write("Q")},b=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=t.__addimage__.sHashCode=function(R){var $,H,z=0;if(typeof R=="string")for(H=R.length,$=0;$<H;$++)z=(z<<5)-z+R.charCodeAt($),z|=0;else if(O(R))for(H=R.byteLength/2,$=0;$<H;$++)z=(z<<5)-z+R[$],z|=0;return z},w=t.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var $=!0;return R.length===0&&($=!1),R.length%4!=0&&($=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&($=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&($=!1),$},C=t.__addimage__.extractImageFromDataUrl=function(R){var $=(R=R||"").split("base64,"),H=null;if($.length===2){var z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec($[0]);Array.isArray(z)&&(H={mimeType:z[1],charset:z[2],data:$[1]})}return H},P=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(R){return P()&&R instanceof ArrayBuffer};var O=t.__addimage__.isArrayBufferView=function(R){return P()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},T=t.__addimage__.binaryStringToUint8Array=function(R){for(var $=R.length,H=new Uint8Array($),z=0;z<$;z++)H[z]=R.charCodeAt(z);return H},M=t.__addimage__.arrayBufferToBinaryString=function(R){for(var $="",H=O(R)?R:new Uint8Array(R),z=0;z<H.length;z+=8192)$+=String.fromCharCode.apply(null,H.subarray(z,z+8192));return $};t.addImage=function(){var R,$,H,z,ee,ce,le,te,Z;if(typeof arguments[1]=="number"?($=e,H=arguments[1],z=arguments[2],ee=arguments[3],ce=arguments[4],le=arguments[5],te=arguments[6],Z=arguments[7]):($=arguments[1],H=arguments[2],z=arguments[3],ee=arguments[4],ce=arguments[5],le=arguments[6],te=arguments[7],Z=arguments[8]),Ln(R=arguments[0])==="object"&&!u(R)&&"imageData"in R){var de=R;R=de.imageData,$=de.format||$||e,H=de.x||H||0,z=de.y||z||0,ee=de.w||de.width||ee,ce=de.h||de.height||ce,le=de.alias||le,te=de.compression||te,Z=de.rotation||de.angle||Z}var Ce=this.internal.getFilters();if(te===void 0&&Ce.indexOf("FlateEncode")!==-1&&(te="SLOW"),isNaN(H)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var F=D.call(this,R,$,le,te);return g.call(this,H,z,ee,ce,F,Z),this};var D=function(R,$,H,z){var ee,ce,le;if(typeof R=="string"&&r(R)===e){R=unescape(R);var te=I(R,!1);(te!==""||(te=t.loadFile(R,!0))!==void 0)&&(R=te)}if(u(R)&&(R=f(R,$)),$=r(R,$),!d($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(((le=H)==null||le.length===0)&&(H=function(Z){return typeof Z=="string"||O(Z)?x(Z):O(Z.data)?x(Z.data):null}(R)),(ee=h.call(this,H))||(P()&&(R instanceof Uint8Array||$==="RGBA"||(ce=R,R=T(R))),ee=this["process"+$.toUpperCase()](R,c.call(this),H,function(Z){return Z&&typeof Z=="string"&&(Z=Z.toUpperCase()),Z in t.image_compression?Z:v.NONE}(z),ce)),!ee)throw new Error("An unknown error occurred whilst processing the image.");return ee},I=t.__addimage__.convertBase64ToBinaryString=function(R,$){var H;$=typeof $!="boolean"||$;var z,ee="";if(typeof R=="string"){z=(H=C(R))!==null?H.data:R;try{ee=X0(z)}catch(ce){if($)throw w(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ce.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ee};t.getImageProperties=function(R){var $,H,z="";if(u(R)&&(R=f(R)),typeof R=="string"&&r(R)===e&&((z=I(R,!1))===""&&(z=t.loadFile(R)||""),R=z),H=r(R),!d(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(!P()||R instanceof Uint8Array||(R=T(R)),!($=this["process"+H.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return $.fileType=H,$}})(Tt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Tt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,d=!1,u=0;u<c.length&&!d;u++)switch((r=c[u]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var f=0;f<c.length;f++){r=c[f];var h=this.internal.pdfEscape,p=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(g.objId),x=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+h(v(r.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+h(v(x))+") >>",g.content=s;var w=g.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+w,r.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(g.objId,"0 R",b.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var C=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(p(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var P=this.annotations._nameMap[r.options.name];r.options.pageNumber=P.page,r.options.top=P.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(p(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var O=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+O+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var d=this.splitTextToSize(n,a).length;o=Math.ceil(c*d)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Tt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(g){return e[g.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},a=t.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&i.indexOf(g.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length==4},u=t.__arabicParser__.resolveLigatures=function(g){var b=0,v=n,x="",w=0;for(b=0;b<g.length;b+=1)v[g.charCodeAt(b)]!==void 0?(w++,typeof(v=v[g.charCodeAt(b)])=="number"&&(x+=String.fromCharCode(v),v=n,w=0),b===g.length-1&&(v=n,x+=g.charAt(b-(w-1)),b-=w-1,w=0)):(v=n,x+=g.charAt(b-w),b-=w,w=0);return x};t.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&r[g.charCodeAt(0)]!==void 0};var f=t.__arabicParser__.getCorrectForm=function(g,b,v){return o(g)?s(g)===!1?-1:!c(g)||!o(b)&&!o(v)||!o(v)&&a(b)||a(g)&&!o(b)||a(g)&&l(b)||a(g)&&a(b)?0:d(g)&&o(b)&&!a(b)&&o(v)&&c(v)?3:a(g)||!o(v)?1:2:-1},h=function(g){var b=0,v=0,x=0,w="",C="",P="",O=(g=g||"").split("\\s+"),T=[];for(b=0;b<O.length;b+=1){for(T.push(""),v=0;v<O[b].length;v+=1)w=O[b][v],C=O[b][v-1],P=O[b][v+1],o(w)?(x=f(w,C,P),T[b]+=x!==-1?String.fromCharCode(e[w.charCodeAt(0)][x]):w):T[b]+=w;T[b]=u(T[b])}return T.join(" ")},p=t.__arabicParser__.processArabic=t.processArabic=function(){var g,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(b)){var x=0;for(v=[],x=0;x<b.length;x+=1)Array.isArray(b[x])?v.push([h(b[x][0]),b[x][1],b[x][2]]):v.push([h(b[x])]);g=v}else g=h(b);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};t.events.push(["preProcessText",p])}(Tt.API),Tt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Tt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(g){l=g}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var u=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var p=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return p},set:function(g){p=g}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),u=c.font||this.getFont(),f=c.scaleFactor||this.internal.scaleFactor,h=0,p=0,g=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var v=c.maxWidth;v>0?typeof l=="string"?l=this.splitTextToSize(l,v):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(w,C){return w.concat(b.splitTextToSize(C,v))},[])):l=Array.isArray(l)?l:[l];for(var x=0;x<l.length;x++)h<(g=this.getStringUnitWidth(l[x],{font:u})*d)&&(h=g);return h!==0&&(p=l.length),{w:h/=f,h:Math.max((p*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/f,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,u=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+u.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=u.top,h&&f&&(this.printHeaderRow(l.lineNumber,!0),l.y+=f[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,d,u,f){if(r.call(this),!d)throw new Error("No data for PDF table.");var h,p,g,b,v=[],x=[],w=[],C={},P={},O=[],T=[],M=(f=f||{}).autoSize||!1,D=f.printHeaders!==!1,I=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,R=f.margins||Object.assign({width:this.getPageWidth()},e),$=typeof f.padding=="number"?f.padding:3,H=f.headerBackgroundColor||"#c8c8c8",z=f.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=D,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=I,this.internal.__cell__.padding=$,this.internal.__cell__.headerBackgroundColor=H,this.internal.__cell__.headerTextColor=z,this.setFontSize(I),u==null)x=v=Object.keys(d[0]),w=v.map(function(){return"left"});else if(Array.isArray(u)&&Ln(u[0])==="object")for(v=u.map(function(de){return de.name}),x=u.map(function(de){return de.prompt||de.name||""}),w=u.map(function(de){return de.align||"left"}),h=0;h<u.length;h+=1)P[u[h].name]=u[h].width*(19.049976/25.4);else Array.isArray(u)&&typeof u[0]=="string"&&(x=v=u,w=v.map(function(){return"left"}));if(M||Array.isArray(u)&&typeof u[0]=="string")for(h=0;h<v.length;h+=1){for(C[b=v[h]]=d.map(function(de){return de[b]}),this.setFont(void 0,"bold"),O.push(this.getTextDimensions(x[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=C[b],this.setFont(void 0,"normal"),g=0;g<p.length;g+=1)O.push(this.getTextDimensions(p[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[b]=Math.max.apply(null,O)+$+$,O=[]}if(D){var ee={};for(h=0;h<v.length;h+=1)ee[v[h]]={},ee[v[h]].text=x[h],ee[v[h]].align=w[h];var ce=a.call(this,ee,P);T=v.map(function(de){return new s(l,c,P[de],ce,ee[de].text,void 0,ee[de].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var le=u.reduce(function(de,Ce){return de[Ce.name]=Ce.align,de},{});for(h=0;h<d.length;h+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:h,data:d[h]},this);var te=a.call(this,d[h],P);for(g=0;g<v.length;g+=1){var Z=d[h][v[g]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:h,col:g,data:Z},this),o.call(this,new s(l,c,P[v[g]],te,Z,h+2,le[v[g]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var d=this.internal.__cell__.padding,u=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(l).map(function(h){var p=l[h];return this.splitTextToSize(p.hasOwnProperty("text")?p.text:p,c[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*u/f+d+d},this).reduce(function(h,p){return Math.max(h,p)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var u=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(u[0],u[1],u[2],u[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,f.push(d)),d.lineNumber=l;var p=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(p)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),n=!1}}(Tt.API);var vW={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},bW=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],fA=yW(bW),wW=[100,200,300,400,500,600,700,800,900],ECe=yW(wW);function hA(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return vW[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof fA[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function $O(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var PCe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},jO={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function FO(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function TCe(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},PCe,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=hA(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+FO(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var d=fA[l],u=d<=fA.normal?-1:1,f=$O(c,bW,d,u);if(!f)throw new Error("Could not find a matching font-stretch value for "+l);return f}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var d=vW[l],u=0;u<d.length;++u)if(c[d[u]])return c[d[u]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var d=ECe[l],u=$O(c,wW,d,l<400?-1:1);if(!u)throw new Error("Could not find a matching font-weight for value "+l);return u}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+FO(s)+"'.");return o}function zO(t){return t.trimLeft()}function NCe(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function MCe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var _2,BO,UO,d3=["times"];(function(t){var e,n,r,i,s,o,a,l,c,d=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new l,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new o,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new o,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new u(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var u=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var X=F;Object.defineProperty(this,"pdf",{get:function(){return X}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(ne){re=!!ne}});var ue=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ue},set:function(ne){ue=!!ne}});var he=0;Object.defineProperty(this,"posX",{get:function(){return he},set:function(ne){isNaN(ne)||(he=ne)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(ne){isNaN(ne)||(fe=ne)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ne){var V;typeof ne=="number"?V=[ne,ne,ne,ne]:((V=new Array(4))[0]=ne[0],V[1]=ne.length>=2?ne[1]:V[0],V[2]=ne.length>=3?ne[2]:V[0],V[3]=ne.length>=4?ne[3]:V[1]),c.margin=V}});var be=!1;Object.defineProperty(this,"autoPaging",{get:function(){return be},set:function(ne){be=ne}});var pe=0;Object.defineProperty(this,"lastBreak",{get:function(){return pe},set:function(ne){pe=ne}});var me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return me},set:function(ne){me=ne}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ne){ne instanceof d&&(c=ne)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ne){c.path=ne}});var _e=[];Object.defineProperty(this,"ctxStack",{get:function(){return _e},set:function(ne){_e=ne}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ne){var V;V=f(ne),this.ctx.fillStyle=V.style,this.ctx.isFillTransparent=V.a===0,this.ctx.fillOpacity=V.a,this.pdf.setFillColor(V.r,V.g,V.b,{a:V.a}),this.pdf.setTextColor(V.r,V.g,V.b,{a:V.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ne){var V=f(ne);this.ctx.strokeStyle=V.style,this.ctx.isStrokeTransparent=V.a===0,this.ctx.strokeOpacity=V.a,V.a===0?this.pdf.setDrawColor(255,255,255):(V.a,this.pdf.setDrawColor(V.r,V.g,V.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ne){["butt","round","square"].indexOf(ne)!==-1&&(this.ctx.lineCap=ne,this.pdf.setLineCap(ne))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ne){isNaN(ne)||(this.ctx.lineWidth=ne,this.pdf.setLineWidth(ne))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ne){["bevel","round","miter"].indexOf(ne)!==-1&&(this.ctx.lineJoin=ne,this.pdf.setLineJoin(ne))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ne){isNaN(ne)||(this.ctx.miterLimit=ne,this.pdf.setMiterLimit(ne))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ne){this.ctx.textBaseline=ne}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ne){["right","end","center","left","start"].indexOf(ne)!==-1&&(this.ctx.textAlign=ne)}});var Te=null;function je(ne,V){if(Te===null){var Re=function(Fe){var K=[];return Object.keys(Fe).forEach(function(_){Fe[_].forEach(function(A){var j=null;switch(A){case"bold":j={family:_,weight:"bold"};break;case"italic":j={family:_,style:"italic"};break;case"bolditalic":j={family:_,weight:"bold",style:"italic"};break;case"":case"normal":j={family:_}}j!==null&&(j.ref={name:_,style:A},K.push(j))})}),K}(ne.getFontList());Te=function(Fe){for(var K={},_=0;_<Fe.length;++_){var A=hA(Fe[_]),j=A.family,oe=A.stretch,ye=A.style,Ee=A.weight;K[j]=K[j]||{},K[j][oe]=K[j][oe]||{},K[j][oe][ye]=K[j][oe][ye]||{},K[j][oe][ye][Ee]=A}return K}(Re.concat(V))}return Te}var Qe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Qe},set:function(ne){Te=null,Qe=ne}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ne){var V;if(this.ctx.font=ne,(V=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ne))!==null){var Re=V[1],Fe=(V[2],V[3]),K=V[4],_=(V[5],V[6]),A=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(K)[2];K=Math.floor(A==="px"?parseFloat(K)*this.pdf.internal.scaleFactor:A==="em"?parseFloat(K)*this.pdf.getFontSize():parseFloat(K)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(K);var j=function(tt){var rt,Be,In=[],Ht=tt.trim();if(Ht==="")return d3;if(Ht in jO)return[jO[Ht]];for(;Ht!=="";){switch(Be=null,rt=(Ht=zO(Ht)).charAt(0)){case'"':case"'":Be=NCe(Ht.substring(1),rt);break;default:Be=MCe(Ht)}if(Be===null||(In.push(Be[0]),(Ht=zO(Be[1]))!==""&&Ht.charAt(0)!==","))return d3;Ht=Ht.replace(/^,/,"")}return In}(_);if(this.fontFaces){var oe=TCe(je(this.pdf,this.fontFaces),j.map(function(tt){return{family:tt,stretch:"normal",weight:Fe,style:Re}}));this.pdf.setFont(oe.ref.name,oe.ref.style)}else{var ye="";(Fe==="bold"||parseInt(Fe,10)>=700||Re==="bold")&&(ye="bold"),Re==="italic"&&(ye+="italic"),ye.length===0&&(ye="normal");for(var Ee="",Ge={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ze=0;Ze<j.length;Ze++){if(this.pdf.internal.getFont(j[Ze],ye,{noFallback:!0,disableWarning:!0})!==void 0){Ee=j[Ze];break}if(ye==="bolditalic"&&this.pdf.internal.getFont(j[Ze],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ee=j[Ze],ye="bold";else if(this.pdf.internal.getFont(j[Ze],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ee=j[Ze],ye="normal";break}}if(Ee===""){for(var bt=0;bt<j.length;bt++)if(Ge[j[bt]]){Ee=Ge[j[bt]];break}}Ee=Ee===""?"Times":Ee,this.pdf.setFont(Ee,ye)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ne){this.ctx.globalCompositeOperation=ne}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ne){this.ctx.globalAlpha=ne}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ne){this.ctx.lineDashOffset=ne,Ce.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ne){this.ctx.lineDash=ne,Ce.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ne){this.ctx.ignoreClearRect=!!ne}})};u.prototype.setLineDash=function(F){this.lineDash=F},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){C.call(this,"fill",!1)},u.prototype.stroke=function(){C.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(F,X){if(isNaN(F)||isNaN(X))throw qn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new o(F,X));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new o(F,X)},u.prototype.closePath=function(){var F=new o(0,0),X=0;for(X=this.path.length-1;X!==-1;X--)if(this.path[X].type==="begin"&&Ln(this.path[X+1])==="object"&&typeof this.path[X+1].x=="number"){F=new o(this.path[X+1].x,this.path[X+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(F.x,F.y)},u.prototype.lineTo=function(F,X){if(isNaN(F)||isNaN(X))throw qn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new o(F,X));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},u.prototype.quadraticCurveTo=function(F,X,re,ue){if(isNaN(re)||isNaN(ue)||isNaN(F)||isNaN(X))throw qn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var he=this.ctx.transform.applyToPoint(new o(re,ue)),fe=this.ctx.transform.applyToPoint(new o(F,X));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},u.prototype.bezierCurveTo=function(F,X,re,ue,he,fe){if(isNaN(he)||isNaN(fe)||isNaN(F)||isNaN(X)||isNaN(re)||isNaN(ue))throw qn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var be=this.ctx.transform.applyToPoint(new o(he,fe)),pe=this.ctx.transform.applyToPoint(new o(F,X)),me=this.ctx.transform.applyToPoint(new o(re,ue));this.path.push({type:"bct",x1:pe.x,y1:pe.y,x2:me.x,y2:me.y,x:be.x,y:be.y}),this.ctx.lastPoint=new o(be.x,be.y)},u.prototype.arc=function(F,X,re,ue,he,fe){if(isNaN(F)||isNaN(X)||isNaN(re)||isNaN(ue)||isNaN(he))throw qn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var be=this.ctx.transform.applyToPoint(new o(F,X));F=be.x,X=be.y;var pe=this.ctx.transform.applyToPoint(new o(0,re)),me=this.ctx.transform.applyToPoint(new o(0,0));re=Math.sqrt(Math.pow(pe.x-me.x,2)+Math.pow(pe.y-me.y,2))}Math.abs(he-ue)>=2*Math.PI&&(ue=0,he=2*Math.PI),this.path.push({type:"arc",x:F,y:X,radius:re,startAngle:ue,endAngle:he,counterclockwise:fe})},u.prototype.arcTo=function(F,X,re,ue,he){throw new Error("arcTo not implemented.")},u.prototype.rect=function(F,X,re,ue){if(isNaN(F)||isNaN(X)||isNaN(re)||isNaN(ue))throw qn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,X),this.lineTo(F+re,X),this.lineTo(F+re,X+ue),this.lineTo(F,X+ue),this.lineTo(F,X),this.lineTo(F+re,X),this.lineTo(F,X)},u.prototype.fillRect=function(F,X,re,ue){if(isNaN(F)||isNaN(X)||isNaN(re)||isNaN(ue))throw qn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var he={};this.lineCap!=="butt"&&(he.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(he.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,X,re,ue),this.fill(),he.hasOwnProperty("lineCap")&&(this.lineCap=he.lineCap),he.hasOwnProperty("lineJoin")&&(this.lineJoin=he.lineJoin)}},u.prototype.strokeRect=function(F,X,re,ue){if(isNaN(F)||isNaN(X)||isNaN(re)||isNaN(ue))throw qn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(F,X,re,ue),this.stroke())},u.prototype.clearRect=function(F,X,re,ue){if(isNaN(F)||isNaN(X)||isNaN(re)||isNaN(ue))throw qn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,X,re,ue))},u.prototype.save=function(F){F=typeof F!="boolean"||F;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(X),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var ue=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ue}},u.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(X),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(F){var X,re,ue,he;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))X=0,re=0,ue=0,he=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(fe!==null)X=parseInt(fe[1]),re=parseInt(fe[2]),ue=parseInt(fe[3]),he=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)X=parseInt(fe[1]),re=parseInt(fe[2]),ue=parseInt(fe[3]),he=parseFloat(fe[4]);else{if(he=1,typeof F=="string"&&F.charAt(0)!=="#"){var be=new dW(F);F=be.ok?be.toHex():"#000000"}F.length===4?(X=F.substring(1,2),X+=X,re=F.substring(2,3),re+=re,ue=F.substring(3,4),ue+=ue):(X=F.substring(1,3),re=F.substring(3,5),ue=F.substring(5,7)),X=parseInt(X,16),re=parseInt(re,16),ue=parseInt(ue,16)}}return{r:X,g:re,b:ue,a:he,style:F}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},p=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};u.prototype.fillText=function(F,X,re,ue){if(isNaN(X)||isNaN(re)||typeof F!="string")throw qn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ue=isNaN(ue)?void 0:ue,!h.call(this)){var he=te(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;$.call(this,{text:F,x:X,y:re,scale:fe,angle:he,align:this.textAlign,maxWidth:ue})}},u.prototype.strokeText=function(F,X,re,ue){if(isNaN(X)||isNaN(re)||typeof F!="string")throw qn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){ue=isNaN(ue)?void 0:ue;var he=te(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;$.call(this,{text:F,x:X,y:re,scale:fe,renderingMode:"stroke",angle:he,align:this.textAlign,maxWidth:ue})}},u.prototype.measureText=function(F){if(typeof F!="string")throw qn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var X=this.pdf,re=this.pdf.internal.scaleFactor,ue=X.internal.getFontSize(),he=X.getStringUnitWidth(F)*ue/X.internal.scaleFactor,fe=function(be){var pe=(be=be||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return pe}}),this};return new fe({width:he*=Math.round(96*re/72*1e4)/1e4})},u.prototype.scale=function(F,X){if(isNaN(F)||isNaN(X))throw qn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new l(F,0,0,X,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},u.prototype.rotate=function(F){if(isNaN(F))throw qn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var X=new l(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(X)},u.prototype.translate=function(F,X){if(isNaN(F)||isNaN(X))throw qn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new l(1,0,0,1,F,X);this.ctx.transform=this.ctx.transform.multiply(re)},u.prototype.transform=function(F,X,re,ue,he,fe){if(isNaN(F)||isNaN(X)||isNaN(re)||isNaN(ue)||isNaN(he)||isNaN(fe))throw qn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var be=new l(F,X,re,ue,he,fe);this.ctx.transform=this.ctx.transform.multiply(be)},u.prototype.setTransform=function(F,X,re,ue,he,fe){F=isNaN(F)?1:F,X=isNaN(X)?0:X,re=isNaN(re)?0:re,ue=isNaN(ue)?1:ue,he=isNaN(he)?0:he,fe=isNaN(fe)?0:fe,this.ctx.transform=new l(F,X,re,ue,he,fe)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(F,X,re,ue,he,fe,be,pe,me){var _e=this.pdf.getImageProperties(F),Te=1,je=1,Qe=1,ne=1;ue!==void 0&&pe!==void 0&&(Qe=pe/ue,ne=me/he,Te=_e.width/ue*pe/ue,je=_e.height/he*me/he),fe===void 0&&(fe=X,be=re,X=0,re=0),ue!==void 0&&pe===void 0&&(pe=ue,me=he),ue===void 0&&pe===void 0&&(pe=_e.width,me=_e.height);for(var V,Re=this.ctx.transform.decompose(),Fe=te(Re.rotate.shx),K=new l,_=(K=(K=(K=K.multiply(Re.translate)).multiply(Re.skew)).multiply(Re.scale)).applyToRectangle(new a(fe-X*Qe,be-re*ne,ue*Te,he*je)),A=b.call(this,_),j=[],oe=0;oe<A.length;oe+=1)j.indexOf(A[oe])===-1&&j.push(A[oe]);if(w(j),this.autoPaging)for(var ye=j[0],Ee=j[j.length-1],Ge=ye;Ge<Ee+1;Ge++){this.pdf.setPage(Ge);var Ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],bt=Ge===1?this.posY+this.margin[0]:this.margin[0],tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Be=Ge===1?0:tt+(Ge-2)*rt;if(this.ctx.clip_path.length!==0){var In=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(V,this.posX+this.margin[3],-Be+bt+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=In}var Ht=JSON.parse(JSON.stringify(_));Ht=x([Ht],this.posX+this.margin[3],-Be+bt+this.ctx.prevPageLastElemOffset)[0];var Tr=(Ge>ye||Ge<Ee)&&g.call(this);Tr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,rt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",Ht.x,Ht.y,Ht.w,Ht.h,null,null,Fe),Tr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",_.x,_.y,_.w,_.h,null,null,Fe)};var b=function(F,X,re){var ue=[];X=X||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var he=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":ue.push(Math.floor((F.y+he)/re)+1);break;case"arc":ue.push(Math.floor((F.y+he-F.radius)/re)+1),ue.push(Math.floor((F.y+he+F.radius)/re)+1);break;case"qct":var fe=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);ue.push(Math.floor((fe.y+he)/re)+1),ue.push(Math.floor((fe.y+fe.h+he)/re)+1);break;case"bct":var be=de(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);ue.push(Math.floor((be.y+he)/re)+1),ue.push(Math.floor((be.y+be.h+he)/re)+1);break;case"rect":ue.push(Math.floor((F.y+he)/re)+1),ue.push(Math.floor((F.y+F.h+he)/re)+1)}for(var pe=0;pe<ue.length;pe+=1)for(;this.pdf.internal.getNumberOfPages()<ue[pe];)v.call(this);return ue},v=function(){var F=this.fillStyle,X=this.strokeStyle,re=this.font,ue=this.lineCap,he=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=X,this.font=re,this.lineCap=ue,this.lineWidth=he,this.lineJoin=fe},x=function(F,X,re){for(var ue=0;ue<F.length;ue++)switch(F[ue].type){case"bct":F[ue].x2+=X,F[ue].y2+=re;case"qct":F[ue].x1+=X,F[ue].y1+=re;case"mt":case"lt":case"arc":default:F[ue].x+=X,F[ue].y+=re}return F},w=function(F){return F.sort(function(X,re){return X-re})},C=function(F,X){for(var re,ue,he=this.fillStyle,fe=this.strokeStyle,be=this.lineCap,pe=this.lineWidth,me=Math.abs(pe*this.ctx.transform.scaleX),_e=this.lineJoin,Te=JSON.parse(JSON.stringify(this.path)),je=JSON.parse(JSON.stringify(this.path)),Qe=[],ne=0;ne<je.length;ne++)if(je[ne].x!==void 0)for(var V=b.call(this,je[ne]),Re=0;Re<V.length;Re+=1)Qe.indexOf(V[Re])===-1&&Qe.push(V[Re]);for(var Fe=0;Fe<Qe.length;Fe++)for(;this.pdf.internal.getNumberOfPages()<Qe[Fe];)v.call(this);if(w(Qe),this.autoPaging)for(var K=Qe[0],_=Qe[Qe.length-1],A=K;A<_+1;A++){this.pdf.setPage(A),this.fillStyle=he,this.strokeStyle=fe,this.lineCap=be,this.lineWidth=me,this.lineJoin=_e;var j=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],oe=A===1?this.posY+this.margin[0]:this.margin[0],ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ee=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ge=A===1?0:ye+(A-2)*Ee;if(this.ctx.clip_path.length!==0){var Ze=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(re,this.posX+this.margin[3],-Ge+oe+this.ctx.prevPageLastElemOffset),P.call(this,F,!0),this.path=Ze}if(ue=JSON.parse(JSON.stringify(Te)),this.path=x(ue,this.posX+this.margin[3],-Ge+oe+this.ctx.prevPageLastElemOffset),X===!1||A===0){var bt=(A>K||A<_)&&g.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],j,Ee,null).clip().discardPath()),P.call(this,F,X),bt&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}else this.lineWidth=me,P.call(this,F,X),this.lineWidth=pe;this.path=Te},P=function(F,X){if((F!=="stroke"||X||!p.call(this))&&(F==="stroke"||X||!h.call(this))){for(var re,ue,he=[],fe=this.path,be=0;be<fe.length;be++){var pe=fe[be];switch(pe.type){case"begin":he.push({begin:!0});break;case"close":he.push({close:!0});break;case"mt":he.push({start:pe,deltas:[],abs:[]});break;case"lt":var me=he.length;if(fe[be-1]&&!isNaN(fe[be-1].x)&&(re=[pe.x-fe[be-1].x,pe.y-fe[be-1].y],me>0)){for(;me>=0;me--)if(he[me-1].close!==!0&&he[me-1].begin!==!0){he[me-1].deltas.push(re),he[me-1].abs.push(pe);break}}break;case"bct":re=[pe.x1-fe[be-1].x,pe.y1-fe[be-1].y,pe.x2-fe[be-1].x,pe.y2-fe[be-1].y,pe.x-fe[be-1].x,pe.y-fe[be-1].y],he[he.length-1].deltas.push(re);break;case"qct":var _e=fe[be-1].x+2/3*(pe.x1-fe[be-1].x),Te=fe[be-1].y+2/3*(pe.y1-fe[be-1].y),je=pe.x+2/3*(pe.x1-pe.x),Qe=pe.y+2/3*(pe.y1-pe.y),ne=pe.x,V=pe.y;re=[_e-fe[be-1].x,Te-fe[be-1].y,je-fe[be-1].x,Qe-fe[be-1].y,ne-fe[be-1].x,V-fe[be-1].y],he[he.length-1].deltas.push(re);break;case"arc":he.push({deltas:[],abs:[],arc:!0}),Array.isArray(he[he.length-1].abs)&&he[he.length-1].abs.push(pe)}}ue=X?null:F==="stroke"?"stroke":"fill";for(var Re=!1,Fe=0;Fe<he.length;Fe++)if(he[Fe].arc)for(var K=he[Fe].abs,_=0;_<K.length;_++){var A=K[_];A.type==="arc"?M.call(this,A.x,A.y,A.radius,A.startAngle,A.endAngle,A.counterclockwise,void 0,X,!Re):H.call(this,A.x,A.y),Re=!0}else if(he[Fe].close===!0)this.pdf.internal.out("h"),Re=!1;else if(he[Fe].begin!==!0){var j=he[Fe].start.x,oe=he[Fe].start.y;z.call(this,he[Fe].deltas,j,oe),Re=!0}ue&&D.call(this,ue),X&&I.call(this)}},O=function(F){var X=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=X*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-re;case"top":return F+X-re;case"hanging":return F+X-2*re;case"middle":return F+X/2-re;case"ideographic":return F;case"alphabetic":default:return F}},T=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(X,re){this.colorStops.push([X,re])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(F,X,re,ue,he,fe,be,pe,me){for(var _e=ce.call(this,re,ue,he,fe),Te=0;Te<_e.length;Te++){var je=_e[Te];Te===0&&(me?R.call(this,je.x1+F,je.y1+X):H.call(this,je.x1+F,je.y1+X)),ee.call(this,F,X,je.x2,je.y2,je.x3,je.y3,je.x4,je.y4)}pe?I.call(this):D.call(this,be)},D=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},I=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(F,X){this.pdf.internal.out(n(F)+" "+r(X)+" m")},$=function(F){var X;switch(F.align){case"right":case"end":X="right";break;case"center":X="center";break;case"left":case"start":default:X="left"}var re=this.pdf.getTextDimensions(F.text),ue=O.call(this,F.y),he=T.call(this,ue)-re.h,fe=this.ctx.transform.applyToPoint(new o(F.x,ue)),be=this.ctx.transform.decompose(),pe=new l;pe=(pe=(pe=pe.multiply(be.translate)).multiply(be.skew)).multiply(be.scale);for(var me,_e,Te,je=this.ctx.transform.applyToRectangle(new a(F.x,ue,re.w,re.h)),Qe=pe.applyToRectangle(new a(F.x,he,re.w,re.h)),ne=b.call(this,Qe),V=[],Re=0;Re<ne.length;Re+=1)V.indexOf(ne[Re])===-1&&V.push(ne[Re]);if(w(V),this.autoPaging)for(var Fe=V[0],K=V[V.length-1],_=Fe;_<K+1;_++){this.pdf.setPage(_);var A=_===1?this.posY+this.margin[0]:this.margin[0],j=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],oe=this.pdf.internal.pageSize.height-this.margin[2],ye=oe-this.margin[0],Ee=this.pdf.internal.pageSize.width-this.margin[1],Ge=Ee-this.margin[3],Ze=_===1?0:j+(_-2)*ye;if(this.ctx.clip_path.length!==0){var bt=this.path;me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(me,this.posX+this.margin[3],-1*Ze+A),P.call(this,"fill",!0),this.path=bt}var tt=x([JSON.parse(JSON.stringify(Qe))],this.posX+this.margin[3],-Ze+A+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*F.scale),Te=this.lineWidth,this.lineWidth=Te*F.scale);var rt=this.autoPaging!=="text";if(rt||tt.y+tt.h<=oe){if(rt||tt.y>=A&&tt.x<=Ee){var Be=rt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||Ee-tt.x)[0],In=x([JSON.parse(JSON.stringify(je))],this.posX+this.margin[3],-Ze+A+this.ctx.prevPageLastElemOffset)[0],Ht=rt&&(_>Fe||_<K)&&g.call(this);Ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ge,ye,null).clip().discardPath()),this.pdf.text(Be,In.x,In.y,{angle:F.angle,align:X,renderingMode:F.renderingMode}),Ht&&this.pdf.restoreGraphicsState()}}else tt.y<oe&&(this.ctx.prevPageLastElemOffset+=oe-tt.y);F.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Te)}else F.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*F.scale),Te=this.lineWidth,this.lineWidth=Te*F.scale),this.pdf.text(F.text,fe.x+this.posX,fe.y+this.posY,{angle:F.angle,align:X,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Te)},H=function(F,X,re,ue){re=re||0,ue=ue||0,this.pdf.internal.out(n(F+re)+" "+r(X+ue)+" l")},z=function(F,X,re){return this.pdf.lines(F,X,re,null,null)},ee=function(F,X,re,ue,he,fe,be,pe){this.pdf.internal.out([e(i(re+F)),e(s(ue+X)),e(i(he+F)),e(s(fe+X)),e(i(be+F)),e(s(pe+X)),"c"].join(" "))},ce=function(F,X,re,ue){for(var he=2*Math.PI,fe=Math.PI/2;X>re;)X-=he;var be=Math.abs(re-X);be<he&&ue&&(be=he-be);for(var pe=[],me=ue?-1:1,_e=X;be>1e-5;){var Te=_e+me*Math.min(be,fe);pe.push(le.call(this,F,_e,Te)),be-=Math.abs(Te-_e),_e=Te}return pe},le=function(F,X,re){var ue=(re-X)/2,he=F*Math.cos(ue),fe=F*Math.sin(ue),be=he,pe=-fe,me=be*be+pe*pe,_e=me+be*he+pe*fe,Te=4/3*(Math.sqrt(2*me*_e)-_e)/(be*fe-pe*he),je=be-Te*pe,Qe=pe+Te*be,ne=je,V=-Qe,Re=ue+X,Fe=Math.cos(Re),K=Math.sin(Re);return{x1:F*Math.cos(X),y1:F*Math.sin(X),x2:je*Fe-Qe*K,y2:je*K+Qe*Fe,x3:ne*Fe-V*K,y3:ne*K+V*Fe,x4:F*Math.cos(re),y4:F*Math.sin(re)}},te=function(F){return 180*F/Math.PI},Z=function(F,X,re,ue,he,fe){var be=F+.5*(re-F),pe=X+.5*(ue-X),me=he+.5*(re-he),_e=fe+.5*(ue-fe),Te=Math.min(F,he,be,me),je=Math.max(F,he,be,me),Qe=Math.min(X,fe,pe,_e),ne=Math.max(X,fe,pe,_e);return new a(Te,Qe,je-Te,ne-Qe)},de=function(F,X,re,ue,he,fe,be,pe){var me,_e,Te,je,Qe,ne,V,Re,Fe,K,_,A,j,oe,ye=re-F,Ee=ue-X,Ge=he-re,Ze=fe-ue,bt=be-he,tt=pe-fe;for(_e=0;_e<41;_e++)Fe=(V=(Te=F+(me=_e/40)*ye)+me*((Qe=re+me*Ge)-Te))+me*(Qe+me*(he+me*bt-Qe)-V),K=(Re=(je=X+me*Ee)+me*((ne=ue+me*Ze)-je))+me*(ne+me*(fe+me*tt-ne)-Re),_e==0?(_=Fe,A=K,j=Fe,oe=K):(_=Math.min(_,Fe),A=Math.min(A,K),j=Math.max(j,Fe),oe=Math.max(oe,K));return new a(Math.round(_),Math.round(A),Math.round(j-_),Math.round(oe-A))},Ce=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,X,re=(F=this.ctx.lineDash,X=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:X}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(Tt.API),function(t){var e=function(s){var o,a,l,c,d,u,f,h,p,g;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(u=(d=((d=((d=((d=(d-(g=d%85))/85)-(p=d%85))/85)-(h=d%85))/85)-(f=d%85))/85)%85,a.push(u+33,f+33,h+33,p+33,g+33)):a.push(122);return function(b,v){for(var x=v;x>0;x--)b.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,d,u=String,f="length",h=255,p="charCodeAt",g="slice",b="replace";for(s[g](-2),s=s[g](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),l=[],c=0,d=(s+=o="uuuuu"[g](s[f]%5||5))[f];d>c;c+=5)a=52200625*(s[p](c)-33)+614125*(s[p](c+1)-33)+7225*(s[p](c+2)-33)+85*(s[p](c+3)-33)+(s[p](c+4)-33),l.push(h&a>>24,h&a>>16,h&a>>8,h&a);return function(v,x){for(var w=x;w>0;w--)v.pop()}(l,o[f]),u.fromCharCode.apply(u,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=aA(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Tt.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,d){var u=new XMLHttpRequest,f=0,h=function(p){var g=p.length,b=[],v=String.fromCharCode;for(f=0;f<g;f+=1)b.push(v(255&p.charCodeAt(f)));return b.join("")};if(u.open("GET",l,!c),u.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(u.onload=function(){u.status===200?d(h(this.responseText)):d(void 0)}),u.send(null),c&&u.status===200)return h(u.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(Tt.API),function(t){function e(){return(Lt.html2canvas?Promise.resolve(Lt.html2canvas):nA(()=>import("./html2canvas.esm-CBrSDip1.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Lt.DOMPurify?Promise.resolve(Lt.DOMPurify):nA(()=>import("./purify.es-a-CayzAK.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Ln(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,d){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)d!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||u.appendChild(l(f,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,u=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete u.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var f=0;f<c.length;++f){var h=c[f],p=h.src.find(function(g){return g.format==="truetype"});p&&l.addFont(p.url,h.ref.name,h.ref.style)}return u.windowHeight=u.windowHeight||0,u.windowHeight=u.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):u.windowHeight,l.context2d.save(!0),a(this.prop.container,u)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||Tt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,d){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(u){return l.updateProgress(null,c),u}).then(c,d).then(function(u){return l.updateProgress(1),u})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(c,o,a);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Tt.getPageSize=function(o,a,l){if(Ln(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var d,u=(""+l).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}var h,p=0,g=0;if(f.hasOwnProperty(u))p=f[u][1]/d,g=f[u][0]/d;else try{p=l[1],g=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",g>p&&(h=g,g=p,p=h);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",p>g&&(h=g,g=p,p=h)}return{width:g,height:p,unit:a,k:d,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(hA):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(Tt.API),Tt.API.addJS=function(t){return UO=t,this.internal.events.subscribe("postPutResources",function(){_2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(_2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),BO=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+UO+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){_2!==void 0&&BO!==void 0&&this.internal.out("/Names <</JavaScript "+_2+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(s=0;s<c;s++){var u=n.internal.newObject();d.push(u);var f=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var h=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<d.length;s++)n.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+h+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Tt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(u){for(var f,h=256*u.charCodeAt(4)+u.charCodeAt(5),p=u.length,g={width:0,height:0,numcomponents:1},b=4;b<p;b+=2){if(b+=h,e.indexOf(u.charCodeAt(b+1))!==-1){f=256*u.charCodeAt(b+5)+u.charCodeAt(b+6),g={width:256*u.charCodeAt(b+7)+u.charCodeAt(b+8),height:f,numcomponents:u.charCodeAt(b+9)};break}h=256*u.charCodeAt(b+2)+u.charCodeAt(b+3)}return g}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return d}}(Tt.API);var ap,A2,HO,VO,WO,OCe=function(){var t,e,n;function r(s){var o,a,l,c,d,u,f,h,p,g,b,v,x,w;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},u=null;;){switch(o=this.readUInt32(),p=(function(){var C,P;for(P=[],C=0;C<4;++C)P.push(String.fromCharCode(this.data[this.pos++]));return P}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":u&&this.animation.frames.push(u),this.pos+=4,u={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),c=this.readUInt16()||100,u.delay=1e3*d/c,u.disposeOp=this.data[this.pos++],u.blendOp=this.data[this.pos++],u.data=[];break;case"IDAT":case"fdAT":for(p==="fdAT"&&(this.pos+=4,o-=4),s=(u!=null?u.data:void 0)||this.imgData,v=0;0<=o?v<o:v>o;0<=o?++v:--v)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((g=l-this.transparency.indexed.length)>0)for(x=0;0<=g?x<g:x>g;0<=g?++x:--x)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":f=(b=this.read(o)).indexOf(0),h=String.fromCharCode.apply(String,b.slice(0,f)),this.text[h]=String.fromCharCode.apply(String,b.slice(f+1));break;case"IEND":return u&&this.animation.frames.push(u),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(w=this.colorType)===4||w===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(u,f,h,p){var g,b,v,x,w,C,P,O,T,M,D,I,R,$,H,z,ee,ce,le,te,Z,de=Math.ceil((c.width-u)/h),Ce=Math.ceil((c.height-f)/p),F=c.width==de&&c.height==Ce;for($=o*de,I=F?a:new Uint8Array($*Ce),C=s.length,R=0,b=0;R<Ce&&l<C;){switch(s[l++]){case 0:for(x=ee=0;ee<$;x=ee+=1)I[b++]=s[l++];break;case 1:for(x=ce=0;ce<$;x=ce+=1)g=s[l++],w=x<o?0:I[b-o],I[b++]=(g+w)%256;break;case 2:for(x=le=0;le<$;x=le+=1)g=s[l++],v=(x-x%o)/o,H=R&&I[(R-1)*$+v*o+x%o],I[b++]=(H+g)%256;break;case 3:for(x=te=0;te<$;x=te+=1)g=s[l++],v=(x-x%o)/o,w=x<o?0:I[b-o],H=R&&I[(R-1)*$+v*o+x%o],I[b++]=(g+Math.floor((w+H)/2))%256;break;case 4:for(x=Z=0;Z<$;x=Z+=1)g=s[l++],v=(x-x%o)/o,w=x<o?0:I[b-o],R===0?H=z=0:(H=I[(R-1)*$+v*o+x%o],z=v&&I[(R-1)*$+(v-1)*o+x%o]),P=w+H-z,O=Math.abs(P-w),M=Math.abs(P-H),D=Math.abs(P-z),T=O<=M&&O<=D?w:M<=D?H:z,I[b++]=(g+T)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!F){var X=((f+R*p)*c.width+u)*o,re=R*$;for(x=0;x<de;x+=1){for(var ue=0;ue<o;ue+=1)a[X++]=I[re++];X+=(h-1)*o}}R++}}return s=uCe(s),c.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,d,u,f,h;for(a=this.palette,d=this.transparency.indexed||[],c=new Uint8Array((d.length||0)+a.length),l=0,s=0,o=u=0,f=a.length;u<f;o=u+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(h=d[s++])!=null?h:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,d,u,f,h,p,g,b,v;if(l=this.colors,g=null,a=this.hasAlphaChannel,this.palette.length&&(g=(v=this._decodedPalette)!=null?v:this._decodedPalette=this.decodePalette(),l=4,a=!0),p=(c=s.data||s).length,u=g||o,d=f=0,l===1)for(;d<p;)h=g?4*o[d/4]:f,b=u[h++],c[d++]=b,c[d++]=b,c[d++]=b,c[d++]=a?u[h++]:255,f=h;else for(;d<p;)h=g?4*o[d/4]:f,c[d++]=u[h++],c[d++]=u[h++],c[d++]=u[h++],c[d++]=a?u[h++]:255,f=h},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Lt)==="[object Window]"){try{e=Lt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,d,u,f,h;if(this.animation){for(h=[],a=d=0,u=(f=this.animation.frames).length;d<u;a=++d)o=f[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,h.push(o.image=t(l));return h}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,d,u,f=this;return a=0,u=this.animation,c=u.numFrames,l=u.frames,d=u.numPlays,(o=function(){var h,p;if(h=a++%c,p=l[h],f.renderFrame(s,h),c>1&&a/c<d)return f.animation._timeout=setTimeout(o,p.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function RCe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,d=[],u=0,f=null,h=0,p=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,p=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var g=t[e++];u=t[e++]|t[e++]<<8,f=t[e++],!(1&g)&&(f=null),h=g>>2&7,e++;break;case 254:for(;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var b=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,C=t[e++],P=C>>6&1,O=1<<(7&C)+1,T=a,M=l,D=!1;C>>7&&(D=!0,T=e,M=O,e+=3*O);var I=e;for(e++;;){var R;if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}d.push({x:b,y:v,width:x,height:w,has_local_palette:D,palette_offset:T,palette_size:M,data_offset:I,data_length:e-I,transparent_index:f,interlaced:!!P,delay:u,disposal:h});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return p},this.frameInfo=function($){if($<0||$>=d.length)throw new Error("Frame index out of range.");return d[$]},this.decodeAndBlitFrameBGRA=function($,H){var z=this.frameInfo($),ee=z.width*z.height,ce=new Uint8Array(ee);qO(t,z.data_offset,ce,ee);var le=z.palette_offset,te=z.transparent_index;te===null&&(te=256);var Z=z.width,de=n-Z,Ce=Z,F=4*(z.y*n+z.x),X=4*((z.y+z.height)*n+z.x),re=F,ue=4*de;z.interlaced===!0&&(ue+=4*n*7);for(var he=8,fe=0,be=ce.length;fe<be;++fe){var pe=ce[fe];if(Ce===0&&(Ce=Z,(re+=ue)>=X&&(ue=4*de+4*n*(he-1),re=F+(Z+de)*(he<<1),he>>=1)),pe===te)re+=4;else{var me=t[le+3*pe],_e=t[le+3*pe+1],Te=t[le+3*pe+2];H[re++]=Te,H[re++]=_e,H[re++]=me,H[re++]=255}--Ce}},this.decodeAndBlitFrameRGBA=function($,H){var z=this.frameInfo($),ee=z.width*z.height,ce=new Uint8Array(ee);qO(t,z.data_offset,ce,ee);var le=z.palette_offset,te=z.transparent_index;te===null&&(te=256);var Z=z.width,de=n-Z,Ce=Z,F=4*(z.y*n+z.x),X=4*((z.y+z.height)*n+z.x),re=F,ue=4*de;z.interlaced===!0&&(ue+=4*n*7);for(var he=8,fe=0,be=ce.length;fe<be;++fe){var pe=ce[fe];if(Ce===0&&(Ce=Z,(re+=ue)>=X&&(ue=4*de+4*n*(he-1),re=F+(Z+de)*(he<<1),he>>=1)),pe===te)re+=4;else{var me=t[le+3*pe],_e=t[le+3*pe+1],Te=t[le+3*pe+2];H[re++]=me,H[re++]=_e,H[re++]=Te,H[re++]=255}--Ce}}}function qO(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,d=0,u=0,f=0,h=t[e++],p=new Int32Array(4096),g=null;;){for(;d<16&&h!==0;)u|=t[e++]<<d,d+=8,h===1?h=t[e++]:--h;if(d<l)break;var b=u&c;if(u>>=l,d-=l,b!==s){if(b===o)break;for(var v=b<a?b:g,x=0,w=v;w>s;)w=p[w]>>8,++x;var C=w;if(f+x+(v!==b?1:0)>r)return void qn.log("Warning, gif stream longer than expected.");n[f++]=C;var P=f+=x;for(v!==b&&(n[f++]=C),w=v;x--;)w=p[w],n[--P]=255&w,w>>=8;g!==null&&a<4096&&(p[a++]=g<<8|C,a>=c+1&&l<12&&(++l,c=c<<1|1)),g=b}else a=o+1,c=(1<<(l=i+1))-1,g=null}return f!==r&&qn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function f3(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(65535),f=new Array(65535),h=new Array(64),p=new Array(64),g=[],b=0,v=7,x=new Array(64),w=new Array(64),C=new Array(64),P=new Array(256),O=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],$=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ee=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ce(F,X){for(var re=0,ue=0,he=new Array,fe=1;fe<=16;fe++){for(var be=1;be<=F[fe];be++)he[X[ue]]=[],he[X[ue]][0]=re,he[X[ue]][1]=fe,ue++,re++;re*=2}return he}function le(F){for(var X=F[0],re=F[1]-1;re>=0;)X&1<<re&&(b|=1<<v),re--,--v<0&&(b==255?(te(255),te(0)):te(b),v=7,b=0)}function te(F){g.push(F)}function Z(F){te(F>>8&255),te(255&F)}function de(F,X,re,ue,he){for(var fe,be=he[0],pe=he[240],me=function(K,_){var A,j,oe,ye,Ee,Ge,Ze,bt,tt,rt,Be=0;for(tt=0;tt<8;++tt){A=K[Be],j=K[Be+1],oe=K[Be+2],ye=K[Be+3],Ee=K[Be+4],Ge=K[Be+5],Ze=K[Be+6];var In=A+(bt=K[Be+7]),Ht=A-bt,Tr=j+Ze,nt=j-Ze,ct=oe+Ge,ln=oe-Ge,dt=ye+Ee,Cn=ye-Ee,Ft=In+dt,Kn=In-dt,dr=Tr+ct,wn=Tr-ct;K[Be]=Ft+dr,K[Be+4]=Ft-dr;var Pt=.707106781*(wn+Kn);K[Be+2]=Kn+Pt,K[Be+6]=Kn-Pt;var Qt=.382683433*((Ft=Cn+ln)-(wn=nt+Ht)),Ni=.5411961*Ft+Qt,xr=1.306562965*wn+Qt,To=.707106781*(dr=ln+nt),Ps=Ht+To,At=Ht-To;K[Be+5]=At+Ni,K[Be+3]=At-Ni,K[Be+1]=Ps+xr,K[Be+7]=Ps-xr,Be+=8}for(Be=0,tt=0;tt<8;++tt){A=K[Be],j=K[Be+8],oe=K[Be+16],ye=K[Be+24],Ee=K[Be+32],Ge=K[Be+40],Ze=K[Be+48];var Qs=A+(bt=K[Be+56]),Ts=A-bt,Mi=j+Ze,Nr=j-Ze,Sr=oe+Ge,ns=oe-Ge,Ga=ye+Ee,er=ye-Ee,Ns=Qs+Ga,si=Qs-Ga,Ms=Mi+Sr,fn=Mi-Sr;K[Be]=Ns+Ms,K[Be+32]=Ns-Ms;var rs=.707106781*(fn+si);K[Be+16]=si+rs,K[Be+48]=si-rs;var eo=.382683433*((Ns=er+ns)-(fn=Nr+Ts)),zl=.5411961*Ns+eo,Bl=1.306562965*fn+eo,Ka=.707106781*(Ms=ns+Nr),Os=Ts+Ka,Gt=Ts-Ka;K[Be+40]=Gt+zl,K[Be+24]=Gt-zl,K[Be+8]=Os+Bl,K[Be+56]=Os-Bl,Be++}for(tt=0;tt<64;++tt)rt=K[tt]*_[tt],h[tt]=rt>0?rt+.5|0:rt-.5|0;return h}(F,X),_e=0;_e<64;++_e)p[T[_e]]=me[_e];var Te=p[0]-re;re=p[0],Te==0?le(ue[0]):(le(ue[f[fe=32767+Te]]),le(u[fe]));for(var je=63;je>0&&p[je]==0;)je--;if(je==0)return le(be),re;for(var Qe,ne=1;ne<=je;){for(var V=ne;p[ne]==0&&ne<=je;)++ne;var Re=ne-V;if(Re>=16){Qe=Re>>4;for(var Fe=1;Fe<=Qe;++Fe)le(pe);Re&=15}fe=32767+p[ne],le(he[(Re<<4)+f[fe]]),le(u[fe]),ne++}return je!=63&&le(be),re}function Ce(F){F=Math.min(Math.max(F,1),100),s!=F&&(function(X){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ue=0;ue<64;ue++){var he=o((re[ue]*X+50)/100);he=Math.min(Math.max(he,1),255),a[T[ue]]=he}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],be=0;be<64;be++){var pe=o((fe[be]*X+50)/100);pe=Math.min(Math.max(pe,1),255),l[T[be]]=pe}for(var me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],_e=0,Te=0;Te<8;Te++)for(var je=0;je<8;je++)c[_e]=1/(a[T[_e]]*me[Te]*me[je]*8),d[_e]=1/(l[T[_e]]*me[Te]*me[je]*8),_e++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),s=F)}this.encode=function(F,X){X&&Ce(X),g=new Array,b=0,v=7,Z(65496),Z(65504),Z(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),Z(1),Z(1),te(0),te(0),function(){Z(65499),Z(132),te(0);for(var j=0;j<64;j++)te(a[j]);te(1);for(var oe=0;oe<64;oe++)te(l[oe])}(),function(j,oe){Z(65472),Z(17),te(8),Z(oe),Z(j),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)}(F.width,F.height),function(){Z(65476),Z(418),te(0);for(var j=0;j<16;j++)te(M[j+1]);for(var oe=0;oe<=11;oe++)te(D[oe]);te(16);for(var ye=0;ye<16;ye++)te(I[ye+1]);for(var Ee=0;Ee<=161;Ee++)te(R[Ee]);te(1);for(var Ge=0;Ge<16;Ge++)te($[Ge+1]);for(var Ze=0;Ze<=11;Ze++)te(H[Ze]);te(17);for(var bt=0;bt<16;bt++)te(z[bt+1]);for(var tt=0;tt<=161;tt++)te(ee[tt])}(),Z(65498),Z(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0);var re=0,ue=0,he=0;b=0,v=7,this.encode.displayName="_encode_";for(var fe,be,pe,me,_e,Te,je,Qe,ne,V=F.data,Re=F.width,Fe=F.height,K=4*Re,_=0;_<Fe;){for(fe=0;fe<K;){for(_e=K*_+fe,je=-1,Qe=0,ne=0;ne<64;ne++)Te=_e+(Qe=ne>>3)*K+(je=4*(7&ne)),_+Qe>=Fe&&(Te-=K*(_+1+Qe-Fe)),fe+je>=K&&(Te-=fe+je-K+4),be=V[Te++],pe=V[Te++],me=V[Te++],x[ne]=(O[be]+O[pe+256>>0]+O[me+512>>0]>>16)-128,w[ne]=(O[be+768>>0]+O[pe+1024>>0]+O[me+1280>>0]>>16)-128,C[ne]=(O[be+1280>>0]+O[pe+1536>>0]+O[me+1792>>0]>>16)-128;re=de(x,c,re,e,r),ue=de(w,d,ue,n,i),he=de(C,d,he,n,i),fe+=32}_+=8}if(v>=0){var A=[];A[1]=v+1,A[0]=(1<<v+1)-1,le(A)}return Z(65497),new Uint8Array(g)},t=t||50,function(){for(var F=String.fromCharCode,X=0;X<256;X++)P[X]=F(X)}(),e=ce(M,D),n=ce($,H),r=ce(I,R),i=ce(z,ee),function(){for(var F=1,X=2,re=1;re<=15;re++){for(var ue=F;ue<X;ue++)f[32767+ue]=re,u[32767+ue]=[],u[32767+ue][1]=re,u[32767+ue][0]=ue;for(var he=-(X-1);he<=-F;he++)f[32767+he]=re,u[32767+he]=[],u[32767+he][1]=re,u[32767+he][0]=X-1+he;F<<=1,X<<=1}}(),function(){for(var F=0;F<256;F++)O[F]=19595*F,O[F+256>>0]=38470*F,O[F+512>>0]=7471*F+32768,O[F+768>>0]=-11059*F,O[F+1024>>0]=-21709*F,O[F+1280>>0]=32768*F+8421375,O[F+1536>>0]=-27439*F,O[F+1792>>0]=-5329*F}(),Ce(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ga(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function GO(t){function e(M){if(!M)throw Error("assert :P")}function n(M,D,I){for(var R=0;4>R;R++)if(M[D+R]!=I.charCodeAt(R))return!0;return!1}function r(M,D,I,R,$){for(var H=0;H<$;H++)M[D+H]=I[R+H]}function i(M,D,I,R){for(var $=0;$<R;$++)M[D+$]=I}function s(M){return new Int32Array(M)}function o(M,D){for(var I=[],R=0;R<M;R++)I.push(new D);return I}function a(M,D){var I=[];return function R($,H,z){for(var ee=z[H],ce=0;ce<ee&&($.push(z.length>H+1?[]:new D),!(z.length<H+1));ce++)R($[ce],H+1,z)}(I,0,M),I}var l=function(){var M=this;function D(m,k){for(var N=1<<k-1>>>0;m&N;)N>>>=1;return N?(m&N-1)+N:m}function I(m,k,N,L,B){e(!(L%N));do m[k+(L-=N)]=B;while(0<L)}function R(m,k,N,L,B){if(e(2328>=B),512>=B)var q=s(512);else if((q=s(B))==null)return 0;return function(G,J,Q,se,we,Ne){var Me,Ae,Ve=J,$e=1<<Q,xe=s(16),Se=s(16);for(e(we!=0),e(se!=null),e(G!=null),e(0<Q),Ae=0;Ae<we;++Ae){if(15<se[Ae])return 0;++xe[se[Ae]]}if(xe[0]==we)return 0;for(Se[1]=0,Me=1;15>Me;++Me){if(xe[Me]>1<<Me)return 0;Se[Me+1]=Se[Me]+xe[Me]}for(Ae=0;Ae<we;++Ae)Me=se[Ae],0<se[Ae]&&(Ne[Se[Me]++]=Ae);if(Se[15]==1)return(se=new $).g=0,se.value=Ne[0],I(G,Ve,1,$e,se),$e;var Ue,We=-1,He=$e-1,ft=0,it=1,Et=1,at=1<<Q;for(Ae=0,Me=1,we=2;Me<=Q;++Me,we<<=1){if(it+=Et<<=1,0>(Et-=xe[Me]))return 0;for(;0<xe[Me];--xe[Me])(se=new $).g=Me,se.value=Ne[Ae++],I(G,Ve+ft,we,at,se),ft=D(ft,Me)}for(Me=Q+1,we=2;15>=Me;++Me,we<<=1){if(it+=Et<<=1,0>(Et-=xe[Me]))return 0;for(;0<xe[Me];--xe[Me]){if(se=new $,(ft&He)!=We){for(Ve+=at,Ue=1<<(We=Me)-Q;15>We&&!(0>=(Ue-=xe[We]));)++We,Ue<<=1;$e+=at=1<<(Ue=We-Q),G[J+(We=ft&He)].g=Ue+Q,G[J+We].value=Ve-J-We}se.g=Me-Q,se.value=Ne[Ae++],I(G,Ve+(ft>>Q),we,at,se),ft=D(ft,Me)}}return it!=2*Se[15]-1?0:$e}(m,k,N,L,B,q)}function $(){this.value=this.g=0}function H(){this.value=this.g=0}function z(){this.G=o(5,$),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(xi,H)}function ee(m,k,N,L){e(m!=null),e(k!=null),e(2147483648>L),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=k,m.pa=N,m.Jd=k,m.Yc=N+L,m.Zc=4<=L?N+L-4+1:N,fe(m)}function ce(m,k){for(var N=0;0<k--;)N|=pe(m,128)<<k;return N}function le(m,k){var N=ce(m,k);return be(m)?-N:N}function te(m,k,N,L){var B,q=0;for(e(m!=null),e(k!=null),e(4294967288>L),m.Sb=L,m.Ra=0,m.u=0,m.h=0,4<L&&(L=4),B=0;B<L;++B)q+=k[N+B]<<8*B;m.Ra=q,m.bb=L,m.oa=k,m.pa=N}function Z(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<Fh-8>>>0,++m.bb,m.u-=8;re(m)&&(m.h=1,m.u=0)}function de(m,k){if(e(0<=k),!m.h&&k<=jh){var N=X(m)&$h[k];return m.u+=k,Z(m),N}return m.h=1,m.u=0}function Ce(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(m){return m.Ra>>>(m.u&Fh-1)>>>0}function re(m){return e(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>Fh}function ue(m,k){m.u=k,m.h=re(m)}function he(m){m.u>=Cm&&(e(m.u>=Cm),Z(m))}function fe(m){e(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(e(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function be(m){return ce(m,1)}function pe(m,k){var N=m.Ca;0>m.b&&fe(m);var L=m.b,B=N*k>>>8,q=(m.I>>>L>B)+0;for(q?(N-=B,m.I-=B+1<<L>>>0):N=B+1,L=N,B=0;256<=L;)B+=8,L>>=8;return L=7^B+Ls[L],m.b-=L,m.Ca=(N<<L)-1,q}function me(m,k,N){m[k+0]=N>>24&255,m[k+1]=N>>16&255,m[k+2]=N>>8&255,m[k+3]=N>>0&255}function _e(m,k){return m[k+0]<<0|m[k+1]<<8}function Te(m,k){return _e(m,k)|m[k+2]<<16}function je(m,k){return _e(m,k)|_e(m,k+2)<<16}function Qe(m,k){var N=1<<k;return e(m!=null),e(0<k),m.X=s(N),m.X==null?0:(m.Mb=32-k,m.Xa=k,1)}function ne(m,k){e(m!=null),e(k!=null),e(m.Xa==k.Xa),r(k.X,0,m.X,0,1<<k.Xa)}function V(){this.X=[],this.Xa=this.Mb=0}function Re(m,k,N,L){e(N!=null),e(L!=null);var B=N[0],q=L[0];return B==0&&(B=(m*q+k/2)/k),q==0&&(q=(k*B+m/2)/m),0>=B||0>=q?0:(N[0]=B,L[0]=q,1)}function Fe(m,k){return m+(1<<k)-1>>>k}function K(m,k){return((4278255360&m)+(4278255360&k)>>>0&4278255360)+((16711935&m)+(16711935&k)>>>0&16711935)>>>0}function _(m,k){M[k]=function(N,L,B,q,G,J,Q){var se;for(se=0;se<G;++se){var we=M[m](J[Q+se-1],B,q+se);J[Q+se]=K(N[L+se],we)}}}function A(){this.ud=this.hd=this.jd=0}function j(m,k){return((4278124286&(m^k))>>>1)+(m&k)>>>0}function oe(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function ye(m,k){return oe(m+(m-k+.5>>1))}function Ee(m,k,N){return Math.abs(k-N)-Math.abs(m-N)}function Ge(m,k,N,L,B,q,G){for(L=q[G-1],N=0;N<B;++N)q[G+N]=L=K(m[k+N],L)}function Ze(m,k,N,L,B){var q;for(q=0;q<N;++q){var G=m[k+q],J=G>>8&255,Q=16711935&(Q=(Q=16711935&G)+((J<<16)+J));L[B+q]=(4278255360&G)+Q>>>0}}function bt(m,k){k.jd=m>>0&255,k.hd=m>>8&255,k.ud=m>>16&255}function tt(m,k,N,L,B,q){var G;for(G=0;G<L;++G){var J=k[N+G],Q=J>>>8,se=J,we=255&(we=(we=J>>>16)+((m.jd<<24>>24)*(Q<<24>>24)>>>5));se=255&(se=(se=se+((m.hd<<24>>24)*(Q<<24>>24)>>>5))+((m.ud<<24>>24)*(we<<24>>24)>>>5)),B[q+G]=(4278255360&J)+(we<<16)+se}}function rt(m,k,N,L,B){M[k]=function(q,G,J,Q,se,we,Ne,Me,Ae){for(Q=Ne;Q<Me;++Q)for(Ne=0;Ne<Ae;++Ne)se[we++]=B(J[L(q[G++])])},M[m]=function(q,G,J,Q,se,we,Ne){var Me=8>>q.b,Ae=q.Ea,Ve=q.K[0],$e=q.w;if(8>Me)for(q=(1<<q.b)-1,$e=(1<<Me)-1;G<J;++G){var xe,Se=0;for(xe=0;xe<Ae;++xe)xe&q||(Se=L(Q[se++])),we[Ne++]=B(Ve[Se&$e]),Se>>=Me}else M["VP8LMapColor"+N](Q,se,Ve,$e,we,Ne,G,J,Ae)}}function Be(m,k,N,L,B){for(N=k+N;k<N;){var q=m[k++];L[B++]=q>>16&255,L[B++]=q>>8&255,L[B++]=q>>0&255}}function In(m,k,N,L,B){for(N=k+N;k<N;){var q=m[k++];L[B++]=q>>16&255,L[B++]=q>>8&255,L[B++]=q>>0&255,L[B++]=q>>24&255}}function Ht(m,k,N,L,B){for(N=k+N;k<N;){var q=(G=m[k++])>>16&240|G>>12&15,G=G>>0&240|G>>28&15;L[B++]=q,L[B++]=G}}function Tr(m,k,N,L,B){for(N=k+N;k<N;){var q=(G=m[k++])>>16&248|G>>13&7,G=G>>5&224|G>>3&31;L[B++]=q,L[B++]=G}}function nt(m,k,N,L,B){for(N=k+N;k<N;){var q=m[k++];L[B++]=q>>0&255,L[B++]=q>>8&255,L[B++]=q>>16&255}}function ct(m,k,N,L,B,q){if(q==0)for(N=k+N;k<N;)me(L,((q=m[k++])[0]>>24|q[1]>>8&65280|q[2]<<8&16711680|q[3]<<24)>>>0),B+=32;else r(L,B,m,k,N)}function ln(m,k){M[k][0]=M[m+"0"],M[k][1]=M[m+"1"],M[k][2]=M[m+"2"],M[k][3]=M[m+"3"],M[k][4]=M[m+"4"],M[k][5]=M[m+"5"],M[k][6]=M[m+"6"],M[k][7]=M[m+"7"],M[k][8]=M[m+"8"],M[k][9]=M[m+"9"],M[k][10]=M[m+"10"],M[k][11]=M[m+"11"],M[k][12]=M[m+"12"],M[k][13]=M[m+"13"],M[k][14]=M[m+"0"],M[k][15]=M[m+"0"]}function dt(m){return m==J5||m==Y5||m==uv||m==Z5}function Cn(){this.eb=[],this.size=this.A=this.fb=0}function Ft(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Kn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Cn,this.f.kb=new Ft,this.sd=null}function dr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function wn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Pt(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function Qt(m,k){var N=m.T,L=k.ba.f.RGBA,B=L.eb,q=L.fb+m.ka*L.A,G=Do[k.ba.S],J=m.y,Q=m.O,se=m.f,we=m.N,Ne=m.ea,Me=m.W,Ae=k.cc,Ve=k.dc,$e=k.Mc,xe=k.Nc,Se=m.ka,Ue=m.ka+m.T,We=m.U,He=We+1>>1;for(Se==0?G(J,Q,null,null,se,we,Ne,Me,se,we,Ne,Me,B,q,null,null,We):(G(k.ec,k.fc,J,Q,Ae,Ve,$e,xe,se,we,Ne,Me,B,q-L.A,B,q,We),++N);Se+2<Ue;Se+=2)Ae=se,Ve=we,$e=Ne,xe=Me,we+=m.Rc,Me+=m.Rc,q+=2*L.A,G(J,(Q+=2*m.fa)-m.fa,J,Q,Ae,Ve,$e,xe,se,we,Ne,Me,B,q-L.A,B,q,We);return Q+=m.fa,m.j+Ue<m.o?(r(k.ec,k.fc,J,Q,We),r(k.cc,k.dc,se,we,He),r(k.Mc,k.Nc,Ne,Me,He),N--):1&Ue||G(J,Q,null,null,se,we,Ne,Me,se,we,Ne,Me,B,q+L.A,null,null,We),N}function Ni(m,k,N){var L=m.F,B=[m.J];if(L!=null){var q=m.U,G=k.ba.S,J=G==cv||G==uv;k=k.ba.f.RGBA;var Q=[0],se=m.ka;Q[0]=m.T,m.Kb&&(se==0?--Q[0]:(--se,B[0]-=m.width),m.j+m.ka+m.T==m.o&&(Q[0]=m.o-m.j-se));var we=k.eb;se=k.fb+se*k.A,m=Zn(L,B[0],m.width,q,Q,we,se+(J?0:3),k.A),e(N==Q),m&&dt(G)&&Ro(we,se,J,q,Q,k.A)}return 0}function xr(m){var k=m.ma,N=k.ba.S,L=11>N,B=N==av||N==lv||N==cv||N==K5||N==12||dt(N);if(k.memory=null,k.Ib=null,k.Jb=null,k.Nd=null,!Sm(k.Oa,m,B?11:12))return 0;if(B&&dt(N)&&Je(),m.da)alert("todo:use_scaling");else{if(L){if(k.Ib=Pt,m.Kb){if(N=m.U+1>>1,k.memory=s(m.U+2*N),k.memory==null)return 0;k.ec=k.memory,k.fc=0,k.cc=k.ec,k.dc=k.fc+m.U,k.Mc=k.cc,k.Nc=k.dc+N,k.Ib=Qt,Je()}}else alert("todo:EmitYUV");B&&(k.Jb=Ni,L&&Pe())}if(L&&!nP){for(m=0;256>m;++m)qW[m]=89858*(m-128)+fv>>dv,JW[m]=-22014*(m-128)+fv,KW[m]=-45773*(m-128),GW[m]=113618*(m-128)+fv>>dv;for(m=Mm;m<eS;++m)k=76283*(m-16)+fv>>dv,YW[m-Mm]=ro(k,255),ZW[m-Mm]=ro(k+8>>4,15);nP=1}return 1}function To(m){var k=m.ma,N=m.U,L=m.T;return e(!(1&m.ka)),0>=N||0>=L?0:(N=k.Ib(m,k),k.Jb!=null&&k.Jb(m,k,N),k.Dc+=N,1)}function Ps(m){m.ma.memory=null}function At(m,k,N,L){return de(m,8)!=47?0:(k[0]=de(m,14)+1,N[0]=de(m,14)+1,L[0]=de(m,1),de(m,3)!=0?0:!m.h)}function Qs(m,k){if(4>m)return m+1;var N=m-2>>1;return(2+(1&m)<<N)+de(k,N)+1}function Ts(m,k){return 120<k?k-120:1<=(N=((N=OW[k-1])>>4)*m+(8-(15&N)))?N:1;var N}function Mi(m,k,N){var L=X(N),B=m[k+=255&L].g-8;return 0<B&&(ue(N,N.u+8),L=X(N),k+=m[k].value,k+=L&(1<<B)-1),ue(N,N.u+m[k].g),m[k].value}function Nr(m,k,N){return N.g+=m.g,N.value+=m.value<<k>>>0,e(8>=N.g),m.g}function Sr(m,k,N){var L=m.xc;return e((k=L==0?0:m.vc[m.md*(N>>L)+(k>>L)])<m.Wb),m.Ya[k]}function ns(m,k,N,L){var B=m.ab,q=m.c*k,G=m.C;k=G+k;var J=N,Q=L;for(L=m.Ta,N=m.Ua;0<B--;){var se=m.gc[B],we=G,Ne=k,Me=J,Ae=Q,Ve=(Q=L,J=N,se.Ea);switch(e(we<Ne),e(Ne<=se.nc),se.hc){case 2:ev(Me,Ae,(Ne-we)*Ve,Q,J);break;case 0:var $e=we,xe=Ne,Se=Q,Ue=J,We=(at=se).Ea;$e==0&&(q5(Me,Ae,null,null,1,Se,Ue),Ge(Me,Ae+1,0,0,We-1,Se,Ue+1),Ae+=We,Ue+=We,++$e);for(var He=1<<at.b,ft=He-1,it=Fe(We,at.b),Et=at.K,at=at.w+($e>>at.b)*it;$e<xe;){var _n=Et,Tn=at,xn=1;for(_m(Me,Ae,Se,Ue-We,1,Se,Ue);xn<We;){var hn=(xn&~ft)+He;hn>We&&(hn=We),(0,Xc[_n[Tn++]>>8&15])(Me,Ae+ +xn,Se,Ue+xn-We,hn-xn,Se,Ue+xn),xn=hn}Ae+=We,Ue+=We,++$e&ft||(at+=it)}Ne!=se.nc&&r(Q,J-Ve,Q,J+(Ne-we-1)*Ve,Ve);break;case 1:for(Ve=Me,xe=Ae,We=(Me=se.Ea)-(Ue=Me&~(Se=(Ae=1<<se.b)-1)),$e=Fe(Me,se.b),He=se.K,se=se.w+(we>>se.b)*$e;we<Ne;){for(ft=He,it=se,Et=new A,at=xe+Ue,_n=xe+Me;xe<at;)bt(ft[it++],Et),jd(Et,Ve,xe,Ae,Q,J),xe+=Ae,J+=Ae;xe<_n&&(bt(ft[it++],Et),jd(Et,Ve,xe,We,Q,J),xe+=We,J+=We),++we&Se||(se+=$e)}break;case 3:if(Me==Q&&Ae==J&&0<se.b){for(xe=Q,Me=Ve=J+(Ne-we)*Ve-(Ue=(Ne-we)*Fe(se.Ea,se.b)),Ae=Q,Se=J,$e=[],Ue=(We=Ue)-1;0<=Ue;--Ue)$e[Ue]=Ae[Se+Ue];for(Ue=We-1;0<=Ue;--Ue)xe[Me+Ue]=$e[Ue];No(se,we,Ne,Q,Ve,Q,J)}else No(se,we,Ne,Me,Ae,Q,J)}J=L,Q=N}Q!=N&&r(L,N,J,Q,q)}function Ga(m,k){var N=m.V,L=m.Ba+m.c*m.C,B=k-m.C;if(e(k<=m.l.o),e(16>=B),0<B){var q=m.l,G=m.Ta,J=m.Ua,Q=q.width;if(ns(m,B,N,L),B=J=[J],e((N=m.C)<(L=k)),e(q.v<q.va),L>q.o&&(L=q.o),N<q.j){var se=q.j-N;N=q.j,B[0]+=se*Q}if(N>=L?N=0:(B[0]+=4*q.v,q.ka=N-q.j,q.U=q.va-q.v,q.T=L-N,N=1),N){if(J=J[0],11>(N=m.ca).S){var we=N.f.RGBA,Ne=(L=N.S,B=q.U,q=q.T,se=we.eb,we.A),Me=q;for(we=we.fb+m.Ma*we.A;0<Me--;){var Ae=G,Ve=J,$e=B,xe=se,Se=we;switch(L){case ov:Ds(Ae,Ve,$e,xe,Se);break;case av:is(Ae,Ve,$e,xe,Se);break;case J5:is(Ae,Ve,$e,xe,Se),Ro(xe,Se,0,$e,1,0);break;case G6:ql(Ae,Ve,$e,xe,Se);break;case lv:ct(Ae,Ve,$e,xe,Se,1);break;case Y5:ct(Ae,Ve,$e,xe,Se,1),Ro(xe,Se,0,$e,1,0);break;case cv:ct(Ae,Ve,$e,xe,Se,0);break;case uv:ct(Ae,Ve,$e,xe,Se,0),Ro(xe,Se,1,$e,1,0);break;case K5:Qc(Ae,Ve,$e,xe,Se);break;case Z5:Qc(Ae,Ve,$e,xe,Se),Yn(xe,Se,$e,1,0);break;case K6:Wl(Ae,Ve,$e,xe,Se);break;default:e(0)}J+=Q,we+=Ne}m.Ma+=q}else alert("todo:EmitRescaledRowsYUVA");e(m.Ma<=N.height)}}m.C=k,e(m.C<=m.i)}function er(m){var k;if(0<m.ua)return 0;for(k=0;k<m.Wb;++k){var N=m.Ya[k].G,L=m.Ya[k].H;if(0<N[1][L[1]+0].g||0<N[2][L[2]+0].g||0<N[3][L[3]+0].g)return 0}return 1}function Ns(m,k,N,L,B,q){if(m.Z!=0){var G=m.qd,J=m.rd;for(e(ru[m.Z]!=null);k<N;++k)ru[m.Z](G,J,L,B,L,B,q),G=L,J=B,B+=q;m.qd=G,m.rd=J}}function si(m,k){var N=m.l.ma,L=N.Z==0||N.Z==1?m.l.j:m.C;if(L=m.C<L?L:m.C,e(k<=m.l.o),k>L){var B=m.l.width,q=N.ca,G=N.tb+B*L,J=m.V,Q=m.Ba+m.c*L,se=m.gc;e(m.ab==1),e(se[0].hc==3),tv(se[0],L,k,J,Q,q,G),Ns(N,L,k,q,G,B)}m.C=m.Ma=k}function Ms(m,k,N,L,B,q,G){var J=m.$/L,Q=m.$%L,se=m.m,we=m.s,Ne=N+m.$,Me=Ne;B=N+L*B;var Ae=N+L*q,Ve=280+we.ua,$e=m.Pb?J:16777216,xe=0<we.ua?we.Wa:null,Se=we.wc,Ue=Ne<Ae?Sr(we,Q,J):null;e(m.C<q),e(Ae<=B);var We=!1;e:for(;;){for(;We||Ne<Ae;){var He=0;if(J>=$e){var ft=Ne-N;e(($e=m).Pb),$e.wd=$e.m,$e.xd=ft,0<$e.s.ua&&ne($e.s.Wa,$e.s.vb),$e=J+LW}if(Q&Se||(Ue=Sr(we,Q,J)),e(Ue!=null),Ue.Qb&&(k[Ne]=Ue.qb,We=!0),!We)if(he(se),Ue.jc){He=se,ft=k;var it=Ne,Et=Ue.pd[X(He)&xi-1];e(Ue.jc),256>Et.g?(ue(He,He.u+Et.g),ft[it]=Et.value,He=0):(ue(He,He.u+Et.g-256),e(256<=Et.value),He=Et.value),He==0&&(We=!0)}else He=Mi(Ue.G[0],Ue.H[0],se);if(se.h)break;if(We||256>He){if(!We)if(Ue.nd)k[Ne]=(Ue.qb|He<<8)>>>0;else{if(he(se),We=Mi(Ue.G[1],Ue.H[1],se),he(se),ft=Mi(Ue.G[2],Ue.H[2],se),it=Mi(Ue.G[3],Ue.H[3],se),se.h)break;k[Ne]=(it<<24|We<<16|He<<8|ft)>>>0}if(We=!1,++Ne,++Q>=L&&(Q=0,++J,G!=null&&J<=q&&!(J%16)&&G(m,J),xe!=null))for(;Me<Ne;)He=k[Me++],xe.X[(506832829*He&4294967295)>>>xe.Mb]=He}else if(280>He){if(He=Qs(He-256,se),ft=Mi(Ue.G[4],Ue.H[4],se),he(se),ft=Ts(L,ft=Qs(ft,se)),se.h)break;if(Ne-N<ft||B-Ne<He)break e;for(it=0;it<He;++it)k[Ne+it]=k[Ne+it-ft];for(Ne+=He,Q+=He;Q>=L;)Q-=L,++J,G!=null&&J<=q&&!(J%16)&&G(m,J);if(e(Ne<=B),Q&Se&&(Ue=Sr(we,Q,J)),xe!=null)for(;Me<Ne;)He=k[Me++],xe.X[(506832829*He&4294967295)>>>xe.Mb]=He}else{if(!(He<Ve))break e;for(We=He-280,e(xe!=null);Me<Ne;)He=k[Me++],xe.X[(506832829*He&4294967295)>>>xe.Mb]=He;He=Ne,e(!(We>>>(ft=xe).Xa)),k[He]=ft.X[We],We=!0}We||e(se.h==re(se))}if(m.Pb&&se.h&&Ne<B)e(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&ne(m.s.vb,m.s.Wa);else{if(se.h)break e;G!=null&&G(m,J>q?q:J),m.a=0,m.$=Ne-N}return 1}return m.a=3,0}function fn(m){e(m!=null),m.vc=null,m.yc=null,m.Ya=null;var k=m.Wa;k!=null&&(k.X=null),m.vb=null,e(m!=null)}function rs(){var m=new W5;return m==null?null:(m.a=0,m.xb=Z6,ln("Predictor","VP8LPredictors"),ln("Predictor","VP8LPredictors_C"),ln("PredictorAdd","VP8LPredictorsAdd"),ln("PredictorAdd","VP8LPredictorsAdd_C"),ev=Ze,jd=tt,Ds=Be,is=In,Qc=Ht,Wl=Tr,ql=nt,M.VP8LMapColor32b=zh,M.VP8LMapColor8b=nv,m)}function eo(m,k,N,L,B){var q=1,G=[m],J=[k],Q=L.m,se=L.s,we=null,Ne=0;e:for(;;){if(N)for(;q&&de(Q,1);){var Me=G,Ae=J,Ve=L,$e=1,xe=Ve.m,Se=Ve.gc[Ve.ab],Ue=de(xe,2);if(Ve.Oc&1<<Ue)q=0;else{switch(Ve.Oc|=1<<Ue,Se.hc=Ue,Se.Ea=Me[0],Se.nc=Ae[0],Se.K=[null],++Ve.ab,e(4>=Ve.ab),Ue){case 0:case 1:Se.b=de(xe,3)+2,$e=eo(Fe(Se.Ea,Se.b),Fe(Se.nc,Se.b),0,Ve,Se.K),Se.K=Se.K[0];break;case 3:var We,He=de(xe,8)+1,ft=16<He?0:4<He?1:2<He?2:3;if(Me[0]=Fe(Se.Ea,ft),Se.b=ft,We=$e=eo(He,1,0,Ve,Se.K)){var it,Et=He,at=Se,_n=1<<(8>>at.b),Tn=s(_n);if(Tn==null)We=0;else{var xn=at.K[0],hn=at.w;for(Tn[0]=at.K[0][0],it=1;it<1*Et;++it)Tn[it]=K(xn[hn+it],Tn[it-1]);for(;it<4*_n;++it)Tn[it]=0;at.K[0]=null,at.K[0]=Tn,We=1}}$e=We;break;case 2:break;default:e(0)}q=$e}}if(G=G[0],J=J[0],q&&de(Q,1)&&!(q=1<=(Ne=de(Q,4))&&11>=Ne)){L.a=3;break e}var Un;if(Un=q)t:{var $n,Jt,Hr,Is=L,Vr=G,$s=J,Nn=Ne,so=N,oo=Is.m,ai=Is.s,Si=[null],as=1,Io=0,Xa=RW[Nn];n:for(;;){if(so&&de(oo,1)){var li=de(oo,3)+2,Yl=Fe(Vr,li),Hd=Fe($s,li),Wh=Yl*Hd;if(!eo(Yl,Hd,0,Is,Si))break n;for(Si=Si[0],ai.xc=li,$n=0;$n<Wh;++$n){var iu=Si[$n]>>8&65535;Si[$n]=iu,iu>=as&&(as=iu+1)}}if(oo.h)break n;for(Jt=0;5>Jt;++Jt){var Cr=J6[Jt];!Jt&&0<Nn&&(Cr+=1<<Nn),Io<Cr&&(Io=Cr)}var tS=o(as*Xa,$),sP=as,oP=o(sP,z);if(oP==null)var pv=null;else e(65536>=sP),pv=oP;var Om=s(Io);if(pv==null||Om==null||tS==null){Is.a=1;break n}var gv=tS;for($n=Hr=0;$n<as;++$n){var ua=pv[$n],qh=ua.G,Gh=ua.H,aP=0,mv=1,lP=0;for(Jt=0;5>Jt;++Jt){Cr=J6[Jt],qh[Jt]=gv,Gh[Jt]=Hr,!Jt&&0<Nn&&(Cr+=1<<Nn);i:{var yv,nS=Cr,vv=Is,Rm=Om,eq=gv,tq=Hr,rS=0,su=vv.m,nq=de(su,1);if(i(Rm,0,0,nS),nq){var rq=de(su,1)+1,iq=de(su,1),cP=de(su,iq==0?1:8);Rm[cP]=1,rq==2&&(Rm[cP=de(su,8)]=1);var bv=1}else{var uP=s(19),dP=de(su,4)+4;if(19<dP){vv.a=3;var wv=0;break i}for(yv=0;yv<dP;++yv)uP[MW[yv]]=de(su,3);var iS=void 0,Lm=void 0,fP=vv,sq=uP,xv=nS,hP=Rm,sS=0,ou=fP.m,pP=8,gP=o(128,$);r:for(;R(gP,0,7,sq,19);){if(de(ou,1)){var oq=2+2*de(ou,3);if((iS=2+de(ou,oq))>xv)break r}else iS=xv;for(Lm=0;Lm<xv&&iS--;){he(ou);var mP=gP[0+(127&X(ou))];ue(ou,ou.u+mP.g);var Kh=mP.value;if(16>Kh)hP[Lm++]=Kh,Kh!=0&&(pP=Kh);else{var aq=Kh==16,yP=Kh-16,lq=TW[yP],vP=de(ou,PW[yP])+lq;if(Lm+vP>xv)break r;for(var cq=aq?pP:0;0<vP--;)hP[Lm++]=cq}}sS=1;break r}sS||(fP.a=3),bv=sS}(bv=bv&&!su.h)&&(rS=R(eq,tq,8,Rm,nS)),bv&&rS!=0?wv=rS:(vv.a=3,wv=0)}if(wv==0)break n;if(mv&&NW[Jt]==1&&(mv=gv[Hr].g==0),aP+=gv[Hr].g,Hr+=wv,3>=Jt){var Dm,oS=Om[0];for(Dm=1;Dm<Cr;++Dm)Om[Dm]>oS&&(oS=Om[Dm]);lP+=oS}}if(ua.nd=mv,ua.Qb=0,mv&&(ua.qb=(qh[3][Gh[3]+0].value<<24|qh[1][Gh[1]+0].value<<16|qh[2][Gh[2]+0].value)>>>0,aP==0&&256>qh[0][Gh[0]+0].value&&(ua.Qb=1,ua.qb+=qh[0][Gh[0]+0].value<<8)),ua.jc=!ua.Qb&&6>lP,ua.jc){var Sv,Zl=ua;for(Sv=0;Sv<xi;++Sv){var au=Sv,lu=Zl.pd[au],kv=Zl.G[0][Zl.H[0]+au];256<=kv.value?(lu.g=kv.g+256,lu.value=kv.value):(lu.g=0,lu.value=0,au>>=Nr(kv,8,lu),au>>=Nr(Zl.G[1][Zl.H[1]+au],16,lu),au>>=Nr(Zl.G[2][Zl.H[2]+au],0,lu),Nr(Zl.G[3][Zl.H[3]+au],24,lu))}}}ai.vc=Si,ai.Wb=as,ai.Ya=pv,ai.yc=tS,Un=1;break t}Un=0}if(!(q=Un)){L.a=3;break e}if(0<Ne){if(se.ua=1<<Ne,!Qe(se.Wa,Ne)){L.a=1,q=0;break e}}else se.ua=0;var aS=L,bP=G,uq=J,lS=aS.s,cS=lS.xc;if(aS.c=bP,aS.i=uq,lS.md=Fe(bP,cS),lS.wc=cS==0?-1:(1<<cS)-1,N){L.xb=BW;break e}if((we=s(G*J))==null){L.a=1,q=0;break e}q=(q=Ms(L,we,0,G,J,J,null))&&!Q.h;break e}return q?(B!=null?B[0]=we:(e(we==null),e(N)),L.$=0,N||fn(se)):fn(se),q}function zl(m,k){var N=m.c*m.i,L=N+k+16*k;return e(m.c<=k),m.V=s(L),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+N+k,1)}function Bl(m,k){var N=m.C,L=k-N,B=m.V,q=m.Ba+m.c*N;for(e(k<=m.l.o);0<L;){var G=16<L?16:L,J=m.l.ma,Q=m.l.width,se=Q*G,we=J.ca,Ne=J.tb+Q*N,Me=m.Ta,Ae=m.Ua;ns(m,G,B,q),Or(Me,Ae,we,Ne,se),Ns(J,N,N+G,we,Ne,Q),L-=G,B+=G*m.c,N+=G}e(N==k),m.C=m.Ma=k}function Ka(){this.ub=this.yd=this.td=this.Rb=0}function Os(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Gt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function _h(){this.Yb=function(){var m=[];return function k(N,L,B){for(var q=B[L],G=0;G<q&&(N.push(B.length>L+1?[]:0),!(B.length<L+1));G++)k(N[G],L+1,B)}(m,0,[3,11]),m}()}function qc(){this.jb=s(3),this.Wc=a([4,8],_h),this.Xc=a([4,17],_h)}function Ah(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function to(){this.ld=this.La=this.dd=this.tc=0}function W(){this.Na=this.la=0}function Y(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ge(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ie(){this.uc=this.M=this.Nb=0,this.wa=Array(new to),this.Y=0,this.ya=Array(new ge),this.aa=0,this.l=new no}function ke(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ke(){this.cb=this.a=0,this.sc="",this.m=new Ce,this.Od=new Ka,this.Kc=new Os,this.ed=new Ah,this.Qa=new Gt,this.Ic=this.$c=this.Aa=0,this.D=new ie,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Ce),this.ia=0,this.pb=o(4,Y),this.Pa=new qc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ke),this.Hd=0,this.rb=Array(new W),this.sb=0,this.wa=Array(new to),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ge),this.L=this.aa=0,this.gd=a([4,2],to),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function no(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Rd(){var m=new Ke;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,Nm||(Nm=Kc)),m}function Jn(m,k,N){return m.a==0&&(m.a=k,m.sc=N,m.cb=0),0}function Gc(m,k,N){return 3<=N&&m[k+0]==157&&m[k+1]==1&&m[k+2]==42}function Ul(m,k){if(m==null)return 0;if(m.a=0,m.sc="OK",k==null)return Jn(m,2,"null VP8Io passed to VP8GetHeaders()");var N=k.data,L=k.w,B=k.ha;if(4>B)return Jn(m,7,"Truncated header.");var q=N[L+0]|N[L+1]<<8|N[L+2]<<16,G=m.Od;if(G.Rb=!(1&q),G.td=q>>1&7,G.yd=q>>4&1,G.ub=q>>5,3<G.td)return Jn(m,3,"Incorrect keyframe parameters.");if(!G.yd)return Jn(m,4,"Frame not displayable.");L+=3,B-=3;var J=m.Kc;if(G.Rb){if(7>B)return Jn(m,7,"cannot parse picture header");if(!Gc(N,L,B))return Jn(m,3,"Bad code word");J.c=16383&(N[L+4]<<8|N[L+3]),J.Td=N[L+4]>>6,J.i=16383&(N[L+6]<<8|N[L+5]),J.Ud=N[L+6]>>6,L+=7,B-=7,m.za=J.c+15>>4,m.Ub=J.i+15>>4,k.width=J.c,k.height=J.i,k.Da=0,k.j=0,k.v=0,k.va=k.width,k.o=k.height,k.da=0,k.ib=k.width,k.hb=k.height,k.U=k.width,k.T=k.height,i((q=m.Pa).jb,0,255,q.jb.length),e((q=m.Qa)!=null),q.Cb=0,q.Bb=0,q.Fb=1,i(q.Zb,0,0,q.Zb.length),i(q.Lb,0,0,q.Lb)}if(G.ub>B)return Jn(m,7,"bad partition length");ee(q=m.m,N,L,G.ub),L+=G.ub,B-=G.ub,G.Rb&&(J.Ld=be(q),J.Kd=be(q)),J=m.Qa;var Q,se=m.Pa;if(e(q!=null),e(J!=null),J.Cb=be(q),J.Cb){if(J.Bb=be(q),be(q)){for(J.Fb=be(q),Q=0;4>Q;++Q)J.Zb[Q]=be(q)?le(q,7):0;for(Q=0;4>Q;++Q)J.Lb[Q]=be(q)?le(q,6):0}if(J.Bb)for(Q=0;3>Q;++Q)se.jb[Q]=be(q)?ce(q,8):255}else J.Bb=0;if(q.Ka)return Jn(m,3,"cannot parse segment header");if((J=m.ed).zd=be(q),J.Tb=ce(q,6),J.wb=ce(q,3),J.Pc=be(q),J.Pc&&be(q)){for(se=0;4>se;++se)be(q)&&(J.vd[se]=le(q,6));for(se=0;4>se;++se)be(q)&&(J.od[se]=le(q,6))}if(m.L=J.Tb==0?0:J.zd?1:2,q.Ka)return Jn(m,3,"cannot parse filter header");var we=B;if(B=Q=L,L=Q+we,J=we,m.Xb=(1<<ce(m.m,2))-1,we<3*(se=m.Xb))N=7;else{for(Q+=3*se,J-=3*se,we=0;we<se;++we){var Ne=N[B+0]|N[B+1]<<8|N[B+2]<<16;Ne>J&&(Ne=J),ee(m.Jc[+we],N,Q,Ne),Q+=Ne,J-=Ne,B+=3}ee(m.Jc[+se],N,Q,J),N=Q<L?0:5}if(N!=0)return Jn(m,N,"cannot parse partitions");for(N=ce(Q=m.m,7),B=be(Q)?le(Q,4):0,L=be(Q)?le(Q,4):0,J=be(Q)?le(Q,4):0,se=be(Q)?le(Q,4):0,Q=be(Q)?le(Q,4):0,we=m.Qa,Ne=0;4>Ne;++Ne){if(we.Cb){var Me=we.Zb[Ne];we.Fb||(Me+=N)}else{if(0<Ne){m.pb[Ne]=m.pb[0];continue}Me=N}var Ae=m.pb[Ne];Ae.Sc[0]=X5[ro(Me+B,127)],Ae.Sc[1]=Q5[ro(Me+0,127)],Ae.Eb[0]=2*X5[ro(Me+L,127)],Ae.Eb[1]=101581*Q5[ro(Me+J,127)]>>16,8>Ae.Eb[1]&&(Ae.Eb[1]=8),Ae.Qc[0]=X5[ro(Me+se,117)],Ae.Qc[1]=Q5[ro(Me+Q,127)],Ae.lc=Me+Q}if(!G.Rb)return Jn(m,4,"Not a key frame.");for(be(q),G=m.Pa,N=0;4>N;++N){for(B=0;8>B;++B)for(L=0;3>L;++L)for(J=0;11>J;++J)se=pe(q,FW[N][B][L][J])?ce(q,8):$W[N][B][L][J],G.Wc[N][B].Yb[L][J]=se;for(B=0;17>B;++B)G.Xc[N][B]=G.Wc[N][zW[B]]}return m.kc=be(q),m.kc&&(m.Bd=ce(q,8)),m.cb=1}function Kc(m,k,N,L,B,q,G){var J=k[B].Yb[N];for(N=0;16>B;++B){if(!pe(m,J[N+0]))return B;for(;!pe(m,J[N+1]);)if(J=k[++B].Yb[0],N=0,B==16)return 16;var Q=k[B+1].Yb;if(pe(m,J[N+2])){var se=m,we=0;if(pe(se,(Me=J)[(Ne=N)+3]))if(pe(se,Me[Ne+6])){for(J=0,Ne=2*(we=pe(se,Me[Ne+8]))+(Me=pe(se,Me[Ne+9+we])),we=0,Me=DW[Ne];Me[J];++J)we+=we+pe(se,Me[J]);we+=3+(8<<Ne)}else pe(se,Me[Ne+7])?(we=7+2*pe(se,165),we+=pe(se,145)):we=5+pe(se,159);else we=pe(se,Me[Ne+4])?3+pe(se,Me[Ne+5]):2;J=Q[2]}else we=1,J=Q[1];Q=G+IW[B],0>(se=m).b&&fe(se);var Ne,Me=se.b,Ae=(Ne=se.Ca>>1)-(se.I>>Me)>>31;--se.b,se.Ca+=Ae,se.Ca|=1,se.I-=(Ne+1&Ae)<<Me,q[Q]=((we^Ae)-Ae)*L[(0<B)+0]}return 16}function am(m){var k=m.rb[m.sb-1];k.la=0,k.Na=0,i(m.zc,0,0,m.zc.length),m.ja=0}function P5(m,k){if(m==null)return 0;if(k==null)return Jn(m,2,"NULL VP8Io parameter in VP8Decode().");if(!m.cb&&!Ul(m,k))return 0;if(e(m.cb),k.ac==null||k.ac(k)){k.ob&&(m.L=0);var N=hv[m.L];if(m.L==2?(m.yb=0,m.zb=0):(m.yb=k.v-N>>4,m.zb=k.j-N>>4,0>m.yb&&(m.yb=0),0>m.zb&&(m.zb=0)),m.Va=k.o+15+N>>4,m.Hb=k.va+15+N>>4,m.Hb>m.za&&(m.Hb=m.za),m.Va>m.Ub&&(m.Va=m.Ub),0<m.L){var L=m.ed;for(N=0;4>N;++N){var B;if(m.Qa.Cb){var q=m.Qa.Lb[N];m.Qa.Fb||(q+=L.Tb)}else q=L.Tb;for(B=0;1>=B;++B){var G=m.gd[N][B],J=q;if(L.Pc&&(J+=L.vd[0],B&&(J+=L.od[0])),0<(J=0>J?0:63<J?63:J)){var Q=J;0<L.wb&&(Q=4<L.wb?Q>>2:Q>>1)>9-L.wb&&(Q=9-L.wb),1>Q&&(Q=1),G.dd=Q,G.tc=2*J+Q,G.ld=40<=J?2:15<=J?1:0}else G.tc=0;G.La=B}}}N=0}else Jn(m,6,"Frame setup failed"),N=m.a;if(N=N==0){if(N){m.$c=0,0<m.Aa||(m.Ic=QW);e:{N=m.Ic,L=4*(Q=m.za);var se=32*Q,we=Q+1,Ne=0<m.L?Q*(0<m.Aa?2:1):0,Me=(m.Aa==2?2:1)*Q;if((G=L+832+(B=3*(16*N+hv[m.L])/2*se)+(q=m.Fa!=null&&0<m.Fa.length?m.Kc.c*m.Kc.i:0))!=G)N=0;else{if(G>m.Vb){if(m.Vb=0,m.Ec=s(G),m.Fc=0,m.Ec==null){N=Jn(m,1,"no memory during frame initialization.");break e}m.Vb=G}G=m.Ec,J=m.Fc,m.Ac=G,m.Bc=J,J+=L,m.Gd=o(se,ke),m.Hd=0,m.rb=o(we+1,W),m.sb=1,m.wa=Ne?o(Ne,to):null,m.Y=0,m.D.Nb=0,m.D.wa=m.wa,m.D.Y=m.Y,0<m.Aa&&(m.D.Y+=Q),e(!0),m.oc=G,m.pc=J,J+=832,m.ya=o(Me,ge),m.aa=0,m.D.ya=m.ya,m.D.aa=m.aa,m.Aa==2&&(m.D.aa+=Q),m.R=16*Q,m.B=8*Q,Q=(se=hv[m.L])*m.R,se=se/2*m.B,m.sa=G,m.ta=J+Q,m.qa=m.sa,m.ra=m.ta+16*N*m.R+se,m.Ha=m.qa,m.Ia=m.ra+8*N*m.B+se,m.$c=0,J+=B,m.mb=q?G:null,m.nb=q?J:null,e(J+q<=m.Fc+m.Vb),am(m),i(m.Ac,m.Bc,0,L),N=1}}if(N){if(k.ka=0,k.y=m.sa,k.O=m.ta,k.f=m.qa,k.N=m.ra,k.ea=m.Ha,k.Vd=m.Ia,k.fa=m.R,k.Rc=m.B,k.F=null,k.J=0,!iv){for(N=-255;255>=N;++N)Kr[255+N]=0>N?-N:N;for(N=-1020;1020>=N;++N)Kl[1020+N]=-128>N?-128:127<N?127:N;for(N=-112;112>=N;++N)Tm[112+N]=-16>N?-16:15<N?15:N;for(N=-255;510>=N;++N)Vh[255+N]=0>N?0:255<N?255:N;iv=1}Bh=M5,Gl=T5,Am=By,ss=N5,Mo=Uy,Mr=zy,Uh=hm,rv=Id,Em=V5,Fd=pm,zd=H5,eu=Oh,Bd=gm,Hh=Zy,Ud=Yy,tu=Ya,Pm=Vl,Oo=U5,ca[0]=Ja,ca[1]=O5,ca[2]=I5,ca[3]=$5,ca[4]=Wy,ca[5]=Nh,ca[6]=qy,ca[7]=um,ca[8]=F5,ca[9]=j5,nu[0]=Hy,nu[1]=L5,nu[2]=Hl,nu[3]=Ph,nu[4]=Oi,nu[5]=D5,nu[6]=Vy,Jl[0]=Jc,Jl[1]=R5,Jl[2]=z5,Jl[3]=dm,Jl[4]=Dd,Jl[5]=B5,Jl[6]=fm,N=1}else N=0}N&&(N=function(Ae,Ve){for(Ae.M=0;Ae.M<Ae.Va;++Ae.M){var $e,xe=Ae.Jc[Ae.M&Ae.Xb],Se=Ae.m,Ue=Ae;for($e=0;$e<Ue.za;++$e){var We=Se,He=Ue,ft=He.Ac,it=He.Bc+4*$e,Et=He.zc,at=He.ya[He.aa+$e];if(He.Qa.Bb?at.$b=pe(We,He.Pa.jb[0])?2+pe(We,He.Pa.jb[2]):pe(We,He.Pa.jb[1]):at.$b=0,He.kc&&(at.Ad=pe(We,He.Bd)),at.Za=!pe(We,145)+0,at.Za){var _n=at.Ob,Tn=0;for(He=0;4>He;++He){var xn,hn=Et[0+He];for(xn=0;4>xn;++xn){hn=jW[ft[it+xn]][hn];for(var Un=Y6[pe(We,hn[0])];0<Un;)Un=Y6[2*Un+pe(We,hn[Un])];hn=-Un,ft[it+xn]=hn}r(_n,Tn,ft,it,4),Tn+=4,Et[0+He]=hn}}else hn=pe(We,156)?pe(We,128)?1:3:pe(We,163)?2:0,at.Ob[0]=hn,i(ft,it,hn,4),i(Et,0,hn,4);at.Dd=pe(We,142)?pe(We,114)?pe(We,183)?1:3:2:0}if(Ue.m.Ka)return Jn(Ae,7,"Premature end-of-partition0 encountered.");for(;Ae.ja<Ae.za;++Ae.ja){if(Ue=xe,We=(Se=Ae).rb[Se.sb-1],ft=Se.rb[Se.sb+Se.ja],$e=Se.ya[Se.aa+Se.ja],it=Se.kc?$e.Ad:0)We.la=ft.la=0,$e.Za||(We.Na=ft.Na=0),$e.Hc=0,$e.Gc=0,$e.ia=0;else{var $n,Jt;if(We=ft,ft=Ue,it=Se.Pa.Xc,Et=Se.ya[Se.aa+Se.ja],at=Se.pb[Et.$b],He=Et.ad,_n=0,Tn=Se.rb[Se.sb-1],hn=xn=0,i(He,_n,0,384),Et.Za)var Hr=0,Is=it[3];else{Un=s(16);var Vr=We.Na+Tn.Na;if(Vr=Nm(ft,it[1],Vr,at.Eb,0,Un,0),We.Na=Tn.Na=(0<Vr)+0,1<Vr)Bh(Un,0,He,_n);else{var $s=Un[0]+3>>3;for(Un=0;256>Un;Un+=16)He[_n+Un]=$s}Hr=1,Is=it[0]}var Nn=15&We.la,so=15&Tn.la;for(Un=0;4>Un;++Un){var oo=1&so;for($s=Jt=0;4>$s;++$s)Nn=Nn>>1|(oo=(Vr=Nm(ft,Is,Vr=oo+(1&Nn),at.Sc,Hr,He,_n))>Hr)<<7,Jt=Jt<<2|(3<Vr?3:1<Vr?2:He[_n+0]!=0),_n+=16;Nn>>=4,so=so>>1|oo<<7,xn=(xn<<8|Jt)>>>0}for(Is=Nn,Hr=so>>4,$n=0;4>$n;$n+=2){for(Jt=0,Nn=We.la>>4+$n,so=Tn.la>>4+$n,Un=0;2>Un;++Un){for(oo=1&so,$s=0;2>$s;++$s)Vr=oo+(1&Nn),Nn=Nn>>1|(oo=0<(Vr=Nm(ft,it[2],Vr,at.Qc,0,He,_n)))<<3,Jt=Jt<<2|(3<Vr?3:1<Vr?2:He[_n+0]!=0),_n+=16;Nn>>=2,so=so>>1|oo<<5}hn|=Jt<<4*$n,Is|=Nn<<4<<$n,Hr|=(240&so)<<$n}We.la=Is,Tn.la=Hr,Et.Hc=xn,Et.Gc=hn,Et.ia=43690&hn?0:at.ia,it=!(xn|hn)}if(0<Se.L&&(Se.wa[Se.Y+Se.ja]=Se.gd[$e.$b][$e.Za],Se.wa[Se.Y+Se.ja].La|=!it),Ue.Ka)return Jn(Ae,7,"Premature end-of-file encountered.")}if(am(Ae),Se=Ve,Ue=1,$e=(xe=Ae).D,We=0<xe.L&&xe.M>=xe.zb&&xe.M<=xe.Va,xe.Aa==0)e:{if($e.M=xe.M,$e.uc=We,xm(xe,$e),Ue=1,$e=(Jt=xe.D).Nb,We=(hn=hv[xe.L])*xe.R,ft=hn/2*xe.B,Un=16*$e*xe.R,$s=8*$e*xe.B,it=xe.sa,Et=xe.ta-We+Un,at=xe.qa,He=xe.ra-ft+$s,_n=xe.Ha,Tn=xe.Ia-ft+$s,so=(Nn=Jt.M)==0,xn=Nn>=xe.Va-1,xe.Aa==2&&xm(xe,Jt),Jt.uc)for(oo=(Vr=xe).D.M,e(Vr.D.uc),Jt=Vr.yb;Jt<Vr.Hb;++Jt){Hr=Jt,Is=oo;var ai=(Si=(Cr=Vr).D).Nb;$n=Cr.R;var Si=Si.wa[Si.Y+Hr],as=Cr.sa,Io=Cr.ta+16*ai*$n+16*Hr,Xa=Si.dd,li=Si.tc;if(li!=0)if(e(3<=li),Cr.L==1)0<Hr&&tu(as,Io,$n,li+4),Si.La&&Oo(as,Io,$n,li),0<Is&&Ud(as,Io,$n,li+4),Si.La&&Pm(as,Io,$n,li);else{var Yl=Cr.B,Hd=Cr.qa,Wh=Cr.ra+8*ai*Yl+8*Hr,iu=Cr.Ha,Cr=Cr.Ia+8*ai*Yl+8*Hr;ai=Si.ld,0<Hr&&(rv(as,Io,$n,li+4,Xa,ai),Fd(Hd,Wh,iu,Cr,Yl,li+4,Xa,ai)),Si.La&&(eu(as,Io,$n,li,Xa,ai),Hh(Hd,Wh,iu,Cr,Yl,li,Xa,ai)),0<Is&&(Uh(as,Io,$n,li+4,Xa,ai),Em(Hd,Wh,iu,Cr,Yl,li+4,Xa,ai)),Si.La&&(zd(as,Io,$n,li,Xa,ai),Bd(Hd,Wh,iu,Cr,Yl,li,Xa,ai))}}if(xe.ia&&alert("todo:DitherRow"),Se.put!=null){if(Jt=16*Nn,Nn=16*(Nn+1),so?(Se.y=xe.sa,Se.O=xe.ta+Un,Se.f=xe.qa,Se.N=xe.ra+$s,Se.ea=xe.Ha,Se.W=xe.Ia+$s):(Jt-=hn,Se.y=it,Se.O=Et,Se.f=at,Se.N=He,Se.ea=_n,Se.W=Tn),xn||(Nn-=hn),Nn>Se.o&&(Nn=Se.o),Se.F=null,Se.J=null,xe.Fa!=null&&0<xe.Fa.length&&Jt<Nn&&(Se.J=bm(xe,Se,Jt,Nn-Jt),Se.F=xe.mb,Se.F==null&&Se.F.length==0)){Ue=Jn(xe,3,"Could not decode alpha data.");break e}Jt<Se.j&&(hn=Se.j-Jt,Jt=Se.j,e(!(1&hn)),Se.O+=xe.R*hn,Se.N+=xe.B*(hn>>1),Se.W+=xe.B*(hn>>1),Se.F!=null&&(Se.J+=Se.width*hn)),Jt<Nn&&(Se.O+=Se.v,Se.N+=Se.v>>1,Se.W+=Se.v>>1,Se.F!=null&&(Se.J+=Se.v),Se.ka=Jt-Se.j,Se.U=Se.va-Se.v,Se.T=Nn-Jt,Ue=Se.put(Se))}$e+1!=xe.Ic||xn||(r(xe.sa,xe.ta-We,it,Et+16*xe.R,We),r(xe.qa,xe.ra-ft,at,He+8*xe.B,ft),r(xe.Ha,xe.Ia-ft,_n,Tn+8*xe.B,ft))}if(!Ue)return Jn(Ae,6,"Output aborted.")}return 1}(m,k)),k.bc!=null&&k.bc(k),N&=1}return N?(m.cb=0,N):0}function oa(m,k,N,L,B){B=m[k+N+32*L]+(B>>3),m[k+N+32*L]=-256&B?0>B?0:255:B}function Eh(m,k,N,L,B,q){oa(m,k,0,N,L+B),oa(m,k,1,N,L+q),oa(m,k,2,N,L-q),oa(m,k,3,N,L-B)}function Rs(m){return(20091*m>>16)+m}function lm(m,k,N,L){var B,q=0,G=s(16);for(B=0;4>B;++B){var J=m[k+0]+m[k+8],Q=m[k+0]-m[k+8],se=(35468*m[k+4]>>16)-Rs(m[k+12]),we=Rs(m[k+4])+(35468*m[k+12]>>16);G[q+0]=J+we,G[q+1]=Q+se,G[q+2]=Q-se,G[q+3]=J-we,q+=4,k++}for(B=q=0;4>B;++B)J=(m=G[q+0]+4)+G[q+8],Q=m-G[q+8],se=(35468*G[q+4]>>16)-Rs(G[q+12]),oa(N,L,0,0,J+(we=Rs(G[q+4])+(35468*G[q+12]>>16))),oa(N,L,1,0,Q+se),oa(N,L,2,0,Q-se),oa(N,L,3,0,J-we),q++,L+=32}function zy(m,k,N,L){var B=m[k+0]+4,q=35468*m[k+4]>>16,G=Rs(m[k+4]),J=35468*m[k+1]>>16;Eh(N,L,0,B+G,m=Rs(m[k+1]),J),Eh(N,L,1,B+q,m,J),Eh(N,L,2,B-q,m,J),Eh(N,L,3,B-G,m,J)}function T5(m,k,N,L,B){lm(m,k,N,L),B&&lm(m,k+16,N,L+4)}function By(m,k,N,L){Gl(m,k+0,N,L,1),Gl(m,k+32,N,L+128,1)}function N5(m,k,N,L){var B;for(m=m[k+0]+4,B=0;4>B;++B)for(k=0;4>k;++k)oa(N,L,k,B,m)}function Uy(m,k,N,L){m[k+0]&&ss(m,k+0,N,L),m[k+16]&&ss(m,k+16,N,L+4),m[k+32]&&ss(m,k+32,N,L+128),m[k+48]&&ss(m,k+48,N,L+128+4)}function M5(m,k,N,L){var B,q=s(16);for(B=0;4>B;++B){var G=m[k+0+B]+m[k+12+B],J=m[k+4+B]+m[k+8+B],Q=m[k+4+B]-m[k+8+B],se=m[k+0+B]-m[k+12+B];q[0+B]=G+J,q[8+B]=G-J,q[4+B]=se+Q,q[12+B]=se-Q}for(B=0;4>B;++B)G=(m=q[0+4*B]+3)+q[3+4*B],J=q[1+4*B]+q[2+4*B],Q=q[1+4*B]-q[2+4*B],se=m-q[3+4*B],N[L+0]=G+J>>3,N[L+16]=se+Q>>3,N[L+32]=G-J>>3,N[L+48]=se-Q>>3,L+=64}function cm(m,k,N){var L,B=k-32,q=io,G=255-m[B-1];for(L=0;L<N;++L){var J,Q=q,se=G+m[k-1];for(J=0;J<N;++J)m[k+J]=Q[se+m[B+J]];k+=32}}function O5(m,k){cm(m,k,4)}function R5(m,k){cm(m,k,8)}function L5(m,k){cm(m,k,16)}function Hl(m,k){var N;for(N=0;16>N;++N)r(m,k+32*N,m,k-32,16)}function Ph(m,k){var N;for(N=16;0<N;--N)i(m,k,m[k-1],16),k+=32}function Th(m,k,N){var L;for(L=0;16>L;++L)i(k,N+32*L,m,16)}function Hy(m,k){var N,L=16;for(N=0;16>N;++N)L+=m[k-1+32*N]+m[k+N-32];Th(L>>5,m,k)}function Oi(m,k){var N,L=8;for(N=0;16>N;++N)L+=m[k-1+32*N];Th(L>>4,m,k)}function D5(m,k){var N,L=8;for(N=0;16>N;++N)L+=m[k+N-32];Th(L>>4,m,k)}function Vy(m,k){Th(128,m,k)}function zt(m,k,N){return m+2*k+N+2>>2}function I5(m,k){var N,L=k-32;for(L=new Uint8Array([zt(m[L-1],m[L+0],m[L+1]),zt(m[L+0],m[L+1],m[L+2]),zt(m[L+1],m[L+2],m[L+3]),zt(m[L+2],m[L+3],m[L+4])]),N=0;4>N;++N)r(m,k+32*N,L,0,L.length)}function $5(m,k){var N=m[k-1],L=m[k-1+32],B=m[k-1+64],q=m[k-1+96];me(m,k+0,16843009*zt(m[k-1-32],N,L)),me(m,k+32,16843009*zt(N,L,B)),me(m,k+64,16843009*zt(L,B,q)),me(m,k+96,16843009*zt(B,q,q))}function Ja(m,k){var N,L=4;for(N=0;4>N;++N)L+=m[k+N-32]+m[k-1+32*N];for(L>>=3,N=0;4>N;++N)i(m,k+32*N,L,4)}function Wy(m,k){var N=m[k-1+0],L=m[k-1+32],B=m[k-1+64],q=m[k-1-32],G=m[k+0-32],J=m[k+1-32],Q=m[k+2-32],se=m[k+3-32];m[k+0+96]=zt(L,B,m[k-1+96]),m[k+1+96]=m[k+0+64]=zt(N,L,B),m[k+2+96]=m[k+1+64]=m[k+0+32]=zt(q,N,L),m[k+3+96]=m[k+2+64]=m[k+1+32]=m[k+0+0]=zt(G,q,N),m[k+3+64]=m[k+2+32]=m[k+1+0]=zt(J,G,q),m[k+3+32]=m[k+2+0]=zt(Q,J,G),m[k+3+0]=zt(se,Q,J)}function qy(m,k){var N=m[k+1-32],L=m[k+2-32],B=m[k+3-32],q=m[k+4-32],G=m[k+5-32],J=m[k+6-32],Q=m[k+7-32];m[k+0+0]=zt(m[k+0-32],N,L),m[k+1+0]=m[k+0+32]=zt(N,L,B),m[k+2+0]=m[k+1+32]=m[k+0+64]=zt(L,B,q),m[k+3+0]=m[k+2+32]=m[k+1+64]=m[k+0+96]=zt(B,q,G),m[k+3+32]=m[k+2+64]=m[k+1+96]=zt(q,G,J),m[k+3+64]=m[k+2+96]=zt(G,J,Q),m[k+3+96]=zt(J,Q,Q)}function Nh(m,k){var N=m[k-1+0],L=m[k-1+32],B=m[k-1+64],q=m[k-1-32],G=m[k+0-32],J=m[k+1-32],Q=m[k+2-32],se=m[k+3-32];m[k+0+0]=m[k+1+64]=q+G+1>>1,m[k+1+0]=m[k+2+64]=G+J+1>>1,m[k+2+0]=m[k+3+64]=J+Q+1>>1,m[k+3+0]=Q+se+1>>1,m[k+0+96]=zt(B,L,N),m[k+0+64]=zt(L,N,q),m[k+0+32]=m[k+1+96]=zt(N,q,G),m[k+1+32]=m[k+2+96]=zt(q,G,J),m[k+2+32]=m[k+3+96]=zt(G,J,Q),m[k+3+32]=zt(J,Q,se)}function um(m,k){var N=m[k+0-32],L=m[k+1-32],B=m[k+2-32],q=m[k+3-32],G=m[k+4-32],J=m[k+5-32],Q=m[k+6-32],se=m[k+7-32];m[k+0+0]=N+L+1>>1,m[k+1+0]=m[k+0+64]=L+B+1>>1,m[k+2+0]=m[k+1+64]=B+q+1>>1,m[k+3+0]=m[k+2+64]=q+G+1>>1,m[k+0+32]=zt(N,L,B),m[k+1+32]=m[k+0+96]=zt(L,B,q),m[k+2+32]=m[k+1+96]=zt(B,q,G),m[k+3+32]=m[k+2+96]=zt(q,G,J),m[k+3+64]=zt(G,J,Q),m[k+3+96]=zt(J,Q,se)}function j5(m,k){var N=m[k-1+0],L=m[k-1+32],B=m[k-1+64],q=m[k-1+96];m[k+0+0]=N+L+1>>1,m[k+2+0]=m[k+0+32]=L+B+1>>1,m[k+2+32]=m[k+0+64]=B+q+1>>1,m[k+1+0]=zt(N,L,B),m[k+3+0]=m[k+1+32]=zt(L,B,q),m[k+3+32]=m[k+1+64]=zt(B,q,q),m[k+3+64]=m[k+2+64]=m[k+0+96]=m[k+1+96]=m[k+2+96]=m[k+3+96]=q}function F5(m,k){var N=m[k-1+0],L=m[k-1+32],B=m[k-1+64],q=m[k-1+96],G=m[k-1-32],J=m[k+0-32],Q=m[k+1-32],se=m[k+2-32];m[k+0+0]=m[k+2+32]=N+G+1>>1,m[k+0+32]=m[k+2+64]=L+N+1>>1,m[k+0+64]=m[k+2+96]=B+L+1>>1,m[k+0+96]=q+B+1>>1,m[k+3+0]=zt(J,Q,se),m[k+2+0]=zt(G,J,Q),m[k+1+0]=m[k+3+32]=zt(N,G,J),m[k+1+32]=m[k+3+64]=zt(L,N,G),m[k+1+64]=m[k+3+96]=zt(B,L,N),m[k+1+96]=zt(q,B,L)}function z5(m,k){var N;for(N=0;8>N;++N)r(m,k+32*N,m,k-32,8)}function dm(m,k){var N;for(N=0;8>N;++N)i(m,k,m[k-1],8),k+=32}function Ld(m,k,N){var L;for(L=0;8>L;++L)i(k,N+32*L,m,8)}function Jc(m,k){var N,L=8;for(N=0;8>N;++N)L+=m[k+N-32]+m[k-1+32*N];Ld(L>>4,m,k)}function B5(m,k){var N,L=4;for(N=0;8>N;++N)L+=m[k+N-32];Ld(L>>3,m,k)}function Dd(m,k){var N,L=4;for(N=0;8>N;++N)L+=m[k-1+32*N];Ld(L>>3,m,k)}function fm(m,k){Ld(128,m,k)}function Mh(m,k,N){var L=m[k-N],B=m[k+0],q=3*(B-L)+G5[1020+m[k-2*N]-m[k+N]],G=sv[112+(q+4>>3)];m[k-N]=io[255+L+sv[112+(q+3>>3)]],m[k+0]=io[255+B-G]}function Gy(m,k,N,L){var B=m[k+0],q=m[k+N];return Lo[255+m[k-2*N]-m[k-N]]>L||Lo[255+q-B]>L}function Ky(m,k,N,L){return 4*Lo[255+m[k-N]-m[k+0]]+Lo[255+m[k-2*N]-m[k+N]]<=L}function Jy(m,k,N,L,B){var q=m[k-3*N],G=m[k-2*N],J=m[k-N],Q=m[k+0],se=m[k+N],we=m[k+2*N],Ne=m[k+3*N];return 4*Lo[255+J-Q]+Lo[255+G-se]>L?0:Lo[255+m[k-4*N]-q]<=B&&Lo[255+q-G]<=B&&Lo[255+G-J]<=B&&Lo[255+Ne-we]<=B&&Lo[255+we-se]<=B&&Lo[255+se-Q]<=B}function Yy(m,k,N,L){var B=2*L+1;for(L=0;16>L;++L)Ky(m,k+L,N,B)&&Mh(m,k+L,N)}function Ya(m,k,N,L){var B=2*L+1;for(L=0;16>L;++L)Ky(m,k+L*N,1,B)&&Mh(m,k+L*N,1)}function Vl(m,k,N,L){var B;for(B=3;0<B;--B)Yy(m,k+=4*N,N,L)}function U5(m,k,N,L){var B;for(B=3;0<B;--B)Ya(m,k+=4,N,L)}function Yc(m,k,N,L,B,q,G,J){for(q=2*q+1;0<B--;){if(Jy(m,k,N,q,G))if(Gy(m,k,N,J))Mh(m,k,N);else{var Q=m,se=k,we=N,Ne=Q[se-2*we],Me=Q[se-we],Ae=Q[se+0],Ve=Q[se+we],$e=Q[se+2*we],xe=27*(Ue=G5[1020+3*(Ae-Me)+G5[1020+Ne-Ve]])+63>>7,Se=18*Ue+63>>7,Ue=9*Ue+63>>7;Q[se-3*we]=io[255+Q[se-3*we]+Ue],Q[se-2*we]=io[255+Ne+Se],Q[se-we]=io[255+Me+xe],Q[se+0]=io[255+Ae-xe],Q[se+we]=io[255+Ve-Se],Q[se+2*we]=io[255+$e-Ue]}k+=L}}function aa(m,k,N,L,B,q,G,J){for(q=2*q+1;0<B--;){if(Jy(m,k,N,q,G))if(Gy(m,k,N,J))Mh(m,k,N);else{var Q=m,se=k,we=N,Ne=Q[se-we],Me=Q[se+0],Ae=Q[se+we],Ve=sv[112+(($e=3*(Me-Ne))+4>>3)],$e=sv[112+($e+3>>3)],xe=Ve+1>>1;Q[se-2*we]=io[255+Q[se-2*we]+xe],Q[se-we]=io[255+Ne+$e],Q[se+0]=io[255+Me-Ve],Q[se+we]=io[255+Ae-xe]}k+=L}}function hm(m,k,N,L,B,q){Yc(m,k,N,1,16,L,B,q)}function Id(m,k,N,L,B,q){Yc(m,k,1,N,16,L,B,q)}function H5(m,k,N,L,B,q){var G;for(G=3;0<G;--G)aa(m,k+=4*N,N,1,16,L,B,q)}function Oh(m,k,N,L,B,q){var G;for(G=3;0<G;--G)aa(m,k+=4,1,N,16,L,B,q)}function V5(m,k,N,L,B,q,G,J){Yc(m,k,B,1,8,q,G,J),Yc(N,L,B,1,8,q,G,J)}function pm(m,k,N,L,B,q,G,J){Yc(m,k,1,B,8,q,G,J),Yc(N,L,1,B,8,q,G,J)}function gm(m,k,N,L,B,q,G,J){aa(m,k+4*B,B,1,8,q,G,J),aa(N,L+4*B,B,1,8,q,G,J)}function Zy(m,k,N,L,B,q,G,J){aa(m,k+4,1,B,8,q,G,J),aa(N,L+4,1,B,8,q,G,J)}function Rh(){this.ba=new Kn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new wn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function mm(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ym(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Xy(){this.ua=0,this.Wa=new V,this.vb=new V,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new $}function W5(){this.xb=this.a=0,this.l=new no,this.ca=new Kn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Xy,this.ab=0,this.gc=o(4,ym),this.Oc=0}function Lh(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new no,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function $d(m,k,N,L,B,q,G){for(m=m==null?0:m[k+0],k=0;k<G;++k)B[q+k]=m+N[L+k]&255,m=B[q+k]}function vm(m,k,N,L,B,q,G){var J;if(m==null)$d(null,null,N,L,B,q,G);else for(J=0;J<G;++J)B[q+J]=m[k+J]+N[L+J]&255}function Zc(m,k,N,L,B,q,G){if(m==null)$d(null,null,N,L,B,q,G);else{var J,Q=m[k+0],se=Q,we=Q;for(J=0;J<G;++J)se=we+(Q=m[k+J])-se,we=N[L+J]+(-256&se?0>se?0:255:se)&255,se=Q,B[q+J]=we}}function bm(m,k,N,L){var B=k.width,q=k.o;if(e(m!=null&&k!=null),0>N||0>=L||N+L>q)return null;if(!m.Cc){if(m.ga==null){var G;if(m.ga=new Lh,(G=m.ga==null)||(G=k.width*k.o,e(m.Gb.length==0),m.Gb=s(G),m.Uc=0,m.Gb==null?G=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,G=1),G=!G),!G){G=m.ga;var J=m.Fa,Q=m.P,se=m.qc,we=m.mb,Ne=m.nb,Me=Q+1,Ae=se-1,Ve=G.l;if(e(J!=null&&we!=null&&k!=null),ru[0]=null,ru[1]=$d,ru[2]=vm,ru[3]=Zc,G.ca=we,G.tb=Ne,G.c=k.width,G.i=k.height,e(0<G.c&&0<G.i),1>=se)k=0;else if(G.$a=J[Q+0]>>0&3,G.Z=J[Q+0]>>2&3,G.Lc=J[Q+0]>>4&3,Q=J[Q+0]>>6&3,0>G.$a||1<G.$a||4<=G.Z||1<G.Lc||Q)k=0;else if(Ve.put=To,Ve.ac=xr,Ve.bc=Ps,Ve.ma=G,Ve.width=k.width,Ve.height=k.height,Ve.Da=k.Da,Ve.v=k.v,Ve.va=k.va,Ve.j=k.j,Ve.o=k.o,G.$a)e:{e(G.$a==1),k=rs();t:for(;;){if(k==null){k=0;break e}if(e(G!=null),G.mc=k,k.c=G.c,k.i=G.i,k.l=G.l,k.l.ma=G,k.l.width=G.c,k.l.height=G.i,k.a=0,te(k.m,J,Me,Ae),!eo(G.c,G.i,1,k,null)||(k.ab==1&&k.gc[0].hc==3&&er(k.s)?(G.ic=1,J=k.c*k.i,k.Ta=null,k.Ua=0,k.V=s(J),k.Ba=0,k.V==null?(k.a=1,k=0):k=1):(G.ic=0,k=zl(k,G.c)),!k))break t;k=1;break e}G.mc=null,k=0}else k=Ae>=G.c*G.i;G=!k}if(G)return null;m.ga.Lc!=1?m.Ga=0:L=q-N}e(m.ga!=null),e(N+L<=q);e:{if(k=(J=m.ga).c,q=J.l.o,J.$a==0){if(Me=m.rc,Ae=m.Vc,Ve=m.Fa,Q=m.P+1+N*k,se=m.mb,we=m.nb+N*k,e(Q<=m.P+m.qc),J.Z!=0)for(e(ru[J.Z]!=null),G=0;G<L;++G)ru[J.Z](Me,Ae,Ve,Q,se,we,k),Me=se,Ae=we,we+=k,Q+=k;else for(G=0;G<L;++G)r(se,we,Ve,Q,k),Me=se,Ae=we,we+=k,Q+=k;m.rc=Me,m.Vc=Ae}else{if(e(J.mc!=null),k=N+L,e((G=J.mc)!=null),e(k<=G.i),G.C>=k)k=1;else if(J.ic||Pe(),J.ic){J=G.V,Me=G.Ba,Ae=G.c;var $e=G.i,xe=(Ve=1,Q=G.$/Ae,se=G.$%Ae,we=G.m,Ne=G.s,G.$),Se=Ae*$e,Ue=Ae*k,We=Ne.wc,He=xe<Ue?Sr(Ne,se,Q):null;e(xe<=Se),e(k<=$e),e(er(Ne));t:for(;;){for(;!we.h&&xe<Ue;){if(se&We||(He=Sr(Ne,se,Q)),e(He!=null),he(we),256>($e=Mi(He.G[0],He.H[0],we)))J[Me+xe]=$e,++xe,++se>=Ae&&(se=0,++Q<=k&&!(Q%16)&&si(G,Q));else{if(!(280>$e)){Ve=0;break t}$e=Qs($e-256,we);var ft,it=Mi(He.G[4],He.H[4],we);if(he(we),!(xe>=(it=Ts(Ae,it=Qs(it,we)))&&Se-xe>=$e)){Ve=0;break t}for(ft=0;ft<$e;++ft)J[Me+xe+ft]=J[Me+xe+ft-it];for(xe+=$e,se+=$e;se>=Ae;)se-=Ae,++Q<=k&&!(Q%16)&&si(G,Q);xe<Ue&&se&We&&(He=Sr(Ne,se,Q))}e(we.h==re(we))}si(G,Q>k?k:Q);break t}!Ve||we.h&&xe<Se?(Ve=0,G.a=we.h?5:3):G.$=xe,k=Ve}else k=Ms(G,G.V,G.Ba,G.c,G.i,k,Bl);if(!k){L=0;break e}}N+L>=q&&(m.Cc=1),L=1}if(!L)return null;if(m.Cc&&((L=m.ga)!=null&&(L.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+N*B}function E(m,k,N,L,B,q){for(;0<B--;){var G,J=m,Q=k+(N?1:0),se=m,we=k+(N?0:3);for(G=0;G<L;++G){var Ne=se[we+4*G];Ne!=255&&(Ne*=32897,J[Q+4*G+0]=J[Q+4*G+0]*Ne>>23,J[Q+4*G+1]=J[Q+4*G+1]*Ne>>23,J[Q+4*G+2]=J[Q+4*G+2]*Ne>>23)}k+=q}}function U(m,k,N,L,B){for(;0<L--;){var q;for(q=0;q<N;++q){var G=m[k+2*q+0],J=15&(se=m[k+2*q+1]),Q=4369*J,se=(240&se|se>>4)*Q>>16;m[k+2*q+0]=(240&G|G>>4)*Q>>16&240|(15&G|G<<4)*Q>>16>>4&15,m[k+2*q+1]=240&se|J}k+=B}}function ae(m,k,N,L,B,q,G,J){var Q,se,we=255;for(se=0;se<B;++se){for(Q=0;Q<L;++Q){var Ne=m[k+Q];q[G+4*Q]=Ne,we&=Ne}k+=N,G+=J}return we!=255}function ve(m,k,N,L,B){var q;for(q=0;q<B;++q)N[L+q]=m[k+q]>>8}function Pe(){Ro=E,Yn=U,Zn=ae,Or=ve}function ze(m,k,N){M[m]=function(L,B,q,G,J,Q,se,we,Ne,Me,Ae,Ve,$e,xe,Se,Ue,We){var He,ft=We-1>>1,it=J[Q+0]|se[we+0]<<16,Et=Ne[Me+0]|Ae[Ve+0]<<16;e(L!=null);var at=3*it+Et+131074>>2;for(k(L[B+0],255&at,at>>16,$e,xe),q!=null&&(at=3*Et+it+131074>>2,k(q[G+0],255&at,at>>16,Se,Ue)),He=1;He<=ft;++He){var _n=J[Q+He]|se[we+He]<<16,Tn=Ne[Me+He]|Ae[Ve+He]<<16,xn=it+_n+Et+Tn+524296,hn=xn+2*(_n+Et)>>3;at=hn+it>>1,it=(xn=xn+2*(it+Tn)>>3)+_n>>1,k(L[B+2*He-1],255&at,at>>16,$e,xe+(2*He-1)*N),k(L[B+2*He-0],255&it,it>>16,$e,xe+(2*He-0)*N),q!=null&&(at=xn+Et>>1,it=hn+Tn>>1,k(q[G+2*He-1],255&at,at>>16,Se,Ue+(2*He-1)*N),k(q[G+2*He+0],255&it,it>>16,Se,Ue+(2*He+0)*N)),it=_n,Et=Tn}1&We||(at=3*it+Et+131074>>2,k(L[B+We-1],255&at,at>>16,$e,xe+(We-1)*N),q!=null&&(at=3*Et+it+131074>>2,k(q[G+We-1],255&at,at>>16,Se,Ue+(We-1)*N)))}}function Je(){Do[ov]=UW,Do[av]=X6,Do[G6]=HW,Do[lv]=Q6,Do[cv]=eP,Do[K5]=tP,Do[K6]=VW,Do[J5]=X6,Do[Y5]=Q6,Do[uv]=eP,Do[Z5]=tP}function ut(m){return m&-16384?0>m?0:255:m>>WW}function wt(m,k){return ut((19077*m>>8)+(26149*k>>8)-14234)}function Kt(m,k,N){return ut((19077*m>>8)-(6419*k>>8)-(13320*N>>8)+8708)}function Vt(m,k){return ut((19077*m>>8)+(33050*k>>8)-17685)}function yn(m,k,N,L,B){L[B+0]=wt(m,N),L[B+1]=Kt(m,k,N),L[B+2]=Vt(m,k)}function fr(m,k,N,L,B){L[B+0]=Vt(m,k),L[B+1]=Kt(m,k,N),L[B+2]=wt(m,N)}function kr(m,k,N,L,B){var q=Kt(m,k,N);k=q<<3&224|Vt(m,k)>>3,L[B+0]=248&wt(m,N)|q>>5,L[B+1]=k}function Ur(m,k,N,L,B){var q=240&Vt(m,k)|15;L[B+0]=240&wt(m,N)|Kt(m,k,N)>>4,L[B+1]=q}function Ri(m,k,N,L,B){L[B+0]=255,yn(m,k,N,L,B+1)}function oi(m,k,N,L,B){fr(m,k,N,L,B),L[B+3]=255}function la(m,k,N,L,B){yn(m,k,N,L,B),L[B+3]=255}function ro(m,k){return 0>m?0:m>k?k:m}function Za(m,k,N){M[m]=function(L,B,q,G,J,Q,se,we,Ne){for(var Me=we+(-2&Ne)*N;we!=Me;)k(L[B+0],q[G+0],J[Q+0],se,we),k(L[B+1],q[G+0],J[Q+0],se,we+N),B+=2,++G,++Q,we+=2*N;1&Ne&&k(L[B+0],q[G+0],J[Q+0],se,we)}}function Qy(m,k,N){return N==0?m==0?k==0?6:5:k==0?4:0:N}function wm(m,k,N,L,B){switch(m>>>30){case 3:Gl(k,N,L,B,0);break;case 2:Mr(k,N,L,B);break;case 1:ss(k,N,L,B)}}function xm(m,k){var N,L,B=k.M,q=k.Nb,G=m.oc,J=m.pc+40,Q=m.oc,se=m.pc+584,we=m.oc,Ne=m.pc+600;for(N=0;16>N;++N)G[J+32*N-1]=129;for(N=0;8>N;++N)Q[se+32*N-1]=129,we[Ne+32*N-1]=129;for(0<B?G[J-1-32]=Q[se-1-32]=we[Ne-1-32]=129:(i(G,J-32-1,127,21),i(Q,se-32-1,127,9),i(we,Ne-32-1,127,9)),L=0;L<m.za;++L){var Me=k.ya[k.aa+L];if(0<L){for(N=-1;16>N;++N)r(G,J+32*N-4,G,J+32*N+12,4);for(N=-1;8>N;++N)r(Q,se+32*N-4,Q,se+32*N+4,4),r(we,Ne+32*N-4,we,Ne+32*N+4,4)}var Ae=m.Gd,Ve=m.Hd+L,$e=Me.ad,xe=Me.Hc;if(0<B&&(r(G,J-32,Ae[Ve].y,0,16),r(Q,se-32,Ae[Ve].f,0,8),r(we,Ne-32,Ae[Ve].ea,0,8)),Me.Za){var Se=G,Ue=J-32+16;for(0<B&&(L>=m.za-1?i(Se,Ue,Ae[Ve].y[15],4):r(Se,Ue,Ae[Ve+1].y,0,4)),N=0;4>N;N++)Se[Ue+128+N]=Se[Ue+256+N]=Se[Ue+384+N]=Se[Ue+0+N];for(N=0;16>N;++N,xe<<=2)Se=G,Ue=J+rP[N],ca[Me.Ob[N]](Se,Ue),wm(xe,$e,16*+N,Se,Ue)}else if(Se=Qy(L,B,Me.Ob[0]),nu[Se](G,J),xe!=0)for(N=0;16>N;++N,xe<<=2)wm(xe,$e,16*+N,G,J+rP[N]);for(N=Me.Gc,Se=Qy(L,B,Me.Dd),Jl[Se](Q,se),Jl[Se](we,Ne),xe=$e,Se=Q,Ue=se,255&(Me=N>>0)&&(170&Me?Am(xe,256,Se,Ue):Mo(xe,256,Se,Ue)),Me=we,xe=Ne,255&(N>>=8)&&(170&N?Am($e,320,Me,xe):Mo($e,320,Me,xe)),B<m.Ub-1&&(r(Ae[Ve].y,0,G,J+480,16),r(Ae[Ve].f,0,Q,se+224,8),r(Ae[Ve].ea,0,we,Ne+224,8)),N=8*q*m.B,Ae=m.sa,Ve=m.ta+16*L+16*q*m.R,$e=m.qa,Me=m.ra+8*L+N,xe=m.Ha,Se=m.Ia+8*L+N,N=0;16>N;++N)r(Ae,Ve+N*m.R,G,J+32*N,16);for(N=0;8>N;++N)r($e,Me+N*m.B,Q,se+32*N,8),r(xe,Se+N*m.B,we,Ne+32*N,8)}}function Dh(m,k,N,L,B,q,G,J,Q){var se=[0],we=[0],Ne=0,Me=Q!=null?Q.kd:0,Ae=Q??new mm;if(m==null||12>N)return 7;Ae.data=m,Ae.w=k,Ae.ha=N,k=[k],N=[N],Ae.gb=[Ae.gb];e:{var Ve=k,$e=N,xe=Ae.gb;if(e(m!=null),e($e!=null),e(xe!=null),xe[0]=0,12<=$e[0]&&!n(m,Ve[0],"RIFF")){if(n(m,Ve[0]+8,"WEBP")){xe=3;break e}var Se=je(m,Ve[0]+4);if(12>Se||4294967286<Se){xe=3;break e}if(Me&&Se>$e[0]-8){xe=7;break e}xe[0]=Se,Ve[0]+=12,$e[0]-=12}xe=0}if(xe!=0)return xe;for(Se=0<Ae.gb[0],N=N[0];;){e:{var Ue=m;$e=k,xe=N;var We=se,He=we,ft=Ve=[0];if((at=Ne=[Ne])[0]=0,8>xe[0])xe=7;else{if(!n(Ue,$e[0],"VP8X")){if(je(Ue,$e[0]+4)!=10){xe=3;break e}if(18>xe[0]){xe=7;break e}var it=je(Ue,$e[0]+8),Et=1+Te(Ue,$e[0]+12);if(2147483648<=Et*(Ue=1+Te(Ue,$e[0]+15))){xe=3;break e}ft!=null&&(ft[0]=it),We!=null&&(We[0]=Et),He!=null&&(He[0]=Ue),$e[0]+=18,xe[0]-=18,at[0]=1}xe=0}}if(Ne=Ne[0],Ve=Ve[0],xe!=0)return xe;if($e=!!(2&Ve),!Se&&Ne)return 3;if(q!=null&&(q[0]=!!(16&Ve)),G!=null&&(G[0]=$e),J!=null&&(J[0]=0),G=se[0],Ve=we[0],Ne&&$e&&Q==null){xe=0;break}if(4>N){xe=7;break}if(Se&&Ne||!Se&&!Ne&&!n(m,k[0],"ALPH")){N=[N],Ae.na=[Ae.na],Ae.P=[Ae.P],Ae.Sa=[Ae.Sa];e:{it=m,xe=k,Se=N;var at=Ae.gb;We=Ae.na,He=Ae.P,ft=Ae.Sa,Et=22,e(it!=null),e(Se!=null),Ue=xe[0];var _n=Se[0];for(e(We!=null),e(ft!=null),We[0]=null,He[0]=null,ft[0]=0;;){if(xe[0]=Ue,Se[0]=_n,8>_n){xe=7;break e}var Tn=je(it,Ue+4);if(4294967286<Tn){xe=3;break e}var xn=8+Tn+1&-2;if(Et+=xn,0<at&&Et>at){xe=3;break e}if(!n(it,Ue,"VP8 ")||!n(it,Ue,"VP8L")){xe=0;break e}if(_n[0]<xn){xe=7;break e}n(it,Ue,"ALPH")||(We[0]=it,He[0]=Ue+8,ft[0]=Tn),Ue+=xn,_n-=xn}}if(N=N[0],Ae.na=Ae.na[0],Ae.P=Ae.P[0],Ae.Sa=Ae.Sa[0],xe!=0)break}N=[N],Ae.Ja=[Ae.Ja],Ae.xa=[Ae.xa];e:if(at=m,xe=k,Se=N,We=Ae.gb[0],He=Ae.Ja,ft=Ae.xa,it=xe[0],Ue=!n(at,it,"VP8 "),Et=!n(at,it,"VP8L"),e(at!=null),e(Se!=null),e(He!=null),e(ft!=null),8>Se[0])xe=7;else{if(Ue||Et){if(at=je(at,it+4),12<=We&&at>We-12){xe=3;break e}if(Me&&at>Se[0]-8){xe=7;break e}He[0]=at,xe[0]+=8,Se[0]-=8,ft[0]=Et}else ft[0]=5<=Se[0]&&at[it+0]==47&&!(at[it+4]>>5),He[0]=Se[0];xe=0}if(N=N[0],Ae.Ja=Ae.Ja[0],Ae.xa=Ae.xa[0],k=k[0],xe!=0)break;if(4294967286<Ae.Ja)return 3;if(J==null||$e||(J[0]=Ae.xa?2:1),G=[G],Ve=[Ve],Ae.xa){if(5>N){xe=7;break}J=G,Me=Ve,$e=q,m==null||5>N?m=0:5<=N&&m[k+0]==47&&!(m[k+4]>>5)?(Se=[0],at=[0],We=[0],te(He=new F,m,k,N),At(He,Se,at,We)?(J!=null&&(J[0]=Se[0]),Me!=null&&(Me[0]=at[0]),$e!=null&&($e[0]=We[0]),m=1):m=0):m=0}else{if(10>N){xe=7;break}J=Ve,m==null||10>N||!Gc(m,k+3,N-3)?m=0:(Me=m[k+0]|m[k+1]<<8|m[k+2]<<16,$e=16383&(m[k+7]<<8|m[k+6]),m=16383&(m[k+9]<<8|m[k+8]),1&Me||3<(Me>>1&7)||!(Me>>4&1)||Me>>5>=Ae.Ja||!$e||!m?m=0:(G&&(G[0]=$e),J&&(J[0]=m),m=1))}if(!m||(G=G[0],Ve=Ve[0],Ne&&(se[0]!=G||we[0]!=Ve)))return 3;Q!=null&&(Q[0]=Ae,Q.offset=k-Q.w,e(4294967286>k-Q.w),e(Q.offset==Q.ha-N));break}return xe==0||xe==7&&Ne&&Q==null?(q!=null&&(q[0]|=Ae.na!=null&&0<Ae.na.length),L!=null&&(L[0]=G),B!=null&&(B[0]=Ve),0):xe}function Sm(m,k,N){var L=k.width,B=k.height,q=0,G=0,J=L,Q=B;if(k.Da=m!=null&&0<m.Da,k.Da&&(J=m.cd,Q=m.bd,q=m.v,G=m.j,11>N||(q&=-2,G&=-2),0>q||0>G||0>=J||0>=Q||q+J>L||G+Q>B))return 0;if(k.v=q,k.j=G,k.va=q+J,k.o=G+Q,k.U=J,k.T=Q,k.da=m!=null&&0<m.da,k.da){if(!Re(J,Q,N=[m.ib],q=[m.hb]))return 0;k.ib=N[0],k.hb=q[0]}return k.ob=m!=null&&m.ob,k.Kb=m==null||!m.Sd,k.da&&(k.ob=k.ib<3*L/4&&k.hb<3*B/4,k.Kb=0),1}function km(m){if(m==null)return 2;if(11>m.S){var k=m.f.RGBA;k.fb+=(m.height-1)*k.A,k.A=-k.A}else k=m.f.kb,m=m.height,k.O+=(m-1)*k.fa,k.fa=-k.fa,k.N+=(m-1>>1)*k.Ab,k.Ab=-k.Ab,k.W+=(m-1>>1)*k.Db,k.Db=-k.Db,k.F!=null&&(k.J+=(m-1)*k.lb,k.lb=-k.lb);return 0}function Ih(m,k,N,L){if(L==null||0>=m||0>=k)return 2;if(N!=null){if(N.Da){var B=N.cd,q=N.bd,G=-2&N.v,J=-2&N.j;if(0>G||0>J||0>=B||0>=q||G+B>m||J+q>k)return 2;m=B,k=q}if(N.da){if(!Re(m,k,B=[N.ib],q=[N.hb]))return 2;m=B[0],k=q[0]}}L.width=m,L.height=k;e:{var Q=L.width,se=L.height;if(m=L.S,0>=Q||0>=se||!(m>=ov&&13>m))m=2;else{if(0>=L.Rd&&L.sd==null){G=q=B=k=0;var we=(J=Q*iP[m])*se;if(11>m||(q=(se+1)/2*(k=(Q+1)/2),m==12&&(G=(B=Q)*se)),(se=s(we+2*q+G))==null){m=1;break e}L.sd=se,11>m?((Q=L.f.RGBA).eb=se,Q.fb=0,Q.A=J,Q.size=we):((Q=L.f.kb).y=se,Q.O=0,Q.fa=J,Q.Fd=we,Q.f=se,Q.N=0+we,Q.Ab=k,Q.Cd=q,Q.ea=se,Q.W=0+we+q,Q.Db=k,Q.Ed=q,m==12&&(Q.F=se,Q.J=0+we+2*q),Q.Tc=G,Q.lb=B)}if(k=1,B=L.S,q=L.width,G=L.height,B>=ov&&13>B)if(11>B)m=L.f.RGBA,k&=(J=Math.abs(m.A))*(G-1)+q<=m.size,k&=J>=q*iP[B],k&=m.eb!=null;else{m=L.f.kb,J=(q+1)/2,we=(G+1)/2,Q=Math.abs(m.fa),se=Math.abs(m.Ab);var Ne=Math.abs(m.Db),Me=Math.abs(m.lb),Ae=Me*(G-1)+q;k&=Q*(G-1)+q<=m.Fd,k&=se*(we-1)+J<=m.Cd,k=(k&=Ne*(we-1)+J<=m.Ed)&Q>=q&se>=J&Ne>=J,k&=m.y!=null,k&=m.f!=null,k&=m.ea!=null,B==12&&(k&=Me>=q,k&=Ae<=m.Tc,k&=m.F!=null)}else k=0;m=k?0:2}}return m!=0||N!=null&&N.fd&&(m=km(L)),m}var xi=64,$h=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],jh=24,Fh=32,Cm=8,Ls=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];_("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(m){return m},M.Predictor2=function(m,k,N){return k[N+0]},M.Predictor3=function(m,k,N){return k[N+1]},M.Predictor4=function(m,k,N){return k[N-1]},M.Predictor5=function(m,k,N){return j(j(m,k[N+1]),k[N+0])},M.Predictor6=function(m,k,N){return j(m,k[N-1])},M.Predictor7=function(m,k,N){return j(m,k[N+0])},M.Predictor8=function(m,k,N){return j(k[N-1],k[N+0])},M.Predictor9=function(m,k,N){return j(k[N+0],k[N+1])},M.Predictor10=function(m,k,N){return j(j(m,k[N-1]),j(k[N+0],k[N+1]))},M.Predictor11=function(m,k,N){var L=k[N+0];return 0>=Ee(L>>24&255,m>>24&255,(k=k[N-1])>>24&255)+Ee(L>>16&255,m>>16&255,k>>16&255)+Ee(L>>8&255,m>>8&255,k>>8&255)+Ee(255&L,255&m,255&k)?L:m},M.Predictor12=function(m,k,N){var L=k[N+0];return(oe((m>>24&255)+(L>>24&255)-((k=k[N-1])>>24&255))<<24|oe((m>>16&255)+(L>>16&255)-(k>>16&255))<<16|oe((m>>8&255)+(L>>8&255)-(k>>8&255))<<8|oe((255&m)+(255&L)-(255&k)))>>>0},M.Predictor13=function(m,k,N){var L=k[N-1];return(ye((m=j(m,k[N+0]))>>24&255,L>>24&255)<<24|ye(m>>16&255,L>>16&255)<<16|ye(m>>8&255,L>>8&255)<<8|ye(m>>0&255,L>>0&255))>>>0};var q5=M.PredictorAdd0;M.PredictorAdd1=Ge,_("Predictor2","PredictorAdd2"),_("Predictor3","PredictorAdd3"),_("Predictor4","PredictorAdd4"),_("Predictor5","PredictorAdd5"),_("Predictor6","PredictorAdd6"),_("Predictor7","PredictorAdd7"),_("Predictor8","PredictorAdd8"),_("Predictor9","PredictorAdd9"),_("Predictor10","PredictorAdd10"),_("Predictor11","PredictorAdd11"),_("Predictor12","PredictorAdd12"),_("Predictor13","PredictorAdd13");var _m=M.PredictorAdd2;rt("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),rt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var ev,No=M.ColorIndexInverseTransform,zh=M.MapARGB,tv=M.VP8LColorIndexInverseTransformAlpha,nv=M.MapAlpha,Xc=M.VP8LPredictorsAdd=[];Xc.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var jd,Ds,is,Qc,Wl,ql,Bh,Gl,Mr,Am,ss,Mo,Uh,rv,Em,Fd,zd,eu,Bd,Hh,Ud,tu,Pm,Oo,Ro,Yn,Zn,Or,Kr=s(511),Kl=s(2041),Tm=s(225),Vh=s(767),iv=0,G5=Kl,sv=Tm,io=Vh,Lo=Kr,ov=0,av=1,G6=2,lv=3,cv=4,K5=5,K6=6,J5=7,Y5=8,uv=9,Z5=10,PW=[2,3,7],TW=[3,3,11],J6=[280,256,256,256,40],NW=[0,1,1,1,0],MW=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],OW=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],RW=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],LW=8,X5=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Q5=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Nm=null,DW=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],IW=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Y6=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],$W=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],jW=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],FW=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],zW=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],nu=[],ca=[],Jl=[],BW=1,Z6=2,ru=[],Do=[];ze("UpsampleRgbLinePair",yn,3),ze("UpsampleBgrLinePair",fr,3),ze("UpsampleRgbaLinePair",la,4),ze("UpsampleBgraLinePair",oi,4),ze("UpsampleArgbLinePair",Ri,4),ze("UpsampleRgba4444LinePair",Ur,2),ze("UpsampleRgb565LinePair",kr,2);var UW=M.UpsampleRgbLinePair,HW=M.UpsampleBgrLinePair,X6=M.UpsampleRgbaLinePair,Q6=M.UpsampleBgraLinePair,eP=M.UpsampleArgbLinePair,tP=M.UpsampleRgba4444LinePair,VW=M.UpsampleRgb565LinePair,dv=16,fv=1<<dv-1,Mm=-227,eS=482,WW=6,nP=0,qW=s(256),GW=s(256),KW=s(256),JW=s(256),YW=s(eS-Mm),ZW=s(eS-Mm);Za("YuvToRgbRow",yn,3),Za("YuvToBgrRow",fr,3),Za("YuvToRgbaRow",la,4),Za("YuvToBgraRow",oi,4),Za("YuvToArgbRow",Ri,4),Za("YuvToRgba4444Row",Ur,2),Za("YuvToRgb565Row",kr,2);var rP=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],hv=[0,2,8],XW=[8,7,6,4,4,2,2,2,1,1,1,1],QW=1;this.WebPDecodeRGBA=function(m,k,N,L,B){var q=av,G=new Rh,J=new Kn;G.ba=J,J.S=q,J.width=[J.width],J.height=[J.height];var Q=J.width,se=J.height,we=new dr;if(we==null||m==null)var Ne=2;else e(we!=null),Ne=Dh(m,k,N,we.width,we.height,we.Pd,we.Qd,we.format,null);if(Ne!=0?Q=0:(Q!=null&&(Q[0]=we.width[0]),se!=null&&(se[0]=we.height[0]),Q=1),Q){J.width=J.width[0],J.height=J.height[0],L!=null&&(L[0]=J.width),B!=null&&(B[0]=J.height);e:{if(L=new no,(B=new mm).data=m,B.w=k,B.ha=N,B.kd=1,k=[0],e(B!=null),((m=Dh(B.data,B.w,B.ha,null,null,null,k,null,B))==0||m==7)&&k[0]&&(m=4),(k=m)==0){if(e(G!=null),L.data=B.data,L.w=B.w+B.offset,L.ha=B.ha-B.offset,L.put=To,L.ac=xr,L.bc=Ps,L.ma=G,B.xa){if((m=rs())==null){G=1;break e}if(function(Me,Ae){var Ve=[0],$e=[0],xe=[0];t:for(;;){if(Me==null)return 0;if(Ae==null)return Me.a=2,0;if(Me.l=Ae,Me.a=0,te(Me.m,Ae.data,Ae.w,Ae.ha),!At(Me.m,Ve,$e,xe)){Me.a=3;break t}if(Me.xb=Z6,Ae.width=Ve[0],Ae.height=$e[0],!eo(Ve[0],$e[0],1,Me,null))break t;return 1}return e(Me.a!=0),0}(m,L)){if(L=(k=Ih(L.width,L.height,G.Oa,G.ba))==0){t:{L=m;n:for(;;){if(L==null){L=0;break t}if(e(L.s.yc!=null),e(L.s.Ya!=null),e(0<L.s.Wb),e((N=L.l)!=null),e((B=N.ma)!=null),L.xb!=0){if(L.ca=B.ba,L.tb=B.tb,e(L.ca!=null),!Sm(B.Oa,N,lv)){L.a=2;break n}if(!zl(L,N.width)||N.da)break n;if((N.da||dt(L.ca.S))&&Pe(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&Pe()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!Qe(L.s.vb,L.s.Wa.Xa)){L.a=1;break n}L.xb=0}if(!Ms(L,L.V,L.Ba,L.c,L.i,N.o,Ga))break n;B.Dc=L.Ma,L=1;break t}e(L.a!=0),L=0}L=!L}L&&(k=m.a)}else k=m.a}else{if((m=new Rd)==null){G=1;break e}if(m.Fa=B.na,m.P=B.P,m.qc=B.Sa,Ul(m,L)){if((k=Ih(L.width,L.height,G.Oa,G.ba))==0){if(m.Aa=0,N=G.Oa,e((B=m)!=null),N!=null){if(0<(Q=0>(Q=N.Md)?0:100<Q?255:255*Q/100)){for(se=we=0;4>se;++se)12>(Ne=B.pb[se]).lc&&(Ne.ia=Q*XW[0>Ne.lc?0:Ne.lc]>>3),we|=Ne.ia;we&&(alert("todo:VP8InitRandom"),B.ia=1)}B.Ga=N.Id,100<B.Ga?B.Ga=100:0>B.Ga&&(B.Ga=0)}P5(m,L)||(k=m.a)}}else k=m.a}k==0&&G.Oa!=null&&G.Oa.fd&&(k=km(G.ba))}G=k}q=G!=0?null:11>q?J.f.RGBA.eb:J.f.kb.y}else q=null;return q};var iP=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(M,D){for(var I="",R=0;R<4;R++)I+=String.fromCharCode(M[D++]);return I}function d(M,D){return(M[D+0]<<0|M[D+1]<<8|M[D+2]<<16)>>>0}function u(M,D){return(M[D+0]<<0|M[D+1]<<8|M[D+2]<<16|M[D+3]<<24)>>>0}new l;var f=[0],h=[0],p=[],g=new l,b=t,v=function(M,D){var I={},R=0,$=!1,H=0,z=0;if(I.frames=[],!function(X,re,ue,he){for(var fe=0;fe<he;fe++)if(X[re+fe]!=ue.charCodeAt(fe))return!0;return!1}(M,D,"RIFF",4)){var ee,ce;for(u(M,D+=4),D+=8;D<M.length;){var le=c(M,D),te=u(M,D+=4);D+=4;var Z=te+(1&te);switch(le){case"VP8 ":case"VP8L":I.frames[R]===void 0&&(I.frames[R]={}),(F=I.frames[R]).src_off=$?z:D-8,F.src_size=H+te+8,R++,$&&($=!1,H=0,z=0);break;case"VP8X":(F=I.header={}).feature_flags=M[D];var de=D+4;F.canvas_width=1+d(M,de),de+=3,F.canvas_height=1+d(M,de),de+=3;break;case"ALPH":$=!0,H=Z+8,z=D-8;break;case"ANIM":(F=I.header).bgcolor=u(M,D),de=D+4,F.loop_count=(ee=M)[(ce=de)+0]<<0|ee[ce+1]<<8,de+=2;break;case"ANMF":var Ce,F;(F=I.frames[R]={}).offset_x=2*d(M,D),D+=3,F.offset_y=2*d(M,D),D+=3,F.width=1+d(M,D),D+=3,F.height=1+d(M,D),D+=3,F.duration=d(M,D),D+=3,Ce=M[D++],F.dispose=1&Ce,F.blend=Ce>>1&1}le!="ANMF"&&(D+=Z)}return I}}(b,0);v.response=b,v.rgbaoutput=!0,v.dataurl=!1;var x=v.header?v.header:null,w=v.frames?v.frames:null;if(x){x.loop_counter=x.loop_count,f=[x.canvas_height],h=[x.canvas_width];for(var C=0;C<w.length&&w[C].blend!=0;C++);}var P=w[0],O=g.WebPDecodeRGBA(b,P.src_off,P.src_size,h,f);P.rgba=O,P.imgwidth=h[0],P.imgheight=f[0];for(var T=0;T<h[0]*f[0]*4;T++)p[T]=O[T];return this.width=h,this.height=f,this.data=p,this}(function(t){var e=function(){return typeof aA=="function"},n=function(f,h,p,g){var b=4,v=o;switch(g){case t.image_compression.FAST:b=1,v=s;break;case t.image_compression.MEDIUM:b=6,v=a;break;case t.image_compression.SLOW:b=9,v=l}f=r(f,h,p,v);var x=aA(f,{level:b});return t.__addimage__.arrayBufferToBinaryString(x)},r=function(f,h,p,g){for(var b,v,x,w=f.length/h,C=new Uint8Array(f.length+w),P=d(),O=0;O<w;O+=1){if(x=O*h,b=f.subarray(x,x+h),g)C.set(g(b,p,v),x+O);else{for(var T,M=P.length,D=[];T<M;T+=1)D[T]=P[T](b,p,v);var I=u(D.concat());C.set(D[I],x+O)}v=b}return C},i=function(f){var h=Array.apply([],f);return h.unshift(0),h},s=function(f,h){var p,g=[],b=f.length;g[0]=1;for(var v=0;v<b;v+=1)p=f[v-h]||0,g[v+1]=f[v]-p+256&255;return g},o=function(f,h,p){var g,b=[],v=f.length;b[0]=2;for(var x=0;x<v;x+=1)g=p&&p[x]||0,b[x+1]=f[x]-g+256&255;return b},a=function(f,h,p){var g,b,v=[],x=f.length;v[0]=3;for(var w=0;w<x;w+=1)g=f[w-h]||0,b=p&&p[w]||0,v[w+1]=f[w]+256-(g+b>>>1)&255;return v},l=function(f,h,p){var g,b,v,x,w=[],C=f.length;w[0]=4;for(var P=0;P<C;P+=1)g=f[P-h]||0,b=p&&p[P]||0,v=p&&p[P-h]||0,x=c(g,b,v),w[P+1]=f[P]-x+256&255;return w},c=function(f,h,p){if(f===h&&h===p)return f;var g=Math.abs(h-p),b=Math.abs(f-p),v=Math.abs(f+h-p-p);return g<=b&&g<=v?f:b<=v?h:p},d=function(){return[i,s,o,a,l]},u=function(f){var h=f.map(function(p){return p.reduce(function(g,b){return g+Math.abs(b)},0)});return h.indexOf(Math.min.apply(null,h))};t.processPNG=function(f,h,p,g){var b,v,x,w,C,P,O,T,M,D,I,R,$,H,z,ee=this.decode.FLATE_DECODE,ce="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(x=new OCe(f)).imgData,v=x.bits,b=x.colorSpace,C=x.colors,[4,6].indexOf(x.colorType)!==-1){if(x.bits===8){M=(T=x.pixelBitlength==32?new Uint32Array(x.decodePixels().buffer):x.pixelBitlength==16?new Uint16Array(x.decodePixels().buffer):new Uint8Array(x.decodePixels().buffer)).length,I=new Uint8Array(M*x.colors),D=new Uint8Array(M);var le,te=x.pixelBitlength-x.bits;for(H=0,z=0;H<M;H++){for($=T[H],le=0;le<te;)I[z++]=$>>>le&255,le+=x.bits;D[H]=$>>>le&255}}if(x.bits===16){M=(T=new Uint32Array(x.decodePixels().buffer)).length,I=new Uint8Array(M*(32/x.pixelBitlength)*x.colors),D=new Uint8Array(M*(32/x.pixelBitlength)),R=x.colors>1,H=0,z=0;for(var Z=0;H<M;)$=T[H++],I[z++]=$>>>0&255,R&&(I[z++]=$>>>16&255,$=T[H++],I[z++]=$>>>0&255),D[Z++]=$>>>16&255;v=8}g!==t.image_compression.NONE&&e()?(f=n(I,x.width*x.colors,x.colors,g),O=n(D,x.width,1,g)):(f=I,O=D,ee=void 0)}if(x.colorType===3&&(b=this.color_spaces.INDEXED,P=x.palette,x.transparency.indexed)){var de=x.transparency.indexed,Ce=0;for(H=0,M=de.length;H<M;++H)Ce+=de[H];if((Ce/=255)===M-1&&de.indexOf(0)!==-1)w=[de.indexOf(0)];else if(Ce!==M){for(T=x.decodePixels(),D=new Uint8Array(T.length),H=0,M=T.length;H<M;H++)D[H]=de[T[H]];O=n(D,x.width,1)}}var F=function(X){var re;switch(X){case t.image_compression.FAST:re=11;break;case t.image_compression.MEDIUM:re=13;break;case t.image_compression.SLOW:re=14;break;default:re=12}return re}(g);return ee===this.decode.FLATE_DECODE&&(ce="/Predictor "+F+" "),ce+="/Colors "+C+" /BitsPerComponent "+v+" /Columns "+x.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(O&&this.__addimage__.isArrayBuffer(O)||this.__addimage__.isArrayBufferView(O))&&(O=this.__addimage__.arrayBufferToBinaryString(O)),{alias:p,data:f,index:h,filter:ee,decodeParameters:ce,transparency:w,palette:P,sMask:O,predictor:F,width:x.width,height:x.height,bitsPerComponent:v,colorSpace:b}}}})(Tt.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new RCe(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},d=new f3(100).encode(c,100);return t.processJPEG.call(this,d,n,r,i)},t.processGIF87A=t.processGIF89A}(Tt.API),ga.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ga.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){qn.log("bit decode error:"+n)}},ga.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},ga.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},ga.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},ga.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=a,this.data[d+2]=o,this.data[d+3]=c}this.pos+=t}},ga.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=255}this.pos+=t}},ga.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},ga.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},ga.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new ga(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new f3(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Tt.API),GO.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new GO(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new f3(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Tt.API),Tt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var d=r[c],u=r[c+1],f=r[c+2],h=r[c+3];s[a++]=d,s[a++]=u,s[a++]=f,o[l++]=h}var p=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:p,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Tt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ap=Tt.API,A2=ap.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=c.fof?c.fof:1,u=e.doKerning!==!1,f=0,h=t.length,p=0,g=a[0]||l,b=[];for(n=0;n<h;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?b.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(f=u&&Ln(c[r])==="object"&&!isNaN(parseInt(c[r][p],10))?c[r][p]/d:0,b.push((a[r]||g)/l+f)),p=r;return b},HO=ap.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return ap.processArabic&&(t=ap.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:A2.apply(this,arguments).reduce(function(s,o){return s+o},0)},VO=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},WO=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,d=[],u=[d],f=n.textIndent||0,h=0,p=0,g=t.split(" "),b=A2.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?g[0].length+2:n.lineIndent||0){var v=Array(l).join(" "),x=[];g.map(function(C){(C=C.split(/\s*\n/)).length>1?x=x.concat(C.map(function(P,O){return(O&&P.length?`
`:"")+P})):x.push(C[0])}),g=x,l=HO.apply(this,[v,n])}for(s=0,o=g.length;s<o;s++){var w=0;if(r=g[s],l&&r[0]==`
`&&(r=r.substr(1),w=1),f+h+(p=(i=A2.apply(this,[r,n])).reduce(function(C,P){return C+P},0))>e||w){if(p>e){for(a=VO.apply(this,[r,i,e-(f+h),e]),d.push(a.shift()),d=[a.pop()];a.length;)u.push([a.shift()]);p=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(C,P){return C+P},0)}else d=[r];u.push(d),f=p+l,h=b}else d.push(r),f+=h+p,h=b}return c=l?function(C,P){return(P?v:"")+C.join(" ")}:function(C){return C.join(" ")},u.map(c)},ap.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var u=this.internal.getFont(d.fontName,d.fontStyle);return u.metadata.Unicode?{widths:u.metadata.Unicode.widths||{0:1},kerning:u.metadata.Unicode.kerning||{}}:{font:u.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(WO.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(u){return"0x"+parseInt(u,10).toString(16)},o=t.__fontmetrics__.compress=function(u){var f,h,p,g,b=["{"];for(var v in u){if(f=u[v],isNaN(parseInt(v,10))?h="'"+v+"'":(v=parseInt(v,10),h=(h=s(v).slice(2)).slice(0,-1)+r[h.slice(-1)]),typeof f=="number")f<0?(p=s(f).slice(3),g="-"):(p=s(f).slice(2),g=""),p=g+p.slice(0,-1)+r[p.slice(-1)];else{if(Ln(f)!=="object")throw new Error("Don't know what to do with value type "+Ln(f)+".");p=o(f)}b.push(h+p)}return b.push("}"),b.join("")},a=t.__fontmetrics__.uncompress=function(u){if(typeof u!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,h,p,g,b={},v=1,x=b,w=[],C="",P="",O=u.length-1,T=1;T<O;T+=1)(g=u[T])=="'"?f?(p=f.join(""),f=void 0):f=[]:f?f.push(g):g=="{"?(w.push([x,p]),x={},p=void 0):g=="}"?((h=w.pop())[0][h[1]]=x,p=void 0,x=h[0]):g=="-"?v=-1:p===void 0?n.hasOwnProperty(g)?(C+=n[g],p=parseInt(C,16)*v,v=1,C=""):C+=g:n.hasOwnProperty(g)?(P+=n[g],x[p]=parseInt(P,16)*v,v=1,p=void 0,P=""):P+=g;return b},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(u){var f=u.font,h=d.Unicode[f.postScriptName];h&&(f.metadata.Unicode={},f.metadata.Unicode.widths=h.widths,f.metadata.Unicode.kerning=h.kerning);var p=c.Unicode[f.postScriptName];p&&(f.metadata.Unicode.encoding=p,f.encoding=p.codePages[0])}])}(Tt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(X0(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Tt),function(t){function e(){return(Lt.canvg?Promise.resolve(Lt.canvg):nA(()=>import("./index.es-H4y4qybb.js"),[],import.meta.url)).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Tt.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw qn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw qn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var u=d.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,d.width,d.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return e().then(function(p){return p.fromString(u,n,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(f)}).then(function(){h.addImage(d.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),Tt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},Tt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,d=0,u=0;function f(p,g){var b,v=!1;for(b=0;b<p.length;b+=1)p[b]===g&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var h=a.length;for(u=0;u<h;u+=1)n[a[u]].value=n[a[u]].defaultValue,n[a[u]].explicitSet=!1}if(Ln(t)==="object"){for(i in t)if(s=t[i],f(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&f(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(d=0;d<s[c].length;d+=1)typeof s[c][d]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var p,g=[];for(p in n)n[p].explicitSet===!0&&(n[p].type==="name"?g.push("/"+p+" /"+n[p].value):g.push("/"+p+" "+n[p].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Tt.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],u=0,f=s.length;u<f;++u){if(a=o.metadata.characterToGlyph(s.charCodeAt(u)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(u),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(c[4-a.length],a)}return d.join("")},r=function(s){var o,a,l,c,d,u,f;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],u=0,f=(a=Object.keys(s).sort(function(h,p){return h-p})).length;u<f;u++)o=a[u],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var u=a.metadata.Unicode.widths,f=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),h="",p=0;p<f.length;p++)h+=String.fromCharCode(f[p]);var g=c();d({data:h,addLength1:!0,objectId:g}),l("endobj");var b=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var v=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+bp(a.fontName)),l("/FontFile2 "+g+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var x=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+bp(a.fontName)),l("/FontDescriptor "+v+" 0 R"),l("/W "+t.API.PDFObject.convert(u)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+bp(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+x+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var u=a.metadata.rawData,f="",h=0;h<u.length;h++)f+=String.fromCharCode(u[h]);var p=c();d({data:f,addLength1:!0,objectId:p}),l("endobj");var g=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:g}),l("endobj");var b=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+p+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+bp(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var v=0;v<a.metadata.hmtx.widths.length;v++)a.metadata.hmtx.widths[v]=parseInt(a.metadata.hmtx.widths[v]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+bp(a.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,d=s.options||{},u=s.mutex||{},f=u.pdfEscape,h=u.activeFontKey,p=u.fonts,g=h,b="",v=0,x="",w=p[g].encoding;if(p[g].encoding!=="Identity-H")return{text:a,x:l,y:c,options:d,mutex:u};for(x=a,g=h,Array.isArray(a)&&(x=a[0]),v=0;v<x.length;v+=1)p[g].metadata.hasOwnProperty("cmap")&&(o=p[g].metadata.cmap.unicode.codeMap[x[v].charCodeAt(0)]),o||x[v].charCodeAt(0)<256&&p[g].metadata.hasOwnProperty("Unicode")?b+=x[v]:b+="";var C="";return parseInt(g.slice(1))<14||w==="WinAnsiEncoding"?C=f(b,g).split("").map(function(P){return P.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(C=n(b,p[g])),u.isHex=!0,{text:C,x:l,y:c,options:d,mutex:u}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(Tt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Tt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,d,u=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],p={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,w=0;this.__bidiEngine__={};var C=function(R){var $=R.charCodeAt(),H=$>>8,z=g[H];return z!==void 0?u[256*z+(255&$)]:H===252||H===253?"AL":v.test(H)?"L":H===8?"R":"N"},P=function(R){for(var $,H=0;H<R.length;H++){if(($=C(R.charAt(H)))==="L")return!1;if($==="R")return!0}return!1},O=function(R,$,H,z){var ee,ce,le,te,Z=$[z];switch(Z){case"L":case"R":x=!1;break;case"N":case"AN":break;case"EN":x&&(Z="AN");break;case"AL":x=!0,Z="R";break;case"WS":Z="N";break;case"CS":z<1||z+1>=$.length||(ee=H[z-1])!=="EN"&&ee!=="AN"||(ce=$[z+1])!=="EN"&&ce!=="AN"?Z="N":x&&(ce="AN"),Z=ce===ee?ce:"N";break;case"ES":Z=(ee=z>0?H[z-1]:"B")==="EN"&&z+1<$.length&&$[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&H[z-1]==="EN"){Z="EN";break}if(x){Z="N";break}for(le=z+1,te=$.length;le<te&&$[le]==="ET";)le++;Z=le<te&&$[le]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(te=$.length,le=z+1;le<te&&$[le]==="NSM";)le++;if(le<te){var de=R[z],Ce=de>=1425&&de<=2303||de===64286;if(ee=$[le],Ce&&(ee==="R"||ee==="AL")){Z="R";break}}}Z=z<1||(ee=$[z-1])==="B"?"N":H[z-1];break;case"B":x=!1,i=!0,Z=w;break;case"S":s=!0,Z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"BN":Z="N"}return Z},T=function(R,$,H){var z=R.split("");return H&&M(z,H,{hiLevel:w}),z.reverse(),$&&$.reverse(),z.join("")},M=function(R,$,H){var z,ee,ce,le,te,Z=-1,de=R.length,Ce=0,F=[],X=w?h:f,re=[];for(x=!1,i=!1,s=!1,ee=0;ee<de;ee++)re[ee]=C(R[ee]);for(ce=0;ce<de;ce++){if(te=Ce,F[ce]=O(R,re,F,ce),z=240&(Ce=X[te][p[F[ce]]]),Ce&=15,$[ce]=le=X[Ce][5],z>0)if(z===16){for(ee=Z;ee<ce;ee++)$[ee]=1;Z=-1}else Z=-1;if(X[Ce][6])Z===-1&&(Z=ce);else if(Z>-1){for(ee=Z;ee<ce;ee++)$[ee]=le;Z=-1}re[ce]==="B"&&($[ce]=0),H.hiLevel|=le}s&&function(ue,he,fe){for(var be=0;be<fe;be++)if(ue[be]==="S"){he[be]=w;for(var pe=be-1;pe>=0&&ue[pe]==="WS";pe--)he[pe]=w}}(re,$,de)},D=function(R,$,H,z,ee){if(!(ee.hiLevel<R)){if(R===1&&w===1&&!i)return $.reverse(),void(H&&H.reverse());for(var ce,le,te,Z,de=$.length,Ce=0;Ce<de;){if(z[Ce]>=R){for(te=Ce+1;te<de&&z[te]>=R;)te++;for(Z=Ce,le=te-1;Z<le;Z++,le--)ce=$[Z],$[Z]=$[le],$[le]=ce,H&&(ce=H[Z],H[Z]=H[le],H[le]=ce);Ce=te}Ce++}}},I=function(R,$,H){var z=R.split(""),ee={hiLevel:w};return H||(H=[]),M(z,H,ee),function(ce,le,te){if(te.hiLevel!==0&&d)for(var Z,de=0;de<ce.length;de++)le[de]===1&&(Z=b.indexOf(ce[de]))>=0&&(ce[de]=b[Z+1])}(z,H,ee),D(2,z,$,H,ee),D(1,z,$,H,ee),z.join("")};return this.__bidiEngine__.doBidiReorder=function(R,$,H){if(function(ee,ce){if(ce)for(var le=0;le<ee.length;le++)ce[le]=le;a===void 0&&(a=P(ee)),c===void 0&&(c=P(ee))}(R,$),o||!l||c)if(o&&l&&a^c)w=a?1:0,R=T(R,$,H);else if(!o&&l&&c)w=a?1:0,R=I(R,$,H),R=T(R,$);else if(!o||a||l||c){if(o&&!l&&a^c)R=T(R,$),a?(w=0,R=I(R,$,H)):(w=1,R=I(R,$,H),R=T(R,$));else if(o&&a&&!l&&c)w=1,R=I(R,$,H),R=T(R,$);else if(!o&&!l&&a^c){var z=d;a?(w=1,R=I(R,$,H),w=0,d=!1,R=I(R,$,H),d=z):(w=0,R=I(R,$,H),R=T(R,$),w=1,d=!1,R=I(R,$,H),d=z,R=T(R,$))}}else w=0,R=I(R,$,H);else w=a?1:0,R=I(R,$,H);return R},this.__bidiEngine__.setOptions=function(R){R&&(o=R.isInputVisual,l=R.isOutputVisual,a=R.isInputRtl,c=R.isOutputRtl,d=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Tt),Tt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new bd(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new KCe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new LCe(this.contents),this.head=new ICe(this),this.name=new BCe(this),this.cmap=new xW(this),this.toUnicode={},this.hhea=new $Ce(this),this.maxp=new UCe(this),this.hmtx=new HCe(this),this.post=new FCe(this),this.os2=new jCe(this),this.loca=new GCe(this),this.glyf=new VCe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var qa,bd=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),LCe=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,d,u,f,h,p,g;for(g in h=Object.keys(n).length,l=Math.log(2),u=16*Math.floor(Math.log(h)/l),o=Math.floor(u/l),d=16*h-u,(i=new bd).writeInt(this.scalarType),i.writeShort(h),i.writeShort(u),i.writeShort(o),i.writeShort(d),s=16*h,c=i.pos+s,a=null,p=[],n)for(f=n[g],i.writeString(g),i.writeInt(t(f)),i.writeInt(c),i.writeInt(f.length),p=p.concat(f),g==="head"&&(a=c),c+=f.length;c%4;)p.push(0),c++;return i.write(p),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=SW.call(n);n.length%4;)n.push(0);for(s=new bd(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),DCe={}.hasOwnProperty,Fl=function(t,e){for(var n in e)DCe.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};qa=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var ICe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fl(e,qa),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new bd).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),KO=function(){function t(e,n){var r,i,s,o,a,l,c,d,u,f,h,p,g,b,v,x,w;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(h=e.readUInt16(),f=h/2,e.pos+=6,s=function(){var C,P;for(P=[],l=C=0;0<=f?C<f:C>f;l=0<=f?++C:--C)P.push(e.readUInt16());return P}(),e.pos+=2,g=function(){var C,P;for(P=[],l=C=0;0<=f?C<f:C>f;l=0<=f?++C:--C)P.push(e.readUInt16());return P}(),c=function(){var C,P;for(P=[],l=C=0;0<=f?C<f:C>f;l=0<=f?++C:--C)P.push(e.readUInt16());return P}(),d=function(){var C,P;for(P=[],l=C=0;0<=f?C<f:C>f;l=0<=f?++C:--C)P.push(e.readUInt16());return P}(),i=(this.length-e.pos+this.offset)/2,a=function(){var C,P;for(P=[],l=C=0;0<=i?C<i:C>i;l=0<=i?++C:--C)P.push(e.readUInt16());return P}(),l=v=0,w=s.length;v<w;l=++v)for(b=s[l],r=x=p=g[l];p<=b?x<=b:x>=b;r=p<=b?++x:--x)d[l]===0?o=r+c[l]:(o=a[d[l]/2+(r-p)-(f-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=u}return t.encode=function(e,n){var r,i,s,o,a,l,c,d,u,f,h,p,g,b,v,x,w,C,P,O,T,M,D,I,R,$,H,z,ee,ce,le,te,Z,de,Ce,F,X,re,ue,he,fe,be,pe,me,_e,Te;switch(z=new bd,o=Object.keys(e).sort(function(je,Qe){return je-Qe}),n){case"macroman":for(g=0,b=function(){var je=[];for(p=0;p<256;++p)je.push(0);return je}(),x={0:0},s={},ee=0,Z=o.length;ee<Z;ee++)x[pe=e[i=o[ee]]]==null&&(x[pe]=++g),s[i]={old:e[i],new:x[e[i]]},b[i]=x[e[i]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(b),{charMap:s,subtable:z.data,maxGlyphID:g+1};case"unicode":for($=[],u=[],w=0,x={},r={},v=c=null,ce=0,de=o.length;ce<de;ce++)x[P=e[i=o[ce]]]==null&&(x[P]=++w),r[i]={old:P,new:x[P]},a=x[P]-i,v!=null&&a===c||(v&&u.push(v),$.push(i),c=a),v=i;for(v&&u.push(v),u.push(65535),$.push(65535),I=2*(D=$.length),M=2*Math.pow(Math.log(D)/Math.LN2,2),f=Math.log(M/2)/Math.LN2,T=2*D-M,l=[],O=[],h=[],p=le=0,Ce=$.length;le<Ce;p=++le){if(R=$[p],d=u[p],R===65535){l.push(0),O.push(0);break}if(R-(H=r[R].new)>=32768)for(l.push(0),O.push(2*(h.length+D-p)),i=te=R;R<=d?te<=d:te>=d;i=R<=d?++te:--te)h.push(r[i].new);else l.push(H-R),O.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*D+2*h.length),z.writeUInt16(0),z.writeUInt16(I),z.writeUInt16(M),z.writeUInt16(f),z.writeUInt16(T),fe=0,F=u.length;fe<F;fe++)i=u[fe],z.writeUInt16(i);for(z.writeUInt16(0),be=0,X=$.length;be<X;be++)i=$[be],z.writeUInt16(i);for(me=0,re=l.length;me<re;me++)a=l[me],z.writeUInt16(a);for(_e=0,ue=O.length;_e<ue;_e++)C=O[_e],z.writeUInt16(C);for(Te=0,he=h.length;Te<he;Te++)g=h[Te],z.writeUInt16(g);return{charMap:r,subtable:z.data,maxGlyphID:w+1}}},t}(),xW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fl(e,qa),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new KO(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=KO.encode(n,r),(s=new bd).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),$Ce=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fl(e,qa),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),jCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fl(e,qa),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),FCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fl(e,qa),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),zCe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},BCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fl(e,qa),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,d,u,f,h;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=u=0,f=i.length;u<f;o=++u)s=i[o],n.pos=s.offset,d=n.readString(s.length),a=new zCe(d,s),c[h=s.nameID]==null&&(c[h]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),UCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fl(e,qa),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),HCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fl(e,qa),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,u;for(u=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)u.push(n.readInt16());return u}(),this.widths=(function(){var d,u,f,h;for(h=[],d=0,u=(f=this.metrics).length;d<u;d++)o=f[d],h.push(o.advance);return h}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),SW=[].slice,VCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fl(e,qa),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,d,u,f;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new bd(r.read(s))).readShort(),d=l.readShort(),f=l.readShort(),c=l.readShort(),u=l.readShort(),this.cache[n]=a===-1?new qCe(l,d,f,c,u):new WCe(l,a,d,f,c,u),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),WCe=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),qCe=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new bd(SW.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),GCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fl(e,qa),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var d=new Array(4*i.length),u=0;u<i.length;++u)d[4*u+3]=255&i[u],d[4*u+2]=(65280&i[u])>>8,d[4*u+1]=(16711680&i[u])>>16,d[4*u]=(4278190080&i[u])>>24;return d},e}(),KCe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,d,u,f,h,p,g,b,v;for(i in r=xW.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),h={0:0},v=r.charMap)h[(l=v[i]).old]=l.new;for(p in f=r.maxGlyphID,o)p in h||(h[p]=f++);return d=function(x){var w,C;for(w in C={},x)C[x[w]]=w;return C}(h),u=Object.keys(d).sort(function(x,w){return x-w}),g=function(){var x,w,C;for(C=[],x=0,w=u.length;x<w;x++)a=u[x],C.push(d[a]);return C}(),s=this.font.glyf.encode(o,g,h),c=this.font.loca.encode(s.offsets,g),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},t}();Tt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();var kW={exports:{}},JCe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},CW={exports:{}},YCe=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},ZCe=YCe,XCe=Array.prototype.concat,QCe=Array.prototype.slice,JO=CW.exports=function(e){for(var n=[],r=0,i=e.length;r<i;r++){var s=e[r];ZCe(s)?n=XCe.call(n,QCe.call(s)):n.push(s)}return n};JO.wrap=function(t){return function(){return t(JO(arguments))}};var e_e=CW.exports,Q0=JCe,Fy=e_e,_W=Object.hasOwnProperty,AW=Object.create(null);for(var h3 in Q0)_W.call(Q0,h3)&&(AW[Q0[h3]]=h3);var yo=kW.exports={to:{},get:{}};yo.get=function(t){var e=t.substring(0,3).toLowerCase(),n,r;switch(e){case"hsl":n=yo.get.hsl(t),r="hsl";break;case"hwb":n=yo.get.hwb(t),r="hwb";break;default:n=yo.get.rgb(t),r="rgb";break}return n?{model:r,value:n}:null};yo.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,n=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,s=/^(\w+)$/,o=[0,0,0,1],a,l,c;if(a=t.match(n)){for(c=a[2],a=a[1],l=0;l<3;l++){var d=l*2;o[l]=parseInt(a.slice(d,d+2),16)}c&&(o[3]=parseInt(c,16)/255)}else if(a=t.match(e)){for(a=a[1],c=a[3],l=0;l<3;l++)o[l]=parseInt(a[l]+a[l],16);c&&(o[3]=parseInt(c+c,16)/255)}else if(a=t.match(r)){for(l=0;l<3;l++)o[l]=parseInt(a[l+1],0);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else if(a=t.match(i)){for(l=0;l<3;l++)o[l]=Math.round(parseFloat(a[l+1])*2.55);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else return(a=t.match(s))?a[1]==="transparent"?[0,0,0,0]:_W.call(Q0,a[1])?(o=Q0[a[1]],o[3]=1,o):null:null;for(l=0;l<3;l++)o[l]=Qu(o[l],0,255);return o[3]=Qu(o[3],0,1),o};yo.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,s=Qu(parseFloat(n[2]),0,100),o=Qu(parseFloat(n[3]),0,100),a=Qu(isNaN(r)?1:r,0,1);return[i,s,o,a]}return null};yo.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,s=Qu(parseFloat(n[2]),0,100),o=Qu(parseFloat(n[3]),0,100),a=Qu(isNaN(r)?1:r,0,1);return[i,s,o,a]}return null};yo.to.hex=function(){var t=Fy(arguments);return"#"+E2(t[0])+E2(t[1])+E2(t[2])+(t[3]<1?E2(Math.round(t[3]*255)):"")};yo.to.rgb=function(){var t=Fy(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};yo.to.rgb.percent=function(){var t=Fy(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"};yo.to.hsl=function(){var t=Fy(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};yo.to.hwb=function(){var t=Fy(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};yo.to.keyword=function(t){return AW[t.slice(0,3)]};function Qu(t,e,n){return Math.min(Math.max(e,t),n)}function E2(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}var t_e=kW.exports;const P2=rh(t_e);function YO(t){return!/^(-?\d|--)/.test(t)}function ZO(t){const e=[];let n="",r="",i=7;for(let s,o=0;s=t.charAt(o);o++)if(/[a-zA-Z\d\xa0-\uffff_-]/.test(s)&&i===7)n+=s;else if(s==="\\"&&i===7)i=6;else if(s===" "&&i===7){if(n!==""){if(!YO(n))return null;e.push(n),n=""}}else if(i===6)/[0-9a-f]/i.test(s)?(r+=s,i=8):(n+=s,i=7);else{if(i!==8)return null;/[0-9a-f]/i.test(s)&&r.length<6?r+=s:(n+=String.fromCodePoint(parseInt(r,16)),n+=s,r="",i=7)}if(n!==""){if(!YO(n))return null;e.push(n)}return e.join(" ")}function n_e(t,e){let n=e,r="";const i={"font-family":[]};for(let s,o=0;s=t.charAt(o);o+=1)if(n!==4||s!=='"'&&s!=="'")if(n===3&&s===",")n=4,r="";else if(n===4&&s===","){const a=ZO(r);a&&i["font-family"].push(a),r=""}else if(n===5&&s===" ")/^(?:\+|-)?(?:[0-9]*\.)?[0-9]+(?:deg|grad|rad|turn)$/.test(r)?(i["font-style"]+=" "+r,r=""):o-=1,n=1;else if(n!==1||s!==" "&&s!=="/")n===2&&s===" "?(/^(?:\+|-)?([0-9]*\.)?[0-9]+(?:em|ex|ch|rem|vh|vw|vmin|vmax|px|mm|cm|in|pt|pc|%)?$/.test(r)&&(i["line-height"]=r),n=4,r=""):r+=s;else{if(/^(?:(?:xx|x)-large|(?:xx|s)-small|small|large|medium)$/.test(r)||/^(?:larg|small)er$/.test(r)||/^(?:\+|-)?(?:[0-9]*\.)?[0-9]+(?:em|ex|ch|rem|vh|vw|vmin|vmax|px|mm|cm|in|pt|pc|%)$/.test(r))n=s==="/"?2:4,i["font-size"]=r;else if(/^italic$/.test(r))i["font-style"]=r;else if(/^oblique$/.test(r))i["font-style"]=r,n=5;else if(/^small-caps$/.test(r))i["font-variant"]=r;else if(/^(?:bold(?:er)?|lighter|normal)$/.test(r))i["font-weight"]=r;else if(/^[+-]?(?:[0-9]*\.)?[0-9]+(?:e[+-]?(?:0|[1-9][0-9]*))?$/.test(r)){const a=parseFloat(r);a>=1&&a<=1e3&&(i["font-weight"]=r)}else/^(?:(?:ultra|extra|semi)-)?(?:condensed|expanded)$/.test(r)&&(i["font-stretch"]=r);r=""}else{let a=o+1;do if(a=t.indexOf(s,a)+1,!a)return null;while(t.charAt(a-2)==="\\");i["font-family"].push(t.slice(o+1,a-1).replace(/\\('|")/g,"$1")),o=a-1,n=3,r=""}if(n===3&&!/^\s*$/.test(r))return null;if(n===4){const s=ZO(r);s&&i["font-family"].push(s)}return i}function r_e(t){const e=n_e(t,1);return e!==null&&e["font-size"]&&e["font-family"].length?e:null}function i_e(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function ay(t,e,n,r){this.message=t,this.expected=e,this.found=n,this.location=r,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ay)}i_e(ay,Error);ay.buildMessage=function(t,e){var n={literal:function(c){return'"'+i(c.text)+'"'},class:function(c){var d="",u;for(u=0;u<c.parts.length;u++)d+=c.parts[u]instanceof Array?s(c.parts[u][0])+"-"+s(c.parts[u][1]):s(c.parts[u]);return"["+(c.inverted?"^":"")+d+"]"},any:function(c){return"any character"},end:function(c){return"end of input"},other:function(c){return c.description}};function r(c){return c.charCodeAt(0).toString(16).toUpperCase()}function i(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+r(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+r(d)})}function s(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+r(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+r(d)})}function o(c){return n[c.type](c)}function a(c){var d=new Array(c.length),u,f;for(u=0;u<c.length;u++)d[u]=o(c[u]);if(d.sort(),d.length>0){for(u=1,f=1;u<d.length;u++)d[u-1]!==d[u]&&(d[f]=d[u],f++);d.length=f}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}function l(c){return c?'"'+i(c)+'"':"end of input"}return"Expected "+a(t)+" but "+l(e)+" found."};function s_e(t,e){e=e!==void 0?e:{};var n={},r={svg_path:Ht},i=Ht,s=function(W){if(!W)return[];for(var Y=[],ge=0;ge<W.length;ge++)Y=Y.concat.apply(Y,W[ge]);var ie=Y[0];return ie&&ie.code=="m"&&(delete ie.relative,ie.code="M"),Y},o=function(W,Y){return _h(W,Y)},a=/^[Mm]/,l=Ze(["M","m"],!1,!1),c=function(W,Y,ge){var ie=to(W,[Y]);return ge&&(ie=ie.concat(to(W=="M"?"L":"l",ge[1]))),ie},d=/^[Zz]/,u=Ze(["Z","z"],!1,!1),f=function(){return to("Z")},h=/^[Ll]/,p=Ze(["L","l"],!1,!1),g=function(W,Y){return to(W,Y)},b=/^[Hh]/,v=Ze(["H","h"],!1,!1),x=function(W,Y){return to(W,Y.map(function(ge){return{x:ge}}))},w=/^[Vv]/,C=Ze(["V","v"],!1,!1),P=function(W,Y){return to(W,Y.map(function(ge){return{y:ge}}))},O=/^[Cc]/,T=Ze(["C","c"],!1,!1),M=function(W,Y,ge){return{x1:W.x,y1:W.y,x2:Y.x,y2:Y.y,x:ge.x,y:ge.y}},D=/^[Ss]/,I=Ze(["S","s"],!1,!1),R=function(W,Y){return{x2:W.x,y2:W.y,x:Y.x,y:Y.y}},$=/^[Qq]/,H=Ze(["Q","q"],!1,!1),z=function(W,Y){return{x1:W.x,y1:W.y,x:Y.x,y:Y.y}},ee=/^[Tt]/,ce=Ze(["T","t"],!1,!1),le=/^[Aa]/,te=Ze(["A","a"],!1,!1),Z=function(W,Y,ge,ie,ke,Ke){return{rx:W,ry:Y,xAxisRotation:ge,largeArc:ie,sweep:ke,x:Ke.x,y:Ke.y}},de=function(W,Y){return{x:W,y:Y}},Ce=function(W){return W*1},F=function(W){return W.join("")*1},X=/^[01]/,re=Ze(["0","1"],!1,!1),ue=function(W){return W=="1"},he=function(){return""},fe=",",be=Ge(",",!1),pe=function(W){return W.join("")},me=".",_e=Ge(".",!1),Te=/^[eE]/,je=Ze(["e","E"],!1,!1),Qe=/^[+\-]/,ne=Ze(["+","-"],!1,!1),V=/^[0-9]/,Re=Ze([["0","9"]],!1,!1),Fe=function(W){return W.join("")},K=/^[ \t\n\r]/,_=Ze([" ","	",`
`,"\r"],!1,!1),A=0,j=[{line:1,column:1}],oe=0,ye=[],Ee;if("startRule"in e){if(!(e.startRule in r))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');i=r[e.startRule]}function Ge(W,Y){return{type:"literal",text:W,ignoreCase:Y}}function Ze(W,Y,ge){return{type:"class",parts:W,inverted:Y,ignoreCase:ge}}function bt(){return{type:"end"}}function tt(W){var Y=j[W],ge;if(Y)return Y;for(ge=W-1;!j[ge];)ge--;for(Y=j[ge],Y={line:Y.line,column:Y.column};ge<W;)t.charCodeAt(ge)===10?(Y.line++,Y.column=1):Y.column++,ge++;return j[W]=Y,Y}function rt(W,Y){var ge=tt(W),ie=tt(Y);return{start:{offset:W,line:ge.line,column:ge.column},end:{offset:Y,line:ie.line,column:ie.column}}}function Be(W){A<oe||(A>oe&&(oe=A,ye=[]),ye.push(W))}function In(W,Y,ge){return new ay(ay.buildMessage(W,Y),W,Y,ge)}function Ht(){var W,Y,ge,ie,ke;for(W=A,Y=[],ge=Gt();ge!==n;)Y.push(ge),ge=Gt();if(Y!==n)if(ge=Tr(),ge===n&&(ge=null),ge!==n){for(ie=[],ke=Gt();ke!==n;)ie.push(ke),ke=Gt();ie!==n?(Y=s(ge),W=Y):(A=W,W=n)}else A=W,W=n;else A=W,W=n;return W}function Tr(){var W,Y,ge,ie,ke,Ke;if(W=A,Y=nt(),Y!==n){for(ge=[],ie=A,ke=[],Ke=Gt();Ke!==n;)ke.push(Ke),Ke=Gt();for(ke!==n?(Ke=nt(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n);ie!==n;){for(ge.push(ie),ie=A,ke=[],Ke=Gt();Ke!==n;)ke.push(Ke),Ke=Gt();ke!==n?(Ke=nt(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n)}ge!==n?(Y=o(Y,ge),W=Y):(A=W,W=n)}else A=W,W=n;return W}function nt(){var W,Y,ge,ie,ke,Ke;if(W=A,Y=ln(),Y!==n){for(ge=[],ie=A,ke=[],Ke=Gt();Ke!==n;)ke.push(Ke),Ke=Gt();for(ke!==n?(Ke=ct(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n);ie!==n;){for(ge.push(ie),ie=A,ke=[],Ke=Gt();Ke!==n;)ke.push(Ke),Ke=Gt();ke!==n?(Ke=ct(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n)}ge!==n?(Y=o(Y,ge),W=Y):(A=W,W=n)}else A=W,W=n;return W}function ct(){var W;return W=dt(),W===n&&(W=Cn(),W===n&&(W=Kn(),W===n&&(W=wn(),W===n&&(W=Pt(),W===n&&(W=xr(),W===n&&(W=At(),W===n&&(W=Mi(),W===n&&(W=Sr())))))))),W}function ln(){var W,Y,ge,ie,ke,Ke,no;if(W=A,a.test(t.charAt(A))?(Y=t.charAt(A),A++):(Y=n,Be(l)),Y!==n){for(ge=[],ie=Gt();ie!==n;)ge.push(ie),ie=Gt();ge!==n?(ie=er(),ie!==n?(ke=A,Ke=fn(),Ke===n&&(Ke=null),Ke!==n?(no=Ft(),no!==n?(Ke=[Ke,no],ke=Ke):(A=ke,ke=n)):(A=ke,ke=n),ke===n&&(ke=null),ke!==n?(Y=c(Y,ie,ke),W=Y):(A=W,W=n)):(A=W,W=n)):(A=W,W=n)}else A=W,W=n;return W}function dt(){var W,Y;return W=A,d.test(t.charAt(A))?(Y=t.charAt(A),A++):(Y=n,Be(u)),Y!==n&&(Y=f()),W=Y,W}function Cn(){var W,Y,ge,ie;if(W=A,h.test(t.charAt(A))?(Y=t.charAt(A),A++):(Y=n,Be(p)),Y!==n){for(ge=[],ie=Gt();ie!==n;)ge.push(ie),ie=Gt();ge!==n?(ie=Ft(),ie!==n?(Y=g(Y,ie),W=Y):(A=W,W=n)):(A=W,W=n)}else A=W,W=n;return W}function Ft(){var W,Y,ge,ie,ke,Ke;if(W=A,Y=er(),Y!==n){for(ge=[],ie=A,ke=fn(),ke===n&&(ke=null),ke!==n?(Ke=er(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n);ie!==n;)ge.push(ie),ie=A,ke=fn(),ke===n&&(ke=null),ke!==n?(Ke=er(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n);ge!==n?(Y=o(Y,ge),W=Y):(A=W,W=n)}else A=W,W=n;return W}function Kn(){var W,Y,ge,ie;if(W=A,b.test(t.charAt(A))?(Y=t.charAt(A),A++):(Y=n,Be(v)),Y!==n){for(ge=[],ie=Gt();ie!==n;)ge.push(ie),ie=Gt();ge!==n?(ie=dr(),ie!==n?(Y=x(Y,ie),W=Y):(A=W,W=n)):(A=W,W=n)}else A=W,W=n;return W}function dr(){var W,Y,ge,ie,ke,Ke;if(W=A,Y=si(),Y!==n){for(ge=[],ie=A,ke=fn(),ke===n&&(ke=null),ke!==n?(Ke=si(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n);ie!==n;)ge.push(ie),ie=A,ke=fn(),ke===n&&(ke=null),ke!==n?(Ke=si(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n);ge!==n?(Y=o(Y,ge),W=Y):(A=W,W=n)}else A=W,W=n;return W}function wn(){var W,Y,ge,ie;if(W=A,w.test(t.charAt(A))?(Y=t.charAt(A),A++):(Y=n,Be(C)),Y!==n){for(ge=[],ie=Gt();ie!==n;)ge.push(ie),ie=Gt();ge!==n?(ie=dr(),ie!==n?(Y=P(Y,ie),W=Y):(A=W,W=n)):(A=W,W=n)}else A=W,W=n;return W}function Pt(){var W,Y,ge,ie;if(W=A,O.test(t.charAt(A))?(Y=t.charAt(A),A++):(Y=n,Be(T)),Y!==n){for(ge=[],ie=Gt();ie!==n;)ge.push(ie),ie=Gt();ge!==n?(ie=Qt(),ie!==n?(Y=g(Y,ie),W=Y):(A=W,W=n)):(A=W,W=n)}else A=W,W=n;return W}function Qt(){var W,Y,ge,ie,ke,Ke;if(W=A,Y=Ni(),Y!==n){for(ge=[],ie=A,ke=fn(),ke===n&&(ke=null),ke!==n?(Ke=Ni(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n);ie!==n;)ge.push(ie),ie=A,ke=fn(),ke===n&&(ke=null),ke!==n?(Ke=Ni(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n);ge!==n?(Y=o(Y,ge),W=Y):(A=W,W=n)}else A=W,W=n;return W}function Ni(){var W,Y,ge,ie,ke,Ke;return W=A,Y=er(),Y!==n?(ge=fn(),ge===n&&(ge=null),ge!==n?(ie=er(),ie!==n?(ke=fn(),ke===n&&(ke=null),ke!==n?(Ke=er(),Ke!==n?(Y=M(Y,ie,Ke),W=Y):(A=W,W=n)):(A=W,W=n)):(A=W,W=n)):(A=W,W=n)):(A=W,W=n),W}function xr(){var W,Y,ge,ie;if(W=A,D.test(t.charAt(A))?(Y=t.charAt(A),A++):(Y=n,Be(I)),Y!==n){for(ge=[],ie=Gt();ie!==n;)ge.push(ie),ie=Gt();ge!==n?(ie=To(),ie!==n?(Y=g(Y,ie),W=Y):(A=W,W=n)):(A=W,W=n)}else A=W,W=n;return W}function To(){var W,Y,ge,ie,ke,Ke;if(W=A,Y=Ps(),Y!==n){for(ge=[],ie=A,ke=fn(),ke===n&&(ke=null),ke!==n?(Ke=Ps(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n);ie!==n;)ge.push(ie),ie=A,ke=fn(),ke===n&&(ke=null),ke!==n?(Ke=Ps(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n);ge!==n?(Y=o(Y,ge),W=Y):(A=W,W=n)}else A=W,W=n;return W}function Ps(){var W,Y,ge,ie;return W=A,Y=er(),Y!==n?(ge=fn(),ge===n&&(ge=null),ge!==n?(ie=er(),ie!==n?(Y=R(Y,ie),W=Y):(A=W,W=n)):(A=W,W=n)):(A=W,W=n),W}function At(){var W,Y,ge,ie;if(W=A,$.test(t.charAt(A))?(Y=t.charAt(A),A++):(Y=n,Be(H)),Y!==n){for(ge=[],ie=Gt();ie!==n;)ge.push(ie),ie=Gt();ge!==n?(ie=Qs(),ie!==n?(Y=g(Y,ie),W=Y):(A=W,W=n)):(A=W,W=n)}else A=W,W=n;return W}function Qs(){var W,Y,ge,ie,ke,Ke;if(W=A,Y=Ts(),Y!==n){for(ge=[],ie=A,ke=fn(),ke===n&&(ke=null),ke!==n?(Ke=Ts(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n);ie!==n;)ge.push(ie),ie=A,ke=fn(),ke===n&&(ke=null),ke!==n?(Ke=Ts(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n);ge!==n?(Y=o(Y,ge),W=Y):(A=W,W=n)}else A=W,W=n;return W}function Ts(){var W,Y,ge,ie;return W=A,Y=er(),Y!==n?(ge=fn(),ge===n&&(ge=null),ge!==n?(ie=er(),ie!==n?(Y=z(Y,ie),W=Y):(A=W,W=n)):(A=W,W=n)):(A=W,W=n),W}function Mi(){var W,Y,ge,ie;if(W=A,ee.test(t.charAt(A))?(Y=t.charAt(A),A++):(Y=n,Be(ce)),Y!==n){for(ge=[],ie=Gt();ie!==n;)ge.push(ie),ie=Gt();ge!==n?(ie=Nr(),ie!==n?(Y=g(Y,ie),W=Y):(A=W,W=n)):(A=W,W=n)}else A=W,W=n;return W}function Nr(){var W,Y,ge,ie,ke,Ke;if(W=A,Y=er(),Y!==n){for(ge=[],ie=A,ke=fn(),ke===n&&(ke=null),ke!==n?(Ke=er(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n);ie!==n;)ge.push(ie),ie=A,ke=fn(),ke===n&&(ke=null),ke!==n?(Ke=er(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n);ge!==n?(Y=o(Y,ge),W=Y):(A=W,W=n)}else A=W,W=n;return W}function Sr(){var W,Y,ge,ie;if(W=A,le.test(t.charAt(A))?(Y=t.charAt(A),A++):(Y=n,Be(te)),Y!==n){for(ge=[],ie=Gt();ie!==n;)ge.push(ie),ie=Gt();ge!==n?(ie=ns(),ie!==n?(Y=g(Y,ie),W=Y):(A=W,W=n)):(A=W,W=n)}else A=W,W=n;return W}function ns(){var W,Y,ge,ie,ke,Ke;if(W=A,Y=Ga(),Y!==n){for(ge=[],ie=A,ke=fn(),ke===n&&(ke=null),ke!==n?(Ke=Ga(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n);ie!==n;)ge.push(ie),ie=A,ke=fn(),ke===n&&(ke=null),ke!==n?(Ke=Ga(),Ke!==n?(ke=[ke,Ke],ie=ke):(A=ie,ie=n)):(A=ie,ie=n);ge!==n?(Y=o(Y,ge),W=Y):(A=W,W=n)}else A=W,W=n;return W}function Ga(){var W,Y,ge,ie,ke,Ke,no,Rd,Jn,Gc,Ul,Kc;return W=A,Y=Ns(),Y!==n?(ge=fn(),ge===n&&(ge=null),ge!==n?(ie=Ns(),ie!==n?(ke=fn(),ke===n&&(ke=null),ke!==n?(Ke=si(),Ke!==n?(no=fn(),no!==n?(Rd=Ms(),Rd!==n?(Jn=fn(),Jn===n&&(Jn=null),Jn!==n?(Gc=Ms(),Gc!==n?(Ul=fn(),Ul===n&&(Ul=null),Ul!==n?(Kc=er(),Kc!==n?(Y=Z(Y,ie,Ke,Rd,Gc,Kc),W=Y):(A=W,W=n)):(A=W,W=n)):(A=W,W=n)):(A=W,W=n)):(A=W,W=n)):(A=W,W=n)):(A=W,W=n)):(A=W,W=n)):(A=W,W=n)):(A=W,W=n)):(A=W,W=n),W}function er(){var W,Y,ge,ie;return W=A,Y=si(),Y!==n?(ge=fn(),ge===n&&(ge=null),ge!==n?(ie=si(),ie!==n?(Y=de(Y,ie),W=Y):(A=W,W=n)):(A=W,W=n)):(A=W,W=n),W}function Ns(){var W,Y;return W=A,Y=eo(),Y===n&&(Y=Os()),Y!==n&&(Y=Ce(Y)),W=Y,W}function si(){var W,Y,ge,ie;return W=A,Y=A,ge=Ka(),ge===n&&(ge=null),ge!==n?(ie=eo(),ie!==n?(ge=[ge,ie],Y=ge):(A=Y,Y=n)):(A=Y,Y=n),Y===n&&(Y=A,ge=Ka(),ge===n&&(ge=null),ge!==n?(ie=Os(),ie!==n?(ge=[ge,ie],Y=ge):(A=Y,Y=n)):(A=Y,Y=n)),Y!==n&&(Y=F(Y)),W=Y,W}function Ms(){var W,Y;return W=A,X.test(t.charAt(A))?(Y=t.charAt(A),A++):(Y=n,Be(re)),Y!==n&&(Y=ue(Y)),W=Y,W}function fn(){var W,Y,ge,ie,ke;if(W=A,Y=[],ge=Gt(),ge!==n)for(;ge!==n;)Y.push(ge),ge=Gt();else Y=n;if(Y!==n)if(ge=rs(),ge===n&&(ge=null),ge!==n){for(ie=[],ke=Gt();ke!==n;)ie.push(ke),ke=Gt();ie!==n?(Y=[Y,ge,ie],W=Y):(A=W,W=n)}else A=W,W=n;else A=W,W=n;if(W===n){if(W=A,Y=A,ge=rs(),ge!==n){for(ie=[],ke=Gt();ke!==n;)ie.push(ke),ke=Gt();ie!==n?(ge=[ge,ie],Y=ge):(A=Y,Y=n)}else A=Y,Y=n;Y!==n&&(Y=he()),W=Y}return W}function rs(){var W;return t.charCodeAt(A)===44?(W=fe,A++):(W=n,Be(be)),W}function eo(){var W,Y,ge,ie;return W=A,Y=A,ge=zl(),ge!==n?(ie=Bl(),ie===n&&(ie=null),ie!==n?(ge=[ge,ie],Y=ge):(A=Y,Y=n)):(A=Y,Y=n),Y===n&&(Y=A,ge=Os(),ge!==n?(ie=Bl(),ie!==n?(ge=[ge,ie],Y=ge):(A=Y,Y=n)):(A=Y,Y=n)),Y!==n&&(Y=pe(Y)),W=Y,W}function zl(){var W,Y,ge,ie,ke;return W=A,Y=A,ge=Os(),ge===n&&(ge=null),ge!==n?(t.charCodeAt(A)===46?(ie=me,A++):(ie=n,Be(_e)),ie!==n?(ke=Os(),ke!==n?(ge=[ge,ie,ke],Y=ge):(A=Y,Y=n)):(A=Y,Y=n)):(A=Y,Y=n),Y===n&&(Y=A,ge=Os(),ge!==n?(t.charCodeAt(A)===46?(ie=me,A++):(ie=n,Be(_e)),ie!==n?(ge=[ge,ie],Y=ge):(A=Y,Y=n)):(A=Y,Y=n)),Y!==n&&(Y=pe(Y)),W=Y,W}function Bl(){var W,Y,ge,ie,ke;return W=A,Y=A,Te.test(t.charAt(A))?(ge=t.charAt(A),A++):(ge=n,Be(je)),ge!==n?(ie=Ka(),ie===n&&(ie=null),ie!==n?(ke=Os(),ke!==n?(ge=[ge,ie,ke],Y=ge):(A=Y,Y=n)):(A=Y,Y=n)):(A=Y,Y=n),Y!==n&&(Y=pe(Y)),W=Y,W}function Ka(){var W;return Qe.test(t.charAt(A))?(W=t.charAt(A),A++):(W=n,Be(ne)),W}function Os(){var W,Y,ge;if(W=A,Y=[],V.test(t.charAt(A))?(ge=t.charAt(A),A++):(ge=n,Be(Re)),ge!==n)for(;ge!==n;)Y.push(ge),V.test(t.charAt(A))?(ge=t.charAt(A),A++):(ge=n,Be(Re));else Y=n;return Y!==n&&(Y=Fe(Y)),W=Y,W}function Gt(){var W,Y;return W=A,K.test(t.charAt(A))?(Y=t.charAt(A),A++):(Y=n,Be(_)),Y!==n&&(Y=he()),W=Y,W}function _h(W,Y){if(!Y)return[W];for(var ge=[W],ie=0,ke=Y.length;ie<ke;ie++)ge[ie+1]=Y[ie][1];return ge}var qc={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var Ah in qc)qc[Ah.toUpperCase()]=qc[Ah];function to(W,Y){Y||(Y=[{}]);for(var ge=Y.length;ge--;){var ie={code:W,command:qc[W]};W==W.toLowerCase()&&(ie.relative=!0);for(var ke in Y[ge])ie[ke]=Y[ge][ke];Y[ge]=ie}return Y}if(Ee=i(),Ee!==n&&A===t.length)return Ee;throw Ee!==n&&A<t.length&&Be(bt()),In(ye,oe<t.length?t.charAt(oe):null,oe<t.length?rt(oe,oe+1):rt(oe,oe))}var o_e={parse:s_e},ex=o_e.parse;ex.parseSVG=ex;ex.makeAbsolute=a_e;var XO=ex;function a_e(t){var e,n={x:0,y:0},r={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return t.forEach(function(i){i.command==="moveto"&&(e=i),i.x0=n.x,i.y0=n.y;for(var s in r)s in i&&(i[s]+=i.relative?i[r[s]]:0);"x"in i||(i.x=n.x),"y"in i||(i.y=n.y),i.relative=!1,i.code=i.code.toUpperCase(),i.command=="closepath"&&(i.x=e.x,i.y=e.y),n=i}),t}var l_e=Object.defineProperty,QO=Object.getOwnPropertySymbols,c_e=Object.prototype.hasOwnProperty,u_e=Object.prototype.propertyIsEnumerable,eR=(t,e,n)=>e in t?l_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,d_e=(t,e)=>{for(var n in e||(e={}))c_e.call(e,n)&&eR(t,n,e[n]);if(QO)for(var n of QO(e))u_e.call(e,n)&&eR(t,n,e[n]);return t},EW=(t,e,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(c){i(c)}},o=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())});function tR(t,e){const n=XO.parseSVG(t);XO.makeAbsolute(n);for(const r of n)switch(r.code){case"M":e.moveTo(r.x,r.y);break;case"L":e.lineTo(r.x,r.y);break;case"H":e.lineTo(r.x,r.y);break;case"V":e.lineTo(r.x,r.y);break;case"C":e.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y);break;case"S":break;case"Q":e.quadraticCurveTo(r.x0,r.y0,r.x1,r.y1,r.x,r.y);break;case"T":e.quadraticCurveTo(r.x0,r.y0,r.x,r.y);break;case"A":break;case"Z":e.closePath();break;default:throw new Error(`Unrecognized SVG path command: ${r.code}`)}}var f_e=class{constructor(t,e){this.pdf=e,this.canvas=t,this.pdfCanvas=null,this._fillStyle="#ffffffff",this._fillAlpha=1,this._strokeStyle="#000000ff",this._strokeAlpha=1,this._globalAlpha=1,this._lineWidth=1,this._lineCap="butt",this._lineJoin="miter",this._font="16px Loranthus",this._fontSize=16,this.stateStack=[]}_assignStyles(){var t,e;this.pdf.context2d.fillStyle=this._fillStyle,this.pdf.context2d.strokeStyle=this._strokeStyle,this.pdf.context2d.lineWidth=this._lineWidth,this.pdf.context2d.lineCap=this._lineCap,this.pdf.context2d.lineJoin=this._lineJoin;const n=r_e(this._font),r=n["font-family"][0],i=(t=n["font-style"])!=null?t:"normal",s=parseInt(n["font-weight"]),o=parseInt(((e=n["font-size"])!=null?e:"16px").replace("px",""))*this.pdf.internal.scaleFactor;this.pdf.setFont(r,i,s),this.pdf.setFontSize(o),this.pdf.setGState(new this.pdf.GState({opacity:this._fillAlpha*this._globalAlpha,"stroke-opacity":this._strokeAlpha*this._globalAlpha}))}setPDFCanvas(t){this.pdfCanvas=t}save(){this.pdf.context2d.save(),this.stateStack.push({fillStyle:this._fillStyle,fillAlpha:this._fillAlpha,strokeStyle:this._strokeStyle,strokeAlpha:this._strokeAlpha,globalAlpha:this._globalAlpha,lineWidth:this._lineWidth,lineCap:this._lineCap,lineJoin:this._lineJoin,fontSize:this._fontSize})}restore(){this.pdf.context2d.restore();const t=this.stateStack.pop();this._fillStyle=t.fillStyle,this._fillAlpha=t.fillAlpha,this._strokeStyle=t.strokeStyle,this._strokeAlpha=t.strokeAlpha,this._globalAlpha=t.globalAlpha,this._lineWidth=t.lineWidth,this._lineCap=t.lineCap,this._lineJoin=t.lineJoin,this._fontSize=t.fontSize,this._assignStyles()}translate(t,e){this.pdf.context2d.translate(t,e)}scale(t,e){this.pdf.context2d.scale(t,e)}rotate(t){this.pdf.context2d.rotate(t)}clip(){this.pdf.context2d.clip()}set fillStyle(t){const e=P2.get.rgb(t),n=e.length>3?e[3]:1,r=P2.to.hex([e[0],e[1],e[2]]);this._fillStyle=r,this._fillAlpha=n}set strokeStyle(t){const e=P2.get.rgb(t),n=e.length>3?e[3]:1,r=P2.to.hex([e[0],e[1],e[2]]);this._strokeStyle=r,this._strokeAlpha=n}set globalAlpha(t){this._globalAlpha=t}set lineWidth(t){this._lineWidth=t}set lineCap(t){this._lineCap=t}set lineJoin(t){this._lineJoin=t}set font(t){this._font=t}setLineDash(t){var e,n;if(t.length>0&&t.every(r=>r===0))this.pdf.context2d.setLineDash([]);else{const r=(n=(e=this.pdfCanvas)==null?void 0:e.scale)!=null?n:1,i=t.map(s=>s*r);this.pdf.context2d.setLineDash(i)}}beginPath(){this.pdf.context2d.beginPath()}closePath(){this.pdf.context2d.closePath()}moveTo(t,e){this._assignStyles(),this.pdf.context2d.moveTo(t,e)}lineTo(t,e){this._assignStyles(),this.pdf.context2d.lineTo(t,e)}quadraticCurveTo(t,e,n,r){this._assignStyles(),this.pdf.context2d.quadraticCurveTo(t,e,n,r)}bezierCurveTo(t,e,n,r,i,s){this._assignStyles(),this.pdf.context2d.bezierCurveTo(t,e,n,r,i,s)}stroke(t){if(this._assignStyles(),t){const e=t.pathData;e&&tR(e,this.pdf.context2d)}this.pdf.context2d.stroke()}fill(t){if(this._assignStyles(),t){const e=t.pathData;e&&tR(e,this.pdf.context2d)}this.pdf.context2d.fill()}rect(t,e,n,r){this._assignStyles(),this.pdf.context2d.rect(t,e,n,r)}fillRect(t,e,n,r){this._assignStyles(),this.pdf.context2d.fillRect(t,e,n,r)}arc(t,e,n,r,i,s){this._assignStyles(),this.pdf.context2d.arc(t,e,n,r,i,s)}drawImage(t,e,n,r,i){this._fillAlpha=1,this._strokeAlpha=1,this._assignStyles(),this.pdf.context2d.drawImage(t,e,n,r,i)}measureText(t){this.canvas.font=this._font;const e=this.canvas.textMetric(t);return{width:e.width,fontBoundingBoxDescent:e.height-e.ascent,fontBoundingBoxAscent:e.ascent,actualBoundingBoxAscent:e.actualAscent,actualBoundingBoxDescent:e.actualDescent}}fillText(t,e,n){this._assignStyles(),this.pdf.context2d.fillText(t,e,n)}},h_e=10,p3=8;function p_e(t,e,n){return EW(this,null,function*(){const{bitmap:r,bitmapScale:i,dark:s,pageMargin:o,pageFormat:a,pageOrientation:l,compress:c,createLinks:d,createPageLinks:u,excludePages:f,prerenderPage:h,postrenderPage:p,fonts:g}=d_e({bitmap:!1,bitmapScale:1,dark:!1,pageMargin:h_e,pageFormat:"a4",pageOrientation:"portrait",compress:!0,createLinks:!1,createPageLinks:!1,excludePages:[],fonts:[]},n),v=xl[s?"dark":"light"],x=new Tt({orientation:l,format:a,putOnlyUsedFonts:!0,compress:c});!r&&Array.isArray(g)&&g.forEach(C=>{const P=`${C.family}-${C.style}.ttf`;x.addFileToVFS(P,C.binaryString),x.addFont(P,C.family,C.style,C.weight)});const w=e.children.filter(C=>C instanceof ws&&!(f||[]).includes(C));for(let C=0;C<w.length;C++){const P=w[C];C>0&&x.addPage();const O=x.internal.pageSize.getWidth(),T=x.internal.pageSize.getHeight(),M=O-o*2,D=T-o*2,I=P.getViewport(t),R=mr.width(I),$=mr.height(I),H=Math.min(M/R,D/$),z=H>=1?1:H,ee=(M/z-R)/2,ce=(D/z-$)/2,le=-I[0][0]+o/z+ee,te=-I[0][1]+o/z+ce,Z=new f_e(t,x),de={getContext:X=>{if(X==="2d")return Z}},Ce=new gy(de,1);if(Z.setPDFCanvas(Ce),Ce.origin=[le,te],Ce.ratio=1,Ce.scale=z,Ce.colorVariables=v,s&&(x.setFillColor(Ce.resolveColor("$background")),x.rect(0,0,O,T,"F")),h&&h(P,x,Ce),r){const X=yield tW(t,P,[],{dark:n.dark,fillBackground:!0,format:"image/webp",margin:p3,scale:g_e(R,$,i)}),re=new Uint8Array(yield X.arrayBuffer()),ue=R+p3*2,he=$+p3*2,fe=(O-ue*z)/2,be=(T-he*z)/2;x.addImage(re,"webp",fe,be,ue*z,he*z)}else P.update(Ce),P.draw(Ce,!1);p&&p(P,x,Ce);const F=P.getOrderedShapes(P.traverseSequence());if(d){for(const X of F)if(X.link&&X.link.length>0){const re=X.getBoundingRect(),ue=Ce.globalCoordTransform(re[0]),he=Ce.globalCoordTransform(re[1]),fe=mr.normalizeRect([ue,he]),be=fe[0][0],pe=fe[0][1],me=mr.width(fe),_e=mr.height(fe);x.link(be,pe,me,_e,{url:X.link})}}if(u){for(const X of F)if(X.reference instanceof zr){const re=X.getBoundingRect(),ue=Ce.globalCoordTransform(re[0]),he=Ce.globalCoordTransform(re[1]),fe=mr.normalizeRect([ue,he]),be=fe[0][0],pe=fe[0][1],me=mr.width(fe),_e=mr.height(fe),Te=X.reference.getPage();if(Te){const je=w.indexOf(Te);je>=0&&x.link(be,pe,me,_e,{pageNumber:je+1})}}}P.update(t)}return x})}function nR(t,e,n,r){return EW(this,null,function*(){(yield p_e(t,e,r)).save(n)})}function g_e(t,e,n){return t>=4096||e>=4096?Math.min(4096/t,4096/e,n):n}function m_e(t){return new Uint8Array(t).reduce((e,n)=>e+String.fromCharCode(n),"")}async function rR(t){const n=await(await fetch(t)).arrayBuffer();return m_e(n)}function y_e(){const{setDoc:t,setCurrentPage:e,darkMode:n,showGrid:r,snapToGrid:i,snapToObjects:s,setShowGrid:o,setSnapToGrid:a,setSnapToObjects:l}=Dl(),c=()=>{window.editor.newDoc(),t(window.editor.getDoc())},d=async()=>{try{const w=await KL([{description:"DGM files",mimeTypes:["application/json"],extensions:[".dgm"],multiple:!1}]);if(w&&w.handle)try{const P=await(await w.handle.getFile()).text(),O=JSON.parse(P);window.editor.loadFromJSON(O),t(window.editor.getDoc()),e(window.editor.getCurrentPage()),window.editor.scrollToCenter(),window.editor.repaint()}catch(C){console.error(C)}}catch{return}},u=async()=>{const w=JSON.stringify(window.editor.store.toJSON()),C=new Blob([w],{type:"application/json"});try{await JX(C,{extensions:[".dgm"]})}catch{return}},f=()=>{const w=window.editor.actions.addPage();window.editor.setCurrentPage(w),e(w)},h=async()=>{const w=window.editor.getCurrentPage(),C=window.editor.selection.getShapes()??[],P={scale:2,dark:n,fillBackground:!0,format:"image/png"},T=`dgm-export.${P.format==="image/png"?"png":"svg"}`;S2(window.editor.canvas,w,C,T,P)},p=async()=>{const w=window.editor.getCurrentPage(),C=window.editor.selection.getShapes()??[],P={scale:2,dark:n,fillBackground:!0,format:"image/jpeg"};S2(window.editor.canvas,w,C,"dgm-export.jpg",P)},g=async()=>{console.log("export jpeg");const w=window.editor.getCurrentPage(),C=window.editor.selection.getShapes()??[],P={scale:2,dark:n,fillBackground:!0,format:"image/webp"};S2(window.editor.canvas,w,C,"dgm-export.webp",P)},b=async()=>{const w=window.editor.getCurrentPage(),C=window.editor.selection.getShapes()??[],P={scale:1,dark:n,fillBackground:!0,format:"image/svg+xml"},T=`dgm-export.${P.format==="image/png"?"png":"svg"}`;S2(window.editor.canvas,w,C,T,P)},v=async()=>{const w=[];for(const T of J1){const M=await rR(`http://localhost:4321${T.src}`);w.push({family:T.family,style:T.style,weight:T.weight,binaryString:M})}const C=window.editor,P=C.getDoc(),O={bitmap:!0,bitmapScale:1,dark:n,fonts:w,pageFormat:"a4",pageOrientation:"landscape",createLinks:!0,createPageLinks:!0};nR(C.canvas,P,"exported-pdf",O)},x=async()=>{const w=[];for(const T of J1){const M=await rR(`http://localhost:4321${T.src}`);w.push({family:T.family,style:T.style,weight:T.weight,binaryString:M})}const C=window.editor,P=C.getDoc(),O={bitmap:!1,dark:n,fonts:w,pageFormat:"a4",pageOrientation:"landscape",createLinks:!0,createPageLinks:!0};nR(C.canvas,P,"exported-pdf",O)};return y.jsxs("div",{className:"flex justify-center items-center h-8 px-1",children:[y.jsx(JV,{title:"Toggle Pages Sidebar"}),y.jsxs(pd,{children:[y.jsx(gd,{asChild:!0,children:y.jsx(Nt,{variant:"ghost",className:"h-8 w-8 p-0",children:y.jsx(boe,{size:16})})}),y.jsxs(Ic,{children:[y.jsx(pr,{onSelect:c,children:"New"}),y.jsx(pr,{onSelect:d,children:"Open..."}),y.jsx(pr,{onSelect:u,children:"Save copy..."}),y.jsx(Pg,{}),y.jsx(pr,{onSelect:h,children:"Export as PNG"}),y.jsx(pr,{onSelect:p,children:"Export as JPEG"}),y.jsx(pr,{onSelect:g,children:"Export as WebP"}),y.jsx(pr,{onSelect:b,children:"Export as SVG"}),y.jsx(pr,{onSelect:v,children:"Export as PDF (bitmap)"}),y.jsx(pr,{onSelect:x,children:"Export as PDF"}),y.jsx(Pg,{}),y.jsx(nb,{checked:r,onSelect:w=>{window.editor.setShowGrid(!r),o(!r)},children:"Show grid"}),y.jsx(nb,{checked:i,onSelect:w=>{window.editor.setSnapToGrid(!i),a(!i)},children:"Snap to grid"}),y.jsx(nb,{checked:s,onSelect:w=>{window.editor.setSnapToObjects(!s),l(!s)},children:"Snap to objects"})]})]}),y.jsx(Nt,{variant:"ghost",className:"h-8 w-8 p-0",onClick:f,title:"Add Page",children:y.jsx(uh,{size:16})})]})}function v_e(){const{darkMode:t,setDarkMode:e}=Dl();return y.jsx("div",{className:"flex justify-center items-center h-8 px-1",children:y.jsx(Nt,{title:t?"Light mode":"Dark mode",variant:"ghost",className:"h-8 w-8 p-0",onClick:()=>{window.editor.setDarkMode(!t),e(!t)},children:t?y.jsx(woe,{size:16}):y.jsx(Toe,{size:16})})})}function b_e({handleShare:t,handleShareStop:e,handleShareIdentityUpdate:n}){const{hasCollab:r,shareRoomId:i,shareIdentity:s,setShareIdentity:o}=Dl(),a=()=>{const l=Zw[Math.round(Math.random()*Zw.length-1)];o({...s,color:l,name:(s==null?void 0:s.name)||""}),n()};return r===null?y.jsx("div",{}):r===!1?y.jsx("div",{className:"flex justify-center items-center h-8 px-1",children:y.jsx(qf,{className:"h-8 rounded-md px-3 text-xs text-red-500 w-[272px]",value:"Collaboration is not available on Github Pages.",readOnly:!0})}):y.jsxs("div",{className:"flex justify-center items-center h-8 px-1",children:[i&&s&&y.jsxs(y.Fragment,{children:[y.jsx(qf,{className:"h-8 rounded-md px-3 text-xs mr-1",style:{color:s.color},value:s.name,onChange:l=>o({...s,name:l.target.value}),onKeyDown:l=>{l.key==="Enter"&&l.currentTarget.blur()},onBlur:a,spellCheck:!1}),y.jsx(Nt,{onClick:a,size:"sm",className:"mr-1",variant:"outline",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-4 h-4",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),i?y.jsx(Nt,{onClick:e,size:"sm",variant:"destructive",title:"Stop Collaboration",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-4 h-4",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}):y.jsx(Nt,{onClick:t,size:"sm",variant:"outline",title:"Start Collaboration",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-4 h-4",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-4.553a1.5 1.5 0 00-2.121-2.121L12.879 7.879a1.5 1.5 0 01-2.121 0L6.553 3.326a1.5 1.5 0 00-2.121 2.121L9 10m6 4l4.553 4.553a1.5 1.5 0 01-2.121 2.121L12.879 16.121a1.5 1.5 0 00-2.121 0L6.553 20.674a1.5 1.5 0 01-2.121-2.121L9 14"})})})]})}function w_e({handleShare:t,handleShareStop:e,handleShareIdentityUpdate:n}){return y.jsxs("div",{className:"absolute top-2 left-1/2 transform -translate-x-1/2 h-10 w-[800px] border rounded-lg flex items-center justify-between bg-background",children:[y.jsx(y_e,{}),y.jsx(v_e,{}),y.jsx(b_e,{handleShare:t,handleShareStop:e,handleShareIdentityUpdate:n})]})}function x_e(){var P;const t=Dl(),[e,n]=S.useState(!1),r=new URLSearchParams(window.location.search),i=Object.fromEntries(r.entries()),s=i.roomId;S.useEffect(()=>{const O=T=>{const M=T.target;M.tagName==="INPUT"||M.tagName==="TEXTAREA"||M.isContentEditable?n(!0):n(!1)};return document.addEventListener("focusin",O),()=>{document.removeEventListener("focusin",O)}},[]);const o=()=>{const O=ESe(),T=localStorage.getItem("share-identity-name"),M=localStorage.getItem("share-identity-color");return T&&(O.name=T),M&&(O.color=M),O},a=async O=>{window.editor=O,O0e(J1),await M0e(J1);let D=(await(await fetch("config.json")).json()).signalingUrls,I=i.signalingUrl;if(i.signalingUrl&&(D=[i.signalingUrl]),i.signalingPassword&&(I=i.signalingPassword),fu.setSignalingUrl(D),t.setHasCollab(D.length>0),fu.setSignalingPassword(I),s){const H=o();fu.start(window.editor,s,H),console.log("collab started with roomId",s),t.setShareRoomId(s),t.setShareIdentity(H)}else window.editor.newDoc();window.editor.transform.onTransaction.addListener(()=>{}),window.editor.transform.onAction.addListener(()=>{});const R=localStorage.getItem("local-data");R&&window.editor.loadFromJSON(JSON.parse(R)),t.setDoc(window.editor.getDoc()),t.setCurrentPage(window.editor.getCurrentPage());const $=localStorage.getItem("is-dark-mode");$&&t.setDarkMode($==="true"),window.addEventListener("resize",()=>{window.editor.fit()}),fu.oDocReady.addListener(()=>{const H=window.editor.getDoc();H&&(t.setDoc(H),t.setCurrentPage(window.editor.getCurrentPage()))})},l=O=>{window.editor.getActiveHandlerLock()||setTimeout(()=>{window.editor.selection.select([O]),window.editor.repaint()},0)},c=O=>{t.setSelection([...O])},d=O=>{var T,M;t.setActiveHandler(O),(T=window.editor)==null||T.selection.deselectAll(),(M=window.editor)==null||M.focus()},u=()=>{const O=window.editor.store.toJSON();localStorage.setItem("local-data",JSON.stringify(O))},f=O=>{window.editor.selection.select(O)},h=O=>{const T=window.editor.selection.getShapes();window.editor.actions.update(O),t.setSelection([...T])},p=O=>{const T=window.editor.getCurrentPage();window.editor.actions.update(O,[T]),t.setCurrentPage(T)},g=O=>{t.setCurrentPage(O)},b=()=>{const O=kL(),T=o();fu.start(window.editor,O,T),fu.flush();const M=i.signalingPassword,D=i.signalingUrl;let I=`${window.location.pathname}?roomId=${O}`;D&&(I+=`&signalingUrl=${D}`),M&&(I+=`&signalingPassword=${M}`),window.history.pushState({},"",I),t.setShareRoomId(O),t.setShareIdentity(T)},v=()=>{fu.stop();const O=i.signalingPassword,T=i.signalingUrl;let M=`${window.location.pathname}?`;T&&(M+=`signalingUrl=${T}`),O&&(M+=`&signalingPassword=${O}`),window.history.pushState({},"",M),t.setShareRoomId(null)},x=()=>{const O=t.shareIdentity;O&&(localStorage.setItem("share-identity-name",O.name),localStorage.setItem("share-identity-color",O.color),fu.updateUserIdentity(O))},w=(P=document.cookie.split("; ").find(O=>O.startsWith("sidebar_state=")))==null?void 0:P.split("=")[1],C=w===null?!0:w==="true";return y.jsxs(GV,{defaultOpen:C,children:[y.jsx(KV,{variant:"sidebar",side:"left",children:y.jsx(H5e,{doc:t.doc,currentPage:t.currentPage,onSelect:f,onPageSelect:O=>{O!==null&&window.editor.setCurrentPage(O)}})}),y.jsxs("div",{className:"h-[calc(100dvh)] w-[calc(100vw)]",children:[y.jsxs(KSe,{children:[y.jsx(JSe,{disabled:e,children:y.jsx(W5e,{className:"h-full w-[calc(100%)]",darkMode:t.darkMode,options:{showDOM:!0,keymapEventTarget:window,imageResize:{quality:1,maxWidth:2800,maxHeight:2800}},plugins:[new Use,new Wse],showGrid:t.showGrid,onMount:a,onShapeCreate:l,onSelectionChange:c,onCurrentPageChange:g,onActiveHandlerChange:d,onActiveHandlerLockChange:O=>t.setActiveHandlerLock(O),onAction:u})}),y.jsxs(hV,{children:[y.jsx(mb,{children:"Copy (Broken)"}),y.jsx(mb,{children:"Paste (Broken)"}),y.jsx(mb,{children:"Delete (Broken)"})]})]}),y.jsx(w_e,{handleShare:b,handleShareStop:v,handleShareIdentityUpdate:x}),y.jsx(Ole,{}),y.jsx(S0e,{}),y.jsx(P0e,{doc:t.doc,currentPage:t.currentPage,shapes:t.selection,onChange:h,onPageChange:p})]})]})}g3.createRoot(document.getElementById("root")).render(y.jsx(Le.StrictMode,{children:y.jsx(x_e,{})}));export{Ln as _,zi as c,rh as g};
